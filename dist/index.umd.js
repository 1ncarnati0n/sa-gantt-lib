(function(F,u){typeof exports=="object"&&typeof module<"u"?u(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],u):(F=typeof globalThis<"u"?globalThis:F||self,u(F.SaGanttLib={},F.React,F.ReactDOM))})(this,function(F,u,xt){"use strict";"use client";function jn(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:()=>e[t]})}}return n.default=e,Object.freeze(n)}const ot=jn(u);var bt={exports:{}},Be={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ct;function En(){if(Ct)return Be;Ct=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(r,s,i){var o=null;if(i!==void 0&&(o=""+i),s.key!==void 0&&(o=""+s.key),"key"in s){i={};for(var l in s)l!=="key"&&(i[l]=s[l])}else i=s;return s=i.ref,{$$typeof:e,type:r,key:o,ref:s!==void 0?s:null,props:i}}return Be.Fragment=n,Be.jsx=t,Be.jsxs=t,Be}var qe={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tt;function Nn(){return Tt||(Tt=1,process.env.NODE_ENV!=="production"&&function(){function e(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===Q?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case N:return"Fragment";case O:return"Profiler";case C:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList";case ie:return"Activity"}if(typeof d=="object")switch(typeof d.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),d.$$typeof){case b:return"Portal";case M:return d.displayName||"Context";case H:return(d._context.displayName||"Context")+".Consumer";case V:var j=d.render;return d=d.displayName,d||(d=j.displayName||j.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case A:return j=d.displayName||null,j!==null?j:e(d.type)||"Memo";case q:j=d._payload,d=d._init;try{return e(d(j))}catch{}}return null}function n(d){return""+d}function t(d){try{n(d);var j=!1}catch{j=!0}if(j){j=console;var W=j.error,z=typeof Symbol=="function"&&Symbol.toStringTag&&d[Symbol.toStringTag]||d.constructor.name||"Object";return W.call(j,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",z),n(d)}}function r(d){if(d===N)return"<>";if(typeof d=="object"&&d!==null&&d.$$typeof===q)return"<...>";try{var j=e(d);return j?"<"+j+">":"<...>"}catch{return"<...>"}}function s(){var d=U.A;return d===null?null:d.getOwner()}function i(){return Error("react-stack-top-frame")}function o(d){if(Y.call(d,"key")){var j=Object.getOwnPropertyDescriptor(d,"key").get;if(j&&j.isReactWarning)return!1}return d.key!==void 0}function l(d,j){function W(){he||(he=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",j))}W.isReactWarning=!0,Object.defineProperty(d,"key",{get:W,configurable:!0})}function g(){var d=e(this.type);return Z[d]||(Z[d]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),d=this.props.ref,d!==void 0?d:null}function h(d,j,W,z,oe,le){var _=W.ref;return d={$$typeof:y,type:d,key:j,props:W,_owner:z},(_!==void 0?_:null)!==null?Object.defineProperty(d,"ref",{enumerable:!1,get:g}):Object.defineProperty(d,"ref",{enumerable:!1,value:null}),d._store={},Object.defineProperty(d._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(d,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(d,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:oe}),Object.defineProperty(d,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:le}),Object.freeze&&(Object.freeze(d.props),Object.freeze(d)),d}function m(d,j,W,z,oe,le){var _=j.children;if(_!==void 0)if(z)if(K(_)){for(z=0;z<_.length;z++)v(_[z]);Object.freeze&&Object.freeze(_)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else v(_);if(Y.call(j,"key")){_=e(d);var ee=Object.keys(j).filter(function(je){return je!=="key"});z=0<ee.length?"{key: someKey, "+ee.join(": ..., ")+": ...}":"{key: someKey}",$[_+z]||(ee=0<ee.length?"{"+ee.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,z,_,ee,_),$[_+z]=!0)}if(_=null,W!==void 0&&(t(W),_=""+W),o(j)&&(t(j.key),_=""+j.key),"key"in j){W={};for(var ne in j)ne!=="key"&&(W[ne]=j[ne])}else W=j;return _&&l(W,typeof d=="function"?d.displayName||d.name||"Unknown":d),h(d,_,W,s(),oe,le)}function v(d){x(d)?d._store&&(d._store.validated=1):typeof d=="object"&&d!==null&&d.$$typeof===q&&(d._payload.status==="fulfilled"?x(d._payload.value)&&d._payload.value._store&&(d._payload.value._store.validated=1):d._store&&(d._store.validated=1))}function x(d){return typeof d=="object"&&d!==null&&d.$$typeof===y}var D=u,y=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),C=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),H=Symbol.for("react.consumer"),M=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ie=Symbol.for("react.activity"),Q=Symbol.for("react.client.reference"),U=D.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y=Object.prototype.hasOwnProperty,K=Array.isArray,B=console.createTask?console.createTask:function(){return null};D={react_stack_bottom_frame:function(d){return d()}};var he,Z={},k=D.react_stack_bottom_frame.bind(D,i)(),p=B(r(i)),$={};qe.Fragment=N,qe.jsx=function(d,j,W){var z=1e4>U.recentlyCreatedOwnerStacks++;return m(d,j,W,!1,z?Error("react-stack-top-frame"):k,z?B(r(d)):p)},qe.jsxs=function(d,j,W){var z=1e4>U.recentlyCreatedOwnerStacks++;return m(d,j,W,!0,z?Error("react-stack-top-frame"):k,z?B(r(d)):p)}}()),qe}process.env.NODE_ENV==="production"?bt.exports=En():bt.exports=Nn();var a=bt.exports;const Ot=6048e5,Sn=864e5,Pt=Symbol.for("constructDateFrom");function be(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&Pt in e?e[Pt](n):e instanceof Date?new e.constructor(n):new Date(n)}function te(e,n){return be(n||e,e)}function R(e,n,t){const r=te(e,t==null?void 0:t.in);return isNaN(n)?be(e,NaN):(n&&r.setDate(r.getDate()+n),r)}function _t(e,n){return te(e,n==null?void 0:n.in).getDay()===6}function It(e,n){return te(e,n==null?void 0:n.in).getDay()===0}let Mn={};function Ke(){return Mn}function We(e,n){var l,g,h,m;const t=Ke(),r=(n==null?void 0:n.weekStartsOn)??((g=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:g.weekStartsOn)??t.weekStartsOn??((m=(h=t.locale)==null?void 0:h.options)==null?void 0:m.weekStartsOn)??0,s=te(e,n==null?void 0:n.in),i=s.getDay(),o=(i<r?7:0)+i-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function lt(e,n){return We(e,{...n,weekStartsOn:1})}function At(e,n){const t=te(e,n==null?void 0:n.in),r=t.getFullYear(),s=be(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const i=lt(s),o=be(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=lt(o);return t.getTime()>=i.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function zt(e){const n=te(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function Qe(e,...n){const t=be.bind(null,e||n.find(r=>typeof r=="object"));return n.map(t)}function Ue(e,n){const t=te(e,n==null?void 0:n.in);return t.setHours(0,0,0,0),t}function Lt(e,n,t){const[r,s]=Qe(t==null?void 0:t.in,e,n),i=Ue(r),o=Ue(s),l=+i-zt(i),g=+o-zt(o);return Math.round((l-g)/Sn)}function Wn(e,n){const t=At(e,n),r=be(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),lt(r)}function Cn(e,n,t){const[r,s]=Qe(t==null?void 0:t.in,e,n);return+Ue(r)==+Ue(s)}function Tn(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function On(e){return!(!Tn(e)&&typeof e!="number"||isNaN(+te(e)))}function pt(e,n,t){const[r,s]=Qe(t==null?void 0:t.in,e,n),i=Ft(r,s),o=Math.abs(Lt(r,s));r.setDate(r.getDate()-i*o);const l=+(Ft(r,s)===-i),g=i*(o-l);return g===0?0:g}function Ft(e,n){const t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function Pn(e,n){const t=te(e,n==null?void 0:n.in);return t.setDate(1),t.setHours(0,0,0,0),t}function _n(e,n){const t=te(e,n==null?void 0:n.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const In={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},An=(e,n,t)=>{let r;const s=In[e];return typeof s=="string"?r=s:n===1?r=s.one:r=s.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function wt(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const zn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Ln={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Fn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Hn={date:wt({formats:zn,defaultWidth:"full"}),time:wt({formats:Ln,defaultWidth:"full"}),dateTime:wt({formats:Fn,defaultWidth:"full"})},$n={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Gn=(e,n,t,r)=>$n[e];function Je(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=t!=null&&t.width?String(t.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=t!=null&&t.width?String(t.width):e.defaultWidth;s=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(n):n;return s[i]}}const Yn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Rn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Xn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Vn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Bn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},qn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Kn={ordinalNumber:(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:Je({values:Yn,defaultWidth:"wide"}),quarter:Je({values:Rn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Je({values:Xn,defaultWidth:"wide"}),day:Je({values:Vn,defaultWidth:"wide"}),dayPeriod:Je({values:Bn,defaultWidth:"wide",formattingValues:qn,defaultFormattingWidth:"wide"})};function Ze(e){return(n,t={})=>{const r=t.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=n.match(s);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],g=Array.isArray(l)?Un(l,v=>v.test(o)):Qn(l,v=>v.test(o));let h;h=e.valueCallback?e.valueCallback(g):g,h=t.valueCallback?t.valueCallback(h):h;const m=n.slice(o.length);return{value:h,rest:m}}}function Qn(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function Un(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function Jn(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const s=r[0],i=n.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const l=n.slice(s.length);return{value:o,rest:l}}}const Zn=/^(\d+)(th|st|nd|rd)?/i,er=/\d+/i,tr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},nr={any:[/^b/i,/^(a|c)/i]},rr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},sr={any:[/1/i,/2/i,/3/i,/4/i]},ar={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ir={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},or={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},lr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},cr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},dr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},ur={ordinalNumber:Jn({matchPattern:Zn,parsePattern:er,valueCallback:e=>parseInt(e,10)}),era:Ze({matchPatterns:tr,defaultMatchWidth:"wide",parsePatterns:nr,defaultParseWidth:"any"}),quarter:Ze({matchPatterns:rr,defaultMatchWidth:"wide",parsePatterns:sr,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ze({matchPatterns:ar,defaultMatchWidth:"wide",parsePatterns:ir,defaultParseWidth:"any"}),day:Ze({matchPatterns:or,defaultMatchWidth:"wide",parsePatterns:lr,defaultParseWidth:"any"}),dayPeriod:Ze({matchPatterns:cr,defaultMatchWidth:"any",parsePatterns:dr,defaultParseWidth:"any"})},hr={code:"en-US",formatDistance:An,formatLong:Hn,formatRelative:Gn,localize:Kn,match:ur,options:{weekStartsOn:0,firstWeekContainsDate:1}};function fr(e,n){const t=te(e,n==null?void 0:n.in);return Lt(t,_n(t))+1}function mr(e,n){const t=te(e,n==null?void 0:n.in),r=+lt(t)-+Wn(t);return Math.round(r/Ot)+1}function Ht(e,n){var m,v,x,D;const t=te(e,n==null?void 0:n.in),r=t.getFullYear(),s=Ke(),i=(n==null?void 0:n.firstWeekContainsDate)??((v=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??s.firstWeekContainsDate??((D=(x=s.locale)==null?void 0:x.options)==null?void 0:D.firstWeekContainsDate)??1,o=be((n==null?void 0:n.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=We(o,n),g=be((n==null?void 0:n.in)||e,0);g.setFullYear(r,0,i),g.setHours(0,0,0,0);const h=We(g,n);return+t>=+l?r+1:+t>=+h?r:r-1}function gr(e,n){var l,g,h,m;const t=Ke(),r=(n==null?void 0:n.firstWeekContainsDate)??((g=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:g.firstWeekContainsDate)??t.firstWeekContainsDate??((m=(h=t.locale)==null?void 0:h.options)==null?void 0:m.firstWeekContainsDate)??1,s=Ht(e,n),i=be((n==null?void 0:n.in)||e,0);return i.setFullYear(s,0,r),i.setHours(0,0,0,0),We(i,n)}function yr(e,n){const t=te(e,n==null?void 0:n.in),r=+We(t,n)-+gr(t,n);return Math.round(r/Ot)+1}function G(e,n){const t=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return t+r}const ke={y(e,n){const t=e.getFullYear(),r=t>0?t:1-t;return G(n==="yy"?r%100:r,n.length)},M(e,n){const t=e.getMonth();return n==="M"?String(t+1):G(t+1,2)},d(e,n){return G(e.getDate(),n.length)},a(e,n){const t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return G(e.getHours()%12||12,n.length)},H(e,n){return G(e.getHours(),n.length)},m(e,n){return G(e.getMinutes(),n.length)},s(e,n){return G(e.getSeconds(),n.length)},S(e,n){const t=n.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return G(s,n.length)}},Ae={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$t={G:function(e,n,t){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return ke.y(e,n)},Y:function(e,n,t,r){const s=Ht(e,r),i=s>0?s:1-s;if(n==="YY"){const o=i%100;return G(o,2)}return n==="Yo"?t.ordinalNumber(i,{unit:"year"}):G(i,n.length)},R:function(e,n){const t=At(e);return G(t,n.length)},u:function(e,n){const t=e.getFullYear();return G(t,n.length)},Q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return G(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return G(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){const r=e.getMonth();switch(n){case"M":case"MM":return ke.M(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return G(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){const s=yr(e,r);return n==="wo"?t.ordinalNumber(s,{unit:"week"}):G(s,n.length)},I:function(e,n,t){const r=mr(e);return n==="Io"?t.ordinalNumber(r,{unit:"week"}):G(r,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):ke.d(e,n)},D:function(e,n,t){const r=fr(e);return n==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):G(r,n.length)},E:function(e,n,t){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return G(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){const s=e.getDay(),i=(s-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return G(i,n.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,t){const r=e.getDay(),s=r===0?7:r;switch(n){case"i":return String(s);case"ii":return G(s,n.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){const s=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,t){const r=e.getHours();let s;switch(r===12?s=Ae.noon:r===0?s=Ae.midnight:s=r/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,t){const r=e.getHours();let s;switch(r>=17?s=Ae.evening:r>=12?s=Ae.afternoon:r>=4?s=Ae.morning:s=Ae.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return ke.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):ke.H(e,n)},K:function(e,n,t){const r=e.getHours()%12;return n==="Ko"?t.ordinalNumber(r,{unit:"hour"}):G(r,n.length)},k:function(e,n,t){let r=e.getHours();return r===0&&(r=24),n==="ko"?t.ordinalNumber(r,{unit:"hour"}):G(r,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):ke.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):ke.s(e,n)},S:function(e,n){return ke.S(e,n)},X:function(e,n,t){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return Yt(r);case"XXXX":case"XX":return Ce(r);case"XXXXX":case"XXX":default:return Ce(r,":")}},x:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"x":return Yt(r);case"xxxx":case"xx":return Ce(r);case"xxxxx":case"xxx":default:return Ce(r,":")}},O:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Gt(r,":");case"OOOO":default:return"GMT"+Ce(r,":")}},z:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Gt(r,":");case"zzzz":default:return"GMT"+Ce(r,":")}},t:function(e,n,t){const r=Math.trunc(+e/1e3);return G(r,n.length)},T:function(e,n,t){return G(+e,n.length)}};function Gt(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),i=r%60;return i===0?t+String(s):t+String(s)+n+G(i,2)}function Yt(e,n){return e%60===0?(e>0?"-":"+")+G(Math.abs(e)/60,2):Ce(e,n)}function Ce(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),s=G(Math.trunc(r/60),2),i=G(r%60,2);return t+s+n+i}const Rt=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Xt=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},xr={p:Xt,P:(e,n)=>{const t=e.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return Rt(e,n);let i;switch(r){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",Rt(r,n)).replace("{{time}}",Xt(s,n))}},br=/^D+$/,pr=/^Y+$/,wr=["D","DD","YY","YYYY"];function vr(e){return br.test(e)}function Dr(e){return pr.test(e)}function kr(e,n,t){const r=jr(e,n,t);if(console.warn(r),wr.includes(e))throw new RangeError(r)}function jr(e,n,t){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Er=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Sr=/^'([^]*?)'?$/,Mr=/''/g,Wr=/[a-zA-Z]/;function de(e,n,t){var m,v,x,D;const r=Ke(),s=r.locale??hr,i=r.firstWeekContainsDate??((v=(m=r.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=r.weekStartsOn??((D=(x=r.locale)==null?void 0:x.options)==null?void 0:D.weekStartsOn)??0,l=te(e,t==null?void 0:t.in);if(!On(l))throw new RangeError("Invalid time value");let g=n.match(Nr).map(y=>{const b=y[0];if(b==="p"||b==="P"){const N=xr[b];return N(y,s.formatLong)}return y}).join("").match(Er).map(y=>{if(y==="''")return{isToken:!1,value:"'"};const b=y[0];if(b==="'")return{isToken:!1,value:Cr(y)};if($t[b])return{isToken:!0,value:y};if(b.match(Wr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:y}});s.localize.preprocessor&&(g=s.localize.preprocessor(l,g));const h={firstWeekContainsDate:i,weekStartsOn:o,locale:s};return g.map(y=>{if(!y.isToken)return y.value;const b=y.value;(Dr(b)||vr(b))&&kr(b,n,String(e));const N=$t[b[0]];return N(l,b,s.localize,h)}).join("")}function Cr(e){const n=e.match(Sr);return n?n[1].replace(Mr,"'"):e}function Tr(e,n){return te(e,n==null?void 0:n.in).getDate()}function ct(e,n){return te(e,n==null?void 0:n.in).getDay()}function Vt(e,n){var g,h,m,v;const t=Ke(),r=(n==null?void 0:n.weekStartsOn)??((h=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:h.weekStartsOn)??t.weekStartsOn??((v=(m=t.locale)==null?void 0:m.options)==null?void 0:v.weekStartsOn)??0,s=Tr(te(e,n==null?void 0:n.in));if(isNaN(s))return NaN;const i=ct(Pn(e,n));let o=r-i;o<=0&&(o+=7);const l=s-o;return Math.ceil(l/7)+1}function vt(e,n){return te(e,n==null?void 0:n.in).getFullYear()}function Or(e,n,t){const[r,s]=Qe(t==null?void 0:t.in,e,n);return+We(r,t)==+We(s,t)}function Pr(e,n,t){const[r,s]=Qe(t==null?void 0:t.in,e,n);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ir=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,r)=>r?r.toUpperCase():t.toLowerCase()),Bt=e=>{const n=Ir(e);return n.charAt(0).toUpperCase()+n.slice(1)},qt=(...e)=>e.filter((n,t,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===t).join(" ").trim(),Ar=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var zr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=u.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},g)=>u.createElement("svg",{ref:g,...zr,width:n,height:n,stroke:e,strokeWidth:r?Number(t)*24/Number(n):t,className:qt("lucide",s),...!i&&!Ar(l)&&{"aria-hidden":"true"},...l},[...o.map(([h,m])=>u.createElement(h,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pe=(e,n)=>{const t=u.forwardRef(({className:r,...s},i)=>u.createElement(Lr,{ref:i,iconNode:n,className:qt(`lucide-${_r(Bt(e))}`,`lucide-${e}`,r),...s}));return t.displayName=Bt(e),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=pe("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kt=pe("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=pe("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=pe("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=pe("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jt=pe("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=pe("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gr=pe("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=pe("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),we={vermilion:"#E34234",teal:"#008080",red:"#FF5252",blue:"#448AFF",milestone:"#4B5563",dependency:"#9CA3AF",grid:"#E5E7EB",weekend:"#f3f4f6",holiday:"#fef2f2"},ge={ROW_HEIGHT:40,HEADER_HEIGHT:80,MILESTONE_LANE_HEIGHT:40,BAR_HEIGHT:24,SIDEBAR_WIDTH:400,SIDEBAR_MIN_WIDTH:250,SIDEBAR_MAX_WIDTH:800},et={DAY:{pixelsPerDay:30,label:"일"},WEEK:{pixelsPerDay:10,label:"주"},MONTH:{pixelsPerDay:2,label:"월"}},Yr=({taskNames:e,onConfirm:n,onCancel:t})=>xt.createPortal(a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 transition-opacity",onClick:t}),a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-[360px] rounded-lg bg-white p-6 shadow-xl",onClick:r=>r.stopPropagation(),children:[a.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:a.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"삭제 확인"}),a.jsx("p",{className:"text-sm text-gray-500",children:"이 작업은 되돌릴 수 없습니다"})]})]}),a.jsxs("div",{className:"mb-6 rounded-md bg-gray-50 p-3",children:[a.jsxs("p",{className:"mb-2 text-sm text-gray-600",children:["다음 ",e.length,"개 항목을 삭제하시겠습니까?"]}),a.jsx("ul",{className:"max-h-[120px] overflow-auto",children:e.map((r,s)=>a.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700",children:[a.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-red-400"}),r]},s))})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:t,className:"rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"취소"}),a.jsx("button",{onClick:n,className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 transition-colors",children:"삭제"})]})]})})]}),document.body),Zt=({x:e,y:n,taskId:t,selectedTaskIds:r,tasks:s,onTaskGroup:i,onTaskUngroup:o,onTaskDelete:l,onStartRename:g,onClose:h,onDeselect:m})=>{var V;const[v,x]=u.useState(!1),D=Array.from(r).some(L=>{const P=s.find(A=>A.id===L);return(P==null?void 0:P.type)==="GROUP"}),y=()=>{r.size>=1&&!D&&i&&(i(Array.from(r)),h())},b=()=>{if(r.size===1&&o){const L=Array.from(r)[0],P=s.find(A=>A.id===L);(P==null?void 0:P.type)==="GROUP"&&(o(L),h())}},N=()=>{x(!0)},C=()=>{l&&(r.size>0?Array.from(r):[t]).forEach(P=>{l(P)}),x(!1),m(),h()},O=()=>{x(!1)},H=r.size===1&&(()=>{const L=Array.from(r)[0],P=s.find(A=>A.id===L);return(P==null?void 0:P.type)==="GROUP"})(),M=r.size>0?Array.from(r).map(L=>{var P;return((P=s.find(A=>A.id===L))==null?void 0:P.name)||L}):[((V=s.find(L=>L.id===t))==null?void 0:V.name)||t];return a.jsxs("div",{className:"fixed z-[100] min-w-[160px] rounded-lg border border-gray-200 bg-white py-1 shadow-lg",style:{left:e,top:n},onClick:L=>L.stopPropagation(),children:[r.size>=1&&!D&&i&&a.jsxs("button",{onClick:y,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"그룹화 (",r.size,"개 선택됨)"]}),H&&o&&a.jsxs("button",{onClick:b,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"그룹 해제"]}),r.size===1&&g&&a.jsxs("button",{onClick:()=>{const L=Array.from(r)[0];g(L),h()},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"이름 변경"]}),l&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"my-1 border-t border-gray-200"}),a.jsxs("button",{onClick:N,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"삭제 ",r.size>1?`(${r.size}개)`:""]})]}),a.jsx("div",{className:"my-1 border-t border-gray-200"}),a.jsxs("button",{onClick:()=>{m(),h()},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-500 hover:bg-gray-100",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"선택 해제"]}),v&&a.jsx(Yr,{taskNames:M,onConfirm:C,onCancel:O})]})},{ROW_HEIGHT:en}=ge,dt={name:"",indirectWorkDaysPre:0,netWorkDays:1,indirectWorkDaysPost:0},Rr=({columns:e,tasks:n,activeCPId:t,onTaskCreate:r,onCancel:s,isVirtualized:i=!1,virtualRowIndex:o})=>{const[l,g]=u.useState(dt),h=u.useRef(null);u.useEffect(()=>{g(dt),setTimeout(()=>{var y;(y=h.current)==null||y.focus()},0)},[]);const m=u.useCallback(()=>{g(dt),s()},[s]),v=u.useCallback(async()=>{if(!(!l.name.trim()||!r||!t))try{const y=n[n.length-1],b=y?R(y.endDate,1):new Date,N=l.indirectWorkDaysPre+l.netWorkDays+l.indirectWorkDaysPost,C=R(b,Math.max(N-1,0)),O={id:`task-${Date.now()}`,parentId:t,wbsLevel:2,type:"TASK",name:l.name.trim(),startDate:b,endDate:C,task:{netWorkDays:l.netWorkDays,indirectWorkDaysPre:l.indirectWorkDaysPre,indirectWorkDaysPost:l.indirectWorkDaysPost},dependencies:[]};await r(O),g(dt),s()}catch(y){console.error("Failed to create task:",y),alert("태스크 생성 중 오류가 발생했습니다.")}},[l,r,t,n,s]),x=u.useCallback(y=>{y.key==="Enter"?(y.preventDefault(),v()):y.key==="Escape"&&(y.preventDefault(),m())},[v,m]),D=i&&o!==void 0?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${n.length*en}px)`}:{};return a.jsxs("div",{className:"box-border flex items-center border-b-2 border-blue-300 bg-blue-50 transition-colors",style:{height:en,...D},children:[a.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-blue-200 px-2",style:{width:e[0].width},children:a.jsx("input",{ref:h,type:"text",placeholder:"공정명...",className:"w-full rounded border border-blue-300 bg-white px-2 py-1 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.name,onChange:y=>g(b=>({...b,name:y.target.value})),onKeyDown:x})}),a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[1].width},children:a.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.indirectWorkDaysPre,onChange:y=>{const b=y.target.value.replace(/[^0-9]/g,""),N=parseInt(b)||0;g(C=>({...C,indirectWorkDaysPre:N}))},onKeyDown:x,title:"선 간접작업일"})}),a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[2].width},children:a.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.netWorkDays,onChange:y=>{const b=y.target.value.replace(/[^0-9]/g,""),N=parseInt(b)||0;g(C=>({...C,netWorkDays:N}))},onKeyDown:x,title:"순작업일"})}),a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[3].width},children:a.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.indirectWorkDaysPost,onChange:y=>{const b=y.target.value.replace(/[^0-9]/g,""),N=parseInt(b)||0;g(C=>({...C,indirectWorkDaysPost:N}))},onKeyDown:x,title:"후 간접작업일"})}),a.jsxs("div",{className:"flex shrink-0 items-center justify-center gap-1 px-2",style:{width:e[4].width+e[5].width},children:[a.jsx("button",{onClick:v,disabled:!l.name.trim(),className:"flex items-center justify-center rounded bg-blue-500 p-1.5 text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",title:"저장 (Enter)",children:a.jsx(Kt,{size:14})}),a.jsx("button",{onClick:m,className:"flex items-center justify-center rounded bg-gray-400 p-1.5 text-white hover:bg-gray-500 transition-colors",title:"취소 (Esc)",children:a.jsx(Dt,{size:14})})]})]})},{ROW_HEIGHT:tn}=ge,ut={name:"",workDaysTotal:30,nonWorkDaysTotal:10},Xr=({columns:e,tasks:n,onTaskCreate:t,onCancel:r,isVirtualized:s=!1,virtualRowIndex:i,dragHandleWidth:o=0})=>{const[l,g]=u.useState(ut),h=u.useRef(null);u.useEffect(()=>{g(ut),setTimeout(()=>{var y;(y=h.current)==null||y.focus()},0)},[]);const m=u.useCallback(()=>{g(ut),r()},[r]),v=u.useCallback(async()=>{if(!(!l.name.trim()||!t))try{const y=n.filter(M=>M.type==="CP"&&!M.parentId),b=y[y.length-1],N=b?R(b.endDate,1):new Date,C=l.workDaysTotal+l.nonWorkDaysTotal,O=R(N,Math.max(C-1,0)),H={id:`cp-${Date.now()}`,parentId:null,wbsLevel:1,type:"CP",name:l.name.trim(),startDate:N,endDate:O,cp:{workDaysTotal:l.workDaysTotal,nonWorkDaysTotal:l.nonWorkDaysTotal},dependencies:[]};await t(H),g(ut),r()}catch(y){console.error("Failed to create CP:",y),alert("CP 생성 중 오류가 발생했습니다.")}},[l,t,n,r]),x=u.useCallback(y=>{y.key==="Enter"?(y.preventDefault(),v()):y.key==="Escape"&&(y.preventDefault(),m())},[v,m]),D=s&&i!==void 0?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${n.length*tn}px)`}:{};return a.jsxs("div",{className:"box-border flex items-center border-b-2 border-blue-300 bg-blue-50 transition-colors",style:{height:tn,...D},children:[o>0&&a.jsx("div",{style:{width:o},className:"shrink-0"}),a.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-blue-200 px-2",style:{width:o>0?e[0].width-o:e[0].width},children:[a.jsx("div",{className:"w-6 shrink-0"})," ",a.jsx("input",{ref:h,type:"text",placeholder:"CP명...",className:"w-full rounded border border-blue-300 bg-white px-2 py-1 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.name,onChange:y=>g(b=>({...b,name:y.target.value})),onKeyDown:x})]}),a.jsxs("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 text-xs text-gray-600",style:{width:e[1].width},children:[l.workDaysTotal+l.nonWorkDaysTotal,"일"]}),a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[2].width},children:a.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[50px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-vermilion focus:border-vermilion focus:outline-none focus:ring-1 focus:ring-vermilion",value:l.workDaysTotal,onChange:y=>{const b=y.target.value.replace(/[^0-9]/g,""),N=parseInt(b)||0;g(C=>({...C,workDaysTotal:N}))},onKeyDown:x,title:"작업일수"})}),a.jsx("div",{className:"flex shrink-0 items-center justify-center px-1",style:{width:e[3].width},children:a.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[50px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-teal focus:border-teal focus:outline-none focus:ring-1 focus:ring-teal",value:l.nonWorkDaysTotal,onChange:y=>{const b=y.target.value.replace(/[^0-9]/g,""),N=parseInt(b)||0;g(C=>({...C,nonWorkDaysTotal:N}))},onKeyDown:x,title:"비작업일수"})}),a.jsxs("div",{className:"flex shrink-0 items-center justify-center gap-1 px-2",children:[a.jsx("button",{onClick:v,disabled:!l.name.trim(),className:"flex items-center justify-center rounded bg-blue-500 p-1.5 text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",title:"저장 (Enter)",children:a.jsx(Kt,{size:14})}),a.jsx("button",{onClick:m,className:"flex items-center justify-center rounded bg-gray-400 p-1.5 text-white hover:bg-gray-500 transition-colors",title:"취소 (Esc)",children:a.jsx(Dt,{size:14})})]})]})},{ROW_HEIGHT:ze,HEADER_HEIGHT:nn,MILESTONE_LANE_HEIGHT:rn}=ge,sn=[{id:"name",label:"CP명",width:180,minWidth:100},{id:"total",label:"총 공기",width:80,minWidth:50},{id:"workDays",label:"작업일수",width:80,minWidth:50},{id:"nonWorkDays",label:"비작업일수",width:80,minWidth:50}],an=[{id:"name",label:"단위공정명",width:150,minWidth:80},{id:"indirectPre",label:"선간접",width:60,minWidth:45},{id:"netWork",label:"순작업",width:60,minWidth:45},{id:"indirectPost",label:"후간접",width:60,minWidth:45},{id:"startDate",label:"시작일",width:90,minWidth:70},{id:"endDate",label:"종료일",width:90,minWidth:70}],kt=u.forwardRef(({tasks:e,allTasks:n,viewMode:t,expandedIds:r,onToggle:s,onTaskClick:i,onTaskUpdate:o,onTaskCreate:l,onTaskReorder:g,activeCPId:h,virtualRows:m,totalHeight:v,onTotalWidthChange:x,onTaskGroup:D,onTaskUngroup:y,onTaskDelete:b,onTaskMove:N,isAddingTask:C=!1,onCancelAddTask:O,isAddingCP:H=!1,onCancelAddCP:M},V)=>{const L=m&&m.length>0,[P,A]=u.useState(null),[q,ie]=u.useState(null),[Q,U]=u.useState(null),[Y,K]=u.useState(new Set),[B,he]=u.useState(null),[Z,k]=u.useState(null),[p,$]=u.useState(null),[d,j]=u.useState(""),W=u.useRef(null),[z,oe]=u.useState(sn.map(f=>f.width)),[le,_]=u.useState(an.map(f=>f.width)),[ee,ne]=u.useState(null),je=u.useRef(!1),ve=t==="MASTER"?sn:an,$e=t==="MASTER"?z:le,Ge=t==="MASTER"?oe:_,J=u.useMemo(()=>ve.map((f,c)=>({...f,width:$e[c]??f.width})),[ve,$e]),Ye=g?24:0,Ee=J.reduce((f,c)=>f+c.width,0)+Ye;u.useEffect(()=>{x&&x(Ee)},[Ee,x]);const tt=u.useCallback((f,c)=>{if(f.detail>=2)return;f.preventDefault(),f.stopPropagation(),je.current=!0,ne(c);const w=f.clientX,T=$e[c],X=ve[c].minWidth,ae=re=>{if(!je.current)return;const fe=re.clientX-w,me=Math.max(X,T+fe);Ge(E=>{const xe=[...E];return xe[c]=me,xe})},I=()=>{je.current=!1,ne(null),document.removeEventListener("mousemove",ae),document.removeEventListener("mouseup",I)};document.addEventListener("mousemove",ae),document.addEventListener("mouseup",I)},[$e,ve,Ge]),Pe=u.useCallback((f,c=12,w="normal")=>{const X=document.createElement("canvas").getContext("2d");return X?(X.font=`${w} ${c}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,X.measureText(f).width):0},[]),Re=u.useCallback(f=>{const c=ve[f].minWidth,w=f===0,T=w?48:20,X=ve[f].label;let ae=Pe(X,12,"500")+16;return e.forEach(I=>{let re="",fe=0;if(t==="MASTER"){const De=I.type==="GROUP";switch(w&&I.parentId&&(fe=20),f){case 0:re=I.name;break;case 1:re=De?"-":I.cp?`${I.cp.workDaysTotal+I.cp.nonWorkDaysTotal}일`:"-";break;case 2:re=De?"-":I.cp?`${I.cp.workDaysTotal}일`:"-";break;case 3:re=De?"-":I.cp?`${I.cp.nonWorkDaysTotal}일`:"-";break}}else switch(f){case 0:re=I.name;break;case 1:re=I.task?String(I.task.indirectWorkDaysPre):"-";break;case 2:re=I.task?String(I.task.netWorkDays):"-";break;case 3:re=I.task?String(I.task.indirectWorkDaysPost):"-";break;case 4:re=de(I.startDate,"yyyy-MM-dd");break;case 5:re=de(I.endDate,"yyyy-MM-dd");break}const xe=Pe(re,w?14:12,w?"500":"normal")+T+fe;ae=Math.max(ae,xe)}),Math.max(c,Math.ceil(ae))},[e,t,ve,Pe]),St=u.useCallback((f,c)=>{f.preventDefault(),f.stopPropagation(),je.current=!1,ne(null);const w=Re(c);Ge(T=>{const X=[...T];return X[c]=w,X})},[Re,Ge]),nt=u.useCallback((f,c,w)=>{if(!f.task||!o)return;const T={...f,task:{...f.task,[c]:w}};o(T)},[o]),Ne=u.useCallback((f,c)=>{f.dataTransfer.effectAllowed="move",f.dataTransfer.setData("text/plain",c),A(c);const w=document.createElement("div");w.style.opacity="0",document.body.appendChild(w),f.dataTransfer.setDragImage(w,0,0),setTimeout(()=>document.body.removeChild(w),0)},[]),ht=u.useCallback((f,c,w)=>{if(f.preventDefault(),f.dataTransfer.dropEffect="move",c===P)return;const T=f.currentTarget.getBoundingClientRect(),X=f.clientY-T.top,ae=T.height;let I;w?X<ae/3?I="before":X<ae*2/3?I="into":I="after":I=X<ae/2?"before":"after",ie(c),U(I)},[P]),ft=u.useCallback(()=>{ie(null),U(null)},[]),rt=u.useCallback((f,c)=>{if(f.preventDefault(),!P||P===c||!Q){A(null),ie(null),U(null);return}if(N)N(P,c,Q);else if(g&&Q!=="into"){const w=e.findIndex(X=>X.id===c),T=Q==="after"?w+1:w;g(P,T)}A(null),ie(null),U(null)},[P,Q,N,g,e]),Xe=u.useCallback(()=>{A(null),ie(null),U(null)},[]),st=u.useCallback((f,c,w)=>{if(P)return;const T=f.ctrlKey||f.metaKey,X=f.shiftKey;if(T)K(ae=>{const I=new Set(ae);return I.has(c.id)?I.delete(c.id):I.add(c.id),I}),he(w);else if(X&&B!==null){const ae=Math.min(B,w),I=Math.max(B,w);K(re=>{const fe=new Set(re);for(let me=ae;me<=I;me++)e[me]&&fe.add(e[me].id);return fe})}else K(new Set([c.id])),he(w)},[P,B,e]),Se=u.useCallback((f,c)=>{f.preventDefault(),Y.has(c.id)||K(new Set([c.id])),k({x:f.clientX,y:f.clientY,taskId:c.id})},[Y]);u.useEffect(()=>{const f=()=>{k(null)};if(Z)return document.addEventListener("click",f),()=>document.removeEventListener("click",f)},[Z]),u.useEffect(()=>{const f=c=>{c.key==="Escape"&&(K(new Set),k(null),$(null))};return document.addEventListener("keydown",f),()=>document.removeEventListener("keydown",f)},[]);const _e=u.useCallback(f=>{$(f.id),j(f.name),setTimeout(()=>{var c,w;(c=W.current)==null||c.focus(),(w=W.current)==null||w.select()},0)},[]),at=u.useCallback(f=>{const c=e.find(w=>w.id===f);c&&o&&_e(c)},[e,o,_e]),Me=u.useCallback(()=>{if(!p||!o){$(null);return}const f=e.find(c=>c.id===p);f&&d.trim()&&d!==f.name&&o({...f,name:d.trim()}),$(null),j("")},[p,d,e,o]),mt=u.useCallback(()=>{$(null),j("")},[]),gt=u.useCallback(f=>{f.key==="Enter"?(f.preventDefault(),Me()):f.key==="Escape"&&(f.preventDefault(),mt())},[Me,mt]),Mt=u.useCallback(f=>{if(!h||f.parentId===h)return 0;let c=0,w=f.parentId;for(;w&&w!==h;){const T=n.find(X=>X.id===w);(T==null?void 0:T.type)==="GROUP"&&c++,w=(T==null?void 0:T.parentId)||null}return c},[h,n]),it=u.useCallback(f=>{if(!f.parentId)return 0;let c=0,w=f.parentId;for(;w;){const T=n.find(X=>X.id===w);(T==null?void 0:T.type)==="GROUP"&&c++,w=T==null?void 0:T.parentId}return c},[n]),Ve=()=>a.jsx("div",{className:"flex h-[32px] border-t border-gray-200",children:J.map((f,c)=>a.jsxs("div",{className:"relative flex shrink-0 items-center justify-center text-xs font-medium text-gray-600",style:{width:f.width},children:[f.label,c<J.length-1&&a.jsx("div",{className:`absolute right-0 top-0 z-10 h-full w-[5px] cursor-col-resize transition-colors ${ee===c?"bg-blue-500":"hover:bg-blue-300"}`,style:{transform:"translateX(50%)"},onMouseDown:w=>tt(w,c),onDoubleClick:w=>St(w,c),title:"드래그하여 컬럼 너비 조절 / 더블클릭으로 내용에 맞게 자동 조절"}),c<J.length-1&&a.jsx("div",{className:"absolute right-0 top-0 h-full w-px bg-gray-200"})]},f.id))}),Ie=Y.size===1?e.find(f=>f.id===Array.from(Y)[0]&&f.type==="GROUP"):null,Wt=Y.size>=1&&D&&!Ie,yt=Ie&&y,S=()=>!Wt&&!yt&&Y.size===0?null:a.jsxs("div",{className:"flex items-center gap-2",children:[Y.size>0&&a.jsxs("span",{className:"text-xs text-gray-500",children:[Y.size,"개 선택"]}),yt&&a.jsxs("button",{onClick:()=>{y(Ie.id),K(new Set)},className:"flex items-center gap-1 rounded bg-gray-500 px-2 py-1 text-xs font-medium text-white hover:bg-gray-600 transition-colors",title:"그룹 해제",children:[a.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"해제"]}),Y.size>0&&a.jsx("button",{onClick:()=>K(new Set),className:"flex items-center justify-center rounded p-1 text-gray-400 hover:bg-gray-200 hover:text-gray-600 transition-colors",title:"선택 해제 (ESC)",children:a.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]});return t==="MASTER"?a.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[a.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:nn},children:[a.jsxs("div",{className:"flex flex-1 items-center justify-between px-4",children:[a.jsx("span",{className:"font-bold text-gray-700",children:"공구 공정표 (Level 1)"}),S()]}),Ve()]}),ee!==null&&a.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),a.jsxs("div",{ref:V,className:"relative flex-1 overflow-auto",children:[a.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:rn,minWidth:Ee},children:J.map((f,c)=>a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:f.width},children:c===0&&"Milestone"},f.id))}),a.jsxs("div",{style:{minWidth:Ee,height:L?v:void 0,position:"relative"},children:[(L?m:e.map((f,c)=>({index:c,start:c*ze,size:ze,key:c}))).map(f=>{const c=e[f.index];if(!c)return null;const w=c.type==="GROUP",T=w&&n.some(E=>E.parentId===c.id),X=r.has(c.id),I=it(c)*12,re=P===c.id,fe=q===c.id,me=Y.has(c.id);return a.jsxs("div",{draggable:!!(g||N),onDragStart:E=>Ne(E,c.id),onDragOver:E=>ht(E,c.id,w),onDragLeave:ft,onDrop:E=>rt(E,c.id),onDragEnd:Xe,onClick:E=>st(E,c,f.index),onContextMenu:E=>Se(E,c),className:`box-border flex items-center border-b transition-all duration-150 ${re?"opacity-50 bg-blue-50":fe?Q==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":Q==="into"?"bg-blue-200 border-blue-400 border-2 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.6)]":"border-b-2 border-b-blue-500":me?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":w?"bg-gray-50 border-gray-100 hover:bg-gray-100":"border-gray-100 cursor-pointer hover:bg-blue-50 hover:shadow-[inset_0_0_0_1px_rgba(59,130,246,0.3)]"}`,style:{height:ze,...L?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${f.start}px)`}:{}},onDoubleClick:()=>!w&&i(c),title:w?void 0:"더블클릭하여 상세 공정표 보기",children:[g&&a.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:a.jsx(Jt,{size:14})}),a.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:g?J[0].width-24:J[0].width,paddingLeft:I+8},children:[T?a.jsx("button",{onClick:E=>{E.stopPropagation(),s(c.id)},className:"mr-1 shrink-0 rounded p-1 text-gray-500 hover:bg-gray-200",children:X?a.jsx(Qt,{size:14}):a.jsx(Ut,{size:14})}):a.jsx("div",{className:"w-6 shrink-0"}),p===c.id?a.jsx("input",{ref:W,type:"text",value:d,onChange:E=>j(E.target.value),onKeyDown:gt,onBlur:Me,onClick:E=>E.stopPropagation(),className:"w-full rounded border border-blue-400 bg-white px-1 py-0.5 text-sm font-normal text-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500"}):a.jsx("span",{className:`truncate text-sm ${w?"font-normal text-gray-500 cursor-text":"font-medium text-gray-800"}`,onDoubleClick:E=>{o&&(E.stopPropagation(),_e(c))},title:o?"더블클릭하여 이름 편집":void 0,children:c.name})]}),a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:J[1].width},children:w?"-":c.cp?`${c.cp.workDaysTotal+c.cp.nonWorkDaysTotal}일`:"-"}),a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-vermilion",style:{width:J[2].width},children:w?"-":c.cp?`${c.cp.workDaysTotal}일`:"-"}),a.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-teal",style:{width:J[3].width},children:w?"-":c.cp?`${c.cp.nonWorkDaysTotal}일`:"-"})]},f.key)}),H&&a.jsx(Xr,{columns:J,tasks:e,onTaskCreate:l,onCancel:M||(()=>{}),isVirtualized:L,virtualRowIndex:e.length,dragHandleWidth:Ye})]})]}),Z&&a.jsx(Zt,{x:Z.x,y:Z.y,taskId:Z.taskId,selectedTaskIds:Y,tasks:e,onTaskGroup:D,onTaskUngroup:y,onTaskDelete:b,onStartRename:at,onClose:()=>k(null),onDeselect:()=>K(new Set)})]}):a.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[a.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:nn},children:[a.jsxs("div",{className:"flex flex-1 items-center justify-between px-4",children:[a.jsx("span",{className:"font-bold text-gray-700",children:"주공정표 (Level 2)"}),S()]}),Ve()]}),ee!==null&&a.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),a.jsxs("div",{ref:V,className:"relative flex-1 overflow-auto",children:[a.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:rn,minWidth:Ee},children:J.map((f,c)=>a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:f.width},children:c===0&&"Milestone"},f.id))}),a.jsxs("div",{style:{minWidth:Ee,height:L?v:void 0,position:"relative"},children:[(L?m:e.map((f,c)=>({index:c,start:c*ze,size:ze,key:c}))).map(f=>{const c=e[f.index];if(!c)return null;const w=c.type==="GROUP",T=w&&n.some(E=>E.parentId===c.id),X=r.has(c.id),I=Mt(c)*12,re=P===c.id,fe=q===c.id,me=Y.has(c.id);return a.jsxs("div",{draggable:!!(g||N),onDragStart:E=>Ne(E,c.id),onDragOver:E=>ht(E,c.id,w),onDragLeave:ft,onDrop:E=>rt(E,c.id),onDragEnd:Xe,onClick:E=>st(E,c,f.index),onContextMenu:E=>Se(E,c),className:`box-border flex items-center border-b transition-colors ${re?"opacity-50 bg-blue-50":fe?Q==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":Q==="into"?"bg-blue-200 border-blue-400 border-2 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.6)]":"border-b-2 border-b-blue-500":me?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":w?"bg-gray-50 border-gray-100 hover:bg-gray-100":"border-gray-100 hover:bg-gray-50"}`,style:{height:ze,...L?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${f.start}px)`}:{}},children:[g&&a.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:a.jsx(Jt,{size:14})}),a.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:g?J[0].width-24:J[0].width,paddingLeft:I+8},children:[T?a.jsx("button",{onClick:E=>{E.stopPropagation(),s(c.id)},className:"mr-1 shrink-0 rounded p-1 text-gray-500 hover:bg-gray-200",children:X?a.jsx(Qt,{size:14}):a.jsx(Ut,{size:14})}):a.jsx("div",{className:"w-6 shrink-0"}),p===c.id?a.jsx("input",{ref:W,type:"text",value:d,onChange:E=>j(E.target.value),onKeyDown:gt,onBlur:Me,onClick:E=>E.stopPropagation(),className:"w-full rounded border border-blue-400 bg-white px-1 py-0.5 text-sm font-normal text-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500"}):a.jsx("span",{className:`truncate text-sm ${w?"font-normal text-gray-500 cursor-text":"font-medium text-gray-800"}`,onDoubleClick:E=>{o&&(E.stopPropagation(),_e(c))},title:o?"더블클릭하여 이름 편집":void 0,children:c.name})]}),a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:J[1].width},children:c.task?a.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:c.task.indirectWorkDaysPre,onChange:E=>{const xe=E.target.value.replace(/[^0-9]/g,""),De=parseInt(xe)||0;nt(c,"indirectWorkDaysPre",De)},onKeyDown:E=>{(E.key==="-"||E.key==="e"||E.key==="+"||E.key===".")&&E.preventDefault()},title:"선 간접작업일 (바 드래그로도 조절 가능)"}):a.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:J[2].width},children:c.task?a.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-red-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-red-500 focus:outline-none focus:ring-1 focus:ring-red-500",value:c.task.netWorkDays,onChange:E=>{const xe=E.target.value.replace(/[^0-9]/g,""),De=parseInt(xe)||0;nt(c,"netWorkDays",De)},onKeyDown:E=>{(E.key==="-"||E.key==="e"||E.key==="+"||E.key===".")&&E.preventDefault()},title:"순작업일"}):a.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:J[3].width},children:c.task?a.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:c.task.indirectWorkDaysPost,onChange:E=>{const xe=E.target.value.replace(/[^0-9]/g,""),De=parseInt(xe)||0;nt(c,"indirectWorkDaysPost",De)},onKeyDown:E=>{(E.key==="-"||E.key==="e"||E.key==="+"||E.key===".")&&E.preventDefault()},title:"후 간접작업일 (바 드래그로도 조절 가능)"}):a.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:J[4].width},children:de(c.startDate,"yyyy-MM-dd")}),a.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-gray-500",style:{width:J[5].width},children:de(c.endDate,"yyyy-MM-dd")})]},f.key)}),C&&h&&a.jsx(Rr,{columns:J,tasks:e,activeCPId:h,onTaskCreate:l,onCancel:O||(()=>{}),isVirtualized:L,virtualRowIndex:e.length})]})]}),Z&&a.jsx(Zt,{x:Z.x,y:Z.y,taskId:Z.taskId,selectedTaskIds:Y,tasks:e,onTaskGroup:D,onTaskUngroup:y,onTaskDelete:b,onStartRename:at,onClose:()=>k(null),onDeselect:()=>K(new Set)})]})});kt.displayName="GanttSidebar";const Te=(e,n=[],t)=>!!(!t.workOnSaturdays&&_t(e)||!t.workOnSundays&&It(e)||!t.workOnHolidays&&n.some(r=>Cn(r,e))),Vr=e=>_t(e)||It(e),on=(e,n,t=[],r)=>{let s=new Date(e),i=0;if(n<=0)return s;for(;Te(s,t,r);)s=R(s,1);for(;i<n;)Te(s,t,r)||i++,i<n&&(s=R(s,1));return s},Br=(e,n,t=[],r)=>{let s=new Date(e),i=0;if(n<=0)return s;for(;i<n;)s=R(s,-1),Te(s,t,r)||i++;return s},jt=(e,n)=>n<=0?e:R(e,n-1),qr=(e,n=[],t)=>{if(!e.task)return{startDate:e.startDate,endDate:e.endDate,netWorkStartDate:e.startDate,netWorkEndDate:e.endDate};const{netWorkDays:r,indirectWorkDaysPre:s,indirectWorkDaysPost:i}=e.task,o=Ue(new Date(e.startDate));let l=o,g,h;s>0&&(g=l,h=jt(l,s),l=R(h,1));let m=l,v=m;if(r>0){for(;Te(m,n,t);)m=R(m,1);v=on(m,r,n,t),l=R(v,1)}else s===0&&(m=o,v=o);let x,D;return i>0&&(x=l,D=jt(l,i)),{startDate:g||m,endDate:D||v,netWorkStartDate:m,netWorkEndDate:v,indirectPreStartDate:g,indirectPreEndDate:h,indirectPostStartDate:x,indirectPostEndDate:D}},Kr=(e,n,t)=>{switch(n){case"START":return t.startDate;case"NET_WORK_START":return t.netWorkStartDate;case"NET_WORK_END":return t.netWorkEndDate;case"END":return t.endDate;default:return t.endDate}},Le=(e,n,t)=>pt(e,n)*t,Qr=(e,n,t)=>{const r=Math.round(e/t);return R(n,r)},Ur=(e,n,t)=>(pt(n,e)+1)*t,Jr=e=>et[e].pixelsPerDay,Et=(e,n=[],t=5)=>{const r=[...e.flatMap(h=>[h.startDate,h.endDate].filter(Boolean)),...n.map(h=>h.date)];if(r.length===0){const h=new Date;return{minDate:h,maxDate:R(h,30),totalDays:30}}const s=new Date(Math.min(...r.map(h=>h.getTime()))),i=new Date(Math.max(...r.map(h=>h.getTime()))),o=R(s,-t),l=R(i,t),g=pt(l,o);return{minDate:o,maxDate:l,totalDays:g}},{ROW_HEIGHT:ue,HEADER_HEIGHT:Zr,MILESTONE_LANE_HEIGHT:ye,BAR_HEIGHT:se}=ge,es=({minDate:e,totalDays:n,pixelsPerDay:t,zoomLevel:r,holidays:s,calendarSettings:i})=>{const o=Array.from({length:n},(x,D)=>R(e,D)),l=n*t,g=u.useMemo(()=>{const x=[];let D=vt(o[0]),y=0;return o.forEach(b=>{vt(b)!==D?(x.push({label:`${D}년`,days:y}),D=vt(b),y=1):y++}),x.push({label:`${D}년`,days:y}),x},[o]),h=u.useMemo(()=>{const x=[];let D=o[0],y=0;return o.forEach(b=>{Pr(b,D)?y++:(x.push({label:de(D,"M월"),days:y}),D=b,y=1)}),x.push({label:de(D,"M월"),days:y}),x},[o]),m=u.useMemo(()=>{if(r==="MONTH")return null;if(r==="DAY")return a.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:l},children:o.map((x,D)=>{const y=ct(x),b=Te(x,s,i),N=y===0,C=y===6;let O="text-gray-600";N&&(O="text-red-500"),C&&(O="text-blue-500"),b&&!N&&!C&&(O="text-red-500");let H="";return N||b&&!C?H="bg-red-50/50":C&&(H="bg-blue-50/50"),a.jsxs("div",{className:`flex h-full shrink-0 flex-col items-center justify-center border-r border-gray-100 font-medium ${H}`,style:{width:t,minWidth:t},children:[a.jsx("span",{className:`text-[10px] leading-none ${O}`,children:de(x,"d")}),a.jsx("span",{className:`mt-0.5 text-[9px] font-bold leading-none ${O}`,children:["일","월","화","수","목","금","토"][y]})]},D)})});{const x=[];let D=o[0],y=0;return o.forEach(b=>{Or(b,D,{weekStartsOn:0})?y++:(x.push({label:`${Vt(D,{weekStartsOn:0})}주`,days:y}),D=b,y=1)}),x.push({label:`${Vt(D,{weekStartsOn:0})}주`,days:y}),a.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:l},children:x.map((b,N)=>a.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-100 text-xs font-medium text-gray-600",style:{width:b.days*t},children:b.label},N))})}},[o,r,t,s,i,l]),v=r==="MONTH";return a.jsx("div",{className:"sticky top-0 z-20 flex flex-col border-b border-gray-300 bg-white shadow-sm",style:{height:Zr,minWidth:l},children:v?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex h-[48px] items-center border-b border-gray-300 bg-gray-100 text-sm font-bold text-gray-800",style:{minWidth:l},children:g.map((x,D)=>a.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-300",style:{width:x.days*t},children:x.label},D))}),a.jsx("div",{className:"flex h-[32px] items-center bg-white text-xs font-medium text-gray-700",style:{minWidth:l},children:h.map((x,D)=>a.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-200",style:{width:x.days*t},children:x.label},D))})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-300 bg-gray-100 text-xs font-bold text-gray-800",style:{minWidth:l},children:g.map((x,D)=>a.jsx("div",{className:"flex shrink-0 items-center border-r border-gray-300 pl-2",style:{width:x.days*t},children:x.label},D))}),a.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-200 bg-gray-100 text-xs font-medium text-gray-700",style:{minWidth:l},children:h.map((x,D)=>a.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-300",style:{width:x.days*t},children:x.label},D))}),m]})})},ts=({minDate:e,totalDays:n,chartHeight:t,pixelsPerDay:r,holidays:s,calendarSettings:i,zoomLevel:o})=>{const l=u.useMemo(()=>{if(o==="MONTH")return[];const g=[];for(let h=0;h<n;h++){const m=R(e,h),v=ct(m),x=v===0,D=v===6;if(Te(m,s,i)||D){const b=h*r;let N="rgba(254, 242, 242, 0.5)";D&&!x&&(N="rgba(239, 246, 255, 0.5)"),x&&(N="rgba(254, 242, 242, 0.5)"),g.push(a.jsx("rect",{x:b,y:0,width:r,height:t,fill:N,className:"pointer-events-none"},`weekend-${h}`))}}return g},[e,n,t,r,s,i,o]);return a.jsx("g",{children:l})},ns=(e,n,t)=>{if(e.length===0)return[];const r=25,s=12,i=8,o=e.map(m=>({milestone:m,x:Le(m.date,n,t),labelLevel:0,labelWidth:m.name.length*s+r})).sort((m,v)=>m.x-v.x),l=[],g=[],h=[];for(const m of o){const v=m.labelWidth,x=m.x-v,D=m.x-i;if(!g.some(b=>x<b+i))g.push(D),l.push({milestone:m.milestone,x:m.x,labelLevel:0});else{const b=m.x+i,N=m.x+v;h.some(O=>!(N<O.start||b>O.end))?l.push({milestone:m.milestone,x:m.x,labelLevel:-1}):(h.push({start:b,end:N}),l.push({milestone:m.milestone,x:m.x,labelLevel:1}))}}return l},rs=({milestone:e,x:n,labelLevel:t=0,isDragging:r=!1,dragX:s,onMouseDown:i,onDoubleClick:o})=>{const g=ye/2,h=r&&s!==void 0?s:n;let m,v,x;t===0?(m=-8,v=4,x="end"):t===1?(m=8,v=4,x="start"):(m=0,v=18,x="middle");const D=b=>{i&&(b.preventDefault(),b.stopPropagation(),i(b,e))},y=b=>{o&&(b.preventDefault(),b.stopPropagation(),o(e))};return a.jsxs("g",{transform:`translate(${h}, ${g})`,className:`group ${i?"cursor-ew-resize":"cursor-pointer"} ${r?"cursor-ew-resize":""}`,onMouseDown:D,onDoubleClick:y,children:[a.jsx("line",{x1:0,y1:0,x2:0,y2:1e3,stroke:r?"#3B82F6":"#9CA3AF",strokeWidth:r?3:2,strokeDasharray:"4, 4",className:r?"opacity-100":"opacity-80"}),a.jsx("path",{d:`M ${-12/2} ${-12/2} L ${12/2} ${-12/2} L 0 ${12/2} Z`,fill:r?"#3B82F6":we.milestone,stroke:"white",strokeWidth:1,className:"drop-shadow-sm transition-transform duration-150 group-hover:scale-[1.3]",style:{transformOrigin:"center",transformBox:"fill-box",transform:r?"scale(1.3)":void 0}}),a.jsx("circle",{cx:0,cy:0,r:12,fill:"transparent",className:"cursor-ew-resize"}),a.jsx("text",{x:m,y:v,textAnchor:x,className:`select-none text-[11px] font-bold transition-colors ${r?"fill-blue-700":"fill-gray-600 group-hover:fill-blue-700"}`,children:e.name})]})},ss=({task:e,y:n,minDate:t,pixelsPerDay:r,isMasterView:s,isDraggable:i=!1,dragInfo:o,onDragStart:l})=>{var D,y;if(e.type==="GROUP")return null;const g=4,h=!!o,m=(o==null?void 0:o.startDate)||e.startDate,v=(o==null?void 0:o.endDate)||e.endDate,x=Le(m,t,r);if(s){const b=((D=e.cp)==null?void 0:D.workDaysTotal)||0,N=((y=e.cp)==null?void 0:y.nonWorkDaysTotal)||0;if(b+N===0)return null;const O=b*r,H=N*r;return a.jsxs("g",{transform:`translate(${x}, ${n})`,className:"group cursor-pointer",children:[a.jsx("rect",{x:0,y:0,width:O,height:se,fill:we.vermilion,rx:g,ry:g,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),a.jsx("rect",{x:O,y:0,width:H,height:se,fill:we.teal,rx:g,ry:g,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),a.jsx("text",{x:-8,y:se/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-bold fill-gray-700",children:e.name})]})}else{if(!e.task)return null;const{netWorkDays:b,indirectWorkDaysPre:N,indirectWorkDaysPost:C}=e.task,O=(o==null?void 0:o.indirectWorkDaysPre)??N,H=(o==null?void 0:o.indirectWorkDaysPost)??C,M=(o==null?void 0:o.netWorkDays)??b,V=O*r,L=M*r,P=H*r,A=V+L+P,q=0,ie=V,Q=V+L,U=8,Y=6,K={startDate:m,endDate:v,indirectWorkDaysPre:O,netWorkDays:M,indirectWorkDaysPost:H};return a.jsxs("g",{transform:`translate(${x}, ${n})`,className:`group ${h?"opacity-90":""}`,children:[O>0&&a.jsx("rect",{x:q,y:0,width:V,height:se,fill:we.blue,rx:g,ry:g,className:`drop-shadow-sm transition-opacity ${h?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:"none"}}),M>0&&a.jsx("rect",{x:ie,y:0,width:L,height:se,fill:we.red,rx:g,ry:g,className:`drop-shadow-sm transition-opacity ${h?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:"none"}}),H>0&&a.jsx("rect",{x:Q,y:0,width:P,height:se,fill:we.blue,rx:g,ry:g,className:`drop-shadow-sm transition-opacity ${h?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:"none"}}),i&&M>0&&a.jsx("rect",{x:ie+Y,y:0,width:Math.max(0,L-Y*2),height:se,fill:"transparent",className:"cursor-grab active:cursor-grabbing",onMouseDown:B=>l==null?void 0:l(B,e.id,"move-net",K),children:a.jsx("title",{children:"순작업 이동 (드래그)"})}),i&&a.jsx("rect",{x:-U/2,y:0,width:U,height:se,fill:"transparent",className:"cursor-ew-resize",onMouseDown:B=>l==null?void 0:l(B,e.id,"resize-pre",K),children:a.jsxs("title",{children:[O>0?"앞 간접작업일 조절":"순작업일 조절"," (드래그)"]})}),i&&O>0&&M>0&&a.jsx("rect",{x:V-Y/2,y:0,width:Y,height:se,fill:"transparent",className:"cursor-col-resize",onMouseDown:B=>l==null?void 0:l(B,e.id,"resize-pre-net",K),children:a.jsx("title",{children:"앞간접-순작업 경계 조절 (드래그)"})}),i&&H>0&&M>0&&a.jsx("rect",{x:Q-Y/2,y:0,width:Y,height:se,fill:"transparent",className:"cursor-col-resize",onMouseDown:B=>l==null?void 0:l(B,e.id,"resize-net-post",K),children:a.jsx("title",{children:"순작업-뒤간접 경계 조절 (드래그)"})}),i&&a.jsx("rect",{x:A-U/2,y:0,width:U,height:se,fill:"transparent",className:"cursor-ew-resize",onMouseDown:B=>l==null?void 0:l(B,e.id,"resize-post",K),children:a.jsxs("title",{children:[H>0?"뒤 간접작업일 조절":"순작업일 조절"," (드래그)"]})}),i&&a.jsxs(a.Fragment,{children:[a.jsx("rect",{x:1,y:se/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"}),a.jsx("rect",{x:A-4,y:se/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"}),O>0&&M>0&&a.jsx("rect",{x:V-1.5,y:se/2-4,width:3,height:8,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-60 transition-opacity"}),H>0&&M>0&&a.jsx("rect",{x:Q-1.5,y:se/2-4,width:3,height:8,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-60 transition-opacity"})]}),a.jsx("text",{x:-8,y:se/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-medium fill-gray-700",children:e.name}),h&&a.jsxs("g",{children:[a.jsxs("text",{x:A/2,y:-6,textAnchor:"middle",className:"pointer-events-none select-none text-[10px] font-bold fill-blue-600",children:[de(m,"MM/dd")," ~ ",de(v,"MM/dd")]}),a.jsxs("text",{x:A/2,y:se+12,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-gray-500",children:["앞",O,"일 + 순",M,"일 + 뒤",H,"일"]})]})]})}},as=()=>a.jsx("defs",{children:a.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:a.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:we.dependency})})}),Nt=u.forwardRef(({tasks:e,milestones:n,viewMode:t,zoomLevel:r,holidays:s,calendarSettings:i,onBarDrag:o,onMilestoneUpdate:l,onMilestoneDoubleClick:g,virtualRows:h,totalHeight:m},v)=>{const x=et[r].pixelsPerDay,D=t==="MASTER",y=h&&h.length>0,[b,N]=u.useState(null),[C,O]=u.useState(null),H=u.useRef(null);u.useEffect(()=>{H.current=C},[C]);const{minDate:M,totalDays:V}=u.useMemo(()=>Et(e,n,60),[e,n]),L=u.useMemo(()=>ns(n,M,x),[n,M,x]),P=V*x,A=Math.max(y?(m||0)+ye+100:e.length*ue+ye+100,500),q=u.useRef(null);u.useEffect(()=>{q.current=b},[b]);const ie=u.useCallback((k,p)=>{if(!l)return;k.preventDefault(),k.stopPropagation();const $=Le(p.date,M,x),d={milestoneId:p.id,startX:k.clientX,originalDate:p.date,currentX:$};O(d)},[l,M,x]),Q=u.useCallback(k=>{const p=H.current;if(!p)return;const $=k.clientX-p.startX,d=Le(p.originalDate,M,x),j=Math.max(0,d+$);O(W=>W?{...W,currentX:j}:null)},[M,x]),U=u.useCallback(k=>{const p=H.current;if(!p||!l){O(null);return}const $=k.clientX-p.startX,d=Math.round($/x);if(d!==0){const j=R(p.originalDate,d),W=n.find(z=>z.id===p.milestoneId);W&&l({...W,date:j})}O(null)},[l,x,n]);u.useEffect(()=>{if(C)return window.addEventListener("mousemove",Q),window.addEventListener("mouseup",U),()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",U)}},[C,Q,U]);const Y=u.useCallback(k=>{g&&g(k)},[g]),K=u.useCallback((k,p,$,d)=>{if(!o)return;k.preventDefault(),k.stopPropagation();const j={taskId:p,dragType:$,startX:k.clientX,originalStartDate:d.startDate,originalEndDate:d.endDate,originalIndirectWorkDaysPre:d.indirectWorkDaysPre,originalNetWorkDays:d.netWorkDays,originalIndirectWorkDaysPost:d.indirectWorkDaysPost,currentStartDate:d.startDate,currentEndDate:d.endDate,currentIndirectWorkDaysPre:d.indirectWorkDaysPre,currentNetWorkDays:d.netWorkDays,currentIndirectWorkDaysPost:d.indirectWorkDaysPost};N(j),q.current=j},[o]),B=u.useCallback(k=>{const p=q.current;if(!p||!o)return;const $=k.clientX-p.startX,d=Math.round($/x);let j=p.originalStartDate,W=p.originalEndDate,z=p.originalIndirectWorkDaysPre,oe=p.originalNetWorkDays,le=p.originalIndirectWorkDaysPost;if(p.dragType==="move")j=R(p.originalStartDate,d),W=R(p.originalEndDate,d);else if(p.dragType==="move-net"){const _=p.originalIndirectWorkDaysPost,ee=p.originalIndirectWorkDaysPre,ne=Math.max(-ee,Math.min(_,d));z=p.originalIndirectWorkDaysPre+ne,le=p.originalIndirectWorkDaysPost-ne,j=p.originalStartDate,W=p.originalEndDate}else if(p.dragType==="resize-pre")if(p.originalIndirectWorkDaysPre>0){z=Math.max(0,p.originalIndirectWorkDaysPre-d);const _=R(p.originalStartDate,p.originalIndirectWorkDaysPre);j=R(_,-z),W=p.originalEndDate}else{oe=Math.max(1,p.originalNetWorkDays-d);const _=R(p.originalStartDate,p.originalNetWorkDays-1);j=R(_,-(oe-1)),W=p.originalEndDate}else if(p.dragType==="resize-post")if(p.originalIndirectWorkDaysPost>0){le=Math.max(0,p.originalIndirectWorkDaysPost+d);const _=R(p.originalEndDate,-p.originalIndirectWorkDaysPost);W=R(_,le),j=p.originalStartDate}else oe=Math.max(1,p.originalNetWorkDays+d),W=R(p.originalStartDate,oe-1),j=p.originalStartDate;else if(p.dragType==="resize-pre-net"){const _=p.originalNetWorkDays-1,ee=p.originalIndirectWorkDaysPre,ne=Math.max(-ee,Math.min(_,d));z=p.originalIndirectWorkDaysPre+ne,oe=p.originalNetWorkDays-ne,j=p.originalStartDate,W=p.originalEndDate}else if(p.dragType==="resize-net-post"){const _=p.originalIndirectWorkDaysPost,ee=p.originalNetWorkDays-1,ne=Math.max(-ee,Math.min(_,d));oe=p.originalNetWorkDays+ne,le=p.originalIndirectWorkDaysPost-ne,j=p.originalStartDate,W=p.originalEndDate}N(_=>_?{..._,currentStartDate:j,currentEndDate:W,currentIndirectWorkDaysPre:z,currentNetWorkDays:oe,currentIndirectWorkDaysPost:le}:null)},[o,x]),he=u.useCallback(()=>{const k=q.current;if(!k||!o){N(null),q.current=null;return}const p=k.currentStartDate.getTime()!==k.originalStartDate.getTime()||k.currentEndDate.getTime()!==k.originalEndDate.getTime(),$=k.currentIndirectWorkDaysPre!==k.originalIndirectWorkDaysPre||k.currentNetWorkDays!==k.originalNetWorkDays||k.currentIndirectWorkDaysPost!==k.originalIndirectWorkDaysPost;(p||$)&&o({taskId:k.taskId,dragType:k.dragType,newStartDate:k.currentStartDate,newEndDate:k.currentEndDate,newIndirectWorkDaysPre:k.currentIndirectWorkDaysPre,newIndirectWorkDaysPost:k.currentIndirectWorkDaysPost,newNetWorkDays:k.currentNetWorkDays}),N(null),q.current=null},[o]);u.useEffect(()=>{if(b){window.addEventListener("mousemove",B),window.addEventListener("mouseup",he);let k="ew-resize";return b.dragType==="move"||b.dragType==="move-net"?k="grabbing":(b.dragType==="resize-pre-net"||b.dragType==="resize-net-post")&&(k="col-resize"),document.body.style.cursor=k,document.body.style.userSelect="none",()=>{window.removeEventListener("mousemove",B),window.removeEventListener("mouseup",he),document.body.style.cursor="",document.body.style.userSelect=""}}},[b,B,he]);const Z=u.useCallback(k=>b&&b.taskId===k?{startDate:b.currentStartDate,endDate:b.currentEndDate,indirectWorkDaysPre:b.currentIndirectWorkDaysPre,indirectWorkDaysPost:b.currentIndirectWorkDaysPost,netWorkDays:b.currentNetWorkDays}:null,[b]);return a.jsx("div",{className:"flex h-full w-full flex-col overflow-hidden bg-white",children:a.jsxs("div",{ref:v,className:"relative flex-1 overflow-auto",children:[a.jsx(es,{minDate:M,totalDays:V,pixelsPerDay:x,zoomLevel:r,holidays:s,calendarSettings:i}),a.jsxs("svg",{width:P,height:A,className:"block bg-white",children:[a.jsx(as,{}),a.jsx(ts,{minDate:M,totalDays:V,chartHeight:A,pixelsPerDay:x,holidays:s,calendarSettings:i,zoomLevel:r}),(y?h:e.map((k,p)=>({index:p,start:p*ue,size:ue,key:p}))).map(k=>{const p=e[k.index];if(!p||p.type!=="GROUP")return null;const $=k.start+ye;return a.jsx("rect",{x:0,y:$,width:P,height:ue,fill:"rgba(249, 250, 251, 0.6)",className:"pointer-events-none"},`group-bg-${k.key}`)}),Array.from({length:V},(k,p)=>{const $=(p+1)*x,d=R(M,p),j=ct(d);let W=!1,z="#f0f0f0";return r==="DAY"?(W=!0,z=j===0?"#e0e0e0":"#f0f0f0"):r==="WEEK"?(W=j===0,z="#e5e7eb"):r==="MONTH"&&(W=j===0,z="#f0f0f0"),W?a.jsx("line",{x1:$,y1:0,x2:$,y2:A,stroke:z,strokeWidth:1},`vline-${p}`):null}),(y?h:e.map((k,p)=>({index:p,start:p*ue,size:ue,key:p}))).map(k=>a.jsx("line",{x1:0,y1:k.start+ue+ye,x2:P,y2:k.start+ue+ye,stroke:"#f3f4f6",strokeWidth:1},`line-${k.key}`)),a.jsx("rect",{x:0,y:0,width:P,height:ye,fill:"transparent"}),L.map(k=>{const p=(C==null?void 0:C.milestoneId)===k.milestone.id;return a.jsx(rs,{milestone:k.milestone,x:k.x,labelLevel:k.labelLevel,isDragging:p,dragX:p?C==null?void 0:C.currentX:void 0,onMouseDown:l?ie:void 0,onDoubleClick:g?Y:void 0},k.milestone.id)}),a.jsx("line",{x1:0,y1:ye,x2:P,y2:ye,stroke:we.grid,strokeWidth:1}),(y?h:e.map((k,p)=>({index:p,start:p*ue,size:ue,key:p}))).map(k=>{const p=e[k.index];if(!p)return null;const $=k.start+(ue-se)/2+ye;return a.jsx(ss,{task:p,y:$,minDate:M,pixelsPerDay:x,isMasterView:D,isDraggable:!D&&!!o,dragInfo:Z(p.id),onDragStart:K},k.key)})]})]})})});Nt.displayName="GanttTimeline";const is=({milestoneName:e,onConfirm:n,onCancel:t})=>xt.createPortal(a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-[60] bg-black/50 transition-opacity",onClick:t}),a.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-[360px] rounded-lg bg-white p-6 shadow-xl",onClick:r=>r.stopPropagation(),children:[a.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[a.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:a.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"마일스톤 삭제"}),a.jsx("p",{className:"text-sm text-gray-500",children:"이 작업은 되돌릴 수 없습니다"})]})]}),a.jsxs("div",{className:"mb-6 rounded-md bg-gray-50 p-3",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"다음 마일스톤을 삭제하시겠습니까?"}),a.jsxs("p",{className:"mt-1 flex items-center gap-2 text-sm font-medium text-gray-700",children:[a.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-purple-400"}),e]})]}),a.jsxs("div",{className:"flex justify-end gap-3",children:[a.jsx("button",{onClick:t,className:"rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"취소"}),a.jsx("button",{onClick:n,className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 transition-colors",children:"삭제"})]})]})})]}),document.body),os=({milestone:e,isOpen:n,isNew:t=!1,onClose:r,onSave:s,onDelete:i})=>{const[o,l]=u.useState(""),[g,h]=u.useState(""),[m,v]=u.useState(""),[x,D]=u.useState(!1),y=u.useRef(null);u.useEffect(()=>{e&&n&&(l(e.name),h(e.description||""),v(de(e.date,"yyyy-MM-dd")),D(!1),setTimeout(()=>{var M,V;(M=y.current)==null||M.focus(),(V=y.current)==null||V.select()},100))},[e,n]),u.useEffect(()=>{const M=V=>{V.key==="Escape"&&n&&(x?D(!1):r())};return document.addEventListener("keydown",M),()=>document.removeEventListener("keydown",M)},[n,x,r]);const b=()=>{if(!e||!o.trim())return;const M={...e,name:o.trim(),description:g.trim()||void 0,date:new Date(m)};s(M),r()},N=()=>{D(!0)},C=()=>{e&&i&&i(e.id),D(!1)},O=()=>{D(!1)},H=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),b())};return!n||!e?null:a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 transition-opacity",onClick:r}),a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white shadow-xl",onClick:M=>M.stopPropagation(),children:[a.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[a.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:t?"새 마일스톤":"마일스톤 설정"}),a.jsx("button",{onClick:r,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-colors",children:a.jsx(Dt,{size:20})})]}),a.jsxs("div",{className:"space-y-4 p-4",children:[a.jsxs("div",{children:[a.jsxs("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-gray-700",children:[a.jsx(Gr,{size:14}),"마일스톤 이름"]}),a.jsx("input",{ref:y,type:"text",value:o,onChange:M=>l(M.target.value),onKeyDown:H,placeholder:"마일스톤 이름을 입력하세요",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-gray-700",children:[a.jsx(Fr,{size:14}),"날짜"]}),a.jsx("input",{type:"date",value:m,onChange:M=>v(M.target.value),onKeyDown:H,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsxs("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-gray-700",children:[a.jsx(Hr,{size:14}),"설명 (선택)"]}),a.jsx("textarea",{value:g,onChange:M=>h(M.target.value),placeholder:"마일스톤에 대한 설명을 입력하세요",rows:3,className:"w-full resize-none rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"flex justify-between border-t border-gray-200 px-4 py-3",children:[a.jsx("div",{children:!t&&i&&a.jsxs("button",{onClick:N,className:"flex items-center gap-1.5 rounded-md px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:[a.jsx($r,{size:16}),"삭제"]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:r,className:"rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 transition-colors",children:"취소"}),a.jsx("button",{onClick:b,disabled:!o.trim(),className:"rounded-md bg-blue-500 px-4 py-2 text-sm font-medium text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"저장"})]})]})]})}),x&&a.jsx(is,{milestoneName:o||e.name,onConfirm:C,onCancel:O})]})},ln=e=>{let n;const t=new Set,r=(h,m)=>{const v=typeof h=="function"?h(n):h;if(!Object.is(v,n)){const x=n;n=m??(typeof v!="object"||v===null)?v:Object.assign({},n,v),t.forEach(D=>D(n,x))}},s=()=>n,l={setState:r,getState:s,getInitialState:()=>g,subscribe:h=>(t.add(h),()=>t.delete(h))},g=n=e(r,s,l);return l},ls=e=>e?ln(e):ln,cs=e=>e;function ds(e,n=cs){const t=u.useSyncExternalStore(e.subscribe,u.useCallback(()=>n(e.getState()),[e,n]),u.useCallback(()=>n(e.getInitialState()),[e,n]));return u.useDebugValue(t),t}const cn=e=>{const n=ls(e),t=r=>ds(n,r);return Object.assign(t,n),t},us=e=>e?cn(e):cn,dn=e=>Symbol.iterator in e,un=e=>"entries"in e,hn=(e,n)=>{const t=e instanceof Map?e:new Map(e.entries()),r=n instanceof Map?n:new Map(n.entries());if(t.size!==r.size)return!1;for(const[s,i]of t)if(!r.has(s)||!Object.is(i,r.get(s)))return!1;return!0},hs=(e,n)=>{const t=e[Symbol.iterator](),r=n[Symbol.iterator]();let s=t.next(),i=r.next();for(;!s.done&&!i.done;){if(!Object.is(s.value,i.value))return!1;s=t.next(),i=r.next()}return!!s.done&&!!i.done};function fs(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:dn(e)&&dn(n)?un(e)&&un(n)?hn(e,n):hs(e,n):hn({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function Fe(e){const n=u.useRef(void 0);return t=>{const r=e(t);return fs(n.current,r)?n.current:n.current=r}}const Oe=us((e,n)=>({viewMode:"MASTER",activeCPId:null,zoomLevel:"MONTH",selectedTaskId:null,hoveredTaskId:null,expandedTaskIds:new Set,sidebarWidth:ge.SIDEBAR_WIDTH,isDragging:!1,dragType:null,dragTaskId:null,setViewMode:(t,r)=>{e({viewMode:t,activeCPId:r??null,zoomLevel:t==="DETAIL"?"DAY":"MONTH"})},setZoomLevel:t=>{e({zoomLevel:t})},selectTask:t=>{e({selectedTaskId:t})},hoverTask:t=>{e({hoveredTaskId:t})},toggleTask:t=>{const{expandedTaskIds:r}=n(),s=new Set(r);s.has(t)?s.delete(t):s.add(t),e({expandedTaskIds:s})},expandAll:t=>{const{expandedTaskIds:r}=n(),s=new Set([...r,...t]);e({expandedTaskIds:s})},collapseAll:()=>{e({expandedTaskIds:new Set})},setSidebarWidth:t=>{const r=Math.max(ge.SIDEBAR_MIN_WIDTH,Math.min(t,ge.SIDEBAR_MAX_WIDTH));e({sidebarWidth:r})},startDrag:(t,r)=>{e({isDragging:!0,dragType:t,dragTaskId:r})},endDrag:()=>{e({isDragging:!1,dragType:null,dragTaskId:null})}})),fn=()=>Oe(Fe(e=>({viewMode:e.viewMode,activeCPId:e.activeCPId,zoomLevel:e.zoomLevel}))),mn=()=>Oe(Fe(e=>({setViewMode:e.setViewMode,setZoomLevel:e.setZoomLevel}))),ms=()=>Oe(Fe(e=>({selectedTaskId:e.selectedTaskId,hoveredTaskId:e.hoveredTaskId,selectTask:e.selectTask,hoverTask:e.hoverTask}))),gn=()=>Oe(Fe(e=>({expandedTaskIds:e.expandedTaskIds,toggleTask:e.toggleTask,expandAll:e.expandAll,collapseAll:e.collapseAll}))),yn=()=>Oe(Fe(e=>({sidebarWidth:e.sidebarWidth,setSidebarWidth:e.setSidebarWidth}))),gs=()=>Oe(Fe(e=>({isDragging:e.isDragging,dragType:e.dragType,dragTaskId:e.dragTaskId,startDrag:e.startDrag,endDrag:e.endDrag})));function He(e,n,t){let r=t.initialDeps??[],s;function i(){var o,l,g,h;let m;t.key&&((o=t.debug)!=null&&o.call(t))&&(m=Date.now());const v=e();if(!(v.length!==r.length||v.some((y,b)=>r[b]!==y)))return s;r=v;let D;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(D=Date.now()),s=n(...v),t.key&&((g=t.debug)!=null&&g.call(t))){const y=Math.round((Date.now()-m)*100)/100,b=Math.round((Date.now()-D)*100)/100,N=b/16,C=(O,H)=>{for(O=String(O);O.length<H;)O=" "+O;return O};console.info(`%c⏱ ${C(b,5)} /${C(y,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*N,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(h=t==null?void 0:t.onChange)==null||h.call(t,s),s}return i.updateDeps=o=>{r=o},i}function xn(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const ys=(e,n)=>Math.abs(e-n)<1.01,xs=(e,n,t)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>n.apply(this,s),t)}},bn=e=>{const{offsetWidth:n,offsetHeight:t}=e;return{width:n,height:t}},bs=e=>e,ps=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=n;s<=t;s++)r.push(s);return r},ws=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:g}=o;n({width:Math.round(l),height:Math.round(g)})};if(s(bn(t)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const g=o[0];if(g!=null&&g.borderBoxSize){const h=g.borderBoxSize[0];if(h){s({width:h.inlineSize,height:h.blockSize});return}}s(bn(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},pn={passive:!0},wn=typeof window>"u"?!0:"onscrollend"in window,vs=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;let s=0;const i=e.options.useScrollendEvent&&wn?()=>{}:xs(r,()=>{n(s,!1)},e.options.isScrollingResetDelay),o=m=>()=>{const{horizontal:v,isRtl:x}=e.options;s=v?t.scrollLeft*(x&&-1||1):t.scrollTop,i(),n(s,m)},l=o(!0),g=o(!1);g(),t.addEventListener("scroll",l,pn);const h=e.options.useScrollendEvent&&wn;return h&&t.addEventListener("scrollend",g,pn),()=>{t.removeEventListener("scroll",l),h&&t.removeEventListener("scrollend",g)}},Ds=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const r=n.borderBoxSize[0];if(r)return Math.round(r[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},ks=(e,{adjustments:n=0,behavior:t},r)=>{var s,i;const o=e+n;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:t})};class js{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const r=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(s=>{s.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),t=null},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([r,s])=>{typeof s>"u"&&delete t[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:bs,rangeExtractor:ps,onChange:()=>{},measureElement:Ds,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,t)},this.maybeNotify=He(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:process.env.NODE_ENV!=="production"&&"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=t[o];if(s.has(l.lane))continue;const g=i.get(l.lane);if(g==null||l.end>g.end?i.set(l.lane,l):l.end<g.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=He(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,r,s,i,o)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o}),{key:!1}),this.getMeasurements=He(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:r,scrollMargin:s,getItemKey:i,enabled:o},l)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(m=>{this.itemSizeCache.set(m.key,m.size)}));const g=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const h=this.measurementsCache.slice(0,g);for(let m=g;m<t;m++){const v=i(m),x=this.options.lanes===1?h[m-1]:this.getFurthestMeasurement(h,m),D=x?x.end+this.options.gap:r+s,y=l.get(v),b=typeof y=="number"?y:this.options.estimateSize(m),N=D+b,C=x?x.lane:m%this.options.lanes;h[m]={index:m,start:D,size:b,end:N,key:v,lane:C}}return this.measurementsCache=h,h},{key:process.env.NODE_ENV!=="production"&&"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=He(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,r,s,i)=>this.range=t.length>0&&r>0?Es({measurements:t,outerSize:r,scrollOffset:s,lanes:i}):null,{key:process.env.NODE_ENV!=="production"&&"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=He(()=>{let t=null,r=null;const s=this.calculateRange();return s&&(t=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,r]},(t,r,s,i,o)=>i===null||o===null?[]:t({startIndex:i,endIndex:o,overscan:r,count:s}),{key:process.env.NODE_ENV!=="production"&&"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const r=this.options.indexAttribute,s=t.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(t,r)=>{const s=this.indexFromElement(t),i=this.measurementsCache[s];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(o,t)),t.isConnected&&this.resizeItem(s,this.options.measureElement(t,r,this))},this.resizeItem=(t,r)=>{const s=this.measurementsCache[t];if(!s)return;const i=this.itemSizeCache.get(s.key)??s.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("correction",o),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(t,void 0)},this.getVirtualItems=He(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,r)=>{const s=[];for(let i=0,o=t.length;i<o;i++){const l=t[i],g=r[l];s.push(g)}return s},{key:process.env.NODE_ENV!=="production"&&"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const r=this.getMeasurements();if(r.length!==0)return xn(r[vn(0,r.length-1,s=>xn(r[s]).start,t)])},this.getOffsetForAlignment=(t,r,s=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=t>=o+i?"end":"start"),r==="center"?t+=(s-i)/2:r==="end"&&(t-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,r="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=this.measurementsCache[t];if(!s)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let i=0;const o=10,l=h=>{if(!this.targetWindow)return;const m=this.getOffsetForIndex(t,h);if(!m){console.warn("Failed to get offset for index:",t);return}const[v,x]=m;this._scrollToOffset(v,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const D=this.getScrollOffset(),y=this.getOffsetForIndex(t,x);if(!y){console.warn("Failed to get offset for index:",t);return}ys(y[0],D)||g(x)})},g=h=>{this.targetWindow&&(i++,i<o?(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("Schedule retry",i,o),this.targetWindow.requestAnimationFrame(()=>l(h))):console.warn(`Failed to scroll to index ${t} after ${o} attempts.`))};l(r)},this.scrollBy=(t,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var t;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((t=r[r.length-1])==null?void 0:t.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}s=Math.max(...i.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:r,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const vn=(e,n,t,r)=>{for(;e<=n;){const s=(e+n)/2|0,i=t(s);if(i<r)e=s+1;else if(i>r)n=s-1;else return s}return e>0?e-1:0};function Es({measurements:e,outerSize:n,scrollOffset:t,lanes:r}){const s=e.length-1,i=g=>e[g].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=vn(0,s,i,t),l=o;if(r===1)for(;l<s&&e[l].end<t+n;)l++;else if(r>1){const g=Array(r).fill(0);for(;l<s&&g.some(m=>m<t+n);){const m=e[l];g[m.lane]=m.end,l++}const h=Array(r).fill(t+n);for(;o>=0&&h.some(m=>m>=t);){const m=e[o];h[m.lane]=m.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Dn=typeof document<"u"?ot.useLayoutEffect:ot.useEffect;function Ns(e){const n=ot.useReducer(()=>({}),{})[1],t={...e,onChange:(s,i)=>{var o;i?xt.flushSync(n):n(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=ot.useState(()=>new js(t));return r.setOptions(t),Dn(()=>r._didMount(),[]),Dn(()=>r._willUpdate()),r}function Ss(e){return Ns({observeElementRect:ws,observeElementOffset:vs,scrollToFn:ks,...e})}const{ROW_HEIGHT:Ms}=ge;function kn({containerRef:e,count:n,rowHeight:t=Ms,overscan:r=5}){const s=Ss({count:n,getScrollElement:()=>e.current,estimateSize:()=>t,overscan:r}),i=s.getVirtualItems();return{virtualRows:u.useMemo(()=>i.map(l=>({index:l.index,start:l.start,size:l.size,key:l.index})),[i]),totalHeight:s.getTotalSize(),virtualizer:s}}const Ws={workOnSaturdays:!1,workOnSundays:!1,workOnHolidays:!1};function Cs({tasks:e,milestones:n=[],holidays:t=[],calendarSettings:r=Ws,initialView:s="MASTER",initialZoomLevel:i="MONTH",initialExpandedIds:o,onTaskUpdate:l,onTaskCreate:g,onTaskDelete:h,onTaskReorder:m,onTaskGroup:v,onTaskUngroup:x,onTaskMove:D,onViewChange:y,onMilestoneCreate:b,onMilestoneUpdate:N,onMilestoneDelete:C,onSave:O,onReset:H,hasUnsavedChanges:M,saveStatus:V,className:L,style:P}){const{viewMode:A,activeCPId:q,zoomLevel:ie}=fn(),{setViewMode:Q,setZoomLevel:U}=mn(),{sidebarWidth:Y,setSidebarWidth:K}=yn(),{expandedTaskIds:B,toggleTask:he,expandAll:Z,collapseAll:k}=gn(),p=u.useRef(null),$=u.useRef(null),d=u.useRef(null),j=u.useRef(!1),W=u.useRef(!1),[z,oe]=u.useState(!1),[le,_]=u.useState(!1),[ee,ne]=u.useState(!1),je=u.useCallback(()=>{_(!0)},[]),ve=u.useCallback(()=>{_(!1)},[]),$e=u.useCallback(()=>{ne(!0)},[]),Ge=u.useCallback(()=>{ne(!1)},[]),[J,Ye]=u.useState(null),[Ee,tt]=u.useState(!1),[Pe,Re]=u.useState(!1),St=u.useCallback(S=>{Ye(S),Re(!1),tt(!0)},[]),nt=u.useCallback(()=>{const S={id:`milestone-${Date.now()}`,name:"",date:new Date,description:""};Ye(S),Re(!0),tt(!0)},[]),Ne=u.useCallback(()=>{tt(!1),Ye(null),Re(!1)},[]),ht=u.useCallback(S=>{Pe&&b?b(S):N&&N(S),Ne()},[Pe,b,N,Ne]),ft=u.useCallback(S=>{C&&C(S),Ne()},[C,Ne]),rt=u.useRef(!1),Xe=u.useMemo(()=>e.map(S=>S.id),[e]);u.useEffect(()=>{rt.current||(rt.current=!0,Q(s),U(i),k(),o&&o.length>0?Z(o):Xe.length>0&&Z(Xe))},[Xe,o,s,i,Q,U,Z,k]);const st=u.useRef(new Set);u.useEffect(()=>{const S=new Set(e.map(w=>w.id)),f=st.current,c=[];e.forEach(w=>{w.type==="GROUP"&&!f.has(w.id)&&c.push(w.id)}),c.length>0&&Z(c),st.current=S},[e,Z]);const Se=u.useMemo(()=>{if(A==="MASTER"){const S=[],f=(c,w=0)=>{e.forEach(T=>{T.wbsLevel===1&&T.parentId===c&&(c===null||B.has(c))&&(S.push(T),T.type==="GROUP"&&f(T.id,w+1))})};return f(null),S}else{const S=[],f=c=>{e.forEach(w=>{w.wbsLevel===2&&w.parentId===c&&(c===q||B.has(c))&&(S.push(w),w.type==="GROUP"&&f(w.id))})};return f(q),S}},[e,A,q,B]),{virtualRows:_e,totalHeight:at}=kn({containerRef:d,count:Se.length});u.useEffect(()=>{const S=$.current,f=d.current;if(!S||!f)return;const c=()=>{j.current||(j.current=!0,f.scrollTop=S.scrollTop,requestAnimationFrame(()=>{j.current=!1}))},w=()=>{j.current||(j.current=!0,S.scrollTop=f.scrollTop,requestAnimationFrame(()=>{j.current=!1}))};return S.addEventListener("scroll",c),f.addEventListener("scroll",w),()=>{S.removeEventListener("scroll",c),f.removeEventListener("scroll",w)}},[]);const[Me,mt]=u.useState(null),gt=u.useCallback(S=>{if(S.detail>=2)return;S.preventDefault(),W.current=!0,oe(!0);const f=S.clientX,c=Y,w=X=>{if(!W.current)return;const ae=X.clientX-f;K(c+ae)},T=()=>{W.current=!1,oe(!1),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",T)};document.addEventListener("mousemove",w),document.addEventListener("mouseup",T)},[Y,K]),Mt=u.useCallback(()=>{K(Me!==null?Me:ge.SIDEBAR_WIDTH)},[Me,K]),it=u.useCallback((S,f)=>{Q(S,f),y==null||y(S,f)},[Q,y]),Ve=u.useCallback(S=>{const f=d.current;if(!f)return;const c=et[ie].pixelsPerDay,{minDate:w}=Et(e,n,60),T=Le(S,w,c);f.scrollLeft=Math.max(0,T-50)},[ie,e,n]),Ie=u.useCallback(()=>{if(A==="MASTER"){const S=Se.filter(f=>f.type==="CP");if(S.length>0){const f=S.reduce((w,T)=>w.startDate<T.startDate?w:T),c=new Date(f.startDate);c.setDate(c.getDate()-5),Ve(c)}}else if(A==="DETAIL"&&q){const S=e.filter(f=>f.parentId===q);if(S.length>0){const f=S.reduce((w,T)=>w.startDate<T.startDate?w:T),c=new Date(f.startDate);c.setDate(c.getDate()-5),Ve(c)}}},[A,q,e,Se,Ve]),Wt=u.useCallback(S=>{A==="MASTER"&&S.type==="CP"&&it("DETAIL",S.id)},[A,it]);u.useEffect(()=>{if(A==="DETAIL"&&q){const S=setTimeout(()=>{Ie()},100);return()=>clearTimeout(S)}},[A,q,Ie]);const yt=u.useCallback(async S=>{if(l)try{const f=e.find(w=>w.id===S.taskId);if(!f||!f.task)return;const c={...f,startDate:S.newStartDate,endDate:S.newEndDate,task:{...f.task,indirectWorkDaysPre:S.newIndirectWorkDaysPre,indirectWorkDaysPost:S.newIndirectWorkDaysPost,netWorkDays:S.newNetWorkDays}};await l(c)}catch(f){console.error("Failed to update task:",f)}},[e,l]);return a.jsxs("div",{ref:p,className:`flex h-full w-full flex-col bg-gray-50 ${L||""}`,style:P,children:[a.jsxs("header",{className:"flex h-[60px] shrink-0 items-center justify-between border-b border-gray-200 bg-white px-4 shadow-sm",children:[a.jsx("div",{className:"flex items-center gap-3 shrink-0",children:A==="DETAIL"?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>it("MASTER"),className:"rounded bg-gray-200 px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-300 transition-colors",children:"← 상위 공정표로"}),g&&!le&&a.jsx("button",{onClick:je,className:"flex items-center gap-1 rounded bg-blue-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-blue-600 transition-colors",title:"새 공정 추가",children:"+ Task 추가"})]}):a.jsxs(a.Fragment,{children:[g&&!ee&&a.jsx("button",{onClick:$e,className:"flex items-center gap-1 rounded bg-blue-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-blue-600 transition-colors",title:"새 CP 추가",children:"+ CP 추가"}),b&&a.jsx("button",{onClick:nt,className:"flex items-center gap-1 rounded bg-purple-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-purple-600 transition-colors",title:"새 마일스톤 추가",children:"+ 마일스톤"}),ee&&a.jsx("span",{className:"text-xs text-gray-500 italic",children:"CP 추가 중... (Enter 저장 / Esc 취소)"})]})}),a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx("button",{onClick:Ie,className:"flex items-center gap-1 rounded bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 hover:bg-gray-200 transition-colors",title:A==="MASTER"?"첫 번째 CP로 스크롤":"첫 번째 작업으로 스크롤",children:"Focusing"}),a.jsx("div",{className:"flex rounded bg-gray-100 p-1",children:(A==="MASTER"?["WEEK","MONTH"]:["DAY","WEEK"]).map(S=>a.jsx("button",{onClick:()=>U(S),className:`rounded px-3 py-1 text-xs font-medium transition-colors ${ie===S?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:et[S].label},S))}),a.jsxs("div",{className:"text-sm text-gray-500",children:["기준일: ",de(new Date,"yyyy-MM-dd")]})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[O&&a.jsx("button",{onClick:O,disabled:!M||V==="saving",className:`flex items-center gap-1.5 rounded-md px-3 py-1.5 text-sm font-medium transition-colors ${M?"bg-blue-500 text-white hover:bg-blue-600 active:bg-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:V==="saving"?a.jsxs(a.Fragment,{children:[a.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[a.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),a.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"저장 중..."]}):a.jsxs(a.Fragment,{children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"저장"]})}),H&&a.jsxs("button",{onClick:H,className:"flex items-center gap-1.5 rounded-md bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-200 active:bg-gray-300",children:[a.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"초기화"]})]})]}),a.jsxs("div",{className:"relative flex flex-1 overflow-hidden",children:[a.jsx("div",{className:"z-10 flex shrink-0 flex-col bg-white",style:{width:Y},children:a.jsx(kt,{ref:$,tasks:Se,allTasks:e,viewMode:A,expandedIds:B,onToggle:he,onTaskClick:Wt,onTaskUpdate:l,onTaskCreate:g,onTaskReorder:m,onTaskGroup:v,onTaskUngroup:x,onTaskDelete:h,onTaskMove:D,activeCPId:q,virtualRows:_e,totalHeight:at,onTotalWidthChange:mt,isAddingTask:le,onCancelAddTask:ve,isAddingCP:ee,onCancelAddCP:Ge})}),a.jsx("div",{className:`z-20 w-1 shrink-0 cursor-col-resize transition-colors ${z?"bg-blue-500":"bg-gray-200 hover:bg-gray-300"}`,onMouseDown:gt,onDoubleClick:Mt,title:"드래그하여 너비 조절 / 더블클릭으로 초기화"}),a.jsx("div",{className:"relative flex flex-1 flex-col overflow-hidden bg-white",children:a.jsx(Nt,{ref:d,tasks:Se,milestones:n,viewMode:A,zoomLevel:ie,holidays:t,calendarSettings:r,onTaskUpdate:l,onBarDrag:yt,onMilestoneUpdate:N,onMilestoneDoubleClick:St,virtualRows:_e,totalHeight:at})}),z&&a.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"})]}),a.jsx(os,{milestone:J,isOpen:Ee,isNew:Pe,onClose:Ne,onSave:ht,onDelete:ft})]})}const Ts=50;function ce(e){if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Set)return new Set(Array.from(e).map(t=>ce(t)));if(e instanceof Map)return new Map(Array.from(e.entries()).map(([t,r])=>[ce(t),ce(r)]));if(Array.isArray(e))return e.map(t=>ce(t));const n={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=ce(e[t]));return n}function Os(e){const[n,t]=u.useState(()=>({past:[],present:ce(e),future:[]})),r=u.useRef(!1),s=u.useCallback(h=>{t(m=>{const v=typeof h=="function"?h(m.present):h;if(!r.current)return r.current=!0,{past:[],present:ce(v),future:[]};if(JSON.stringify(m.present)===JSON.stringify(v))return m;const x=[...m.past,ce(m.present)];return x.length>Ts&&x.shift(),{past:x,present:ce(v),future:[]}})},[]),i=u.useCallback(()=>{t(h=>{if(h.past.length===0)return h;const m=[...h.past],v=m.pop();return{past:m,present:v,future:[ce(h.present),...h.future]}})},[]),o=u.useCallback(()=>{t(h=>{if(h.future.length===0)return h;const m=[...h.future],v=m.shift();return{past:[...h.past,ce(h.present)],present:v,future:m}})},[]),l=u.useCallback(h=>{r.current=!1,t({past:[],present:ce(h),future:[]})},[]),g=u.useCallback(()=>{t(h=>({past:[],present:h.present,future:[]}))},[]);return{present:n.present,set:s,undo:i,redo:o,canUndo:n.past.length>0,canRedo:n.future.length>0,reset:l,clearHistory:g,historyLength:{past:n.past.length,future:n.future.length}}}F.GANTT_COLORS=we,F.GANTT_LAYOUT=ge,F.GanttChart=Cs,F.GanttSidebar=kt,F.GanttTimeline=Nt,F.ZOOM_CONFIG=et,F.addCalendarDays=jt,F.addWorkingDays=on,F.calculateDateRange=Et,F.calculateDualCalendarDates=qr,F.dateToX=Le,F.getAnchorDate=Kr,F.getDateRangeWidth=Ur,F.getPixelsPerDay=Jr,F.isHoliday=Te,F.isWeekend=Vr,F.subtractWorkingDays=Br,F.useGanttDrag=gs,F.useGanttExpansion=gn,F.useGanttSelection=ms,F.useGanttSidebar=yn,F.useGanttStore=Oe,F.useGanttViewActions=mn,F.useGanttViewState=fn,F.useGanttVirtualization=kn,F.useHistory=Os,F.xToDate=Qr,Object.defineProperty(F,Symbol.toStringTag,{value:"Module"})});
