(function(_,g){typeof exports=="object"&&typeof module<"u"?g(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],g):(_=typeof globalThis<"u"?globalThis:_||self,g(_.SaGanttLib={},_.React,_.ReactDOM))})(this,function(_,g,Ut){"use strict";"use client";function Kt(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:()=>e[t]})}}return n.default=e,Object.freeze(n)}const He=Kt(g);var Ue={exports:{}},Ne={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var at;function Qt(){if(at)return Ne;at=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var l in s)l!=="key"&&(a[l]=s[l])}else a=s;return s=a.ref,{$$typeof:e,type:r,key:i,ref:s!==void 0?s:null,props:a}}return Ne.Fragment=n,Ne.jsx=t,Ne.jsxs=t,Ne}var _e={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var it;function Jt(){return it||(it=1,process.env.NODE_ENV!=="production"&&function(){function e(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===I?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case W:return"Fragment";case O:return"Profiler";case P:return"StrictMode";case K:return"Suspense";case te:return"SuspenseList";case L:return"Activity"}if(typeof d=="object")switch(typeof d.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),d.$$typeof){case w:return"Portal";case $:return d.displayName||"Context";case S:return(d._context.displayName||"Context")+".Consumer";case Z:var D=d.render;return d=d.displayName,d||(d=D.displayName||D.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case k:return D=d.displayName||null,D!==null?D:e(d.type)||"Memo";case p:D=d._payload,d=d._init;try{return e(d(D))}catch{}}return null}function n(d){return""+d}function t(d){try{n(d);var D=!1}catch{D=!0}if(D){D=console;var z=D.error,H=typeof Symbol=="function"&&Symbol.toStringTag&&d[Symbol.toStringTag]||d.constructor.name||"Object";return z.call(D,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",H),n(d)}}function r(d){if(d===W)return"<>";if(typeof d=="object"&&d!==null&&d.$$typeof===p)return"<...>";try{var D=e(d);return D?"<"+D+">":"<...>"}catch{return"<...>"}}function s(){var d=Y.A;return d===null?null:d.getOwner()}function a(){return Error("react-stack-top-frame")}function i(d){if(C.call(d,"key")){var D=Object.getOwnPropertyDescriptor(d,"key").get;if(D&&D.isReactWarning)return!1}return d.key!==void 0}function l(d,D){function z(){ee||(ee=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",D))}z.isReactWarning=!0,Object.defineProperty(d,"key",{get:z,configurable:!0})}function u(){var d=e(this.type);return be[d]||(be[d]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),d=this.props.ref,d!==void 0?d:null}function h(d,D,z,H,R,ae){var F=z.ref;return d={$$typeof:b,type:d,key:D,props:z,_owner:H},(F!==void 0?F:null)!==null?Object.defineProperty(d,"ref",{enumerable:!1,get:u}):Object.defineProperty(d,"ref",{enumerable:!1,value:null}),d._store={},Object.defineProperty(d._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(d,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(d,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:R}),Object.defineProperty(d,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ae}),Object.freeze&&(Object.freeze(d.props),Object.freeze(d)),d}function f(d,D,z,H,R,ae){var F=D.children;if(F!==void 0)if(H)if(Q(F)){for(H=0;H<F.length;H++)v(F[H]);Object.freeze&&Object.freeze(F)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else v(F);if(C.call(D,"key")){F=e(d);var ie=Object.keys(D).filter(function(Te){return Te!=="key"});H=0<ie.length?"{key: someKey, "+ie.join(": ..., ")+": ...}":"{key: someKey}",me[F+H]||(ie=0<ie.length?"{"+ie.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,H,F,ie,F),me[F+H]=!0)}if(F=null,z!==void 0&&(t(z),F=""+z),i(D)&&(t(D.key),F=""+D.key),"key"in D){z={};for(var oe in D)oe!=="key"&&(z[oe]=D[oe])}else z=D;return F&&l(z,typeof d=="function"?d.displayName||d.name||"Unknown":d),h(d,F,z,s(),R,ae)}function v(d){x(d)?d._store&&(d._store.validated=1):typeof d=="object"&&d!==null&&d.$$typeof===p&&(d._payload.status==="fulfilled"?x(d._payload.value)&&d._payload.value._store&&(d._payload.value._store.validated=1):d._store&&(d._store.validated=1))}function x(d){return typeof d=="object"&&d!==null&&d.$$typeof===b}var y=g,b=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),S=Symbol.for("react.consumer"),$=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),te=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),I=Symbol.for("react.client.reference"),Y=y.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,C=Object.prototype.hasOwnProperty,Q=Array.isArray,re=console.createTask?console.createTask:function(){return null};y={react_stack_bottom_frame:function(d){return d()}};var ee,be={},ke=y.react_stack_bottom_frame.bind(y,a)(),fe=re(r(a)),me={};_e.Fragment=W,_e.jsx=function(d,D,z){var H=1e4>Y.recentlyCreatedOwnerStacks++;return f(d,D,z,!1,H?Error("react-stack-top-frame"):ke,H?re(r(d)):fe)},_e.jsxs=function(d,D,z){var H=1e4>Y.recentlyCreatedOwnerStacks++;return f(d,D,z,!0,H?Error("react-stack-top-frame"):ke,H?re(r(d)):fe)}}()),_e}process.env.NODE_ENV==="production"?Ue.exports=Qt():Ue.exports=Jt();var o=Ue.exports;const ot=6048e5,Zt=864e5,lt=Symbol.for("constructDateFrom");function ue(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&lt in e?e[lt](n):e instanceof Date?new e.constructor(n):new Date(n)}function U(e,n){return ue(n||e,e)}function V(e,n,t){const r=U(e,t==null?void 0:t.in);return isNaN(n)?ue(e,NaN):(n&&r.setDate(r.getDate()+n),r)}function ct(e,n){return U(e,n==null?void 0:n.in).getDay()===6}function dt(e,n){return U(e,n==null?void 0:n.in).getDay()===0}let en={};function Pe(){return en}function xe(e,n){var l,u,h,f;const t=Pe(),r=(n==null?void 0:n.weekStartsOn)??((u=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:u.weekStartsOn)??t.weekStartsOn??((f=(h=t.locale)==null?void 0:h.options)==null?void 0:f.weekStartsOn)??0,s=U(e,n==null?void 0:n.in),a=s.getDay(),i=(a<r?7:0)+a-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Ye(e,n){return xe(e,{...n,weekStartsOn:1})}function ut(e,n){const t=U(e,n==null?void 0:n.in),r=t.getFullYear(),s=ue(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Ye(s),i=ue(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=Ye(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function ht(e){const n=U(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function Ce(e,...n){const t=ue.bind(null,e||n.find(r=>typeof r=="object"));return n.map(t)}function Ie(e,n){const t=U(e,n==null?void 0:n.in);return t.setHours(0,0,0,0),t}function ft(e,n,t){const[r,s]=Ce(t==null?void 0:t.in,e,n),a=Ie(r),i=Ie(s),l=+a-ht(a),u=+i-ht(i);return Math.round((l-u)/Zt)}function tn(e,n){const t=ut(e,n),r=ue(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ye(r)}function nn(e,n,t){const[r,s]=Ce(t==null?void 0:t.in,e,n);return+Ie(r)==+Ie(s)}function rn(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function sn(e){return!(!rn(e)&&typeof e!="number"||isNaN(+U(e)))}function Ke(e,n,t){const[r,s]=Ce(t==null?void 0:t.in,e,n),a=mt(r,s),i=Math.abs(ft(r,s));r.setDate(r.getDate()-a*i);const l=+(mt(r,s)===-a),u=a*(i-l);return u===0?0:u}function mt(e,n){const t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function an(e,n){const t=U(e,n==null?void 0:n.in);return t.setDate(1),t.setHours(0,0,0,0),t}function on(e,n){const t=U(e,n==null?void 0:n.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const ln={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},cn=(e,n,t)=>{let r;const s=ln[e];return typeof s=="string"?r=s:n===1?r=s.one:r=s.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Qe(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const dn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},un={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},hn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},fn={date:Qe({formats:dn,defaultWidth:"full"}),time:Qe({formats:un,defaultWidth:"full"}),dateTime:Qe({formats:hn,defaultWidth:"full"})},mn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},gn=(e,n,t,r)=>mn[e];function Ae(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=t!=null&&t.width?String(t.width):i;s=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=t!=null&&t.width?String(t.width):e.defaultWidth;s=e.values[l]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(n):n;return s[a]}}const yn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},bn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},wn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},pn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},vn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},kn={ordinalNumber:(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:Ae({values:yn,defaultWidth:"wide"}),quarter:Ae({values:bn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ae({values:xn,defaultWidth:"wide"}),day:Ae({values:wn,defaultWidth:"wide"}),dayPeriod:Ae({values:pn,defaultWidth:"wide",formattingValues:vn,defaultFormattingWidth:"wide"})};function ze(e){return(n,t={})=>{const r=t.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=n.match(s);if(!a)return null;const i=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?En(l,v=>v.test(i)):Dn(l,v=>v.test(i));let h;h=e.valueCallback?e.valueCallback(u):u,h=t.valueCallback?t.valueCallback(h):h;const f=n.slice(i.length);return{value:h,rest:f}}}function Dn(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function En(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function Sn(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const s=r[0],a=n.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;const l=n.slice(s.length);return{value:i,rest:l}}}const Mn=/^(\d+)(th|st|nd|rd)?/i,Tn=/\d+/i,Wn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},jn={any:[/^b/i,/^(a|c)/i]},On={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Nn={any:[/1/i,/2/i,/3/i,/4/i]},_n={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Pn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Cn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},In={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},An={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},zn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Fn={ordinalNumber:Sn({matchPattern:Mn,parsePattern:Tn,valueCallback:e=>parseInt(e,10)}),era:ze({matchPatterns:Wn,defaultMatchWidth:"wide",parsePatterns:jn,defaultParseWidth:"any"}),quarter:ze({matchPatterns:On,defaultMatchWidth:"wide",parsePatterns:Nn,defaultParseWidth:"any",valueCallback:e=>e+1}),month:ze({matchPatterns:_n,defaultMatchWidth:"wide",parsePatterns:Pn,defaultParseWidth:"any"}),day:ze({matchPatterns:Cn,defaultMatchWidth:"wide",parsePatterns:In,defaultParseWidth:"any"}),dayPeriod:ze({matchPatterns:An,defaultMatchWidth:"any",parsePatterns:zn,defaultParseWidth:"any"})},Ln={code:"en-US",formatDistance:cn,formatLong:fn,formatRelative:gn,localize:kn,match:Fn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Rn(e,n){const t=U(e,n==null?void 0:n.in);return ft(t,on(t))+1}function Hn(e,n){const t=U(e,n==null?void 0:n.in),r=+Ye(t)-+tn(t);return Math.round(r/ot)+1}function gt(e,n){var f,v,x,y;const t=U(e,n==null?void 0:n.in),r=t.getFullYear(),s=Pe(),a=(n==null?void 0:n.firstWeekContainsDate)??((v=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:v.firstWeekContainsDate)??s.firstWeekContainsDate??((y=(x=s.locale)==null?void 0:x.options)==null?void 0:y.firstWeekContainsDate)??1,i=ue((n==null?void 0:n.in)||e,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const l=xe(i,n),u=ue((n==null?void 0:n.in)||e,0);u.setFullYear(r,0,a),u.setHours(0,0,0,0);const h=xe(u,n);return+t>=+l?r+1:+t>=+h?r:r-1}function Yn(e,n){var l,u,h,f;const t=Pe(),r=(n==null?void 0:n.firstWeekContainsDate)??((u=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:u.firstWeekContainsDate)??t.firstWeekContainsDate??((f=(h=t.locale)==null?void 0:h.options)==null?void 0:f.firstWeekContainsDate)??1,s=gt(e,n),a=ue((n==null?void 0:n.in)||e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),xe(a,n)}function $n(e,n){const t=U(e,n==null?void 0:n.in),r=+xe(t,n)-+Yn(t,n);return Math.round(r/ot)+1}function A(e,n){const t=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return t+r}const ye={y(e,n){const t=e.getFullYear(),r=t>0?t:1-t;return A(n==="yy"?r%100:r,n.length)},M(e,n){const t=e.getMonth();return n==="M"?String(t+1):A(t+1,2)},d(e,n){return A(e.getDate(),n.length)},a(e,n){const t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return A(e.getHours()%12||12,n.length)},H(e,n){return A(e.getHours(),n.length)},m(e,n){return A(e.getMinutes(),n.length)},s(e,n){return A(e.getSeconds(),n.length)},S(e,n){const t=n.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return A(s,n.length)}},De={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},yt={G:function(e,n,t){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return ye.y(e,n)},Y:function(e,n,t,r){const s=gt(e,r),a=s>0?s:1-s;if(n==="YY"){const i=a%100;return A(i,2)}return n==="Yo"?t.ordinalNumber(a,{unit:"year"}):A(a,n.length)},R:function(e,n){const t=ut(e);return A(t,n.length)},u:function(e,n){const t=e.getFullYear();return A(t,n.length)},Q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return A(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return A(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){const r=e.getMonth();switch(n){case"M":case"MM":return ye.M(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return A(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){const s=$n(e,r);return n==="wo"?t.ordinalNumber(s,{unit:"week"}):A(s,n.length)},I:function(e,n,t){const r=Hn(e);return n==="Io"?t.ordinalNumber(r,{unit:"week"}):A(r,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):ye.d(e,n)},D:function(e,n,t){const r=Rn(e);return n==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):A(r,n.length)},E:function(e,n,t){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return A(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return A(a,n.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,t){const r=e.getDay(),s=r===0?7:r;switch(n){case"i":return String(s);case"ii":return A(s,n.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){const s=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,t){const r=e.getHours();let s;switch(r===12?s=De.noon:r===0?s=De.midnight:s=r/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,t){const r=e.getHours();let s;switch(r>=17?s=De.evening:r>=12?s=De.afternoon:r>=4?s=De.morning:s=De.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return ye.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):ye.H(e,n)},K:function(e,n,t){const r=e.getHours()%12;return n==="Ko"?t.ordinalNumber(r,{unit:"hour"}):A(r,n.length)},k:function(e,n,t){let r=e.getHours();return r===0&&(r=24),n==="ko"?t.ordinalNumber(r,{unit:"hour"}):A(r,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):ye.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):ye.s(e,n)},S:function(e,n){return ye.S(e,n)},X:function(e,n,t){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return xt(r);case"XXXX":case"XX":return we(r);case"XXXXX":case"XXX":default:return we(r,":")}},x:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"x":return xt(r);case"xxxx":case"xx":return we(r);case"xxxxx":case"xxx":default:return we(r,":")}},O:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+bt(r,":");case"OOOO":default:return"GMT"+we(r,":")}},z:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+bt(r,":");case"zzzz":default:return"GMT"+we(r,":")}},t:function(e,n,t){const r=Math.trunc(+e/1e3);return A(r,n.length)},T:function(e,n,t){return A(+e,n.length)}};function bt(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?t+String(s):t+String(s)+n+A(a,2)}function xt(e,n){return e%60===0?(e>0?"-":"+")+A(Math.abs(e)/60,2):we(e,n)}function we(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),s=A(Math.trunc(r/60),2),a=A(r%60,2);return t+s+n+a}const wt=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},pt=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Gn={p:pt,P:(e,n)=>{const t=e.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return wt(e,n);let a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",wt(r,n)).replace("{{time}}",pt(s,n))}},Vn=/^D+$/,qn=/^Y+$/,Xn=["D","DD","YY","YYYY"];function Bn(e){return Vn.test(e)}function Un(e){return qn.test(e)}function Kn(e,n,t){const r=Qn(e,n,t);if(console.warn(r),Xn.includes(e))throw new RangeError(r)}function Qn(e,n,t){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Jn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Zn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,er=/^'([^]*?)'?$/,tr=/''/g,nr=/[a-zA-Z]/;function le(e,n,t){var f,v,x,y;const r=Pe(),s=r.locale??Ln,a=r.firstWeekContainsDate??((v=(f=r.locale)==null?void 0:f.options)==null?void 0:v.firstWeekContainsDate)??1,i=r.weekStartsOn??((y=(x=r.locale)==null?void 0:x.options)==null?void 0:y.weekStartsOn)??0,l=U(e,t==null?void 0:t.in);if(!sn(l))throw new RangeError("Invalid time value");let u=n.match(Zn).map(b=>{const w=b[0];if(w==="p"||w==="P"){const W=Gn[w];return W(b,s.formatLong)}return b}).join("").match(Jn).map(b=>{if(b==="''")return{isToken:!1,value:"'"};const w=b[0];if(w==="'")return{isToken:!1,value:rr(b)};if(yt[w])return{isToken:!0,value:b};if(w.match(nr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:b}});s.localize.preprocessor&&(u=s.localize.preprocessor(l,u));const h={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return u.map(b=>{if(!b.isToken)return b.value;const w=b.value;(Un(w)||Bn(w))&&Kn(w,n,String(e));const W=yt[w[0]];return W(l,w,s.localize,h)}).join("")}function rr(e){const n=e.match(er);return n?n[1].replace(tr,"'"):e}function sr(e,n){return U(e,n==null?void 0:n.in).getDate()}function $e(e,n){return U(e,n==null?void 0:n.in).getDay()}function vt(e,n){var u,h,f,v;const t=Pe(),r=(n==null?void 0:n.weekStartsOn)??((h=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:h.weekStartsOn)??t.weekStartsOn??((v=(f=t.locale)==null?void 0:f.options)==null?void 0:v.weekStartsOn)??0,s=sr(U(e,n==null?void 0:n.in));if(isNaN(s))return NaN;const a=$e(an(e,n));let i=r-a;i<=0&&(i+=7);const l=s-i;return Math.ceil(l/7)+1}function Je(e,n){return U(e,n==null?void 0:n.in).getFullYear()}function ar(e,n,t){const[r,s]=Ce(t==null?void 0:t.in,e,n);return+xe(r,t)==+xe(s,t)}function ir(e,n,t){const[r,s]=Ce(t==null?void 0:t.in,e,n);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),lr=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,r)=>r?r.toUpperCase():t.toLowerCase()),kt=e=>{const n=lr(e);return n.charAt(0).toUpperCase()+n.slice(1)},Dt=(...e)=>e.filter((n,t,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===t).join(" ").trim(),cr=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var dr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ur=g.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...l},u)=>g.createElement("svg",{ref:u,...dr,width:n,height:n,stroke:e,strokeWidth:r?Number(t)*24/Number(n):t,className:Dt("lucide",s),...!a&&!cr(l)&&{"aria-hidden":"true"},...l},[...i.map(([h,f])=>g.createElement(h,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(e,n)=>{const t=g.forwardRef(({className:r,...s},a)=>g.createElement(ur,{ref:a,iconNode:n,className:Dt(`lucide-${or(kt(e))}`,`lucide-${e}`,r),...s}));return t.displayName=kt(e),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hr=Fe("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=Fe("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=Fe("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=Fe("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gr=Fe("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ce={vermilion:"#E34234",teal:"#008080",red:"#FF5252",blue:"#448AFF",milestone:"#4B5563",dependency:"#9CA3AF",grid:"#E5E7EB",weekend:"#f3f4f6",holiday:"#fef2f2"},he={ROW_HEIGHT:40,HEADER_HEIGHT:80,MILESTONE_LANE_HEIGHT:40,BAR_HEIGHT:24,SIDEBAR_WIDTH:400,SIDEBAR_MIN_WIDTH:250,SIDEBAR_MAX_WIDTH:800},Le={DAY:{pixelsPerDay:30,label:"일"},WEEK:{pixelsPerDay:10,label:"주"},MONTH:{pixelsPerDay:2,label:"월"}},St=({x:e,y:n,taskId:t,selectedTaskIds:r,tasks:s,onTaskGroup:a,onTaskUngroup:i,onClose:l,onDeselect:u})=>{const h=()=>{r.size>=2&&a&&(a(Array.from(r)),l())},f=()=>{if(r.size===1&&i){const x=Array.from(r)[0],y=s.find(b=>b.id===x);(y==null?void 0:y.type)==="GROUP"&&(i(x),l())}},v=r.size===1&&(()=>{const x=Array.from(r)[0],y=s.find(b=>b.id===x);return(y==null?void 0:y.type)==="GROUP"})();return o.jsxs("div",{className:"fixed z-[100] min-w-[160px] rounded-lg border border-gray-200 bg-white py-1 shadow-lg",style:{left:e,top:n},onClick:x=>x.stopPropagation(),children:[r.size>=2&&a&&o.jsxs("button",{onClick:h,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"그룹화 (",r.size,"개 선택됨)"]}),v&&i&&o.jsxs("button",{onClick:f,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"그룹 해제"]}),o.jsxs("button",{onClick:()=>{u(),l()},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-500 hover:bg-gray-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"선택 해제"]})]})},{ROW_HEIGHT:Mt}=he,Ge={name:"",indirectWorkDaysPre:0,netWorkDays:1,indirectWorkDaysPost:0},yr=({columns:e,tasks:n,activeCPId:t,onTaskCreate:r,onCancel:s,isVirtualized:a=!1,virtualRowIndex:i})=>{const[l,u]=g.useState(Ge),h=g.useRef(null);g.useEffect(()=>{u(Ge),setTimeout(()=>{var b;(b=h.current)==null||b.focus()},0)},[]);const f=g.useCallback(()=>{u(Ge),s()},[s]),v=g.useCallback(async()=>{if(!(!l.name.trim()||!r||!t))try{const b=n[n.length-1],w=b?V(b.endDate,1):new Date,W=l.indirectWorkDaysPre+l.netWorkDays+l.indirectWorkDaysPost,P=V(w,Math.max(W-1,0)),O={id:`task-${Date.now()}`,parentId:t,wbsLevel:2,type:"TASK",name:l.name.trim(),startDate:w,endDate:P,task:{netWorkDays:l.netWorkDays,indirectWorkDaysPre:l.indirectWorkDaysPre,indirectWorkDaysPost:l.indirectWorkDaysPost},dependencies:[]};await r(O),u(Ge),s()}catch(b){console.error("Failed to create task:",b),alert("태스크 생성 중 오류가 발생했습니다.")}},[l,r,t,n,s]),x=g.useCallback(b=>{b.key==="Enter"?(b.preventDefault(),v()):b.key==="Escape"&&(b.preventDefault(),f())},[v,f]),y=a&&i!==void 0?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${n.length*Mt}px)`}:{};return o.jsxs("div",{className:"box-border flex items-center border-b-2 border-blue-300 bg-blue-50 transition-colors",style:{height:Mt,...y},children:[o.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-blue-200 px-2",style:{width:e[0].width},children:o.jsx("input",{ref:h,type:"text",placeholder:"공정명...",className:"w-full rounded border border-blue-300 bg-white px-2 py-1 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.name,onChange:b=>u(w=>({...w,name:b.target.value})),onKeyDown:x})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[1].width},children:o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.indirectWorkDaysPre,onChange:b=>{const w=b.target.value.replace(/[^0-9]/g,""),W=parseInt(w)||0;u(P=>({...P,indirectWorkDaysPre:W}))},onKeyDown:x,title:"선 간접작업일"})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[2].width},children:o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.netWorkDays,onChange:b=>{const w=b.target.value.replace(/[^0-9]/g,""),W=parseInt(w)||0;u(P=>({...P,netWorkDays:W}))},onKeyDown:x,title:"순작업일"})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[3].width},children:o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.indirectWorkDaysPost,onChange:b=>{const w=b.target.value.replace(/[^0-9]/g,""),W=parseInt(w)||0;u(P=>({...P,indirectWorkDaysPost:W}))},onKeyDown:x,title:"후 간접작업일"})}),o.jsxs("div",{className:"flex shrink-0 items-center justify-center gap-1 px-2",style:{width:e[4].width+e[5].width},children:[o.jsx("button",{onClick:v,disabled:!l.name.trim(),className:"flex items-center justify-center rounded bg-blue-500 p-1.5 text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",title:"저장 (Enter)",children:o.jsx(hr,{size:14})}),o.jsx("button",{onClick:f,className:"flex items-center justify-center rounded bg-gray-400 p-1.5 text-white hover:bg-gray-500 transition-colors",title:"취소 (Esc)",children:o.jsx(gr,{size:14})})]})]})},{ROW_HEIGHT:Ee,HEADER_HEIGHT:Tt,MILESTONE_LANE_HEIGHT:Wt}=he,jt=[{id:"name",label:"CP명",width:180,minWidth:100},{id:"total",label:"총 공기",width:80,minWidth:50},{id:"workDays",label:"작업일수",width:80,minWidth:50},{id:"nonWorkDays",label:"비작업일수",width:80,minWidth:50}],Ot=[{id:"name",label:"단위공정명",width:150,minWidth:80},{id:"indirectPre",label:"선간접",width:60,minWidth:45},{id:"netWork",label:"순작업",width:60,minWidth:45},{id:"indirectPost",label:"후간접",width:60,minWidth:45},{id:"startDate",label:"시작일",width:90,minWidth:70},{id:"endDate",label:"종료일",width:90,minWidth:70}],Ze=g.forwardRef(({tasks:e,allTasks:n,viewMode:t,expandedIds:r,onToggle:s,onTaskClick:a,onTaskUpdate:i,onTaskCreate:l,onTaskReorder:u,activeCPId:h,virtualRows:f,totalHeight:v,onTotalWidthChange:x,onTaskGroup:y,onTaskUngroup:b,isAddingTask:w=!1,onCancelAddTask:W},P)=>{const O=f&&f.length>0,[S,$]=g.useState(null),[Z,K]=g.useState(null),[te,k]=g.useState(null),[p,L]=g.useState(new Set),[I,Y]=g.useState(null),[C,Q]=g.useState(null),[re,ee]=g.useState(jt.map(m=>m.width)),[be,ke]=g.useState(Ot.map(m=>m.width)),[fe,me]=g.useState(null),d=g.useRef(!1),D=t==="MASTER"?jt:Ot,z=t==="MASTER"?re:be,H=t==="MASTER"?ee:ke,R=g.useMemo(()=>D.map((m,c)=>({...m,width:z[c]??m.width})),[D,z]),ae=u?24:0,F=R.reduce((m,c)=>m+c.width,0)+ae;g.useEffect(()=>{x&&x(F)},[F,x]);const ie=g.useCallback((m,c)=>{if(m.detail>=2)return;m.preventDefault(),m.stopPropagation(),d.current=!0,me(c);const T=m.clientX,X=z[c],B=D[c].minWidth,M=G=>{if(!d.current)return;const ge=G.clientX-T,q=Math.max(B,X+ge);H(Bt=>{const Be=[...Bt];return Be[c]=q,Be})},N=()=>{d.current=!1,me(null),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",N)},[z,D,H]),oe=g.useCallback((m,c=12,T="normal")=>{const B=document.createElement("canvas").getContext("2d");return B?(B.font=`${T} ${c}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,B.measureText(m).width):0},[]),Te=g.useCallback(m=>{const c=D[m].minWidth,T=m===0,X=T?48:20,B=D[m].label;let M=oe(B,12,"500")+16;return e.forEach(N=>{let G="",ge=0;if(t==="MASTER"){const st=N.type==="GROUP";switch(T&&N.parentId&&(ge=20),m){case 0:G=N.name;break;case 1:G=st?"-":N.cp?`${N.cp.workDaysTotal+N.cp.nonWorkDaysTotal}일`:"-";break;case 2:G=st?"-":N.cp?`${N.cp.workDaysTotal}일`:"-";break;case 3:G=st?"-":N.cp?`${N.cp.nonWorkDaysTotal}일`:"-";break}}else switch(m){case 0:G=N.name;break;case 1:G=N.task?String(N.task.indirectWorkDaysPre):"-";break;case 2:G=N.task?String(N.task.netWorkDays):"-";break;case 3:G=N.task?String(N.task.indirectWorkDaysPost):"-";break;case 4:G=le(N.startDate,"yyyy-MM-dd");break;case 5:G=le(N.endDate,"yyyy-MM-dd");break}const Be=oe(G,T?14:12,T?"500":"normal")+X+ge;M=Math.max(M,Be)}),Math.max(c,Math.ceil(M))},[e,t,D,oe]),rt=g.useCallback((m,c)=>{m.preventDefault(),m.stopPropagation(),d.current=!1,me(null);const T=Te(c);H(X=>{const B=[...X];return B[c]=T,B})},[Te,H]),Re=g.useCallback((m,c,T)=>{if(!m.task||!i)return;const X={...m,task:{...m.task,[c]:T}};i(X)},[i]),We=g.useCallback((m,c)=>{m.dataTransfer.effectAllowed="move",m.dataTransfer.setData("text/plain",c),$(c);const T=document.createElement("div");T.style.opacity="0",document.body.appendChild(T),m.dataTransfer.setDragImage(T,0,0),setTimeout(()=>document.body.removeChild(T),0)},[]),je=g.useCallback((m,c)=>{if(m.preventDefault(),m.dataTransfer.dropEffect="move",c===S)return;const T=m.currentTarget.getBoundingClientRect(),X=T.top+T.height/2,B=m.clientY<X?"before":"after";K(c),k(B)},[S]),Oe=g.useCallback(()=>{K(null),k(null)},[]),qe=g.useCallback((m,c)=>{if(m.preventDefault(),!S||!u||S===c){$(null),K(null),k(null);return}const T=e.findIndex(B=>B.id===c),X=te==="after"?T+1:T;u(S,X),$(null),K(null),k(null)},[S,te,u,e]),Xe=g.useCallback(()=>{$(null),K(null),k(null)},[]),E=g.useCallback((m,c,T)=>{if(S)return;const X=m.ctrlKey||m.metaKey,B=m.shiftKey;if(X)L(M=>{const N=new Set(M);return N.has(c.id)?N.delete(c.id):N.add(c.id),N}),Y(T);else if(B&&I!==null){const M=Math.min(I,T),N=Math.max(I,T);L(G=>{const ge=new Set(G);for(let q=M;q<=N;q++)e[q]&&ge.add(e[q].id);return ge})}else L(new Set([c.id])),Y(T)},[S,I,e]),j=g.useCallback((m,c)=>{m.preventDefault(),p.has(c.id)||L(new Set([c.id])),Q({x:m.clientX,y:m.clientY,taskId:c.id})},[p]);g.useEffect(()=>{const m=()=>{Q(null)};if(C)return document.addEventListener("click",m),()=>document.removeEventListener("click",m)},[C]),g.useEffect(()=>{const m=c=>{c.key==="Escape"&&(L(new Set),Q(null))};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[]);const J=()=>o.jsx("div",{className:"flex h-[32px] border-t border-gray-200",children:R.map((m,c)=>o.jsxs("div",{className:"relative flex shrink-0 items-center justify-center text-xs font-medium text-gray-600",style:{width:m.width},children:[m.label,c<R.length-1&&o.jsx("div",{className:`absolute right-0 top-0 z-10 h-full w-[5px] cursor-col-resize transition-colors ${fe===c?"bg-blue-500":"hover:bg-blue-300"}`,style:{transform:"translateX(50%)"},onMouseDown:T=>ie(T,c),onDoubleClick:T=>rt(T,c),title:"드래그하여 컬럼 너비 조절 / 더블클릭으로 내용에 맞게 자동 조절"}),c<R.length-1&&o.jsx("div",{className:"absolute right-0 top-0 h-full w-px bg-gray-200"})]},m.id))});return t==="MASTER"?o.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[o.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:Tt},children:[o.jsx("div",{className:"flex flex-1 items-center px-4 font-bold text-gray-700",children:"공구 공정표 (Level 1)"}),J()]}),fe!==null&&o.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),o.jsxs("div",{ref:P,className:"relative flex-1 overflow-auto",children:[o.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:Wt,minWidth:F},children:R.map((m,c)=>o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:m.width},children:c===0&&"Milestone"},m.id))}),o.jsx("div",{style:{minWidth:F,height:O?v:void 0,position:"relative"},children:(O?f:e.map((m,c)=>({index:c,start:c*Ee,size:Ee,key:c}))).map(m=>{const c=e[m.index];if(!c)return null;const T=c.type==="GROUP",X=T&&n.some(q=>q.parentId===c.id),B=r.has(c.id),M=c.parentId?20:0,N=S===c.id,G=Z===c.id,ge=p.has(c.id);return o.jsxs("div",{draggable:!!u,onDragStart:q=>We(q,c.id),onDragOver:q=>je(q,c.id),onDragLeave:Oe,onDrop:q=>qe(q,c.id),onDragEnd:Xe,onClick:q=>E(q,c,m.index),onContextMenu:q=>j(q,c),className:`box-border flex items-center border-b transition-all duration-150 ${N?"opacity-50 bg-blue-50":G?te==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":"border-b-2 border-b-blue-500":ge?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":T?"bg-gray-50 border-gray-100 hover:bg-gray-100":"border-gray-100 cursor-pointer hover:bg-blue-50 hover:shadow-[inset_0_0_0_1px_rgba(59,130,246,0.3)]"}`,style:{height:Ee,...O?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${m.start}px)`}:{}},onDoubleClick:()=>!T&&a(c),title:T?void 0:"더블클릭하여 상세 공정표 보기",children:[u&&o.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:o.jsx(Et,{size:14})}),o.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:u?R[0].width-24:R[0].width,paddingLeft:M+8},children:[X?o.jsx("button",{onClick:q=>{q.stopPropagation(),s(c.id)},className:"mr-1 shrink-0 rounded p-1 text-gray-500 hover:bg-gray-200",children:B?o.jsx(fr,{size:14}):o.jsx(mr,{size:14})}):o.jsx("div",{className:"w-6 shrink-0"}),o.jsx("span",{className:`truncate text-sm ${T?"font-bold text-gray-700":"font-medium text-gray-800"}`,children:c.name})]}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:R[1].width},children:T?"-":c.cp?`${c.cp.workDaysTotal+c.cp.nonWorkDaysTotal}일`:"-"}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-vermilion",style:{width:R[2].width},children:T?"-":c.cp?`${c.cp.workDaysTotal}일`:"-"}),o.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-teal",style:{width:R[3].width},children:T?"-":c.cp?`${c.cp.nonWorkDaysTotal}일`:"-"})]},m.key)})})]}),C&&o.jsx(St,{x:C.x,y:C.y,taskId:C.taskId,selectedTaskIds:p,tasks:e,onTaskGroup:y,onTaskUngroup:b,onClose:()=>Q(null),onDeselect:()=>L(new Set)})]}):o.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[o.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:Tt},children:[o.jsx("div",{className:"flex flex-1 items-center px-4",children:o.jsx("span",{className:"font-bold text-gray-700",children:"주공정표 (Level 2)"})}),J()]}),fe!==null&&o.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),o.jsxs("div",{ref:P,className:"relative flex-1 overflow-auto",children:[o.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:Wt,minWidth:F},children:R.map((m,c)=>o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:m.width},children:c===0&&"Milestone"},m.id))}),o.jsxs("div",{style:{minWidth:F,height:O?v:void 0,position:"relative"},children:[(O?f:e.map((m,c)=>({index:c,start:c*Ee,size:Ee,key:c}))).map(m=>{const c=e[m.index];if(!c)return null;const T=S===c.id,X=Z===c.id,B=p.has(c.id);return o.jsxs("div",{draggable:!!u,onDragStart:M=>We(M,c.id),onDragOver:M=>je(M,c.id),onDragLeave:Oe,onDrop:M=>qe(M,c.id),onDragEnd:Xe,onClick:M=>E(M,c,m.index),onContextMenu:M=>j(M,c),className:`box-border flex items-center border-b transition-colors ${T?"opacity-50 bg-blue-50":X?te==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":"border-b-2 border-b-blue-500":B?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":"border-gray-100 hover:bg-gray-50"}`,style:{height:Ee,...O?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${m.start}px)`}:{}},children:[u&&o.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:o.jsx(Et,{size:14})}),o.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:u?R[0].width-24:R[0].width},children:o.jsx("span",{className:"truncate text-sm text-gray-700",children:c.name})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:R[1].width},children:c.task?o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:c.task.indirectWorkDaysPre,onChange:M=>{const N=M.target.value.replace(/[^0-9]/g,""),G=parseInt(N)||0;Re(c,"indirectWorkDaysPre",G)},onKeyDown:M=>{(M.key==="-"||M.key==="e"||M.key==="+"||M.key===".")&&M.preventDefault()},title:"선 간접작업일 (바 드래그로도 조절 가능)"}):o.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:R[2].width},children:c.task?o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-red-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-red-500 focus:outline-none focus:ring-1 focus:ring-red-500",value:c.task.netWorkDays,onChange:M=>{const N=M.target.value.replace(/[^0-9]/g,""),G=parseInt(N)||0;Re(c,"netWorkDays",G)},onKeyDown:M=>{(M.key==="-"||M.key==="e"||M.key==="+"||M.key===".")&&M.preventDefault()},title:"순작업일"}):o.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:R[3].width},children:c.task?o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:c.task.indirectWorkDaysPost,onChange:M=>{const N=M.target.value.replace(/[^0-9]/g,""),G=parseInt(N)||0;Re(c,"indirectWorkDaysPost",G)},onKeyDown:M=>{(M.key==="-"||M.key==="e"||M.key==="+"||M.key===".")&&M.preventDefault()},title:"후 간접작업일 (바 드래그로도 조절 가능)"}):o.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:R[4].width},children:le(c.startDate,"yyyy-MM-dd")}),o.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-gray-500",style:{width:R[5].width},children:le(c.endDate,"yyyy-MM-dd")})]},m.key)}),w&&h&&o.jsx(yr,{columns:R,tasks:e,activeCPId:h,onTaskCreate:l,onCancel:W||(()=>{}),isVirtualized:O,virtualRowIndex:e.length})]})]}),C&&o.jsx(St,{x:C.x,y:C.y,taskId:C.taskId,selectedTaskIds:p,tasks:e,onTaskGroup:y,onTaskUngroup:b,onClose:()=>Q(null),onDeselect:()=>L(new Set)})]})});Ze.displayName="GanttSidebar";const pe=(e,n=[],t)=>!!(!t.workOnSaturdays&&ct(e)||!t.workOnSundays&&dt(e)||!t.workOnHolidays&&n.some(r=>nn(r,e))),br=e=>ct(e)||dt(e),Nt=(e,n,t=[],r)=>{let s=new Date(e),a=0;if(n<=0)return s;for(;pe(s,t,r);)s=V(s,1);for(;a<n;)pe(s,t,r)||a++,a<n&&(s=V(s,1));return s},xr=(e,n,t=[],r)=>{let s=new Date(e),a=0;if(n<=0)return s;for(;a<n;)s=V(s,-1),pe(s,t,r)||a++;return s},et=(e,n)=>n<=0?e:V(e,n-1),wr=(e,n=[],t)=>{if(!e.task)return{startDate:e.startDate,endDate:e.endDate,netWorkStartDate:e.startDate,netWorkEndDate:e.endDate};const{netWorkDays:r,indirectWorkDaysPre:s,indirectWorkDaysPost:a}=e.task,i=Ie(new Date(e.startDate));let l=i,u,h;s>0&&(u=l,h=et(l,s),l=V(h,1));let f=l,v=f;if(r>0){for(;pe(f,n,t);)f=V(f,1);v=Nt(f,r,n,t),l=V(v,1)}else s===0&&(f=i,v=i);let x,y;return a>0&&(x=l,y=et(l,a)),{startDate:u||f,endDate:y||v,netWorkStartDate:f,netWorkEndDate:v,indirectPreStartDate:u,indirectPreEndDate:h,indirectPostStartDate:x,indirectPostEndDate:y}},pr=(e,n,t)=>{switch(n){case"START":return t.startDate;case"NET_WORK_START":return t.netWorkStartDate;case"NET_WORK_END":return t.netWorkEndDate;case"END":return t.endDate;default:return t.endDate}},Ve=(e,n,t)=>Ke(e,n)*t,vr=(e,n,t)=>{const r=Math.round(e/t);return V(n,r)},kr=(e,n,t)=>(Ke(n,e)+1)*t,Dr=e=>Le[e].pixelsPerDay,tt=(e,n=[],t=5)=>{const r=[...e.flatMap(h=>[h.startDate,h.endDate].filter(Boolean)),...n.map(h=>h.date)];if(r.length===0){const h=new Date;return{minDate:h,maxDate:V(h,30),totalDays:30}}const s=new Date(Math.min(...r.map(h=>h.getTime()))),a=new Date(Math.max(...r.map(h=>h.getTime()))),i=V(s,-t),l=V(a,t),u=Ke(l,i);return{minDate:i,maxDate:l,totalDays:u}},{ROW_HEIGHT:se,HEADER_HEIGHT:Er,MILESTONE_LANE_HEIGHT:de,BAR_HEIGHT:ne}=he,Sr=({minDate:e,totalDays:n,pixelsPerDay:t,zoomLevel:r,holidays:s,calendarSettings:a})=>{const i=Array.from({length:n},(x,y)=>V(e,y)),l=n*t,u=g.useMemo(()=>{const x=[];let y=Je(i[0]),b=0;return i.forEach(w=>{Je(w)!==y?(x.push({label:`${y}년`,days:b}),y=Je(w),b=1):b++}),x.push({label:`${y}년`,days:b}),x},[i]),h=g.useMemo(()=>{const x=[];let y=i[0],b=0;return i.forEach(w=>{ir(w,y)?b++:(x.push({label:le(y,"M월"),days:b}),y=w,b=1)}),x.push({label:le(y,"M월"),days:b}),x},[i]),f=g.useMemo(()=>{if(r==="MONTH")return null;if(r==="DAY")return o.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:l},children:i.map((x,y)=>{const b=$e(x),w=pe(x,s,a),W=b===0,P=b===6;let O="text-gray-600";W&&(O="text-red-500"),P&&(O="text-blue-500"),w&&!W&&!P&&(O="text-red-500");let S="";return W||w&&!P?S="bg-red-50/50":P&&(S="bg-blue-50/50"),o.jsxs("div",{className:`flex h-full shrink-0 flex-col items-center justify-center border-r border-gray-100 font-medium ${S}`,style:{width:t,minWidth:t},children:[o.jsx("span",{className:`text-[10px] leading-none ${O}`,children:le(x,"d")}),o.jsx("span",{className:`mt-0.5 text-[9px] font-bold leading-none ${O}`,children:["일","월","화","수","목","금","토"][b]})]},y)})});{const x=[];let y=i[0],b=0;return i.forEach(w=>{ar(w,y,{weekStartsOn:0})?b++:(x.push({label:`${vt(y,{weekStartsOn:0})}주`,days:b}),y=w,b=1)}),x.push({label:`${vt(y,{weekStartsOn:0})}주`,days:b}),o.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:l},children:x.map((w,W)=>o.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-100 text-xs font-medium text-gray-600",style:{width:w.days*t},children:w.label},W))})}},[i,r,t,s,a,l]),v=r==="MONTH";return o.jsx("div",{className:"sticky top-0 z-20 flex flex-col border-b border-gray-300 bg-white shadow-sm",style:{height:Er,minWidth:l},children:v?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex h-[48px] items-center border-b border-gray-300 bg-gray-100 text-sm font-bold text-gray-800",style:{minWidth:l},children:u.map((x,y)=>o.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-300",style:{width:x.days*t},children:x.label},y))}),o.jsx("div",{className:"flex h-[32px] items-center bg-white text-xs font-medium text-gray-700",style:{minWidth:l},children:h.map((x,y)=>o.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-200",style:{width:x.days*t},children:x.label},y))})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-300 bg-gray-100 text-xs font-bold text-gray-800",style:{minWidth:l},children:u.map((x,y)=>o.jsx("div",{className:"flex shrink-0 items-center border-r border-gray-300 pl-2",style:{width:x.days*t},children:x.label},y))}),o.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-200 bg-gray-100 text-xs font-medium text-gray-700",style:{minWidth:l},children:h.map((x,y)=>o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-300",style:{width:x.days*t},children:x.label},y))}),f]})})},Mr=({minDate:e,totalDays:n,chartHeight:t,pixelsPerDay:r,holidays:s,calendarSettings:a,zoomLevel:i})=>{const l=g.useMemo(()=>{if(i==="MONTH")return[];const u=[];for(let h=0;h<n;h++){const f=V(e,h),v=$e(f),x=v===0,y=v===6;if(pe(f,s,a)||y){const w=h*r;let W="rgba(254, 242, 242, 0.5)";y&&!x&&(W="rgba(239, 246, 255, 0.5)"),x&&(W="rgba(254, 242, 242, 0.5)"),u.push(o.jsx("rect",{x:w,y:0,width:r,height:t,fill:W,className:"pointer-events-none"},`weekend-${h}`))}}return u},[e,n,t,r,s,a,i]);return o.jsx("g",{children:l})},Tr=({milestone:e,x:n})=>{const r=de/2;return o.jsxs("g",{transform:`translate(${n}, ${r})`,className:"group cursor-pointer",children:[o.jsx("line",{x1:0,y1:0,x2:0,y2:1e3,stroke:ce.grid,strokeWidth:2,strokeDasharray:"4, 4",className:"opacity-100"}),o.jsx("path",{d:`M ${-12/2} ${-12/2} L ${12/2} ${-12/2} L 0 ${12/2} Z`,fill:ce.milestone,stroke:"white",strokeWidth:1,className:"drop-shadow-sm transition-all duration-150 group-hover:opacity-0 group-hover:scale-0"}),o.jsx("circle",{cx:0,cy:0,r:12/2,fill:"#3B82F6",stroke:"white",strokeWidth:2,className:"drop-shadow-sm opacity-0 scale-0 transition-all duration-150 group-hover:opacity-100 group-hover:scale-100"}),o.jsx("text",{x:-8,y:4,textAnchor:"end",className:"select-none text-[11px] font-bold fill-gray-600 transition-colors group-hover:fill-blue-700",children:e.name})]})},Wr=({task:e,y:n,minDate:t,pixelsPerDay:r,isMasterView:s,isDraggable:a=!1,dragInfo:i,onDragStart:l})=>{var y,b;if(e.type==="GROUP")return null;const u=4,h=!!i,f=(i==null?void 0:i.startDate)||e.startDate,v=(i==null?void 0:i.endDate)||e.endDate,x=Ve(f,t,r);if(s){const w=((y=e.cp)==null?void 0:y.workDaysTotal)||0,W=((b=e.cp)==null?void 0:b.nonWorkDaysTotal)||0;if(w+W===0)return null;const O=w*r,S=W*r;return o.jsxs("g",{transform:`translate(${x}, ${n})`,className:"group cursor-pointer",children:[o.jsx("rect",{x:0,y:0,width:O,height:ne,fill:ce.vermilion,rx:u,ry:u,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),o.jsx("rect",{x:O,y:0,width:S,height:ne,fill:ce.teal,rx:u,ry:u,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),o.jsx("text",{x:-8,y:ne/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-bold fill-gray-700",children:e.name})]})}else{if(!e.task)return null;const{netWorkDays:w,indirectWorkDaysPre:W,indirectWorkDaysPost:P}=e.task,O=(i==null?void 0:i.indirectWorkDaysPre)??W,S=(i==null?void 0:i.indirectWorkDaysPost)??P,$=O*r,Z=w*r,K=S*r,te=$+Z+K,k=0,p=$,L=$+Z,I=8,Y={startDate:f,endDate:v,indirectWorkDaysPre:O,netWorkDays:w,indirectWorkDaysPost:S};return o.jsxs("g",{transform:`translate(${x}, ${n})`,className:`group ${h?"opacity-90":""}`,children:[a&&o.jsx("rect",{x:$,y:0,width:Z,height:ne,fill:"transparent",className:"cursor-grab active:cursor-grabbing",onMouseDown:C=>l==null?void 0:l(C,e.id,"move",Y)}),O>0&&o.jsx("rect",{x:k,y:0,width:$,height:ne,fill:ce.blue,rx:u,ry:u,className:`drop-shadow-sm transition-opacity ${h?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),w>0&&o.jsx("rect",{x:p,y:0,width:Z,height:ne,fill:ce.red,rx:u,ry:u,className:`drop-shadow-sm transition-opacity ${h?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),S>0&&o.jsx("rect",{x:L,y:0,width:K,height:ne,fill:ce.blue,rx:u,ry:u,className:`drop-shadow-sm transition-opacity ${h?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),a&&o.jsx("rect",{x:-I/2,y:0,width:I,height:ne,fill:"transparent",className:"cursor-ew-resize",onMouseDown:C=>l==null?void 0:l(C,e.id,"resize-pre",Y),children:o.jsx("title",{children:"앞 간접작업일 조절 (드래그)"})}),a&&o.jsx("rect",{x:te-I/2,y:0,width:I,height:ne,fill:"transparent",className:"cursor-ew-resize",onMouseDown:C=>l==null?void 0:l(C,e.id,"resize-post",Y),children:o.jsx("title",{children:"뒤 간접작업일 조절 (드래그)"})}),a&&o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:1,y:ne/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"}),o.jsx("rect",{x:te-4,y:ne/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"})]}),o.jsx("text",{x:-8,y:ne/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-medium fill-gray-700",children:e.name}),h&&o.jsxs("g",{children:[o.jsxs("text",{x:te/2,y:-6,textAnchor:"middle",className:"pointer-events-none select-none text-[10px] font-bold fill-blue-600",children:[le(f,"MM/dd")," ~ ",le(v,"MM/dd")]}),o.jsxs("text",{x:te/2,y:ne+12,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-gray-500",children:["앞",O,"일 + 순",w,"일 + 뒤",S,"일"]})]})]})}},jr=()=>o.jsx("defs",{children:o.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:o.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:ce.dependency})})}),nt=g.forwardRef(({tasks:e,milestones:n,viewMode:t,zoomLevel:r,holidays:s,calendarSettings:a,onBarDrag:i,virtualRows:l,totalHeight:u},h)=>{const f=Le[r].pixelsPerDay,v=t==="MASTER",x=l&&l.length>0,[y,b]=g.useState(null),{minDate:w,totalDays:W}=g.useMemo(()=>tt(e,n,60),[e,n]),P=W*f,O=Math.max(x?(u||0)+de+100:e.length*se+de+100,500),S=g.useRef(null);g.useEffect(()=>{S.current=y},[y]);const $=g.useCallback((k,p,L,I)=>{if(!i)return;k.preventDefault(),k.stopPropagation();const Y={taskId:p,dragType:L,startX:k.clientX,originalStartDate:I.startDate,originalEndDate:I.endDate,originalIndirectWorkDaysPre:I.indirectWorkDaysPre,originalNetWorkDays:I.netWorkDays,originalIndirectWorkDaysPost:I.indirectWorkDaysPost,currentStartDate:I.startDate,currentEndDate:I.endDate,currentIndirectWorkDaysPre:I.indirectWorkDaysPre,currentIndirectWorkDaysPost:I.indirectWorkDaysPost};b(Y),S.current=Y},[i]),Z=g.useCallback(k=>{const p=S.current;if(!p||!i)return;const L=k.clientX-p.startX,I=Math.round(L/f);let Y=p.originalStartDate,C=p.originalEndDate,Q=p.originalIndirectWorkDaysPre,re=p.originalIndirectWorkDaysPost;if(p.dragType==="move")Y=V(p.originalStartDate,I),C=V(p.originalEndDate,I);else if(p.dragType==="resize-pre"){Q=Math.max(0,p.originalIndirectWorkDaysPre-I);const ee=V(p.originalStartDate,p.originalIndirectWorkDaysPre);Y=V(ee,-Q),C=p.originalEndDate}else if(p.dragType==="resize-post"){re=Math.max(0,p.originalIndirectWorkDaysPost+I);const ee=V(p.originalEndDate,-p.originalIndirectWorkDaysPost);C=V(ee,re),Y=p.originalStartDate}b(ee=>ee?{...ee,currentStartDate:Y,currentEndDate:C,currentIndirectWorkDaysPre:Q,currentIndirectWorkDaysPost:re}:null)},[i,f]),K=g.useCallback(()=>{const k=S.current;if(!k||!i){b(null),S.current=null;return}const p=k.currentStartDate.getTime()!==k.originalStartDate.getTime()||k.currentEndDate.getTime()!==k.originalEndDate.getTime(),L=k.currentIndirectWorkDaysPre!==k.originalIndirectWorkDaysPre||k.currentIndirectWorkDaysPost!==k.originalIndirectWorkDaysPost;(p||L)&&i({taskId:k.taskId,dragType:k.dragType,newStartDate:k.currentStartDate,newEndDate:k.currentEndDate,newIndirectWorkDaysPre:k.currentIndirectWorkDaysPre,newIndirectWorkDaysPost:k.currentIndirectWorkDaysPost}),b(null),S.current=null},[i]);g.useEffect(()=>{if(y)return window.addEventListener("mousemove",Z),window.addEventListener("mouseup",K),document.body.style.cursor=y.dragType==="move"?"grabbing":"ew-resize",document.body.style.userSelect="none",()=>{window.removeEventListener("mousemove",Z),window.removeEventListener("mouseup",K),document.body.style.cursor="",document.body.style.userSelect=""}},[y,Z,K]);const te=g.useCallback(k=>y&&y.taskId===k?{startDate:y.currentStartDate,endDate:y.currentEndDate,indirectWorkDaysPre:y.currentIndirectWorkDaysPre,indirectWorkDaysPost:y.currentIndirectWorkDaysPost}:null,[y]);return o.jsx("div",{className:"flex h-full w-full flex-col overflow-hidden bg-white",children:o.jsxs("div",{ref:h,className:"relative flex-1 overflow-auto",children:[o.jsx(Sr,{minDate:w,totalDays:W,pixelsPerDay:f,zoomLevel:r,holidays:s,calendarSettings:a}),o.jsxs("svg",{width:P,height:O,className:"block bg-white",children:[o.jsx(jr,{}),o.jsx(Mr,{minDate:w,totalDays:W,chartHeight:O,pixelsPerDay:f,holidays:s,calendarSettings:a,zoomLevel:r}),(x?l:e.map((k,p)=>({index:p,start:p*se,size:se,key:p}))).map(k=>{const p=e[k.index];if(!p||p.type!=="GROUP")return null;const L=k.start+de;return o.jsx("rect",{x:0,y:L,width:P,height:se,fill:"rgba(249, 250, 251, 0.6)",className:"pointer-events-none"},`group-bg-${k.key}`)}),Array.from({length:W},(k,p)=>{const L=(p+1)*f,I=V(w,p),Y=$e(I);let C=!1,Q="#f0f0f0";return r==="DAY"?(C=!0,Q=Y===0?"#e0e0e0":"#f0f0f0"):r==="WEEK"?(C=Y===0,Q="#e5e7eb"):r==="MONTH"&&(C=Y===0,Q="#f0f0f0"),C?o.jsx("line",{x1:L,y1:0,x2:L,y2:O,stroke:Q,strokeWidth:1},`vline-${p}`):null}),(x?l:e.map((k,p)=>({index:p,start:p*se,size:se,key:p}))).map(k=>o.jsx("line",{x1:0,y1:k.start+se+de,x2:P,y2:k.start+se+de,stroke:"#f3f4f6",strokeWidth:1},`line-${k.key}`)),o.jsx("rect",{x:0,y:0,width:P,height:de,fill:"transparent"}),n.map(k=>o.jsx(Tr,{milestone:k,x:Ve(k.date,w,f)},k.id)),o.jsx("line",{x1:0,y1:de,x2:P,y2:de,stroke:ce.grid,strokeWidth:1}),(x?l:e.map((k,p)=>({index:p,start:p*se,size:se,key:p}))).map(k=>{const p=e[k.index];if(!p)return null;const L=k.start+(se-ne)/2+de;return o.jsx(Wr,{task:p,y:L,minDate:w,pixelsPerDay:f,isMasterView:v,isDraggable:!v&&!!i,dragInfo:te(p.id),onDragStart:$},k.key)})]})]})})});nt.displayName="GanttTimeline";const _t=e=>{let n;const t=new Set,r=(h,f)=>{const v=typeof h=="function"?h(n):h;if(!Object.is(v,n)){const x=n;n=f??(typeof v!="object"||v===null)?v:Object.assign({},n,v),t.forEach(y=>y(n,x))}},s=()=>n,l={setState:r,getState:s,getInitialState:()=>u,subscribe:h=>(t.add(h),()=>t.delete(h))},u=n=e(r,s,l);return l},Or=e=>e?_t(e):_t,Nr=e=>e;function _r(e,n=Nr){const t=g.useSyncExternalStore(e.subscribe,g.useCallback(()=>n(e.getState()),[e,n]),g.useCallback(()=>n(e.getInitialState()),[e,n]));return g.useDebugValue(t),t}const Pt=e=>{const n=Or(e),t=r=>_r(n,r);return Object.assign(t,n),t},Pr=e=>e?Pt(e):Pt,Ct=e=>Symbol.iterator in e,It=e=>"entries"in e,At=(e,n)=>{const t=e instanceof Map?e:new Map(e.entries()),r=n instanceof Map?n:new Map(n.entries());if(t.size!==r.size)return!1;for(const[s,a]of t)if(!r.has(s)||!Object.is(a,r.get(s)))return!1;return!0},Cr=(e,n)=>{const t=e[Symbol.iterator](),r=n[Symbol.iterator]();let s=t.next(),a=r.next();for(;!s.done&&!a.done;){if(!Object.is(s.value,a.value))return!1;s=t.next(),a=r.next()}return!!s.done&&!!a.done};function Ir(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:Ct(e)&&Ct(n)?It(e)&&It(n)?At(e,n):Cr(e,n):At({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function Se(e){const n=g.useRef(void 0);return t=>{const r=e(t);return Ir(n.current,r)?n.current:n.current=r}}const ve=Pr((e,n)=>({viewMode:"MASTER",activeCPId:null,zoomLevel:"MONTH",selectedTaskId:null,hoveredTaskId:null,expandedTaskIds:new Set,sidebarWidth:he.SIDEBAR_WIDTH,isDragging:!1,dragType:null,dragTaskId:null,setViewMode:(t,r)=>{e({viewMode:t,activeCPId:r??null,zoomLevel:t==="DETAIL"?"DAY":"MONTH"})},setZoomLevel:t=>{e({zoomLevel:t})},selectTask:t=>{e({selectedTaskId:t})},hoverTask:t=>{e({hoveredTaskId:t})},toggleTask:t=>{const{expandedTaskIds:r}=n(),s=new Set(r);s.has(t)?s.delete(t):s.add(t),e({expandedTaskIds:s})},expandAll:t=>{e({expandedTaskIds:new Set(t)})},collapseAll:()=>{e({expandedTaskIds:new Set})},setSidebarWidth:t=>{const r=Math.max(he.SIDEBAR_MIN_WIDTH,Math.min(t,he.SIDEBAR_MAX_WIDTH));e({sidebarWidth:r})},startDrag:(t,r)=>{e({isDragging:!0,dragType:t,dragTaskId:r})},endDrag:()=>{e({isDragging:!1,dragType:null,dragTaskId:null})}})),zt=()=>ve(Se(e=>({viewMode:e.viewMode,activeCPId:e.activeCPId,zoomLevel:e.zoomLevel}))),Ft=()=>ve(Se(e=>({setViewMode:e.setViewMode,setZoomLevel:e.setZoomLevel}))),Ar=()=>ve(Se(e=>({selectedTaskId:e.selectedTaskId,hoveredTaskId:e.hoveredTaskId,selectTask:e.selectTask,hoverTask:e.hoverTask}))),Lt=()=>ve(Se(e=>({expandedTaskIds:e.expandedTaskIds,toggleTask:e.toggleTask,expandAll:e.expandAll,collapseAll:e.collapseAll}))),Rt=()=>ve(Se(e=>({sidebarWidth:e.sidebarWidth,setSidebarWidth:e.setSidebarWidth}))),zr=()=>ve(Se(e=>({isDragging:e.isDragging,dragType:e.dragType,dragTaskId:e.dragTaskId,startDrag:e.startDrag,endDrag:e.endDrag})));function Me(e,n,t){let r=t.initialDeps??[],s;function a(){var i,l,u,h;let f;t.key&&((i=t.debug)!=null&&i.call(t))&&(f=Date.now());const v=e();if(!(v.length!==r.length||v.some((b,w)=>r[w]!==b)))return s;r=v;let y;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(y=Date.now()),s=n(...v),t.key&&((u=t.debug)!=null&&u.call(t))){const b=Math.round((Date.now()-f)*100)/100,w=Math.round((Date.now()-y)*100)/100,W=w/16,P=(O,S)=>{for(O=String(O);O.length<S;)O=" "+O;return O};console.info(`%c⏱ ${P(w,5)} /${P(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*W,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(h=t==null?void 0:t.onChange)==null||h.call(t,s),s}return a.updateDeps=i=>{r=i},a}function Ht(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const Fr=(e,n)=>Math.abs(e-n)<1.01,Lr=(e,n,t)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>n.apply(this,s),t)}},Yt=e=>{const{offsetWidth:n,offsetHeight:t}=e;return{width:n,height:t}},Rr=e=>e,Hr=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=n;s<=t;s++)r.push(s);return r},Yr=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;const s=i=>{const{width:l,height:u}=i;n({width:Math.round(l),height:Math.round(u)})};if(s(Yt(t)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(i=>{const l=()=>{const u=i[0];if(u!=null&&u.borderBoxSize){const h=u.borderBoxSize[0];if(h){s({width:h.inlineSize,height:h.blockSize});return}}s(Yt(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},$t={passive:!0},Gt=typeof window>"u"?!0:"onscrollend"in window,$r=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;let s=0;const a=e.options.useScrollendEvent&&Gt?()=>{}:Lr(r,()=>{n(s,!1)},e.options.isScrollingResetDelay),i=f=>()=>{const{horizontal:v,isRtl:x}=e.options;s=v?t.scrollLeft*(x&&-1||1):t.scrollTop,a(),n(s,f)},l=i(!0),u=i(!1);u(),t.addEventListener("scroll",l,$t);const h=e.options.useScrollendEvent&&Gt;return h&&t.addEventListener("scrollend",u,$t),()=>{t.removeEventListener("scroll",l),h&&t.removeEventListener("scrollend",u)}},Gr=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const r=n.borderBoxSize[0];if(r)return Math.round(r[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},Vr=(e,{adjustments:n=0,behavior:t},r)=>{var s,a;const i=e+n;(a=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||a.call(s,{[r.options.horizontal?"left":"top"]:i,behavior:t})};class qr{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const r=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(s=>{s.forEach(a=>{const i=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),t=null},observe:s=>{var a;return(a=r())==null?void 0:a.observe(s,{box:"border-box"})},unobserve:s=>{var a;return(a=r())==null?void 0:a.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([r,s])=>{typeof s>"u"&&delete t[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Rr,rangeExtractor:Hr,onChange:()=>{},measureElement:Gr,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,t)},this.maybeNotify=Me(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:process.env.NODE_ENV!=="production"&&"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,r)=>{const s=new Map,a=new Map;for(let i=r-1;i>=0;i--){const l=t[i];if(s.has(l.lane))continue;const u=a.get(l.lane);if(u==null||l.end>u.end?a.set(l.lane,l):l.end<u.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((i,l)=>i.end===l.end?i.index-l.index:i.end-l.end)[0]:void 0},this.getMeasurementOptions=Me(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,r,s,a,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:s,getItemKey:a,enabled:i}),{key:!1}),this.getMeasurements=Me(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:r,scrollMargin:s,getItemKey:a,enabled:i},l)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const u=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const h=this.measurementsCache.slice(0,u);for(let f=u;f<t;f++){const v=a(f),x=this.options.lanes===1?h[f-1]:this.getFurthestMeasurement(h,f),y=x?x.end+this.options.gap:r+s,b=l.get(v),w=typeof b=="number"?b:this.options.estimateSize(f),W=y+w,P=x?x.lane:f%this.options.lanes;h[f]={index:f,start:y,size:w,end:W,key:v,lane:P}}return this.measurementsCache=h,h},{key:process.env.NODE_ENV!=="production"&&"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=Me(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,r,s,a)=>this.range=t.length>0&&r>0?Xr({measurements:t,outerSize:r,scrollOffset:s,lanes:a}):null,{key:process.env.NODE_ENV!=="production"&&"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=Me(()=>{let t=null,r=null;const s=this.calculateRange();return s&&(t=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,r]},(t,r,s,a,i)=>a===null||i===null?[]:t({startIndex:a,endIndex:i,overscan:r,count:s}),{key:process.env.NODE_ENV!=="production"&&"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const r=this.options.indexAttribute,s=t.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(t,r)=>{const s=this.indexFromElement(t),a=this.measurementsCache[s];if(!a)return;const i=a.key,l=this.elementsCache.get(i);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(s,this.options.measureElement(t,r,this))},this.resizeItem=(t,r)=>{const s=this.measurementsCache[t];if(!s)return;const a=this.itemSizeCache.get(s.key)??s.size,i=r-a;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,i,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("correction",i),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(t,void 0)},this.getVirtualItems=Me(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,r)=>{const s=[];for(let a=0,i=t.length;a<i;a++){const l=t[a],u=r[l];s.push(u)}return s},{key:process.env.NODE_ENV!=="production"&&"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const r=this.getMeasurements();if(r.length!==0)return Ht(r[Vt(0,r.length-1,s=>Ht(r[s]).start,t)])},this.getOffsetForAlignment=(t,r,s=0)=>{const a=this.getSize(),i=this.getScrollOffset();r==="auto"&&(r=t>=i+a?"end":"start"),r==="center"?t+=(s-a)/2:r==="end"&&(t-=a);const l=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,r="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=this.measurementsCache[t];if(!s)return;const a=this.getSize(),i=this.getScrollOffset();if(r==="auto")if(s.end>=i+a-this.options.scrollPaddingEnd)r="end";else if(s.start<=i+this.options.scrollPaddingStart)r="start";else return[i,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let a=0;const i=10,l=h=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(t,h);if(!f){console.warn("Failed to get offset for index:",t);return}const[v,x]=f;this._scrollToOffset(v,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const y=this.getScrollOffset(),b=this.getOffsetForIndex(t,x);if(!b){console.warn("Failed to get offset for index:",t);return}Fr(b[0],y)||u(x)})},u=h=>{this.targetWindow&&(a++,a<i?(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("Schedule retry",a,i),this.targetWindow.requestAnimationFrame(()=>l(h))):console.warn(`Failed to scroll to index ${t} after ${i} attempts.`))};l(r)},this.scrollBy=(t,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var t;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((t=r[r.length-1])==null?void 0:t.end)??0;else{const a=Array(this.options.lanes).fill(null);let i=r.length-1;for(;i>=0&&a.some(l=>l===null);){const l=r[i];a[l.lane]===null&&(a[l.lane]=l.end),i--}s=Math.max(...a.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:r,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const Vt=(e,n,t,r)=>{for(;e<=n;){const s=(e+n)/2|0,a=t(s);if(a<r)e=s+1;else if(a>r)n=s-1;else return s}return e>0?e-1:0};function Xr({measurements:e,outerSize:n,scrollOffset:t,lanes:r}){const s=e.length-1,a=u=>e[u].start;if(e.length<=r)return{startIndex:0,endIndex:s};let i=Vt(0,s,a,t),l=i;if(r===1)for(;l<s&&e[l].end<t+n;)l++;else if(r>1){const u=Array(r).fill(0);for(;l<s&&u.some(f=>f<t+n);){const f=e[l];u[f.lane]=f.end,l++}const h=Array(r).fill(t+n);for(;i>=0&&h.some(f=>f>=t);){const f=e[i];h[f.lane]=f.start,i--}i=Math.max(0,i-i%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:i,endIndex:l}}const qt=typeof document<"u"?He.useLayoutEffect:He.useEffect;function Br(e){const n=He.useReducer(()=>({}),{})[1],t={...e,onChange:(s,a)=>{var i;a?Ut.flushSync(n):n(),(i=e.onChange)==null||i.call(e,s,a)}},[r]=He.useState(()=>new qr(t));return r.setOptions(t),qt(()=>r._didMount(),[]),qt(()=>r._willUpdate()),r}function Ur(e){return Br({observeElementRect:Yr,observeElementOffset:$r,scrollToFn:Vr,...e})}const{ROW_HEIGHT:Kr}=he;function Xt({containerRef:e,count:n,rowHeight:t=Kr,overscan:r=5}){const s=Ur({count:n,getScrollElement:()=>e.current,estimateSize:()=>t,overscan:r}),a=s.getVirtualItems();return{virtualRows:g.useMemo(()=>a.map(l=>({index:l.index,start:l.start,size:l.size,key:l.index})),[a]),totalHeight:s.getTotalSize(),virtualizer:s}}const Qr={workOnSaturdays:!1,workOnSundays:!1,workOnHolidays:!1};function Jr({tasks:e,milestones:n=[],holidays:t=[],calendarSettings:r=Qr,initialView:s="MASTER",initialZoomLevel:a="MONTH",initialExpandedIds:i,onTaskUpdate:l,onTaskCreate:u,onTaskReorder:h,onTaskGroup:f,onTaskUngroup:v,onViewChange:x,onSave:y,onReset:b,hasUnsavedChanges:w,saveStatus:W,className:P,style:O}){const{viewMode:S,activeCPId:$,zoomLevel:Z}=zt(),{setViewMode:K,setZoomLevel:te}=Ft(),{sidebarWidth:k,setSidebarWidth:p}=Rt(),{expandedTaskIds:L,toggleTask:I,expandAll:Y}=Lt(),C=g.useRef(null),Q=g.useRef(null),re=g.useRef(null),ee=g.useRef(!1),be=g.useRef(!1),[ke,fe]=g.useState(!1),[me,d]=g.useState(!1),D=g.useCallback(()=>{d(!0)},[]),z=g.useCallback(()=>{d(!1)},[]),H=g.useRef(!1),R=g.useMemo(()=>e.map(E=>E.id),[e]);g.useEffect(()=>{H.current||(H.current=!0,K(s),te(a),i&&i.length>0?Y(i):R.length>0&&Y(R))},[R,i,s,a,K,te,Y]);const ae=g.useMemo(()=>{if(S==="MASTER"){const E=[];return e.forEach(j=>{(j.wbsLevel===1&&!j.parentId||j.wbsLevel===1&&j.parentId&&L.has(j.parentId))&&E.push(j)}),E}else return e.filter(E=>E.wbsLevel===2&&E.parentId===$)},[e,S,$,L]),{virtualRows:F,totalHeight:ie}=Xt({containerRef:re,count:ae.length});g.useEffect(()=>{const E=Q.current,j=re.current;if(!E||!j)return;const J=()=>{ee.current||(ee.current=!0,j.scrollTop=E.scrollTop,requestAnimationFrame(()=>{ee.current=!1}))},m=()=>{ee.current||(ee.current=!0,E.scrollTop=j.scrollTop,requestAnimationFrame(()=>{ee.current=!1}))};return E.addEventListener("scroll",J),j.addEventListener("scroll",m),()=>{E.removeEventListener("scroll",J),j.removeEventListener("scroll",m)}},[]);const[oe,Te]=g.useState(null),rt=g.useCallback(E=>{if(E.detail>=2)return;E.preventDefault(),be.current=!0,fe(!0);const j=E.clientX,J=k,m=T=>{if(!be.current)return;const X=T.clientX-j;p(J+X)},c=()=>{be.current=!1,fe(!1),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",c)};document.addEventListener("mousemove",m),document.addEventListener("mouseup",c)},[k,p]),Re=g.useCallback(()=>{p(oe!==null?oe:he.SIDEBAR_WIDTH)},[oe,p]),We=g.useCallback((E,j)=>{K(E,j),x==null||x(E,j)},[K,x]),je=g.useCallback(E=>{const j=re.current;if(!j)return;const J=Le[Z].pixelsPerDay,{minDate:m}=tt(e,n,60),c=Ve(E,m,J);j.scrollLeft=Math.max(0,c-50)},[Z,e,n]),Oe=g.useCallback(()=>{if(S==="MASTER"){const E=ae.filter(j=>j.type==="CP");if(E.length>0){const j=E.reduce((m,c)=>m.startDate<c.startDate?m:c),J=new Date(j.startDate);J.setDate(J.getDate()-5),je(J)}}else if(S==="DETAIL"&&$){const E=e.filter(j=>j.parentId===$);if(E.length>0){const j=E.reduce((m,c)=>m.startDate<c.startDate?m:c),J=new Date(j.startDate);J.setDate(J.getDate()-5),je(J)}}},[S,$,e,ae,je]),qe=g.useCallback(E=>{S==="MASTER"&&E.type==="CP"&&We("DETAIL",E.id)},[S,We]);g.useEffect(()=>{if(S==="DETAIL"&&$){const E=setTimeout(()=>{Oe()},100);return()=>clearTimeout(E)}},[S,$,Oe]);const Xe=g.useCallback(async E=>{if(l)try{const j=e.find(m=>m.id===E.taskId);if(!j||!j.task)return;const J={...j,startDate:E.newStartDate,endDate:E.newEndDate,task:{...j.task,indirectWorkDaysPre:E.newIndirectWorkDaysPre,indirectWorkDaysPost:E.newIndirectWorkDaysPost}};await l(J)}catch(j){console.error("Failed to update task:",j)}},[e,l]);return o.jsxs("div",{ref:C,className:`flex h-full w-full flex-col bg-gray-50 ${P||""}`,style:O,children:[o.jsxs("header",{className:"flex h-[60px] shrink-0 items-center justify-between border-b border-gray-200 bg-white px-4 shadow-sm",children:[o.jsx("div",{className:"flex items-center gap-3 shrink-0",children:S==="DETAIL"?o.jsxs(o.Fragment,{children:[o.jsx("button",{onClick:()=>We("MASTER"),className:"rounded bg-gray-200 px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-300 transition-colors",children:"← 상위 공정표로"}),u&&!me&&o.jsx("button",{onClick:D,className:"flex items-center gap-1 rounded bg-blue-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-blue-600 transition-colors",title:"새 공정 추가",children:"+ Task 추가"})]}):o.jsx("div",{className:"w-[180px]"})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("button",{onClick:Oe,className:"flex items-center gap-1 rounded bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 hover:bg-gray-200 transition-colors",title:S==="MASTER"?"첫 번째 CP로 스크롤":"첫 번째 작업으로 스크롤",children:"Focusing"}),o.jsx("div",{className:"flex rounded bg-gray-100 p-1",children:(S==="MASTER"?["WEEK","MONTH"]:["DAY","WEEK"]).map(E=>o.jsx("button",{onClick:()=>te(E),className:`rounded px-3 py-1 text-xs font-medium transition-colors ${Z===E?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:Le[E].label},E))}),o.jsxs("div",{className:"text-sm text-gray-500",children:["기준일: ",le(new Date,"yyyy-MM-dd")]})]}),o.jsxs("div",{className:"flex items-center gap-2",children:[y&&o.jsx("button",{onClick:y,disabled:!w||W==="saving",className:`flex items-center gap-1.5 rounded-md px-3 py-1.5 text-sm font-medium transition-colors ${w?"bg-blue-500 text-white hover:bg-blue-600 active:bg-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:W==="saving"?o.jsxs(o.Fragment,{children:[o.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[o.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),o.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"저장 중..."]}):o.jsxs(o.Fragment,{children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"저장"]})}),b&&o.jsxs("button",{onClick:b,className:"flex items-center gap-1.5 rounded-md bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-200 active:bg-gray-300",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"초기화"]})]})]}),o.jsxs("div",{className:"relative flex flex-1 overflow-hidden",children:[o.jsx("div",{className:"z-10 flex shrink-0 flex-col bg-white",style:{width:k},children:o.jsx(Ze,{ref:Q,tasks:ae,allTasks:e,viewMode:S,expandedIds:L,onToggle:I,onTaskClick:qe,onTaskUpdate:l,onTaskCreate:u,onTaskReorder:h,onTaskGroup:f,onTaskUngroup:v,activeCPId:$,virtualRows:F,totalHeight:ie,onTotalWidthChange:Te,isAddingTask:me,onCancelAddTask:z})}),o.jsx("div",{className:`z-20 w-1 shrink-0 cursor-col-resize transition-colors ${ke?"bg-blue-500":"bg-gray-200 hover:bg-gray-300"}`,onMouseDown:rt,onDoubleClick:Re,title:"드래그하여 너비 조절 / 더블클릭으로 초기화"}),o.jsx("div",{className:"relative flex flex-1 flex-col overflow-hidden bg-white",children:o.jsx(nt,{ref:re,tasks:ae,milestones:n,viewMode:S,zoomLevel:Z,holidays:t,calendarSettings:r,onTaskUpdate:l,onBarDrag:Xe,virtualRows:F,totalHeight:ie})}),ke&&o.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"})]})]})}_.GANTT_COLORS=ce,_.GANTT_LAYOUT=he,_.GanttChart=Jr,_.GanttSidebar=Ze,_.GanttTimeline=nt,_.ZOOM_CONFIG=Le,_.addCalendarDays=et,_.addWorkingDays=Nt,_.calculateDateRange=tt,_.calculateDualCalendarDates=wr,_.dateToX=Ve,_.getAnchorDate=pr,_.getDateRangeWidth=kr,_.getPixelsPerDay=Dr,_.isHoliday=pe,_.isWeekend=br,_.subtractWorkingDays=xr,_.useGanttDrag=zr,_.useGanttExpansion=Lt,_.useGanttSelection=Ar,_.useGanttSidebar=Rt,_.useGanttStore=ve,_.useGanttViewActions=Ft,_.useGanttViewState=zt,_.useGanttVirtualization=Xt,_.xToDate=vr,Object.defineProperty(_,Symbol.toStringTag,{value:"Module"})});
