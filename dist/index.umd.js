(function(N,y){typeof exports=="object"&&typeof module<"u"?y(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],y):(N=typeof globalThis<"u"?globalThis:N||self,y(N.SaGanttLib={},N.React,N.ReactDOM))})(this,function(N,y,nn){"use strict";"use client";function rn(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:()=>e[t]})}}return n.default=e,Object.freeze(n)}const Le=rn(y);var qe={exports:{}},je={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var st;function sn(){if(st)return je;st=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var l in s)l!=="key"&&(a[l]=s[l])}else a=s;return s=a.ref,{$$typeof:e,type:r,key:i,ref:s!==void 0?s:null,props:a}}return je.Fragment=n,je.jsx=t,je.jsxs=t,je}var Oe={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var at;function an(){return at||(at=1,process.env.NODE_ENV!=="production"&&function(){function e(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===Y?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case E:return"Fragment";case j:return"Profiler";case z:return"StrictMode";case Z:return"Suspense";case W:return"SuspenseList";case F:return"Activity"}if(typeof u=="object")switch(typeof u.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),u.$$typeof){case x:return"Portal";case Q:return u.displayName||"Context";case X:return(u._context.displayName||"Context")+".Consumer";case _:var T=u.render;return u=u.displayName,u||(u=T.displayName||T.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case S:return T=u.displayName||null,T!==null?T:e(u.type)||"Memo";case L:T=u._payload,u=u._init;try{return e(u(T))}catch{}}return null}function n(u){return""+u}function t(u){try{n(u);var T=!1}catch{T=!0}if(T){T=console;var $=T.error,H=typeof Symbol=="function"&&Symbol.toStringTag&&u[Symbol.toStringTag]||u.constructor.name||"Object";return $.call(T,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",H),n(u)}}function r(u){if(u===E)return"<>";if(typeof u=="object"&&u!==null&&u.$$typeof===L)return"<...>";try{var T=e(u);return T?"<"+T+">":"<...>"}catch{return"<...>"}}function s(){var u=I.A;return u===null?null:u.getOwner()}function a(){return Error("react-stack-top-frame")}function i(u){if(R.call(u,"key")){var T=Object.getOwnPropertyDescriptor(u,"key").get;if(T&&T.isReactWarning)return!1}return u.key!==void 0}function l(u,T){function $(){he||(he=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",T))}$.isReactWarning=!0,Object.defineProperty(u,"key",{get:$,configurable:!0})}function m(){var u=e(this.type);return me[u]||(me[u]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),u=this.props.ref,u!==void 0?u:null}function f(u,T,$,H,oe,le){var A=$.ref;return u={$$typeof:w,type:u,key:T,props:$,_owner:H},(A!==void 0?A:null)!==null?Object.defineProperty(u,"ref",{enumerable:!1,get:m}):Object.defineProperty(u,"ref",{enumerable:!1,value:null}),u._store={},Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(u,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(u,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:oe}),Object.defineProperty(u,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:le}),Object.freeze&&(Object.freeze(u.props),Object.freeze(u)),u}function g(u,T,$,H,oe,le){var A=T.children;if(A!==void 0)if(H)if(P(A)){for(H=0;H<A.length;H++)k(A[H]);Object.freeze&&Object.freeze(A)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else k(A);if(R.call(T,"key")){A=e(u);var se=Object.keys(T).filter(function(p){return p!=="key"});H=0<se.length?"{key: someKey, "+se.join(": ..., ")+": ...}":"{key: someKey}",we[A+H]||(se=0<se.length?"{"+se.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,H,A,se,A),we[A+H]=!0)}if(A=null,$!==void 0&&(t($),A=""+$),i(T)&&(t(T.key),A=""+T.key),"key"in T){$={};for(var D in T)D!=="key"&&($[D]=T[D])}else $=T;return A&&l($,typeof u=="function"?u.displayName||u.name||"Unknown":u),f(u,A,$,s(),oe,le)}function k(u){b(u)?u._store&&(u._store.validated=1):typeof u=="object"&&u!==null&&u.$$typeof===L&&(u._payload.status==="fulfilled"?b(u._payload.value)&&u._payload.value._store&&(u._payload.value._store.validated=1):u._store&&(u._store.validated=1))}function b(u){return typeof u=="object"&&u!==null&&u.$$typeof===w}var d=y,w=Symbol.for("react.transitional.element"),x=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),X=Symbol.for("react.consumer"),Q=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),F=Symbol.for("react.activity"),Y=Symbol.for("react.client.reference"),I=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R=Object.prototype.hasOwnProperty,P=Array.isArray,ee=console.createTask?console.createTask:function(){return null};d={react_stack_bottom_frame:function(u){return u()}};var he,me={},ne=d.react_stack_bottom_frame.bind(d,a)(),re=ee(r(a)),we={};Oe.Fragment=E,Oe.jsx=function(u,T,$){var H=1e4>I.recentlyCreatedOwnerStacks++;return g(u,T,$,!1,H?Error("react-stack-top-frame"):ne,H?ee(r(u)):re)},Oe.jsxs=function(u,T,$){var H=1e4>I.recentlyCreatedOwnerStacks++;return g(u,T,$,!0,H?Error("react-stack-top-frame"):ne,H?ee(r(u)):re)}}()),Oe}process.env.NODE_ENV==="production"?qe.exports=sn():qe.exports=an();var o=qe.exports;const it=6048e5,on=864e5,ot=Symbol.for("constructDateFrom");function fe(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&ot in e?e[ot](n):e instanceof Date?new e.constructor(n):new Date(n)}function K(e,n){return fe(n||e,e)}function V(e,n,t){const r=K(e,t==null?void 0:t.in);return isNaN(n)?fe(e,NaN):(n&&r.setDate(r.getDate()+n),r)}function lt(e,n){return K(e,n==null?void 0:n.in).getDay()===6}function ct(e,n){return K(e,n==null?void 0:n.in).getDay()===0}let ln={};function Ne(){return ln}function pe(e,n){var l,m,f,g;const t=Ne(),r=(n==null?void 0:n.weekStartsOn)??((m=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((g=(f=t.locale)==null?void 0:f.options)==null?void 0:g.weekStartsOn)??0,s=K(e,n==null?void 0:n.in),a=s.getDay(),i=(a<r?7:0)+a-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Fe(e,n){return pe(e,{...n,weekStartsOn:1})}function dt(e,n){const t=K(e,n==null?void 0:n.in),r=t.getFullYear(),s=fe(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Fe(s),i=fe(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const l=Fe(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function ut(e){const n=K(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function _e(e,...n){const t=fe.bind(null,e||n.find(r=>typeof r=="object"));return n.map(t)}function Pe(e,n){const t=K(e,n==null?void 0:n.in);return t.setHours(0,0,0,0),t}function ht(e,n,t){const[r,s]=_e(t==null?void 0:t.in,e,n),a=Pe(r),i=Pe(s),l=+a-ut(a),m=+i-ut(i);return Math.round((l-m)/on)}function cn(e,n){const t=dt(e,n),r=fe(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Fe(r)}function dn(e,n,t){const[r,s]=_e(t==null?void 0:t.in,e,n);return+Pe(r)==+Pe(s)}function un(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function hn(e){return!(!un(e)&&typeof e!="number"||isNaN(+K(e)))}function Xe(e,n,t){const[r,s]=_e(t==null?void 0:t.in,e,n),a=ft(r,s),i=Math.abs(ht(r,s));r.setDate(r.getDate()-a*i);const l=+(ft(r,s)===-a),m=a*(i-l);return m===0?0:m}function ft(e,n){const t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function fn(e,n){const t=K(e,n==null?void 0:n.in);return t.setDate(1),t.setHours(0,0,0,0),t}function mn(e,n){const t=K(e,n==null?void 0:n.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const gn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},yn=(e,n,t)=>{let r;const s=gn[e];return typeof s=="string"?r=s:n===1?r=s.one:r=s.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Be(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const bn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},xn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},wn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},pn={date:Be({formats:bn,defaultWidth:"full"}),time:Be({formats:xn,defaultWidth:"full"}),dateTime:Be({formats:wn,defaultWidth:"full"})},vn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},kn=(e,n,t,r)=>vn[e];function Ce(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,l=t!=null&&t.width?String(t.width):i;s=e.formattingValues[l]||e.formattingValues[i]}else{const i=e.defaultWidth,l=t!=null&&t.width?String(t.width):e.defaultWidth;s=e.values[l]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(n):n;return s[a]}}const Dn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},En={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Sn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Mn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Tn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},jn={ordinalNumber:(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:Ce({values:Dn,defaultWidth:"wide"}),quarter:Ce({values:En,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ce({values:Sn,defaultWidth:"wide"}),day:Ce({values:Mn,defaultWidth:"wide"}),dayPeriod:Ce({values:Tn,defaultWidth:"wide",formattingValues:Wn,defaultFormattingWidth:"wide"})};function Ie(e){return(n,t={})=>{const r=t.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=n.match(s);if(!a)return null;const i=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],m=Array.isArray(l)?Nn(l,k=>k.test(i)):On(l,k=>k.test(i));let f;f=e.valueCallback?e.valueCallback(m):m,f=t.valueCallback?t.valueCallback(f):f;const g=n.slice(i.length);return{value:f,rest:g}}}function On(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function Nn(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function _n(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const s=r[0],a=n.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;const l=n.slice(s.length);return{value:i,rest:l}}}const Pn=/^(\d+)(th|st|nd|rd)?/i,Cn=/\d+/i,In={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},An={any:[/^b/i,/^(a|c)/i]},zn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Ln={any:[/1/i,/2/i,/3/i,/4/i]},Fn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Rn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Hn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Yn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},$n={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Vn={ordinalNumber:_n({matchPattern:Pn,parsePattern:Cn,valueCallback:e=>parseInt(e,10)}),era:Ie({matchPatterns:In,defaultMatchWidth:"wide",parsePatterns:An,defaultParseWidth:"any"}),quarter:Ie({matchPatterns:zn,defaultMatchWidth:"wide",parsePatterns:Ln,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Ie({matchPatterns:Fn,defaultMatchWidth:"wide",parsePatterns:Rn,defaultParseWidth:"any"}),day:Ie({matchPatterns:Hn,defaultMatchWidth:"wide",parsePatterns:Yn,defaultParseWidth:"any"}),dayPeriod:Ie({matchPatterns:$n,defaultMatchWidth:"any",parsePatterns:Gn,defaultParseWidth:"any"})},qn={code:"en-US",formatDistance:yn,formatLong:pn,formatRelative:kn,localize:jn,match:Vn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Xn(e,n){const t=K(e,n==null?void 0:n.in);return ht(t,mn(t))+1}function Bn(e,n){const t=K(e,n==null?void 0:n.in),r=+Fe(t)-+cn(t);return Math.round(r/it)+1}function mt(e,n){var g,k,b,d;const t=K(e,n==null?void 0:n.in),r=t.getFullYear(),s=Ne(),a=(n==null?void 0:n.firstWeekContainsDate)??((k=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:k.firstWeekContainsDate)??s.firstWeekContainsDate??((d=(b=s.locale)==null?void 0:b.options)==null?void 0:d.firstWeekContainsDate)??1,i=fe((n==null?void 0:n.in)||e,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const l=pe(i,n),m=fe((n==null?void 0:n.in)||e,0);m.setFullYear(r,0,a),m.setHours(0,0,0,0);const f=pe(m,n);return+t>=+l?r+1:+t>=+f?r:r-1}function Un(e,n){var l,m,f,g;const t=Ne(),r=(n==null?void 0:n.firstWeekContainsDate)??((m=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((g=(f=t.locale)==null?void 0:f.options)==null?void 0:g.firstWeekContainsDate)??1,s=mt(e,n),a=fe((n==null?void 0:n.in)||e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),pe(a,n)}function Kn(e,n){const t=K(e,n==null?void 0:n.in),r=+pe(t,n)-+Un(t,n);return Math.round(r/it)+1}function C(e,n){const t=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return t+r}const ye={y(e,n){const t=e.getFullYear(),r=t>0?t:1-t;return C(n==="yy"?r%100:r,n.length)},M(e,n){const t=e.getMonth();return n==="M"?String(t+1):C(t+1,2)},d(e,n){return C(e.getDate(),n.length)},a(e,n){const t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return C(e.getHours()%12||12,n.length)},H(e,n){return C(e.getHours(),n.length)},m(e,n){return C(e.getMinutes(),n.length)},s(e,n){return C(e.getSeconds(),n.length)},S(e,n){const t=n.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return C(s,n.length)}},Ee={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gt={G:function(e,n,t){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return ye.y(e,n)},Y:function(e,n,t,r){const s=mt(e,r),a=s>0?s:1-s;if(n==="YY"){const i=a%100;return C(i,2)}return n==="Yo"?t.ordinalNumber(a,{unit:"year"}):C(a,n.length)},R:function(e,n){const t=dt(e);return C(t,n.length)},u:function(e,n){const t=e.getFullYear();return C(t,n.length)},Q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return C(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return C(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){const r=e.getMonth();switch(n){case"M":case"MM":return ye.M(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return C(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){const s=Kn(e,r);return n==="wo"?t.ordinalNumber(s,{unit:"week"}):C(s,n.length)},I:function(e,n,t){const r=Bn(e);return n==="Io"?t.ordinalNumber(r,{unit:"week"}):C(r,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):ye.d(e,n)},D:function(e,n,t){const r=Xn(e);return n==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):C(r,n.length)},E:function(e,n,t){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return C(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return C(a,n.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,t){const r=e.getDay(),s=r===0?7:r;switch(n){case"i":return String(s);case"ii":return C(s,n.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){const s=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,t){const r=e.getHours();let s;switch(r===12?s=Ee.noon:r===0?s=Ee.midnight:s=r/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,t){const r=e.getHours();let s;switch(r>=17?s=Ee.evening:r>=12?s=Ee.afternoon:r>=4?s=Ee.morning:s=Ee.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return ye.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):ye.H(e,n)},K:function(e,n,t){const r=e.getHours()%12;return n==="Ko"?t.ordinalNumber(r,{unit:"hour"}):C(r,n.length)},k:function(e,n,t){let r=e.getHours();return r===0&&(r=24),n==="ko"?t.ordinalNumber(r,{unit:"hour"}):C(r,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):ye.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):ye.s(e,n)},S:function(e,n){return ye.S(e,n)},X:function(e,n,t){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return bt(r);case"XXXX":case"XX":return ve(r);case"XXXXX":case"XXX":default:return ve(r,":")}},x:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"x":return bt(r);case"xxxx":case"xx":return ve(r);case"xxxxx":case"xxx":default:return ve(r,":")}},O:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+yt(r,":");case"OOOO":default:return"GMT"+ve(r,":")}},z:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+yt(r,":");case"zzzz":default:return"GMT"+ve(r,":")}},t:function(e,n,t){const r=Math.trunc(+e/1e3);return C(r,n.length)},T:function(e,n,t){return C(+e,n.length)}};function yt(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?t+String(s):t+String(s)+n+C(a,2)}function bt(e,n){return e%60===0?(e>0?"-":"+")+C(Math.abs(e)/60,2):ve(e,n)}function ve(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),s=C(Math.trunc(r/60),2),a=C(r%60,2);return t+s+n+a}const xt=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},wt=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Qn={p:wt,P:(e,n)=>{const t=e.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return xt(e,n);let a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",xt(r,n)).replace("{{time}}",wt(s,n))}},Jn=/^D+$/,Zn=/^Y+$/,er=["D","DD","YY","YYYY"];function tr(e){return Jn.test(e)}function nr(e){return Zn.test(e)}function rr(e,n,t){const r=sr(e,n,t);if(console.warn(r),er.includes(e))throw new RangeError(r)}function sr(e,n,t){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const ar=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ir=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,or=/^'([^]*?)'?$/,lr=/''/g,cr=/[a-zA-Z]/;function ce(e,n,t){var g,k,b,d;const r=Ne(),s=r.locale??qn,a=r.firstWeekContainsDate??((k=(g=r.locale)==null?void 0:g.options)==null?void 0:k.firstWeekContainsDate)??1,i=r.weekStartsOn??((d=(b=r.locale)==null?void 0:b.options)==null?void 0:d.weekStartsOn)??0,l=K(e,t==null?void 0:t.in);if(!hn(l))throw new RangeError("Invalid time value");let m=n.match(ir).map(w=>{const x=w[0];if(x==="p"||x==="P"){const E=Qn[x];return E(w,s.formatLong)}return w}).join("").match(ar).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const x=w[0];if(x==="'")return{isToken:!1,value:dr(w)};if(gt[x])return{isToken:!0,value:w};if(x.match(cr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+x+"`");return{isToken:!1,value:w}});s.localize.preprocessor&&(m=s.localize.preprocessor(l,m));const f={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return m.map(w=>{if(!w.isToken)return w.value;const x=w.value;(nr(x)||tr(x))&&rr(x,n,String(e));const E=gt[x[0]];return E(l,x,s.localize,f)}).join("")}function dr(e){const n=e.match(or);return n?n[1].replace(lr,"'"):e}function ur(e,n){return K(e,n==null?void 0:n.in).getDate()}function Re(e,n){return K(e,n==null?void 0:n.in).getDay()}function pt(e,n){var m,f,g,k;const t=Ne(),r=(n==null?void 0:n.weekStartsOn)??((f=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:f.weekStartsOn)??t.weekStartsOn??((k=(g=t.locale)==null?void 0:g.options)==null?void 0:k.weekStartsOn)??0,s=ur(K(e,n==null?void 0:n.in));if(isNaN(s))return NaN;const a=Re(fn(e,n));let i=r-a;i<=0&&(i+=7);const l=s-i;return Math.ceil(l/7)+1}function Ue(e,n){return K(e,n==null?void 0:n.in).getFullYear()}function hr(e,n,t){const[r,s]=_e(t==null?void 0:t.in,e,n);return+pe(r,t)==+pe(s,t)}function fr(e,n,t){const[r,s]=_e(t==null?void 0:t.in,e,n);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gr=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,r)=>r?r.toUpperCase():t.toLowerCase()),vt=e=>{const n=gr(e);return n.charAt(0).toUpperCase()+n.slice(1)},kt=(...e)=>e.filter((n,t,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===t).join(" ").trim(),yr=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var br={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=y.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...l},m)=>y.createElement("svg",{ref:m,...br,width:n,height:n,stroke:e,strokeWidth:r?Number(t)*24/Number(n):t,className:kt("lucide",s),...!a&&!yr(l)&&{"aria-hidden":"true"},...l},[...i.map(([f,g])=>y.createElement(f,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(e,n)=>{const t=y.forwardRef(({className:r,...s},a)=>y.createElement(xr,{ref:a,iconNode:n,className:kt(`lucide-${mr(vt(e))}`,`lucide-${e}`,r),...s}));return t.displayName=vt(e),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=Se("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Se("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=Se("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dt=Se("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kr=Se("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dr=Se("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),de={vermilion:"#E34234",teal:"#008080",red:"#FF5252",blue:"#448AFF",milestone:"#4B5563",dependency:"#9CA3AF",grid:"#E5E7EB",weekend:"#f3f4f6",holiday:"#fef2f2"},be={ROW_HEIGHT:40,HEADER_HEIGHT:80,MILESTONE_LANE_HEIGHT:40,BAR_HEIGHT:24,SIDEBAR_WIDTH:400,SIDEBAR_MIN_WIDTH:250,SIDEBAR_MAX_WIDTH:800},Ae={DAY:{pixelsPerDay:30,label:"일"},WEEK:{pixelsPerDay:10,label:"주"},MONTH:{pixelsPerDay:2,label:"월"}},{ROW_HEIGHT:xe,HEADER_HEIGHT:Et,MILESTONE_LANE_HEIGHT:St}=be,Mt=[{id:"name",label:"CP명",width:180,minWidth:100},{id:"total",label:"총 공기",width:80,minWidth:50},{id:"workDays",label:"작업일수",width:80,minWidth:50},{id:"nonWorkDays",label:"비작업일수",width:80,minWidth:50}],Tt=[{id:"name",label:"단위공정명",width:150,minWidth:80},{id:"indirectPre",label:"선간접",width:60,minWidth:45},{id:"netWork",label:"순작업",width:60,minWidth:45},{id:"indirectPost",label:"후간접",width:60,minWidth:45},{id:"startDate",label:"시작일",width:90,minWidth:70},{id:"endDate",label:"종료일",width:90,minWidth:70}],He={name:"",indirectWorkDaysPre:0,netWorkDays:1,indirectWorkDaysPost:0},Ke=y.forwardRef(({tasks:e,allTasks:n,viewMode:t,expandedIds:r,onToggle:s,onTaskClick:a,onBackToMaster:i,onTaskUpdate:l,onTaskCreate:m,onTaskReorder:f,onScrollToFirstTask:g,activeCPId:k,virtualRows:b,totalHeight:d,onTotalWidthChange:w,onTaskGroup:x,onTaskUngroup:E},z)=>{const j=b&&b.length>0,[X,Q]=y.useState(!1),[_,Z]=y.useState(He),W=y.useRef(null),[S,L]=y.useState(null),[F,Y]=y.useState(null),[I,R]=y.useState(null),[P,ee]=y.useState(new Set),[he,me]=y.useState(null),[ne,re]=y.useState(null),[we,u]=y.useState(Mt.map(h=>h.width)),[T,$]=y.useState(Tt.map(h=>h.width)),[H,oe]=y.useState(null),le=y.useRef(!1),A=t==="MASTER"?Mt:Tt,se=t==="MASTER"?we:T,D=t==="MASTER"?u:$,p=y.useMemo(()=>A.map((h,c)=>({...h,width:se[c]??h.width})),[A,se]),ae=f?24:0,J=p.reduce((h,c)=>h+c.width,0)+ae;y.useEffect(()=>{w&&w(J)},[J,w]);const We=y.useCallback((h,c)=>{if(h.detail>=2)return;h.preventDefault(),h.stopPropagation(),le.current=!0,oe(c);const v=h.clientX,G=se[c],B=A[c].minWidth,M=q=>{if(!le.current)return;const ge=q.clientX-v,U=Math.max(B,G+ge);D(tn=>{const Ve=[...tn];return Ve[c]=U,Ve})},O=()=>{le.current=!1,oe(null),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",O)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",O)},[se,A,D]),ze=y.useCallback((h,c=12,v="normal")=>{const B=document.createElement("canvas").getContext("2d");return B?(B.font=`${v} ${c}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,B.measureText(h).width):0},[]),$e=y.useCallback(h=>{const c=A[h].minWidth,v=h===0,G=v?48:20,B=A[h].label;let M=ze(B,12,"500")+16;return e.forEach(O=>{let q="",ge=0;if(t==="MASTER"){const rt=O.type==="GROUP";switch(v&&O.parentId&&(ge=20),h){case 0:q=O.name;break;case 1:q=rt?"-":O.cp?`${O.cp.workDaysTotal+O.cp.nonWorkDaysTotal}일`:"-";break;case 2:q=rt?"-":O.cp?`${O.cp.workDaysTotal}일`:"-";break;case 3:q=rt?"-":O.cp?`${O.cp.nonWorkDaysTotal}일`:"-";break}}else switch(h){case 0:q=O.name;break;case 1:q=O.task?String(O.task.indirectWorkDaysPre):"-";break;case 2:q=O.task?String(O.task.netWorkDays):"-";break;case 3:q=O.task?String(O.task.indirectWorkDaysPost):"-";break;case 4:q=ce(O.startDate,"yyyy-MM-dd");break;case 5:q=ce(O.endDate,"yyyy-MM-dd");break}const Ve=ze(q,v?14:12,v?"500":"normal")+G+ge;M=Math.max(M,Ve)}),Math.max(c,Math.ceil(M))},[e,t,A,ze]),is=y.useCallback((h,c)=>{h.preventDefault(),h.stopPropagation(),le.current=!1,oe(null);const v=$e(c);D(G=>{const B=[...G];return B[c]=v,B})},[$e,D]),et=y.useCallback((h,c,v)=>{if(!h.task||!l)return;const G={...h,task:{...h.task,[c]:v}};l(G)},[l]),os=y.useCallback(()=>{Q(!0),Z(He),setTimeout(()=>{var h;(h=W.current)==null||h.focus()},0)},[]),tt=y.useCallback(()=>{Q(!1),Z(He)},[]),nt=y.useCallback(()=>{if(!_.name.trim()||!m||!k)return;const h=e[e.length-1],c=h?V(h.endDate,1):new Date,v=_.indirectWorkDaysPre+_.netWorkDays+_.indirectWorkDaysPost,G=V(c,Math.max(v-1,0)),B={id:`task-${Date.now()}`,parentId:k,wbsLevel:2,type:"TASK",name:_.name.trim(),startDate:c,endDate:G,task:{netWorkDays:_.netWorkDays,indirectWorkDaysPre:_.indirectWorkDaysPre,indirectWorkDaysPost:_.indirectWorkDaysPost},dependencies:[]};m(B),Q(!1),Z(He)},[_,m,k,e]),Ge=y.useCallback(h=>{h.key==="Enter"?(h.preventDefault(),nt()):h.key==="Escape"&&(h.preventDefault(),tt())},[nt,tt]),Vt=y.useCallback((h,c)=>{h.dataTransfer.effectAllowed="move",h.dataTransfer.setData("text/plain",c),L(c);const v=document.createElement("div");v.style.opacity="0",document.body.appendChild(v),h.dataTransfer.setDragImage(v,0,0),setTimeout(()=>document.body.removeChild(v),0)},[]),qt=y.useCallback((h,c)=>{if(h.preventDefault(),h.dataTransfer.dropEffect="move",c===S)return;const v=h.currentTarget.getBoundingClientRect(),G=v.top+v.height/2,B=h.clientY<G?"before":"after";Y(c),R(B)},[S]),Xt=y.useCallback(()=>{Y(null),R(null)},[]),Bt=y.useCallback((h,c)=>{if(h.preventDefault(),!S||!f||S===c){L(null),Y(null),R(null);return}const v=e.findIndex(B=>B.id===c),G=I==="after"?v+1:v;f(S,G),L(null),Y(null),R(null)},[S,I,f,e]),Ut=y.useCallback(()=>{L(null),Y(null),R(null)},[]),Kt=y.useCallback((h,c,v)=>{if(S)return;const G=h.ctrlKey||h.metaKey,B=h.shiftKey;if(G)ee(M=>{const O=new Set(M);return O.has(c.id)?O.delete(c.id):O.add(c.id),O}),me(v);else if(B&&he!==null){const M=Math.min(he,v),O=Math.max(he,v);ee(q=>{const ge=new Set(q);for(let U=M;U<=O;U++)e[U]&&ge.add(e[U].id);return ge})}else ee(new Set([c.id])),me(v)},[S,he,e]),Qt=y.useCallback((h,c)=>{h.preventDefault(),P.has(c.id)||ee(new Set([c.id])),re({x:h.clientX,y:h.clientY,taskId:c.id})},[P]);y.useEffect(()=>{const h=()=>{re(null)};if(ne)return document.addEventListener("click",h),()=>document.removeEventListener("click",h)},[ne]);const Jt=y.useCallback(()=>{P.size<2||!x||(x(Array.from(P)),ee(new Set),re(null))},[P,x]),Zt=y.useCallback(()=>{if(P.size!==1||!E)return;const h=Array.from(P)[0],c=e.find(v=>v.id===h);(c==null?void 0:c.type)==="GROUP"&&(E(h),ee(new Set),re(null))},[P,e,E]);y.useEffect(()=>{const h=c=>{c.key==="Escape"&&(ee(new Set),re(null))};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[]);const en=()=>o.jsx("div",{className:"flex h-[32px] border-t border-gray-200",children:p.map((h,c)=>o.jsxs("div",{className:"relative flex shrink-0 items-center justify-center text-xs font-medium text-gray-600",style:{width:h.width},children:[h.label,c<p.length-1&&o.jsx("div",{className:`absolute right-0 top-0 z-10 h-full w-[5px] cursor-col-resize transition-colors ${H===c?"bg-blue-500":"hover:bg-blue-300"}`,style:{transform:"translateX(50%)"},onMouseDown:v=>We(v,c),onDoubleClick:v=>is(v,c),title:"드래그하여 컬럼 너비 조절 / 더블클릭으로 내용에 맞게 자동 조절"}),c<p.length-1&&o.jsx("div",{className:"absolute right-0 top-0 h-full w-px bg-gray-200"})]},h.id))});return t==="MASTER"?o.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[o.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:Et},children:[o.jsx("div",{className:"flex flex-1 items-center px-4 font-bold text-gray-700",children:"공구 공정표 (Level 1)"}),en()]}),H!==null&&o.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),o.jsxs("div",{ref:z,className:"relative flex-1 overflow-auto",children:[o.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:St,minWidth:J},children:p.map((h,c)=>o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:h.width},children:c===0&&"Milestone"},h.id))}),o.jsx("div",{style:{minWidth:J,height:j?d:void 0,position:"relative"},children:(j?b:e.map((h,c)=>({index:c,start:c*xe,size:xe,key:c}))).map(h=>{const c=e[h.index];if(!c)return null;const v=c.type==="GROUP",G=v&&n.some(U=>U.parentId===c.id),B=r.has(c.id),M=c.parentId?20:0,O=S===c.id,q=F===c.id,ge=P.has(c.id);return o.jsxs("div",{draggable:!!f,onDragStart:U=>Vt(U,c.id),onDragOver:U=>qt(U,c.id),onDragLeave:Xt,onDrop:U=>Bt(U,c.id),onDragEnd:Ut,onClick:U=>Kt(U,c,h.index),onContextMenu:U=>Qt(U,c),className:`box-border flex items-center border-b transition-all duration-150 ${O?"opacity-50 bg-blue-50":q?I==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":"border-b-2 border-b-blue-500":ge?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":v?"bg-gray-50 border-gray-100 hover:bg-gray-100":"border-gray-100 cursor-pointer hover:bg-blue-50 hover:shadow-[inset_0_0_0_1px_rgba(59,130,246,0.3)]"}`,style:{height:xe,...j?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${h.start}px)`}:{}},onDoubleClick:()=>!v&&a(c),title:v?void 0:"더블클릭하여 상세 공정표 보기",children:[f&&o.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:o.jsx(Dt,{size:14})}),o.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:f?p[0].width-24:p[0].width,paddingLeft:M+8},children:[G?o.jsx("button",{onClick:U=>{U.stopPropagation(),s(c.id)},className:"mr-1 shrink-0 rounded p-1 text-gray-500 hover:bg-gray-200",children:B?o.jsx(pr,{size:14}):o.jsx(vr,{size:14})}):o.jsx("div",{className:"w-6 shrink-0"}),o.jsx("span",{className:`truncate text-sm ${v?"font-bold text-gray-700":"font-medium text-gray-800"}`,children:c.name})]}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:p[1].width},children:v?"-":c.cp?`${c.cp.workDaysTotal+c.cp.nonWorkDaysTotal}일`:"-"}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-vermilion",style:{width:p[2].width},children:v?"-":c.cp?`${c.cp.workDaysTotal}일`:"-"}),o.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-teal",style:{width:p[3].width},children:v?"-":c.cp?`${c.cp.nonWorkDaysTotal}일`:"-"})]},h.key)})})]}),ne&&o.jsxs("div",{className:"fixed z-[100] min-w-[160px] rounded-lg border border-gray-200 bg-white py-1 shadow-lg",style:{left:ne.x,top:ne.y},onClick:h=>h.stopPropagation(),children:[P.size>=2&&x&&o.jsxs("button",{onClick:Jt,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"그룹화 (",P.size,"개 선택됨)"]}),P.size===1&&E&&(()=>{const h=Array.from(P)[0],c=e.find(v=>v.id===h);return(c==null?void 0:c.type)==="GROUP"})()&&o.jsxs("button",{onClick:Zt,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"그룹 해제"]}),o.jsxs("button",{onClick:()=>{ee(new Set),re(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-500 hover:bg-gray-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"선택 해제"]})]})]}):o.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[o.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:Et},children:[o.jsxs("div",{className:"flex flex-1 items-center justify-between px-4",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"font-bold text-gray-700",children:"주공정표 (Level 2)"}),g&&o.jsx("button",{onClick:g,className:"flex items-center gap-1 rounded bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 hover:bg-gray-200 transition-colors",title:"첫 번째 작업으로 스크롤",children:"◀ 첫 작업"}),m&&!X&&o.jsxs("button",{onClick:os,className:"flex items-center gap-1 rounded bg-blue-500 px-2 py-1 text-xs font-medium text-white hover:bg-blue-600 transition-colors",title:"새 공정 추가",children:[o.jsx(kr,{size:12}),"추가"]})]}),o.jsx("button",{onClick:i,className:"rounded bg-gray-200 px-3 py-1 text-xs font-medium text-gray-700 hover:bg-gray-300",children:"← 공구 공정표로"})]}),en()]}),H!==null&&o.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),o.jsxs("div",{ref:z,className:"relative flex-1 overflow-auto",children:[o.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:St,minWidth:J},children:p.map((h,c)=>o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:h.width},children:c===0&&"Milestone"},h.id))}),o.jsxs("div",{style:{minWidth:J,height:j?d:void 0,position:"relative"},children:[(j?b:e.map((h,c)=>({index:c,start:c*xe,size:xe,key:c}))).map(h=>{const c=e[h.index];if(!c)return null;const v=S===c.id,G=F===c.id,B=P.has(c.id);return o.jsxs("div",{draggable:!!f,onDragStart:M=>Vt(M,c.id),onDragOver:M=>qt(M,c.id),onDragLeave:Xt,onDrop:M=>Bt(M,c.id),onDragEnd:Ut,onClick:M=>Kt(M,c,h.index),onContextMenu:M=>Qt(M,c),className:`box-border flex items-center border-b transition-colors ${v?"opacity-50 bg-blue-50":G?I==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":"border-b-2 border-b-blue-500":B?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":"border-gray-100 hover:bg-gray-50"}`,style:{height:xe,...j?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${h.start}px)`}:{}},children:[f&&o.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:o.jsx(Dt,{size:14})}),o.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:f?p[0].width-24:p[0].width},children:o.jsx("span",{className:"truncate text-sm text-gray-700",children:c.name})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:p[1].width},children:c.task?o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:c.task.indirectWorkDaysPre,onChange:M=>{const O=M.target.value.replace(/[^0-9]/g,""),q=parseInt(O)||0;et(c,"indirectWorkDaysPre",q)},onKeyDown:M=>{(M.key==="-"||M.key==="e"||M.key==="+"||M.key===".")&&M.preventDefault()},title:"선 간접작업일 (바 드래그로도 조절 가능)"}):o.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:p[2].width},children:c.task?o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-red-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-red-500 focus:outline-none focus:ring-1 focus:ring-red-500",value:c.task.netWorkDays,onChange:M=>{const O=M.target.value.replace(/[^0-9]/g,""),q=parseInt(O)||0;et(c,"netWorkDays",q)},onKeyDown:M=>{(M.key==="-"||M.key==="e"||M.key==="+"||M.key===".")&&M.preventDefault()},title:"순작업일"}):o.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:p[3].width},children:c.task?o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:c.task.indirectWorkDaysPost,onChange:M=>{const O=M.target.value.replace(/[^0-9]/g,""),q=parseInt(O)||0;et(c,"indirectWorkDaysPost",q)},onKeyDown:M=>{(M.key==="-"||M.key==="e"||M.key==="+"||M.key===".")&&M.preventDefault()},title:"후 간접작업일 (바 드래그로도 조절 가능)"}):o.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:p[4].width},children:ce(c.startDate,"yyyy-MM-dd")}),o.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-gray-500",style:{width:p[5].width},children:ce(c.endDate,"yyyy-MM-dd")})]},h.key)}),X&&o.jsxs("div",{className:"box-border flex items-center border-b-2 border-blue-300 bg-blue-50 transition-colors",style:{height:xe,...j?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.length*xe}px)`}:{}},children:[o.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-blue-200 px-2",style:{width:p[0].width},children:o.jsx("input",{ref:W,type:"text",placeholder:"공정명...",className:"w-full rounded border border-blue-300 bg-white px-2 py-1 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:_.name,onChange:h=>Z(c=>({...c,name:h.target.value})),onKeyDown:Ge})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:p[1].width},children:o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:_.indirectWorkDaysPre,onChange:h=>{const c=h.target.value.replace(/[^0-9]/g,""),v=parseInt(c)||0;Z(G=>({...G,indirectWorkDaysPre:v}))},onKeyDown:Ge,title:"선 간접작업일"})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:p[2].width},children:o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:_.netWorkDays,onChange:h=>{const c=h.target.value.replace(/[^0-9]/g,""),v=parseInt(c)||0;Z(G=>({...G,netWorkDays:v}))},onKeyDown:Ge,title:"순작업일"})}),o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:p[3].width},children:o.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:_.indirectWorkDaysPost,onChange:h=>{const c=h.target.value.replace(/[^0-9]/g,""),v=parseInt(c)||0;Z(G=>({...G,indirectWorkDaysPost:v}))},onKeyDown:Ge,title:"후 간접작업일"})}),o.jsxs("div",{className:"flex shrink-0 items-center justify-center gap-1 px-2",style:{width:p[4].width+p[5].width},children:[o.jsx("button",{onClick:nt,disabled:!_.name.trim(),className:"flex items-center justify-center rounded bg-blue-500 p-1.5 text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",title:"저장 (Enter)",children:o.jsx(wr,{size:14})}),o.jsx("button",{onClick:tt,className:"flex items-center justify-center rounded bg-gray-400 p-1.5 text-white hover:bg-gray-500 transition-colors",title:"취소 (Esc)",children:o.jsx(Dr,{size:14})})]})]})]})]}),ne&&o.jsxs("div",{className:"fixed z-[100] min-w-[160px] rounded-lg border border-gray-200 bg-white py-1 shadow-lg",style:{left:ne.x,top:ne.y},onClick:h=>h.stopPropagation(),children:[P.size>=2&&x&&o.jsxs("button",{onClick:Jt,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"그룹화 (",P.size,"개 선택됨)"]}),P.size===1&&E&&(()=>{const h=Array.from(P)[0],c=e.find(v=>v.id===h);return(c==null?void 0:c.type)==="GROUP"})()&&o.jsxs("button",{onClick:Zt,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"그룹 해제"]}),o.jsxs("button",{onClick:()=>{ee(new Set),re(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-500 hover:bg-gray-100",children:[o.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:o.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"선택 해제"]})]})]})});Ke.displayName="GanttSidebar";const ke=(e,n=[],t)=>!!(!t.workOnSaturdays&&lt(e)||!t.workOnSundays&&ct(e)||!t.workOnHolidays&&n.some(r=>dn(r,e))),Er=e=>lt(e)||ct(e),Wt=(e,n,t=[],r)=>{let s=new Date(e),a=0;if(n<=0)return s;for(;ke(s,t,r);)s=V(s,1);for(;a<n;)ke(s,t,r)||a++,a<n&&(s=V(s,1));return s},Sr=(e,n,t=[],r)=>{let s=new Date(e),a=0;if(n<=0)return s;for(;a<n;)s=V(s,-1),ke(s,t,r)||a++;return s},Qe=(e,n)=>n<=0?e:V(e,n-1),Mr=(e,n=[],t)=>{if(!e.task)return{startDate:e.startDate,endDate:e.endDate,netWorkStartDate:e.startDate,netWorkEndDate:e.endDate};const{netWorkDays:r,indirectWorkDaysPre:s,indirectWorkDaysPost:a}=e.task,i=Pe(new Date(e.startDate));let l=i,m,f;s>0&&(m=l,f=Qe(l,s),l=V(f,1));let g=l,k=g;if(r>0){for(;ke(g,n,t);)g=V(g,1);k=Wt(g,r,n,t),l=V(k,1)}else s===0&&(g=i,k=i);let b,d;return a>0&&(b=l,d=Qe(l,a)),{startDate:m||g,endDate:d||k,netWorkStartDate:g,netWorkEndDate:k,indirectPreStartDate:m,indirectPreEndDate:f,indirectPostStartDate:b,indirectPostEndDate:d}},Tr=(e,n,t)=>{switch(n){case"START":return t.startDate;case"NET_WORK_START":return t.netWorkStartDate;case"NET_WORK_END":return t.netWorkEndDate;case"END":return t.endDate;default:return t.endDate}},Ye=(e,n,t)=>Xe(e,n)*t,Wr=(e,n,t)=>{const r=Math.round(e/t);return V(n,r)},jr=(e,n,t)=>(Xe(n,e)+1)*t,Or=e=>Ae[e].pixelsPerDay,Je=(e,n=[],t=5)=>{const r=[...e.flatMap(f=>[f.startDate,f.endDate].filter(Boolean)),...n.map(f=>f.date)];if(r.length===0){const f=new Date;return{minDate:f,maxDate:V(f,30),totalDays:30}}const s=new Date(Math.min(...r.map(f=>f.getTime()))),a=new Date(Math.max(...r.map(f=>f.getTime()))),i=V(s,-t),l=V(a,t),m=Xe(l,i);return{minDate:i,maxDate:l,totalDays:m}},{ROW_HEIGHT:ie,HEADER_HEIGHT:Nr,MILESTONE_LANE_HEIGHT:ue,BAR_HEIGHT:te}=be,_r=({minDate:e,totalDays:n,pixelsPerDay:t,zoomLevel:r,holidays:s,calendarSettings:a})=>{const i=Array.from({length:n},(b,d)=>V(e,d)),l=n*t,m=y.useMemo(()=>{const b=[];let d=Ue(i[0]),w=0;return i.forEach(x=>{Ue(x)!==d?(b.push({label:`${d}년`,days:w}),d=Ue(x),w=1):w++}),b.push({label:`${d}년`,days:w}),b},[i]),f=y.useMemo(()=>{const b=[];let d=i[0],w=0;return i.forEach(x=>{fr(x,d)?w++:(b.push({label:ce(d,"M월"),days:w}),d=x,w=1)}),b.push({label:ce(d,"M월"),days:w}),b},[i]),g=y.useMemo(()=>{if(r==="MONTH")return null;if(r==="DAY")return o.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:l},children:i.map((b,d)=>{const w=Re(b),x=ke(b,s,a),E=w===0,z=w===6;let j="text-gray-600";E&&(j="text-red-500"),z&&(j="text-blue-500"),x&&!E&&!z&&(j="text-red-500");let X="";return E||x&&!z?X="bg-red-50/50":z&&(X="bg-blue-50/50"),o.jsxs("div",{className:`flex h-full shrink-0 flex-col items-center justify-center border-r border-gray-100 font-medium ${X}`,style:{width:t,minWidth:t},children:[o.jsx("span",{className:`text-[10px] leading-none ${j}`,children:ce(b,"d")}),o.jsx("span",{className:`mt-0.5 text-[9px] font-bold leading-none ${j}`,children:["일","월","화","수","목","금","토"][w]})]},d)})});{const b=[];let d=i[0],w=0;return i.forEach(x=>{hr(x,d,{weekStartsOn:0})?w++:(b.push({label:`${pt(d,{weekStartsOn:0})}주`,days:w}),d=x,w=1)}),b.push({label:`${pt(d,{weekStartsOn:0})}주`,days:w}),o.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:l},children:b.map((x,E)=>o.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-100 text-xs font-medium text-gray-600",style:{width:x.days*t},children:x.label},E))})}},[i,r,t,s,a,l]),k=r==="MONTH";return o.jsx("div",{className:"sticky top-0 z-20 flex flex-col border-b border-gray-300 bg-white shadow-sm",style:{height:Nr,minWidth:l},children:k?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex h-[48px] items-center border-b border-gray-300 bg-gray-100 text-sm font-bold text-gray-800",style:{minWidth:l},children:m.map((b,d)=>o.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-300",style:{width:b.days*t},children:b.label},d))}),o.jsx("div",{className:"flex h-[32px] items-center bg-white text-xs font-medium text-gray-700",style:{minWidth:l},children:f.map((b,d)=>o.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-200",style:{width:b.days*t},children:b.label},d))})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-300 bg-gray-100 text-xs font-bold text-gray-800",style:{minWidth:l},children:m.map((b,d)=>o.jsx("div",{className:"flex shrink-0 items-center border-r border-gray-300 pl-2",style:{width:b.days*t},children:b.label},d))}),o.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-200 bg-gray-100 text-xs font-medium text-gray-700",style:{minWidth:l},children:f.map((b,d)=>o.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-300",style:{width:b.days*t},children:b.label},d))}),g]})})},Pr=({minDate:e,totalDays:n,chartHeight:t,pixelsPerDay:r,holidays:s,calendarSettings:a,zoomLevel:i})=>{const l=y.useMemo(()=>{if(i==="MONTH")return[];const m=[];for(let f=0;f<n;f++){const g=V(e,f),k=Re(g),b=k===0,d=k===6;if(ke(g,s,a)||d){const x=f*r;let E="rgba(254, 242, 242, 0.5)";d&&!b&&(E="rgba(239, 246, 255, 0.5)"),b&&(E="rgba(254, 242, 242, 0.5)"),m.push(o.jsx("rect",{x,y:0,width:r,height:t,fill:E,className:"pointer-events-none"},`weekend-${f}`))}}return m},[e,n,t,r,s,a,i]);return o.jsx("g",{children:l})},Cr=({milestone:e,x:n})=>{const r=ue/2;return o.jsxs("g",{transform:`translate(${n}, ${r})`,className:"group cursor-pointer",children:[o.jsx("line",{x1:0,y1:0,x2:0,y2:1e3,stroke:de.grid,strokeWidth:2,strokeDasharray:"4, 4",className:"opacity-0 transition-opacity duration-200 group-hover:opacity-100"}),o.jsx("path",{d:`M ${-12/2} ${-12/2} L ${12/2} ${-12/2} L 0 ${12/2} Z`,fill:de.milestone,stroke:"white",strokeWidth:1,className:"drop-shadow-sm transition-all duration-150 group-hover:scale-125 group-hover:fill-blue-600"}),o.jsx("text",{x:-8,y:4,textAnchor:"end",className:"select-none text-[11px] font-bold fill-gray-600 transition-colors group-hover:fill-blue-700",children:e.name})]})},Ir=({task:e,y:n,minDate:t,pixelsPerDay:r,isMasterView:s,isDraggable:a=!1,dragInfo:i,onDragStart:l})=>{var d,w;if(e.type==="GROUP")return null;const m=4,f=!!i,g=(i==null?void 0:i.startDate)||e.startDate,k=(i==null?void 0:i.endDate)||e.endDate,b=Ye(g,t,r);if(s){const x=((d=e.cp)==null?void 0:d.workDaysTotal)||0,E=((w=e.cp)==null?void 0:w.nonWorkDaysTotal)||0;if(x+E===0)return null;const j=x*r,X=E*r;return o.jsxs("g",{transform:`translate(${b}, ${n})`,className:"group cursor-pointer",children:[o.jsx("rect",{x:0,y:0,width:j,height:te,fill:de.vermilion,rx:m,ry:m,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),o.jsx("rect",{x:j,y:0,width:X,height:te,fill:de.teal,rx:m,ry:m,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),o.jsx("text",{x:-8,y:te/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-bold fill-gray-700",children:e.name})]})}else{if(!e.task)return null;const{netWorkDays:x,indirectWorkDaysPre:E,indirectWorkDaysPost:z}=e.task,j=(i==null?void 0:i.indirectWorkDaysPre)??E,X=(i==null?void 0:i.indirectWorkDaysPost)??z,Q=j*r,_=x*r,Z=X*r,W=Q+_+Z,S=0,L=Q,F=Q+_,Y=8,I={startDate:g,endDate:k,indirectWorkDaysPre:j,netWorkDays:x,indirectWorkDaysPost:X};return o.jsxs("g",{transform:`translate(${b}, ${n})`,className:`group ${f?"opacity-90":""}`,children:[a&&o.jsx("rect",{x:Q,y:0,width:_,height:te,fill:"transparent",className:"cursor-grab active:cursor-grabbing",onMouseDown:R=>l==null?void 0:l(R,e.id,"move",I)}),j>0&&o.jsx("rect",{x:S,y:0,width:Q,height:te,fill:de.blue,rx:m,ry:m,className:`drop-shadow-sm transition-opacity ${f?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),x>0&&o.jsx("rect",{x:L,y:0,width:_,height:te,fill:de.red,rx:m,ry:m,className:`drop-shadow-sm transition-opacity ${f?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),X>0&&o.jsx("rect",{x:F,y:0,width:Z,height:te,fill:de.blue,rx:m,ry:m,className:`drop-shadow-sm transition-opacity ${f?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),a&&o.jsx("rect",{x:-Y/2,y:0,width:Y,height:te,fill:"transparent",className:"cursor-ew-resize",onMouseDown:R=>l==null?void 0:l(R,e.id,"resize-pre",I),children:o.jsx("title",{children:"앞 간접작업일 조절 (드래그)"})}),a&&o.jsx("rect",{x:W-Y/2,y:0,width:Y,height:te,fill:"transparent",className:"cursor-ew-resize",onMouseDown:R=>l==null?void 0:l(R,e.id,"resize-post",I),children:o.jsx("title",{children:"뒤 간접작업일 조절 (드래그)"})}),a&&o.jsxs(o.Fragment,{children:[o.jsx("rect",{x:1,y:te/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"}),o.jsx("rect",{x:W-4,y:te/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"})]}),o.jsx("text",{x:-8,y:te/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-medium fill-gray-700",children:e.name}),f&&o.jsxs("g",{children:[o.jsxs("text",{x:W/2,y:-6,textAnchor:"middle",className:"pointer-events-none select-none text-[10px] font-bold fill-blue-600",children:[ce(g,"MM/dd")," ~ ",ce(k,"MM/dd")]}),o.jsxs("text",{x:W/2,y:te+12,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-gray-500",children:["앞",j,"일 + 순",x,"일 + 뒤",X,"일"]})]})]})}},Ar=()=>o.jsx("defs",{children:o.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:o.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:de.dependency})})}),Ze=y.forwardRef(({tasks:e,milestones:n,viewMode:t,zoomLevel:r,holidays:s,calendarSettings:a,onBarDrag:i,virtualRows:l,totalHeight:m},f)=>{const g=Ae[r].pixelsPerDay,k=t==="MASTER",b=l&&l.length>0,[d,w]=y.useState(null),{minDate:x,totalDays:E}=y.useMemo(()=>Je(e,n,60),[e,n]),z=E*g,j=Math.max(b?(m||0)+ue+100:e.length*ie+ue+100,500),X=y.useCallback((W,S,L,F)=>{i&&(W.preventDefault(),W.stopPropagation(),w({taskId:S,dragType:L,startX:W.clientX,originalStartDate:F.startDate,originalEndDate:F.endDate,originalIndirectWorkDaysPre:F.indirectWorkDaysPre,originalNetWorkDays:F.netWorkDays,originalIndirectWorkDaysPost:F.indirectWorkDaysPost,currentStartDate:F.startDate,currentEndDate:F.endDate,currentIndirectWorkDaysPre:F.indirectWorkDaysPre,currentIndirectWorkDaysPost:F.indirectWorkDaysPost}))},[i]),Q=y.useCallback(W=>{if(!d||!i)return;const S=W.clientX-d.startX,L=Math.round(S/g);let F=d.originalStartDate,Y=d.originalEndDate,I=d.originalIndirectWorkDaysPre,R=d.originalIndirectWorkDaysPost;if(d.dragType==="move")F=V(d.originalStartDate,L),Y=V(d.originalEndDate,L);else if(d.dragType==="resize-pre"){I=Math.max(0,d.originalIndirectWorkDaysPre-L),F=V(d.originalStartDate,-(-L+(I-d.originalIndirectWorkDaysPre)));const P=V(d.originalStartDate,d.originalIndirectWorkDaysPre);F=V(P,-I),Y=d.originalEndDate}else if(d.dragType==="resize-post"){R=Math.max(0,d.originalIndirectWorkDaysPost+L);const P=V(d.originalEndDate,-d.originalIndirectWorkDaysPost);Y=V(P,R),F=d.originalStartDate}w(P=>P?{...P,currentStartDate:F,currentEndDate:Y,currentIndirectWorkDaysPre:I,currentIndirectWorkDaysPost:R}:null)},[d,i,g]),_=y.useCallback(()=>{if(!d||!i){w(null);return}const W=d.currentStartDate.getTime()!==d.originalStartDate.getTime()||d.currentEndDate.getTime()!==d.originalEndDate.getTime(),S=d.currentIndirectWorkDaysPre!==d.originalIndirectWorkDaysPre||d.currentIndirectWorkDaysPost!==d.originalIndirectWorkDaysPost;(W||S)&&i({taskId:d.taskId,dragType:d.dragType,newStartDate:d.currentStartDate,newEndDate:d.currentEndDate,newIndirectWorkDaysPre:d.currentIndirectWorkDaysPre,newIndirectWorkDaysPost:d.currentIndirectWorkDaysPost}),w(null)},[d,i]);y.useEffect(()=>{if(d)return window.addEventListener("mousemove",Q),window.addEventListener("mouseup",_),document.body.style.cursor=d.dragType==="move"?"grabbing":"ew-resize",document.body.style.userSelect="none",()=>{window.removeEventListener("mousemove",Q),window.removeEventListener("mouseup",_),document.body.style.cursor="",document.body.style.userSelect=""}},[d,Q,_]);const Z=y.useCallback(W=>d&&d.taskId===W?{startDate:d.currentStartDate,endDate:d.currentEndDate,indirectWorkDaysPre:d.currentIndirectWorkDaysPre,indirectWorkDaysPost:d.currentIndirectWorkDaysPost}:null,[d]);return o.jsx("div",{className:"flex h-full w-full flex-col overflow-hidden bg-white",children:o.jsxs("div",{ref:f,className:"relative flex-1 overflow-auto",children:[o.jsx(_r,{minDate:x,totalDays:E,pixelsPerDay:g,zoomLevel:r,holidays:s,calendarSettings:a}),o.jsxs("svg",{width:z,height:j,className:"block bg-white",children:[o.jsx(Ar,{}),o.jsx(Pr,{minDate:x,totalDays:E,chartHeight:j,pixelsPerDay:g,holidays:s,calendarSettings:a,zoomLevel:r}),(b?l:e.map((W,S)=>({index:S,start:S*ie,size:ie,key:S}))).map(W=>{const S=e[W.index];if(!S||S.type!=="GROUP")return null;const L=W.start+ue;return o.jsx("rect",{x:0,y:L,width:z,height:ie,fill:"rgba(249, 250, 251, 0.6)",className:"pointer-events-none"},`group-bg-${W.key}`)}),Array.from({length:E},(W,S)=>{const L=(S+1)*g,F=V(x,S),Y=Re(F);let I=!1,R="#f0f0f0";return r==="DAY"?(I=!0,R=Y===0?"#e0e0e0":"#f0f0f0"):r==="WEEK"?(I=Y===0,R="#e5e7eb"):r==="MONTH"&&(I=Y===0,R="#f0f0f0"),I?o.jsx("line",{x1:L,y1:0,x2:L,y2:j,stroke:R,strokeWidth:1},`vline-${S}`):null}),(b?l:e.map((W,S)=>({index:S,start:S*ie,size:ie,key:S}))).map(W=>o.jsx("line",{x1:0,y1:W.start+ie+ue,x2:z,y2:W.start+ie+ue,stroke:"#f3f4f6",strokeWidth:1},`line-${W.key}`)),o.jsx("rect",{x:0,y:0,width:z,height:ue,fill:"transparent"}),n.map(W=>o.jsx(Cr,{milestone:W,x:Ye(W.date,x,g)},W.id)),o.jsx("line",{x1:0,y1:ue,x2:z,y2:ue,stroke:de.grid,strokeWidth:1}),(b?l:e.map((W,S)=>({index:S,start:S*ie,size:ie,key:S}))).map(W=>{const S=e[W.index];if(!S)return null;const L=W.start+(ie-te)/2+ue;return o.jsx(Ir,{task:S,y:L,minDate:x,pixelsPerDay:g,isMasterView:k,isDraggable:!k&&!!i,dragInfo:Z(S.id),onDragStart:X},W.key)})]})]})})});Ze.displayName="GanttTimeline";const jt=e=>{let n;const t=new Set,r=(f,g)=>{const k=typeof f=="function"?f(n):f;if(!Object.is(k,n)){const b=n;n=g??(typeof k!="object"||k===null)?k:Object.assign({},n,k),t.forEach(d=>d(n,b))}},s=()=>n,l={setState:r,getState:s,getInitialState:()=>m,subscribe:f=>(t.add(f),()=>t.delete(f))},m=n=e(r,s,l);return l},zr=e=>e?jt(e):jt,Lr=e=>e;function Fr(e,n=Lr){const t=y.useSyncExternalStore(e.subscribe,y.useCallback(()=>n(e.getState()),[e,n]),y.useCallback(()=>n(e.getInitialState()),[e,n]));return y.useDebugValue(t),t}const Ot=e=>{const n=zr(e),t=r=>Fr(n,r);return Object.assign(t,n),t},Rr=e=>e?Ot(e):Ot,Nt=e=>Symbol.iterator in e,_t=e=>"entries"in e,Pt=(e,n)=>{const t=e instanceof Map?e:new Map(e.entries()),r=n instanceof Map?n:new Map(n.entries());if(t.size!==r.size)return!1;for(const[s,a]of t)if(!r.has(s)||!Object.is(a,r.get(s)))return!1;return!0},Hr=(e,n)=>{const t=e[Symbol.iterator](),r=n[Symbol.iterator]();let s=t.next(),a=r.next();for(;!s.done&&!a.done;){if(!Object.is(s.value,a.value))return!1;s=t.next(),a=r.next()}return!!s.done&&!!a.done};function Yr(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:Nt(e)&&Nt(n)?_t(e)&&_t(n)?Pt(e,n):Hr(e,n):Pt({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function Me(e){const n=y.useRef(void 0);return t=>{const r=e(t);return Yr(n.current,r)?n.current:n.current=r}}const De=Rr((e,n)=>({viewMode:"MASTER",activeCPId:null,zoomLevel:"MONTH",selectedTaskId:null,hoveredTaskId:null,expandedTaskIds:new Set,sidebarWidth:be.SIDEBAR_WIDTH,isDragging:!1,dragType:null,dragTaskId:null,setViewMode:(t,r)=>{e({viewMode:t,activeCPId:r??null,zoomLevel:t==="DETAIL"?"DAY":"MONTH"})},setZoomLevel:t=>{e({zoomLevel:t})},selectTask:t=>{e({selectedTaskId:t})},hoverTask:t=>{e({hoveredTaskId:t})},toggleTask:t=>{const{expandedTaskIds:r}=n(),s=new Set(r);s.has(t)?s.delete(t):s.add(t),e({expandedTaskIds:s})},expandAll:t=>{e({expandedTaskIds:new Set(t)})},collapseAll:()=>{e({expandedTaskIds:new Set})},setSidebarWidth:t=>{const r=Math.max(be.SIDEBAR_MIN_WIDTH,Math.min(t,be.SIDEBAR_MAX_WIDTH));e({sidebarWidth:r})},startDrag:(t,r)=>{e({isDragging:!0,dragType:t,dragTaskId:r})},endDrag:()=>{e({isDragging:!1,dragType:null,dragTaskId:null})}})),Ct=()=>De(Me(e=>({viewMode:e.viewMode,activeCPId:e.activeCPId,zoomLevel:e.zoomLevel}))),It=()=>De(Me(e=>({setViewMode:e.setViewMode,setZoomLevel:e.setZoomLevel}))),$r=()=>De(Me(e=>({selectedTaskId:e.selectedTaskId,hoveredTaskId:e.hoveredTaskId,selectTask:e.selectTask,hoverTask:e.hoverTask}))),At=()=>De(Me(e=>({expandedTaskIds:e.expandedTaskIds,toggleTask:e.toggleTask,expandAll:e.expandAll,collapseAll:e.collapseAll}))),zt=()=>De(Me(e=>({sidebarWidth:e.sidebarWidth,setSidebarWidth:e.setSidebarWidth}))),Gr=()=>De(Me(e=>({isDragging:e.isDragging,dragType:e.dragType,dragTaskId:e.dragTaskId,startDrag:e.startDrag,endDrag:e.endDrag})));function Te(e,n,t){let r=t.initialDeps??[],s;function a(){var i,l,m,f;let g;t.key&&((i=t.debug)!=null&&i.call(t))&&(g=Date.now());const k=e();if(!(k.length!==r.length||k.some((w,x)=>r[x]!==w)))return s;r=k;let d;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(d=Date.now()),s=n(...k),t.key&&((m=t.debug)!=null&&m.call(t))){const w=Math.round((Date.now()-g)*100)/100,x=Math.round((Date.now()-d)*100)/100,E=x/16,z=(j,X)=>{for(j=String(j);j.length<X;)j=" "+j;return j};console.info(`%c⏱ ${z(x,5)} /${z(w,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*E,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(f=t==null?void 0:t.onChange)==null||f.call(t,s),s}return a.updateDeps=i=>{r=i},a}function Lt(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const Vr=(e,n)=>Math.abs(e-n)<1.01,qr=(e,n,t)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>n.apply(this,s),t)}},Ft=e=>{const{offsetWidth:n,offsetHeight:t}=e;return{width:n,height:t}},Xr=e=>e,Br=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=n;s<=t;s++)r.push(s);return r},Ur=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;const s=i=>{const{width:l,height:m}=i;n({width:Math.round(l),height:Math.round(m)})};if(s(Ft(t)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(i=>{const l=()=>{const m=i[0];if(m!=null&&m.borderBoxSize){const f=m.borderBoxSize[0];if(f){s({width:f.inlineSize,height:f.blockSize});return}}s(Ft(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},Rt={passive:!0},Ht=typeof window>"u"?!0:"onscrollend"in window,Kr=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;let s=0;const a=e.options.useScrollendEvent&&Ht?()=>{}:qr(r,()=>{n(s,!1)},e.options.isScrollingResetDelay),i=g=>()=>{const{horizontal:k,isRtl:b}=e.options;s=k?t.scrollLeft*(b&&-1||1):t.scrollTop,a(),n(s,g)},l=i(!0),m=i(!1);m(),t.addEventListener("scroll",l,Rt);const f=e.options.useScrollendEvent&&Ht;return f&&t.addEventListener("scrollend",m,Rt),()=>{t.removeEventListener("scroll",l),f&&t.removeEventListener("scrollend",m)}},Qr=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const r=n.borderBoxSize[0];if(r)return Math.round(r[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},Jr=(e,{adjustments:n=0,behavior:t},r)=>{var s,a;const i=e+n;(a=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||a.call(s,{[r.options.horizontal?"left":"top"]:i,behavior:t})};class Zr{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const r=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(s=>{s.forEach(a=>{const i=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),t=null},observe:s=>{var a;return(a=r())==null?void 0:a.observe(s,{box:"border-box"})},unobserve:s=>{var a;return(a=r())==null?void 0:a.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([r,s])=>{typeof s>"u"&&delete t[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Xr,rangeExtractor:Br,onChange:()=>{},measureElement:Qr,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,t)},this.maybeNotify=Te(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:process.env.NODE_ENV!=="production"&&"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,r)=>{const s=new Map,a=new Map;for(let i=r-1;i>=0;i--){const l=t[i];if(s.has(l.lane))continue;const m=a.get(l.lane);if(m==null||l.end>m.end?a.set(l.lane,l):l.end<m.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((i,l)=>i.end===l.end?i.index-l.index:i.end-l.end)[0]:void 0},this.getMeasurementOptions=Te(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,r,s,a,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:s,getItemKey:a,enabled:i}),{key:!1}),this.getMeasurements=Te(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:r,scrollMargin:s,getItemKey:a,enabled:i},l)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const m=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const f=this.measurementsCache.slice(0,m);for(let g=m;g<t;g++){const k=a(g),b=this.options.lanes===1?f[g-1]:this.getFurthestMeasurement(f,g),d=b?b.end+this.options.gap:r+s,w=l.get(k),x=typeof w=="number"?w:this.options.estimateSize(g),E=d+x,z=b?b.lane:g%this.options.lanes;f[g]={index:g,start:d,size:x,end:E,key:k,lane:z}}return this.measurementsCache=f,f},{key:process.env.NODE_ENV!=="production"&&"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=Te(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,r,s,a)=>this.range=t.length>0&&r>0?es({measurements:t,outerSize:r,scrollOffset:s,lanes:a}):null,{key:process.env.NODE_ENV!=="production"&&"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=Te(()=>{let t=null,r=null;const s=this.calculateRange();return s&&(t=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,r]},(t,r,s,a,i)=>a===null||i===null?[]:t({startIndex:a,endIndex:i,overscan:r,count:s}),{key:process.env.NODE_ENV!=="production"&&"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const r=this.options.indexAttribute,s=t.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(t,r)=>{const s=this.indexFromElement(t),a=this.measurementsCache[s];if(!a)return;const i=a.key,l=this.elementsCache.get(i);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(s,this.options.measureElement(t,r,this))},this.resizeItem=(t,r)=>{const s=this.measurementsCache[t];if(!s)return;const a=this.itemSizeCache.get(s.key)??s.size,i=r-a;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,i,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("correction",i),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(t,void 0)},this.getVirtualItems=Te(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,r)=>{const s=[];for(let a=0,i=t.length;a<i;a++){const l=t[a],m=r[l];s.push(m)}return s},{key:process.env.NODE_ENV!=="production"&&"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const r=this.getMeasurements();if(r.length!==0)return Lt(r[Yt(0,r.length-1,s=>Lt(r[s]).start,t)])},this.getOffsetForAlignment=(t,r,s=0)=>{const a=this.getSize(),i=this.getScrollOffset();r==="auto"&&(r=t>=i+a?"end":"start"),r==="center"?t+=(s-a)/2:r==="end"&&(t-=a);const l=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,r="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=this.measurementsCache[t];if(!s)return;const a=this.getSize(),i=this.getScrollOffset();if(r==="auto")if(s.end>=i+a-this.options.scrollPaddingEnd)r="end";else if(s.start<=i+this.options.scrollPaddingStart)r="start";else return[i,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let a=0;const i=10,l=f=>{if(!this.targetWindow)return;const g=this.getOffsetForIndex(t,f);if(!g){console.warn("Failed to get offset for index:",t);return}const[k,b]=g;this._scrollToOffset(k,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const d=this.getScrollOffset(),w=this.getOffsetForIndex(t,b);if(!w){console.warn("Failed to get offset for index:",t);return}Vr(w[0],d)||m(b)})},m=f=>{this.targetWindow&&(a++,a<i?(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("Schedule retry",a,i),this.targetWindow.requestAnimationFrame(()=>l(f))):console.warn(`Failed to scroll to index ${t} after ${i} attempts.`))};l(r)},this.scrollBy=(t,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var t;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((t=r[r.length-1])==null?void 0:t.end)??0;else{const a=Array(this.options.lanes).fill(null);let i=r.length-1;for(;i>=0&&a.some(l=>l===null);){const l=r[i];a[l.lane]===null&&(a[l.lane]=l.end),i--}s=Math.max(...a.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:r,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const Yt=(e,n,t,r)=>{for(;e<=n;){const s=(e+n)/2|0,a=t(s);if(a<r)e=s+1;else if(a>r)n=s-1;else return s}return e>0?e-1:0};function es({measurements:e,outerSize:n,scrollOffset:t,lanes:r}){const s=e.length-1,a=m=>e[m].start;if(e.length<=r)return{startIndex:0,endIndex:s};let i=Yt(0,s,a,t),l=i;if(r===1)for(;l<s&&e[l].end<t+n;)l++;else if(r>1){const m=Array(r).fill(0);for(;l<s&&m.some(g=>g<t+n);){const g=e[l];m[g.lane]=g.end,l++}const f=Array(r).fill(t+n);for(;i>=0&&f.some(g=>g>=t);){const g=e[i];f[g.lane]=g.start,i--}i=Math.max(0,i-i%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:i,endIndex:l}}const $t=typeof document<"u"?Le.useLayoutEffect:Le.useEffect;function ts(e){const n=Le.useReducer(()=>({}),{})[1],t={...e,onChange:(s,a)=>{var i;a?nn.flushSync(n):n(),(i=e.onChange)==null||i.call(e,s,a)}},[r]=Le.useState(()=>new Zr(t));return r.setOptions(t),$t(()=>r._didMount(),[]),$t(()=>r._willUpdate()),r}function ns(e){return ts({observeElementRect:Ur,observeElementOffset:Kr,scrollToFn:Jr,...e})}const{ROW_HEIGHT:rs}=be;function Gt({containerRef:e,count:n,rowHeight:t=rs,overscan:r=5}){const s=ns({count:n,getScrollElement:()=>e.current,estimateSize:()=>t,overscan:r});return{virtualRows:y.useMemo(()=>s.getVirtualItems().map(i=>({index:i.index,start:i.start,size:i.size,key:i.index})),[s.getVirtualItems()]),totalHeight:s.getTotalSize(),virtualizer:s}}const ss={workOnSaturdays:!1,workOnSundays:!1,workOnHolidays:!1};function as({tasks:e,milestones:n=[],holidays:t=[],calendarSettings:r=ss,initialView:s="MASTER",initialZoomLevel:a="MONTH",initialExpandedIds:i,onTaskUpdate:l,onTaskCreate:m,onTaskReorder:f,onTaskGroup:g,onTaskUngroup:k,onViewChange:b,className:d,style:w}){const{viewMode:x,activeCPId:E,zoomLevel:z}=Ct(),{setViewMode:j,setZoomLevel:X}=It(),{sidebarWidth:Q,setSidebarWidth:_}=zt(),{expandedTaskIds:Z,toggleTask:W,expandAll:S}=At(),L=y.useRef(null),F=y.useRef(null),Y=y.useRef(null),I=y.useRef(!1),R=y.useRef(!1),[P,ee]=y.useState(!1),he=y.useRef(!1);y.useEffect(()=>{he.current||(he.current=!0,j(s),X(a),i&&i.length>0?S(i):e.length>0&&S(e.map(D=>D.id)))},[e.length]);const me=y.useMemo(()=>{if(x==="MASTER"){const D=[];return e.forEach(p=>{(p.wbsLevel===1&&!p.parentId||p.wbsLevel===1&&p.parentId&&Z.has(p.parentId))&&D.push(p)}),D}else return e.filter(D=>D.wbsLevel===2&&D.parentId===E)},[e,x,E,Z]),{virtualRows:ne,totalHeight:re}=Gt({containerRef:Y,count:me.length});y.useEffect(()=>{const D=F.current,p=Y.current;if(!D||!p)return;const ae=()=>{I.current||(I.current=!0,p.scrollTop=D.scrollTop,requestAnimationFrame(()=>{I.current=!1}))},J=()=>{I.current||(I.current=!0,D.scrollTop=p.scrollTop,requestAnimationFrame(()=>{I.current=!1}))};return D.addEventListener("scroll",ae),p.addEventListener("scroll",J),()=>{D.removeEventListener("scroll",ae),p.removeEventListener("scroll",J)}},[]);const[we,u]=y.useState(null),T=y.useCallback(D=>{if(D.detail>=2)return;D.preventDefault(),R.current=!0,ee(!0);const p=D.clientX,ae=Q,J=ze=>{if(!R.current)return;const $e=ze.clientX-p;_(ae+$e)},We=()=>{R.current=!1,ee(!1),document.removeEventListener("mousemove",J),document.removeEventListener("mouseup",We)};document.addEventListener("mousemove",J),document.addEventListener("mouseup",We)},[Q,_]),$=y.useCallback(()=>{_(we!==null?we:be.SIDEBAR_WIDTH)},[we,_]),H=y.useCallback((D,p)=>{j(D,p),b==null||b(D,p)},[j,b]),oe=y.useCallback(D=>{const p=Y.current;if(!p)return;const ae=Ae[z].pixelsPerDay,{minDate:J}=Je(e,n,60),We=Ye(D,J,ae);p.scrollLeft=Math.max(0,We-50)},[z,e,n]),le=y.useCallback(()=>{if(x!=="DETAIL"||!E)return;const D=e.filter(p=>p.parentId===E);if(D.length>0){const p=D.reduce((ae,J)=>ae.startDate<J.startDate?ae:J);oe(p.startDate)}},[x,E,e,oe]),A=y.useCallback(D=>{x==="MASTER"&&D.type==="CP"&&H("DETAIL",D.id)},[x,H]);y.useEffect(()=>{if(x==="DETAIL"&&E){const D=setTimeout(()=>{le()},100);return()=>clearTimeout(D)}},[x,E]);const se=y.useCallback(D=>{if(!l)return;const p=e.find(J=>J.id===D.taskId);if(!p||!p.task)return;const ae={...p,startDate:D.newStartDate,endDate:D.newEndDate,task:{...p.task,indirectWorkDaysPre:D.newIndirectWorkDaysPre,indirectWorkDaysPost:D.newIndirectWorkDaysPost}};l(ae)},[e,l]);return o.jsxs("div",{ref:L,className:`flex h-full w-full flex-col bg-gray-50 ${d||""}`,style:w,children:[o.jsxs("header",{className:"flex h-[60px] shrink-0 items-center justify-between border-b border-gray-200 bg-white px-4 shadow-sm",children:[o.jsx("h1",{className:"flex items-center gap-2 text-xl font-extrabold text-gray-800",children:o.jsxs("span",{children:[o.jsx("span",{className:"text-teal",children:"건설"})," ",o.jsx("span",{className:"text-vermilion",children:"표준공정표"})," 관리 시스템"]})}),o.jsxs("div",{className:"flex items-center gap-4",children:[o.jsx("div",{className:"flex rounded bg-gray-100 p-1",children:(x==="MASTER"?["WEEK","MONTH"]:["DAY","WEEK"]).map(D=>o.jsx("button",{onClick:()=>X(D),className:`rounded px-3 py-1 text-xs font-medium transition-colors ${z===D?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:Ae[D].label},D))}),o.jsxs("div",{className:"text-sm text-gray-500",children:["기준일: ",ce(new Date,"yyyy-MM-dd")]})]})]}),o.jsxs("div",{className:"relative flex flex-1 overflow-hidden",children:[o.jsx("div",{className:"z-10 flex shrink-0 flex-col bg-white",style:{width:Q},children:o.jsx(Ke,{ref:F,tasks:me,allTasks:e,viewMode:x,expandedIds:Z,onToggle:W,onTaskClick:A,onBackToMaster:()=>H("MASTER"),onTaskUpdate:l,onTaskCreate:m,onTaskReorder:f,onTaskGroup:g,onTaskUngroup:k,onScrollToFirstTask:le,activeCPId:E,virtualRows:ne,totalHeight:re,onTotalWidthChange:u})}),o.jsx("div",{className:`z-20 w-1 shrink-0 cursor-col-resize transition-colors ${P?"bg-blue-500":"bg-gray-200 hover:bg-gray-300"}`,onMouseDown:T,onDoubleClick:$,title:"드래그하여 너비 조절 / 더블클릭으로 초기화"}),o.jsx("div",{className:"relative flex flex-1 flex-col overflow-hidden bg-white",children:o.jsx(Ze,{ref:Y,tasks:me,milestones:n,viewMode:x,zoomLevel:z,holidays:t,calendarSettings:r,onTaskUpdate:l,onBarDrag:se,virtualRows:ne,totalHeight:re})}),P&&o.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"})]})]})}N.GANTT_COLORS=de,N.GANTT_LAYOUT=be,N.GanttChart=as,N.GanttSidebar=Ke,N.GanttTimeline=Ze,N.ZOOM_CONFIG=Ae,N.addCalendarDays=Qe,N.addWorkingDays=Wt,N.calculateDateRange=Je,N.calculateDualCalendarDates=Mr,N.dateToX=Ye,N.getAnchorDate=Tr,N.getDateRangeWidth=jr,N.getPixelsPerDay=Or,N.isHoliday=ke,N.isWeekend=Er,N.subtractWorkingDays=Sr,N.useGanttDrag=Gr,N.useGanttExpansion=At,N.useGanttSelection=$r,N.useGanttSidebar=zt,N.useGanttStore=De,N.useGanttViewActions=It,N.useGanttViewState=Ct,N.useGanttVirtualization=Gt,N.xToDate=Wr,Object.defineProperty(N,Symbol.toStringTag,{value:"Module"})});
