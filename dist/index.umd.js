(function(G,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],c):(G=typeof globalThis<"u"?globalThis:G||self,c(G.SaGanttLib={},G.React,G.ReactDOM))})(this,function(G,c,lt){"use strict";"use client";function Tn(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:()=>e[t]})}}return n.default=e,Object.freeze(n)}const ct=Tn(c);var Dt={exports:{}},Re={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var It;function Pn(){if(It)return Re;It=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(r,a,i){var o=null;if(i!==void 0&&(o=""+i),a.key!==void 0&&(o=""+a.key),"key"in a){i={};for(var l in a)l!=="key"&&(i[l]=a[l])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:o,ref:a!==void 0?a:null,props:i}}return Re.Fragment=n,Re.jsx=t,Re.jsxs=t,Re}var Xe={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var At;function On(){return At||(At=1,process.env.NODE_ENV!=="production"&&function(){function e(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===ae?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case D:return"Fragment";case I:return"Profiler";case O:return"StrictMode";case H:return"Suspense";case F:return"SuspenseList";case ee:return"Activity"}if(typeof f=="object")switch(typeof f.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),f.$$typeof){case p:return"Portal";case L:return f.displayName||"Context";case R:return(f._context.displayName||"Context")+".Consumer";case $:var j=f.render;return f=f.displayName,f||(f=j.displayName||j.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case P:return j=f.displayName||null,j!==null?j:e(f.type)||"Memo";case q:j=f._payload,f=f._init;try{return e(f(j))}catch{}}return null}function n(f){return""+f}function t(f){try{n(f);var j=!1}catch{j=!0}if(j){j=console;var C=j.error,A=typeof Symbol=="function"&&Symbol.toStringTag&&f[Symbol.toStringTag]||f.constructor.name||"Object";return C.call(j,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",A),n(f)}}function r(f){if(f===D)return"<>";if(typeof f=="object"&&f!==null&&f.$$typeof===q)return"<...>";try{var j=e(f);return j?"<"+j+">":"<...>"}catch{return"<...>"}}function a(){var f=te.A;return f===null?null:f.getOwner()}function i(){return Error("react-stack-top-frame")}function o(f){if(z.call(f,"key")){var j=Object.getOwnPropertyDescriptor(f,"key").get;if(j&&j.isReactWarning)return!1}return f.key!==void 0}function l(f,j){function C(){ne||(ne=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",j))}C.isReactWarning=!0,Object.defineProperty(f,"key",{get:C,configurable:!0})}function m(){var f=e(this.type);return ie[f]||(ie[f]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),f=this.props.ref,f!==void 0?f:null}function d(f,j,C,A,W,re){var V=C.ref;return f={$$typeof:x,type:f,key:j,props:C,_owner:A},(V!==void 0?V:null)!==null?Object.defineProperty(f,"ref",{enumerable:!1,get:m}):Object.defineProperty(f,"ref",{enumerable:!1,value:null}),f._store={},Object.defineProperty(f._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(f,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(f,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:W}),Object.defineProperty(f,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:re}),Object.freeze&&(Object.freeze(f.props),Object.freeze(f)),f}function h(f,j,C,A,W,re){var V=j.children;if(V!==void 0)if(A)if(X(V)){for(A=0;A<V.length;A++)v(V[A]);Object.freeze&&Object.freeze(V)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else v(V);if(z.call(j,"key")){V=e(f);var Z=Object.keys(j).filter(function(ue){return ue!=="key"});A=0<Z.length?"{key: someKey, "+Z.join(": ..., ")+": ...}":"{key: someKey}",g[V+A]||(Z=0<Z.length?"{"+Z.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,A,V,Z,V),g[V+A]=!0)}if(V=null,C!==void 0&&(t(C),V=""+C),o(j)&&(t(j.key),V=""+j.key),"key"in j){C={};for(var de in j)de!=="key"&&(C[de]=j[de])}else C=j;return V&&l(C,typeof f=="function"?f.displayName||f.name||"Unknown":f),d(f,V,C,a(),W,re)}function v(f){w(f)?f._store&&(f._store.validated=1):typeof f=="object"&&f!==null&&f.$$typeof===q&&(f._payload.status==="fulfilled"?w(f._payload.value)&&f._payload.value._store&&(f._payload.value._store.validated=1):f._store&&(f._store.validated=1))}function w(f){return typeof f=="object"&&f!==null&&f.$$typeof===x}var b=c,x=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),O=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),L=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),H=Symbol.for("react.suspense"),F=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),ee=Symbol.for("react.activity"),ae=Symbol.for("react.client.reference"),te=b.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=Object.prototype.hasOwnProperty,X=Array.isArray,J=console.createTask?console.createTask:function(){return null};b={react_stack_bottom_frame:function(f){return f()}};var ne,ie={},U=b.react_stack_bottom_frame.bind(b,i)(),E=J(r(i)),g={};Xe.Fragment=D,Xe.jsx=function(f,j,C){var A=1e4>te.recentlyCreatedOwnerStacks++;return h(f,j,C,!1,A?Error("react-stack-top-frame"):U,A?J(r(f)):E)},Xe.jsxs=function(f,j,C){var A=1e4>te.recentlyCreatedOwnerStacks++;return h(f,j,C,!0,A?Error("react-stack-top-frame"):U,A?J(r(f)):E)}}()),Xe}process.env.NODE_ENV==="production"?Dt.exports=Pn():Dt.exports=On();var s=Dt.exports;const zt=6048e5,_n=864e5,Lt=Symbol.for("constructDateFrom");function ve(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&Lt in e?e[Lt](n):e instanceof Date?new e.constructor(n):new Date(n)}function le(e,n){return ve(n||e,e)}function Q(e,n,t){const r=le(e,t==null?void 0:t.in);return isNaN(n)?ve(e,NaN):(n&&r.setDate(r.getDate()+n),r)}function Ft(e,n){return le(e,n==null?void 0:n.in).getDay()===6}function Ht(e,n){return le(e,n==null?void 0:n.in).getDay()===0}let In={};function Ve(){return In}function We(e,n){var l,m,d,h;const t=Ve(),r=(n==null?void 0:n.weekStartsOn)??((m=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.weekStartsOn)??0,a=le(e,n==null?void 0:n.in),i=a.getDay(),o=(i<r?7:0)+i-r;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function dt(e,n){return We(e,{...n,weekStartsOn:1})}function $t(e,n){const t=le(e,n==null?void 0:n.in),r=t.getFullYear(),a=ve(t,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=dt(a),o=ve(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=dt(o);return t.getTime()>=i.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function Gt(e){const n=le(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function Be(e,...n){const t=ve.bind(null,e||n.find(r=>typeof r=="object"));return n.map(t)}function qe(e,n){const t=le(e,n==null?void 0:n.in);return t.setHours(0,0,0,0),t}function Yt(e,n,t){const[r,a]=Be(t==null?void 0:t.in,e,n),i=qe(r),o=qe(a),l=+i-Gt(i),m=+o-Gt(o);return Math.round((l-m)/_n)}function An(e,n){const t=$t(e,n),r=ve(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),dt(r)}function zn(e,n,t){const[r,a]=Be(t==null?void 0:t.in,e,n);return+qe(r)==+qe(a)}function Ln(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Fn(e){return!(!Ln(e)&&typeof e!="number"||isNaN(+le(e)))}function jt(e,n,t){const[r,a]=Be(t==null?void 0:t.in,e,n),i=Rt(r,a),o=Math.abs(Yt(r,a));r.setDate(r.getDate()-i*o);const l=+(Rt(r,a)===-i),m=i*(o-l);return m===0?0:m}function Rt(e,n){const t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function Hn(e,n){const t=le(e,n==null?void 0:n.in);return t.setDate(1),t.setHours(0,0,0,0),t}function $n(e,n){const t=le(e,n==null?void 0:n.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Gn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Yn=(e,n,t)=>{let r;const a=Gn[e];return typeof a=="string"?r=a:n===1?r=a.one:r=a.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Nt(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const Rn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Xn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Bn={date:Nt({formats:Rn,defaultWidth:"full"}),time:Nt({formats:Xn,defaultWidth:"full"}),dateTime:Nt({formats:Vn,defaultWidth:"full"})},qn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Kn=(e,n,t,r)=>qn[e];function Ke(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=t!=null&&t.width?String(t.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=t!=null&&t.width?String(t.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(n):n;return a[i]}}const Qn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Jn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Un={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},er={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},nr={ordinalNumber:(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:Ke({values:Qn,defaultWidth:"wide"}),quarter:Ke({values:Jn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Ke({values:Un,defaultWidth:"wide"}),day:Ke({values:Zn,defaultWidth:"wide"}),dayPeriod:Ke({values:er,defaultWidth:"wide",formattingValues:tr,defaultFormattingWidth:"wide"})};function Qe(e){return(n,t={})=>{const r=t.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=n.match(a);if(!i)return null;const o=i[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],m=Array.isArray(l)?sr(l,v=>v.test(o)):rr(l,v=>v.test(o));let d;d=e.valueCallback?e.valueCallback(m):m,d=t.valueCallback?t.valueCallback(d):d;const h=n.slice(o.length);return{value:d,rest:h}}}function rr(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function sr(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function ar(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const a=r[0],i=n.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=t.valueCallback?t.valueCallback(o):o;const l=n.slice(a.length);return{value:o,rest:l}}}const ir=/^(\d+)(th|st|nd|rd)?/i,or=/\d+/i,lr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},cr={any:[/^b/i,/^(a|c)/i]},dr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},ur={any:[/1/i,/2/i,/3/i,/4/i]},hr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},fr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},yr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},br={ordinalNumber:ar({matchPattern:ir,parsePattern:or,valueCallback:e=>parseInt(e,10)}),era:Qe({matchPatterns:lr,defaultMatchWidth:"wide",parsePatterns:cr,defaultParseWidth:"any"}),quarter:Qe({matchPatterns:dr,defaultMatchWidth:"wide",parsePatterns:ur,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Qe({matchPatterns:hr,defaultMatchWidth:"wide",parsePatterns:fr,defaultParseWidth:"any"}),day:Qe({matchPatterns:mr,defaultMatchWidth:"wide",parsePatterns:xr,defaultParseWidth:"any"}),dayPeriod:Qe({matchPatterns:gr,defaultMatchWidth:"any",parsePatterns:yr,defaultParseWidth:"any"})},pr={code:"en-US",formatDistance:Yn,formatLong:Bn,formatRelative:Kn,localize:nr,match:br,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wr(e,n){const t=le(e,n==null?void 0:n.in);return Yt(t,$n(t))+1}function vr(e,n){const t=le(e,n==null?void 0:n.in),r=+dt(t)-+An(t);return Math.round(r/zt)+1}function Xt(e,n){var h,v,w,b;const t=le(e,n==null?void 0:n.in),r=t.getFullYear(),a=Ve(),i=(n==null?void 0:n.firstWeekContainsDate)??((v=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:v.firstWeekContainsDate)??a.firstWeekContainsDate??((b=(w=a.locale)==null?void 0:w.options)==null?void 0:b.firstWeekContainsDate)??1,o=ve((n==null?void 0:n.in)||e,0);o.setFullYear(r+1,0,i),o.setHours(0,0,0,0);const l=We(o,n),m=ve((n==null?void 0:n.in)||e,0);m.setFullYear(r,0,i),m.setHours(0,0,0,0);const d=We(m,n);return+t>=+l?r+1:+t>=+d?r:r-1}function kr(e,n){var l,m,d,h;const t=Ve(),r=(n==null?void 0:n.firstWeekContainsDate)??((m=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((h=(d=t.locale)==null?void 0:d.options)==null?void 0:h.firstWeekContainsDate)??1,a=Xt(e,n),i=ve((n==null?void 0:n.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),We(i,n)}function Dr(e,n){const t=le(e,n==null?void 0:n.in),r=+We(t,n)-+kr(t,n);return Math.round(r/zt)+1}function B(e,n){const t=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return t+r}const Ne={y(e,n){const t=e.getFullYear(),r=t>0?t:1-t;return B(n==="yy"?r%100:r,n.length)},M(e,n){const t=e.getMonth();return n==="M"?String(t+1):B(t+1,2)},d(e,n){return B(e.getDate(),n.length)},a(e,n){const t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return B(e.getHours()%12||12,n.length)},H(e,n){return B(e.getHours(),n.length)},m(e,n){return B(e.getMinutes(),n.length)},s(e,n){return B(e.getSeconds(),n.length)},S(e,n){const t=n.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,t-3));return B(a,n.length)}},Oe={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Vt={G:function(e,n,t){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return t.ordinalNumber(a,{unit:"year"})}return Ne.y(e,n)},Y:function(e,n,t,r){const a=Xt(e,r),i=a>0?a:1-a;if(n==="YY"){const o=i%100;return B(o,2)}return n==="Yo"?t.ordinalNumber(i,{unit:"year"}):B(i,n.length)},R:function(e,n){const t=$t(e);return B(t,n.length)},u:function(e,n){const t=e.getFullYear();return B(t,n.length)},Q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return B(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return B(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){const r=e.getMonth();switch(n){case"M":case"MM":return Ne.M(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return B(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){const a=Dr(e,r);return n==="wo"?t.ordinalNumber(a,{unit:"week"}):B(a,n.length)},I:function(e,n,t){const r=vr(e);return n==="Io"?t.ordinalNumber(r,{unit:"week"}):B(r,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):Ne.d(e,n)},D:function(e,n,t){const r=wr(e);return n==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):B(r,n.length)},E:function(e,n,t){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return B(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return B(i,n.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(e,n,t){const r=e.getDay(),a=r===0?7:r;switch(n){case"i":return String(a);case"ii":return B(a,n.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){const a=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,n,t){const r=e.getHours();let a;switch(r===12?a=Oe.noon:r===0?a=Oe.midnight:a=r/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,n,t){const r=e.getHours();let a;switch(r>=17?a=Oe.evening:r>=12?a=Oe.afternoon:r>=4?a=Oe.morning:a=Oe.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Ne.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):Ne.H(e,n)},K:function(e,n,t){const r=e.getHours()%12;return n==="Ko"?t.ordinalNumber(r,{unit:"hour"}):B(r,n.length)},k:function(e,n,t){let r=e.getHours();return r===0&&(r=24),n==="ko"?t.ordinalNumber(r,{unit:"hour"}):B(r,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ne.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):Ne.s(e,n)},S:function(e,n){return Ne.S(e,n)},X:function(e,n,t){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return qt(r);case"XXXX":case"XX":return Ce(r);case"XXXXX":case"XXX":default:return Ce(r,":")}},x:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"x":return qt(r);case"xxxx":case"xx":return Ce(r);case"xxxxx":case"xxx":default:return Ce(r,":")}},O:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Bt(r,":");case"OOOO":default:return"GMT"+Ce(r,":")}},z:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Bt(r,":");case"zzzz":default:return"GMT"+Ce(r,":")}},t:function(e,n,t){const r=Math.trunc(+e/1e3);return B(r,n.length)},T:function(e,n,t){return B(+e,n.length)}};function Bt(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?t+String(a):t+String(a)+n+B(i,2)}function qt(e,n){return e%60===0?(e>0?"-":"+")+B(Math.abs(e)/60,2):Ce(e,n)}function Ce(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),a=B(Math.trunc(r/60),2),i=B(r%60,2);return t+a+n+i}const Kt=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Qt=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},jr={p:Qt,P:(e,n)=>{const t=e.match(/(P+)(p+)?/)||[],r=t[1],a=t[2];if(!a)return Kt(e,n);let i;switch(r){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",Kt(r,n)).replace("{{time}}",Qt(a,n))}},Nr=/^D+$/,Er=/^Y+$/,Sr=["D","DD","YY","YYYY"];function Mr(e){return Nr.test(e)}function Wr(e){return Er.test(e)}function Cr(e,n,t){const r=Tr(e,n,t);if(console.warn(r),Sr.includes(e))throw new RangeError(r)}function Tr(e,n,t){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Pr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Or=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,_r=/^'([^]*?)'?$/,Ir=/''/g,Ar=/[a-zA-Z]/;function me(e,n,t){var h,v,w,b;const r=Ve(),a=r.locale??pr,i=r.firstWeekContainsDate??((v=(h=r.locale)==null?void 0:h.options)==null?void 0:v.firstWeekContainsDate)??1,o=r.weekStartsOn??((b=(w=r.locale)==null?void 0:w.options)==null?void 0:b.weekStartsOn)??0,l=le(e,t==null?void 0:t.in);if(!Fn(l))throw new RangeError("Invalid time value");let m=n.match(Or).map(x=>{const p=x[0];if(p==="p"||p==="P"){const D=jr[p];return D(x,a.formatLong)}return x}).join("").match(Pr).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const p=x[0];if(p==="'")return{isToken:!1,value:zr(x)};if(Vt[p])return{isToken:!0,value:x};if(p.match(Ar))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(m=a.localize.preprocessor(l,m));const d={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return m.map(x=>{if(!x.isToken)return x.value;const p=x.value;(Wr(p)||Mr(p))&&Cr(p,n,String(e));const D=Vt[p[0]];return D(l,p,a.localize,d)}).join("")}function zr(e){const n=e.match(_r);return n?n[1].replace(Ir,"'"):e}function Lr(e,n){return le(e,n==null?void 0:n.in).getDate()}function ut(e,n){return le(e,n==null?void 0:n.in).getDay()}function Jt(e,n){var m,d,h,v;const t=Ve(),r=(n==null?void 0:n.weekStartsOn)??((d=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:d.weekStartsOn)??t.weekStartsOn??((v=(h=t.locale)==null?void 0:h.options)==null?void 0:v.weekStartsOn)??0,a=Lr(le(e,n==null?void 0:n.in));if(isNaN(a))return NaN;const i=ut(Hn(e,n));let o=r-i;o<=0&&(o+=7);const l=a-o;return Math.ceil(l/7)+1}function Et(e,n){return le(e,n==null?void 0:n.in).getFullYear()}function Fr(e,n,t){const[r,a]=Be(t==null?void 0:t.in,e,n);return+We(r,t)==+We(a,t)}function Hr(e,n,t){const[r,a]=Be(t==null?void 0:t.in,e,n);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $r=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Gr=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,r)=>r?r.toUpperCase():t.toLowerCase()),Ut=e=>{const n=Gr(e);return n.charAt(0).toUpperCase()+n.slice(1)},Zt=(...e)=>e.filter((n,t,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===t).join(" ").trim(),Yr=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Rr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=c.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:o,...l},m)=>c.createElement("svg",{ref:m,...Rr,width:n,height:n,stroke:e,strokeWidth:r?Number(t)*24/Number(n):t,className:Zt("lucide",a),...!i&&!Yr(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,h])=>c.createElement(d,h)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ge=(e,n)=>{const t=c.forwardRef(({className:r,...a},i)=>c.createElement(Xr,{ref:i,iconNode:n,className:Zt(`lucide-${$r(Ut(e))}`,`lucide-${e}`,r),...a}));return t.displayName=Ut(e),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=ge("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=ge("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=ge("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=ge("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=ge("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Br=ge("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=ge("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sn=ge("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mt=ge("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ht=ge("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ke={vermilion:"#E34234",teal:"#008080",red:"#FF5252",blue:"#448AFF",milestone:"#4B5563",dependency:"#9CA3AF",grid:"#E5E7EB",weekend:"#f3f4f6",holiday:"#fef2f2"},ye={ROW_HEIGHT:40,HEADER_HEIGHT:80,MILESTONE_LANE_HEIGHT:40,BAR_HEIGHT:24,SIDEBAR_WIDTH:400,SIDEBAR_MIN_WIDTH:250,SIDEBAR_MAX_WIDTH:800},Je={DAY:{pixelsPerDay:30,label:"일"},WEEK:{pixelsPerDay:10,label:"주"},MONTH:{pixelsPerDay:2,label:"월"}},qr=({taskNames:e,onConfirm:n,onCancel:t})=>lt.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 transition-opacity",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-[360px] rounded-lg bg-white p-6 shadow-xl",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:s.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"삭제 확인"}),s.jsx("p",{className:"text-sm text-gray-500",children:"이 작업은 되돌릴 수 없습니다"})]})]}),s.jsxs("div",{className:"mb-6 rounded-md bg-gray-50 p-3",children:[s.jsxs("p",{className:"mb-2 text-sm text-gray-600",children:["다음 ",e.length,"개 항목을 삭제하시겠습니까?"]}),s.jsx("ul",{className:"max-h-[120px] overflow-auto",children:e.map((r,a)=>s.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-red-400"}),r]},a))})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:t,className:"rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"취소"}),s.jsx("button",{onClick:n,className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 transition-colors",children:"삭제"})]})]})})]}),document.body),an=({x:e,y:n,taskId:t,selectedTaskIds:r,tasks:a,onTaskGroup:i,onTaskUngroup:o,onTaskDelete:l,onStartRename:m,onClose:d,onDeselect:h})=>{var $;const[v,w]=c.useState(!1),b=Array.from(r).some(H=>{const F=a.find(P=>P.id===H);return(F==null?void 0:F.type)==="GROUP"}),x=()=>{r.size>=1&&!b&&i&&(i(Array.from(r)),d())},p=()=>{if(r.size===1&&o){const H=Array.from(r)[0],F=a.find(P=>P.id===H);(F==null?void 0:F.type)==="GROUP"&&(o(H),d())}},D=()=>{w(!0)},O=()=>{l&&(r.size>0?Array.from(r):[t]).forEach(F=>{l(F)}),w(!1),h(),d()},I=()=>{w(!1)},R=r.size===1&&(()=>{const H=Array.from(r)[0],F=a.find(P=>P.id===H);return(F==null?void 0:F.type)==="GROUP"})(),L=r.size>0?Array.from(r).map(H=>{var F;return((F=a.find(P=>P.id===H))==null?void 0:F.name)||H}):[(($=a.find(H=>H.id===t))==null?void 0:$.name)||t];return s.jsxs("div",{className:"fixed z-[100] min-w-[160px] rounded-lg border border-gray-200 bg-white py-1 shadow-lg",style:{left:e,top:n},onClick:H=>H.stopPropagation(),children:[r.size>=1&&!b&&i&&s.jsxs("button",{onClick:x,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"그룹화 (",r.size,"개 선택됨)"]}),R&&o&&s.jsxs("button",{onClick:p,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"그룹 해제"]}),r.size===1&&m&&s.jsxs("button",{onClick:()=>{const H=Array.from(r)[0];m(H),d()},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"이름 변경"]}),l&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"my-1 border-t border-gray-200"}),s.jsxs("button",{onClick:D,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"삭제 ",r.size>1?`(${r.size}개)`:""]})]}),s.jsx("div",{className:"my-1 border-t border-gray-200"}),s.jsxs("button",{onClick:()=>{h(),d()},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-500 hover:bg-gray-100",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"선택 해제"]}),v&&s.jsx(qr,{taskNames:L,onConfirm:O,onCancel:I})]})},{ROW_HEIGHT:on}=ye,ft={name:"",indirectWorkDaysPre:0,netWorkDays:1,indirectWorkDaysPost:0},Kr=({columns:e,tasks:n,activeCPId:t,onTaskCreate:r,onCancel:a,isVirtualized:i=!1,virtualRowIndex:o})=>{const[l,m]=c.useState(ft),d=c.useRef(null);c.useEffect(()=>{m(ft),setTimeout(()=>{var x;(x=d.current)==null||x.focus()},0)},[]);const h=c.useCallback(()=>{m(ft),a()},[a]),v=c.useCallback(async()=>{if(!(!l.name.trim()||!r||!t))try{const x=n[n.length-1],p=x?Q(x.endDate,1):new Date,D=l.indirectWorkDaysPre+l.netWorkDays+l.indirectWorkDaysPost,O=Q(p,Math.max(D-1,0)),I={id:`task-${Date.now()}`,parentId:t,wbsLevel:2,type:"TASK",name:l.name.trim(),startDate:p,endDate:O,task:{netWorkDays:l.netWorkDays,indirectWorkDaysPre:l.indirectWorkDaysPre,indirectWorkDaysPost:l.indirectWorkDaysPost},dependencies:[]};await r(I),m(ft),a()}catch(x){console.error("Failed to create task:",x),alert("태스크 생성 중 오류가 발생했습니다.")}},[l,r,t,n,a]),w=c.useCallback(x=>{x.key==="Enter"?(x.preventDefault(),v()):x.key==="Escape"&&(x.preventDefault(),h())},[v,h]),b=i&&o!==void 0?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${n.length*on}px)`}:{};return s.jsxs("div",{className:"box-border flex items-center border-b-2 border-blue-300 bg-blue-50 transition-colors",style:{height:on,...b},children:[s.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-blue-200 px-2",style:{width:e[0].width},children:s.jsx("input",{ref:d,type:"text",placeholder:"공정명...",className:"w-full rounded border border-blue-300 bg-white px-2 py-1 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.name,onChange:x=>m(p=>({...p,name:x.target.value})),onKeyDown:w})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[1].width},children:s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.indirectWorkDaysPre,onChange:x=>{const p=x.target.value.replace(/[^0-9]/g,""),D=parseInt(p)||0;m(O=>({...O,indirectWorkDaysPre:D}))},onKeyDown:w,title:"선 간접작업일"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[2].width},children:s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.netWorkDays,onChange:x=>{const p=x.target.value.replace(/[^0-9]/g,""),D=parseInt(p)||0;m(O=>({...O,netWorkDays:D}))},onKeyDown:w,title:"순작업일"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[3].width},children:s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.indirectWorkDaysPost,onChange:x=>{const p=x.target.value.replace(/[^0-9]/g,""),D=parseInt(p)||0;m(O=>({...O,indirectWorkDaysPost:D}))},onKeyDown:w,title:"후 간접작업일"})}),s.jsxs("div",{className:"flex shrink-0 items-center justify-center gap-1 px-2",style:{width:e[4].width+e[5].width},children:[s.jsx("button",{onClick:v,disabled:!l.name.trim(),className:"flex items-center justify-center rounded bg-blue-500 p-1.5 text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",title:"저장 (Enter)",children:s.jsx(en,{size:14})}),s.jsx("button",{onClick:h,className:"flex items-center justify-center rounded bg-gray-400 p-1.5 text-white hover:bg-gray-500 transition-colors",title:"취소 (Esc)",children:s.jsx(ht,{size:14})})]})]})},{ROW_HEIGHT:ln}=ye,mt={name:"",workDaysTotal:30,nonWorkDaysTotal:10},Qr=({columns:e,tasks:n,onTaskCreate:t,onCancel:r,isVirtualized:a=!1,virtualRowIndex:i,dragHandleWidth:o=0})=>{const[l,m]=c.useState(mt),d=c.useRef(null);c.useEffect(()=>{m(mt),setTimeout(()=>{var x;(x=d.current)==null||x.focus()},0)},[]);const h=c.useCallback(()=>{m(mt),r()},[r]),v=c.useCallback(async()=>{if(!(!l.name.trim()||!t))try{const x=n.filter(L=>L.type==="CP"&&!L.parentId),p=x[x.length-1],D=p?Q(p.endDate,1):new Date,O=l.workDaysTotal+l.nonWorkDaysTotal,I=Q(D,Math.max(O-1,0)),R={id:`cp-${Date.now()}`,parentId:null,wbsLevel:1,type:"CP",name:l.name.trim(),startDate:D,endDate:I,cp:{workDaysTotal:l.workDaysTotal,nonWorkDaysTotal:l.nonWorkDaysTotal},dependencies:[]};await t(R),m(mt),r()}catch(x){console.error("Failed to create CP:",x),alert("CP 생성 중 오류가 발생했습니다.")}},[l,t,n,r]),w=c.useCallback(x=>{x.key==="Enter"?(x.preventDefault(),v()):x.key==="Escape"&&(x.preventDefault(),h())},[v,h]),b=a&&i!==void 0?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${n.length*ln}px)`}:{};return s.jsxs("div",{className:"box-border flex items-center border-b-2 border-blue-300 bg-blue-50 transition-colors",style:{height:ln,...b},children:[o>0&&s.jsx("div",{style:{width:o},className:"shrink-0"}),s.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-blue-200 px-2",style:{width:o>0?e[0].width-o:e[0].width},children:[s.jsx("div",{className:"w-6 shrink-0"})," ",s.jsx("input",{ref:d,type:"text",placeholder:"CP명...",className:"w-full rounded border border-blue-300 bg-white px-2 py-1 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:l.name,onChange:x=>m(p=>({...p,name:x.target.value})),onKeyDown:w})]}),s.jsxs("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 text-xs text-gray-600",style:{width:e[1].width},children:[l.workDaysTotal+l.nonWorkDaysTotal,"일"]}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[2].width},children:s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[50px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-vermilion focus:border-vermilion focus:outline-none focus:ring-1 focus:ring-vermilion",value:l.workDaysTotal,onChange:x=>{const p=x.target.value.replace(/[^0-9]/g,""),D=parseInt(p)||0;m(O=>({...O,workDaysTotal:D}))},onKeyDown:w,title:"작업일수"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center px-1",style:{width:e[3].width},children:s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[50px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-teal focus:border-teal focus:outline-none focus:ring-1 focus:ring-teal",value:l.nonWorkDaysTotal,onChange:x=>{const p=x.target.value.replace(/[^0-9]/g,""),D=parseInt(p)||0;m(O=>({...O,nonWorkDaysTotal:D}))},onKeyDown:w,title:"비작업일수"})}),s.jsxs("div",{className:"flex shrink-0 items-center justify-center gap-1 px-2",children:[s.jsx("button",{onClick:v,disabled:!l.name.trim(),className:"flex items-center justify-center rounded bg-blue-500 p-1.5 text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",title:"저장 (Enter)",children:s.jsx(en,{size:14})}),s.jsx("button",{onClick:h,className:"flex items-center justify-center rounded bg-gray-400 p-1.5 text-white hover:bg-gray-500 transition-colors",title:"취소 (Esc)",children:s.jsx(ht,{size:14})})]})]})},{ROW_HEIGHT:_e,HEADER_HEIGHT:cn,MILESTONE_LANE_HEIGHT:dn}=ye,un=[{id:"name",label:"CP명",width:180,minWidth:100},{id:"total",label:"총 공기",width:80,minWidth:50},{id:"workDays",label:"작업일수",width:80,minWidth:50},{id:"nonWorkDays",label:"비작업일수",width:80,minWidth:50}],hn=[{id:"name",label:"단위공정명",width:150,minWidth:80},{id:"indirectPre",label:"선간접",width:60,minWidth:45},{id:"netWork",label:"순작업",width:60,minWidth:45},{id:"indirectPost",label:"후간접",width:60,minWidth:45},{id:"startDate",label:"시작일",width:90,minWidth:70},{id:"endDate",label:"종료일",width:90,minWidth:70}],Wt=c.forwardRef(({tasks:e,allTasks:n,viewMode:t,expandedIds:r,onToggle:a,onTaskClick:i,onTaskUpdate:o,onTaskCreate:l,onTaskReorder:m,activeCPId:d,virtualRows:h,totalHeight:v,onTotalWidthChange:w,onTaskGroup:b,onTaskUngroup:x,onTaskDelete:p,onTaskMove:D,isAddingTask:O=!1,onCancelAddTask:I,isAddingCP:R=!1,onCancelAddCP:L,onTaskDoubleClick:$},H)=>{const F=h&&h.length>0,[P,q]=c.useState(null),[ee,ae]=c.useState(null),[te,z]=c.useState(null),[X,J]=c.useState(new Set),[ne,ie]=c.useState(null),[U,E]=c.useState(null),[g,f]=c.useState(null),[j,C]=c.useState(""),A=c.useRef(null),[W,re]=c.useState(null),[V,Z]=c.useState(un.map(y=>y.width)),[de,ue]=c.useState(hn.map(y=>y.width)),[Ue,Ze]=c.useState(null),Le=c.useRef(!1),De=t==="MASTER"?un:hn,Ee=t==="MASTER"?V:de,Fe=t==="MASTER"?Z:ue,se=c.useMemo(()=>De.map((y,u)=>({...y,width:Ee[u]??y.width})),[De,Ee]),He=m?24:0,pe=se.reduce((y,u)=>y+u.width,0)+He;c.useEffect(()=>{w&&w(pe)},[pe,w]);const Ot=c.useCallback((y,u)=>{if(y.detail>=2)return;y.preventDefault(),y.stopPropagation(),Le.current=!0,Ze(u);const M=y.clientX,Y=Ee[u],k=De[u].minWidth,T=_=>{if(!Le.current)return;const K=_.clientX-M,he=Math.max(k,Y+K);Fe(N=>{const ce=[...N];return ce[u]=he,ce})},S=()=>{Le.current=!1,Ze(null),document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",S)},[Ee,De,Fe]),et=c.useCallback((y,u=12,M="normal")=>{const k=document.createElement("canvas").getContext("2d");return k?(k.font=`${M} ${u}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,k.measureText(y).width):0},[]),$e=c.useCallback(y=>{if(!d||y.parentId===d)return 0;let u=0,M=y.parentId;for(;M&&M!==d;){const Y=n.find(k=>k.id===M);(Y==null?void 0:Y.type)==="GROUP"&&u++,M=(Y==null?void 0:Y.parentId)||null}return u},[d,n]),tt=c.useCallback(y=>{if(!y.parentId)return 0;let u=0,M=y.parentId;for(;M;){const Y=n.find(k=>k.id===M);(Y==null?void 0:Y.type)==="GROUP"&&u++,M=Y==null?void 0:Y.parentId}return u},[n]),nt=c.useCallback(y=>{const u=De[y].minWidth,M=y===0,Y=M?72:20,k=De[y].label;let T=et(k,12,"500")+16;return e.forEach(S=>{let _="",K=0;if(t==="MASTER"){const kt=S.type==="GROUP";switch(M&&(K=tt(S)*12),y){case 0:_=S.name;break;case 1:_=kt?"-":S.cp?`${S.cp.workDaysTotal+S.cp.nonWorkDaysTotal}일`:"-";break;case 2:_=kt?"-":S.cp?`${S.cp.workDaysTotal}일`:"-";break;case 3:_=kt?"-":S.cp?`${S.cp.nonWorkDaysTotal}일`:"-";break}}else switch(M&&(K=$e(S)*12),y){case 0:_=S.name;break;case 1:_=S.task?String(S.task.indirectWorkDaysPre):"-";break;case 2:_=S.task?String(S.task.netWorkDays):"-";break;case 3:_=S.task?String(S.task.indirectWorkDaysPost):"-";break;case 4:_=me(S.startDate,"yyyy-MM-dd");break;case 5:_=me(S.endDate,"yyyy-MM-dd");break}const ce=et(_,M?14:12,M?"500":"normal")+Y+K;T=Math.max(T,ce)}),Math.max(u,Math.ceil(T))},[e,t,De,et,tt,$e]),xt=c.useCallback((y,u)=>{y.preventDefault(),y.stopPropagation(),Le.current=!1,Ze(null);const M=nt(u);Fe(Y=>{const k=[...Y];return k[u]=M,k})},[nt,Fe]),je=c.useCallback((y,u,M)=>{if(!y.task||!o)return;const Y={...y,task:{...y.task,[u]:M}};o(Y)},[o]),gt=c.useCallback((y,u)=>{y.dataTransfer.effectAllowed="move",y.dataTransfer.setData("text/plain",u),q(u);const M=document.createElement("div");M.style.opacity="0",document.body.appendChild(M),y.dataTransfer.setDragImage(M,0,0),setTimeout(()=>document.body.removeChild(M),0)},[]),yt=c.useCallback((y,u,M)=>{if(y.preventDefault(),y.dataTransfer.dropEffect="move",u===P)return;const Y=y.currentTarget.getBoundingClientRect(),k=y.clientY-Y.top,T=Y.height;let S;M?k<T/3?S="before":k<T*2/3?S="into":S="after":S=k<T/2?"before":"after",ae(u),z(S)},[P]),bt=c.useCallback(()=>{ae(null),z(null)},[]),Se=c.useCallback((y,u)=>{if(y.preventDefault(),!P||P===u||!te){q(null),ae(null),z(null);return}if(D)D(P,u,te);else if(m&&te!=="into"){const M=e.findIndex(k=>k.id===u),Y=te==="after"?M+1:M;m(P,Y)}q(null),ae(null),z(null)},[P,te,D,m,e]),pt=c.useCallback(()=>{q(null),ae(null),z(null)},[]),wt=c.useCallback((y,u,M)=>{if(P)return;const Y=y.ctrlKey||y.metaKey,k=y.shiftKey;if(Y)J(T=>{const S=new Set(T);return S.has(u.id)?S.delete(u.id):S.add(u.id),S}),ie(M);else if(k&&ne!==null){const T=Math.min(ne,M),S=Math.max(ne,M);J(_=>{const K=new Set(_);for(let he=T;he<=S;he++)e[he]&&K.add(e[he].id);return K})}else J(new Set([u.id])),ie(M)},[P,ne,e]),rt=c.useCallback((y,u)=>{y.preventDefault(),X.has(u.id)||J(new Set([u.id])),E({x:y.clientX,y:y.clientY,taskId:u.id})},[X]);c.useEffect(()=>{const y=()=>{E(null)};if(U)return document.addEventListener("click",y),()=>document.removeEventListener("click",y)},[U]),c.useEffect(()=>{const y=u=>{u.key==="Escape"&&(J(new Set),E(null),f(null))};return document.addEventListener("keydown",y),()=>document.removeEventListener("keydown",y)},[]);const Me=c.useCallback(y=>{f(y.id),C(y.name),setTimeout(()=>{var u,M;(u=A.current)==null||u.focus(),(M=A.current)==null||M.select()},0)},[]),st=c.useCallback(y=>{const u=e.find(M=>M.id===y);u&&o&&Me(u)},[e,o,Me]),we=c.useCallback(()=>{if(!g||!o){f(null);return}const y=e.find(u=>u.id===g);y&&j.trim()&&j!==y.name&&o({...y,name:j.trim()}),f(null),C("")},[g,j,e,o]),at=c.useCallback(()=>{f(null),C("")},[]),it=c.useCallback(y=>{y.key==="Enter"?(y.preventDefault(),we()):y.key==="Escape"&&(y.preventDefault(),at())},[we,at]),Ge=()=>s.jsx("div",{className:"flex h-[32px] border-t border-gray-200",children:se.map((y,u)=>s.jsxs("div",{className:"relative flex shrink-0 items-center justify-center text-xs font-medium text-gray-600",style:{width:y.width},children:[y.label,u<se.length-1&&s.jsx("div",{className:`absolute right-0 top-0 z-10 h-full w-[5px] cursor-col-resize transition-colors ${Ue===u?"bg-blue-500":"hover:bg-blue-300"}`,style:{transform:"translateX(50%)"},onMouseDown:M=>Ot(M,u),onDoubleClick:M=>xt(M,u),title:"드래그하여 컬럼 너비 조절 / 더블클릭으로 내용에 맞게 자동 조절"}),u<se.length-1&&s.jsx("div",{className:"absolute right-0 top-0 h-full w-px bg-gray-200"})]},y.id))}),ot=X.size===1?e.find(y=>y.id===Array.from(X)[0]&&y.type==="GROUP"):null,_t=X.size>=1&&b&&!ot,vt=ot&&x,Ye=()=>!_t&&!vt&&X.size===0?null:s.jsxs("div",{className:"flex items-center gap-2",children:[X.size>0&&s.jsxs("span",{className:"text-xs text-gray-500",children:[X.size,"개 선택"]}),vt&&s.jsxs("button",{onClick:()=>{x(ot.id),J(new Set)},className:"flex items-center gap-1 rounded bg-gray-500 px-2 py-1 text-xs font-medium text-white hover:bg-gray-600 transition-colors",title:"그룹 해제",children:[s.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"해제"]}),X.size>0&&s.jsx("button",{onClick:()=>J(new Set),className:"flex items-center justify-center rounded p-1 text-gray-400 hover:bg-gray-200 hover:text-gray-600 transition-colors",title:"선택 해제 (ESC)",children:s.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]});return t==="MASTER"?s.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[s.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:cn},children:[s.jsxs("div",{className:"flex flex-1 items-center justify-between px-4",children:[s.jsx("span",{className:"font-bold text-gray-700",children:"공구 공정표 (Level 1)"}),Ye()]}),Ge()]}),Ue!==null&&s.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),s.jsxs("div",{ref:H,className:"relative flex-1 overflow-auto",children:[s.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:dn,minWidth:pe},children:se.map((y,u)=>s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:y.width},children:u===0&&"Milestone"},y.id))}),s.jsxs("div",{style:{minWidth:pe,height:F?v:void 0,position:"relative"},children:[(F?h:e.map((y,u)=>({index:u,start:u*_e,size:_e,key:u}))).map(y=>{const u=e[y.index];if(!u)return null;const M=u.type==="GROUP",Y=M&&n.some(N=>N.parentId===u.id),k=r.has(u.id),S=tt(u)*12,_=P===u.id,K=ee===u.id,he=X.has(u.id);return s.jsxs("div",{draggable:!!(m||D),onDragStart:N=>gt(N,u.id),onDragOver:N=>yt(N,u.id,M),onDragLeave:bt,onDrop:N=>Se(N,u.id),onDragEnd:pt,onClick:N=>wt(N,u,y.index),onContextMenu:N=>rt(N,u),className:`box-border flex items-center border-b transition-all duration-150 ${_?"opacity-50 bg-blue-50":K?te==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":te==="into"?"bg-blue-200 border-blue-400 border-2 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.6)]":"border-b-2 border-b-blue-500":he?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":M?"bg-gray-50 border-gray-100 hover:bg-gray-100":"border-gray-100 cursor-pointer hover:bg-blue-50 hover:shadow-[inset_0_0_0_1px_rgba(59,130,246,0.3)]"}`,style:{height:_e,...F?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${y.start}px)`}:{}},onDoubleClick:()=>!M&&i(u),title:M?void 0:"더블클릭하여 상세 공정표 보기",children:[m&&s.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:s.jsx(rn,{size:14})}),s.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:m?se[0].width-24:se[0].width,paddingLeft:S+8},children:[Y?s.jsx("button",{onClick:N=>{N.stopPropagation(),a(u.id)},className:"mr-1 shrink-0 rounded p-1 text-gray-500 hover:bg-gray-200",children:k?s.jsx(tn,{size:14}):s.jsx(nn,{size:14})}):s.jsx("div",{className:"w-6 shrink-0"}),g===u.id?s.jsx("input",{ref:A,type:"text",value:j,onChange:N=>C(N.target.value),onKeyDown:it,onBlur:we,onClick:N=>N.stopPropagation(),className:"w-full rounded border border-blue-400 bg-white px-1 py-0.5 text-sm font-normal text-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500"}):s.jsx("span",{className:`truncate text-sm ${M?"font-normal text-gray-500 cursor-text":"font-medium text-gray-800"}`,onDoubleClick:N=>{o&&(N.stopPropagation(),Me(u))},title:o?"더블클릭하여 이름 편집":void 0,children:u.name})]}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:se[1].width},children:M?"-":u.cp?`${u.cp.workDaysTotal+u.cp.nonWorkDaysTotal}일`:"-"}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-vermilion",style:{width:se[2].width},children:M?"-":u.cp?`${u.cp.workDaysTotal}일`:"-"}),s.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-teal",style:{width:se[3].width},children:M?"-":u.cp?`${u.cp.nonWorkDaysTotal}일`:"-"})]},y.key)}),R&&s.jsx(Qr,{columns:se,tasks:e,onTaskCreate:l,onCancel:L||(()=>{}),isVirtualized:F,virtualRowIndex:e.length,dragHandleWidth:He})]})]}),U&&s.jsx(an,{x:U.x,y:U.y,taskId:U.taskId,selectedTaskIds:X,tasks:e,onTaskGroup:b,onTaskUngroup:x,onTaskDelete:p,onStartRename:st,onClose:()=>E(null),onDeselect:()=>J(new Set)})]}):s.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[s.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:cn},children:[s.jsxs("div",{className:"flex flex-1 items-center justify-between px-4",children:[s.jsx("span",{className:"font-bold text-gray-700",children:"주공정표 (Level 2)"}),Ye()]}),Ge()]}),Ue!==null&&s.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),s.jsxs("div",{ref:H,className:"relative flex-1 overflow-auto",children:[s.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:dn,minWidth:pe},children:se.map((y,u)=>s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:y.width},children:u===0&&"Milestone"},y.id))}),s.jsxs("div",{style:{minWidth:pe,height:F?v:void 0,position:"relative"},children:[(F?h:e.map((y,u)=>({index:u,start:u*_e,size:_e,key:u}))).map(y=>{const u=e[y.index];if(!u)return null;const M=u.type==="GROUP",Y=M&&n.some(N=>N.parentId===u.id),k=r.has(u.id),S=$e(u)*12,_=P===u.id,K=ee===u.id,he=X.has(u.id);return s.jsxs("div",{draggable:!!(m||D),onDragStart:N=>gt(N,u.id),onDragOver:N=>yt(N,u.id,M),onDragLeave:bt,onDrop:N=>Se(N,u.id),onDragEnd:pt,onClick:N=>wt(N,u,y.index),onDoubleClick:()=>{!M&&u.type==="TASK"&&$&&$(u)},onContextMenu:N=>rt(N,u),className:`box-border flex items-center border-b transition-colors ${_?"opacity-50 bg-blue-50":K?te==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":te==="into"?"bg-blue-200 border-blue-400 border-2 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.6)]":"border-b-2 border-b-blue-500":he?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":M?"bg-gray-50 border-gray-100 hover:bg-gray-100":"border-gray-100 hover:bg-gray-50 cursor-pointer"}`,style:{height:_e,...F?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${y.start}px)`}:{}},title:!M&&u.type==="TASK"?"더블클릭하여 공정 설정":void 0,children:[m&&s.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:s.jsx(rn,{size:14})}),s.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:m?se[0].width-24:se[0].width,paddingLeft:S+8},children:[Y?s.jsx("button",{onClick:N=>{N.stopPropagation(),a(u.id)},className:"mr-1 shrink-0 rounded p-1 text-gray-500 hover:bg-gray-200",children:k?s.jsx(tn,{size:14}):s.jsx(nn,{size:14})}):s.jsx("div",{className:"w-6 shrink-0"}),g===u.id?s.jsx("input",{ref:A,type:"text",value:j,onChange:N=>C(N.target.value),onKeyDown:it,onBlur:we,onClick:N=>N.stopPropagation(),className:"w-full rounded border border-blue-400 bg-white px-1 py-0.5 text-sm font-normal text-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500"}):s.jsx("span",{className:`truncate text-sm ${M?"font-normal text-gray-500 cursor-text":"font-medium text-gray-800"}`,onDoubleClick:N=>{o&&(N.stopPropagation(),Me(u))},title:o?"더블클릭하여 이름 편집":void 0,children:u.name})]}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:se[1].width},children:u.task?s.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]?",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:(W==null?void 0:W.taskId)===u.id&&(W==null?void 0:W.field)==="pre"?W.value:u.task.indirectWorkDaysPre,onFocus:()=>re({taskId:u.id,field:"pre",value:String(u.task.indirectWorkDaysPre)}),onChange:N=>{const ce=N.target.value.replace(/[^0-9.]/g,"");re({taskId:u.id,field:"pre",value:ce})},onBlur:()=>{if(W&&W.taskId===u.id&&W.field==="pre"){const N=parseFloat(W.value)||0,ce=Math.round(N*10)/10;je(u,"indirectWorkDaysPre",ce),re(null)}},onKeyDown:N=>{(N.key==="-"||N.key==="e"||N.key==="+")&&N.preventDefault(),N.key==="Enter"&&N.target.blur()},title:"선 간접작업일 (바 드래그로도 조절 가능, 0.1 단위)"}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:se[2].width},children:u.task?s.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]?",className:"w-full max-w-[45px] rounded border border-gray-300 bg-red-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-red-500 focus:outline-none focus:ring-1 focus:ring-red-500",value:(W==null?void 0:W.taskId)===u.id&&(W==null?void 0:W.field)==="net"?W.value:u.task.netWorkDays,onFocus:()=>re({taskId:u.id,field:"net",value:String(u.task.netWorkDays)}),onChange:N=>{const ce=N.target.value.replace(/[^0-9.]/g,"");re({taskId:u.id,field:"net",value:ce})},onBlur:()=>{if(W&&W.taskId===u.id&&W.field==="net"){const N=parseFloat(W.value)||0,ce=Math.round(N*10)/10;je(u,"netWorkDays",ce),re(null)}},onKeyDown:N=>{(N.key==="-"||N.key==="e"||N.key==="+")&&N.preventDefault(),N.key==="Enter"&&N.target.blur()},title:"순작업일 (0.1 단위)"}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:se[3].width},children:u.task?s.jsx("input",{type:"text",inputMode:"decimal",pattern:"[0-9]*\\.?[0-9]?",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:(W==null?void 0:W.taskId)===u.id&&(W==null?void 0:W.field)==="post"?W.value:u.task.indirectWorkDaysPost,onFocus:()=>re({taskId:u.id,field:"post",value:String(u.task.indirectWorkDaysPost)}),onChange:N=>{const ce=N.target.value.replace(/[^0-9.]/g,"");re({taskId:u.id,field:"post",value:ce})},onBlur:()=>{if(W&&W.taskId===u.id&&W.field==="post"){const N=parseFloat(W.value)||0,ce=Math.round(N*10)/10;je(u,"indirectWorkDaysPost",ce),re(null)}},onKeyDown:N=>{(N.key==="-"||N.key==="e"||N.key==="+")&&N.preventDefault(),N.key==="Enter"&&N.target.blur()},title:"후 간접작업일 (바 드래그로도 조절 가능, 0.1 단위)"}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:se[4].width},children:me(u.startDate,"yyyy-MM-dd")}),s.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-gray-500",style:{width:se[5].width},children:me(u.endDate,"yyyy-MM-dd")})]},y.key)}),O&&d&&s.jsx(Kr,{columns:se,tasks:e,activeCPId:d,onTaskCreate:l,onCancel:I||(()=>{}),isVirtualized:F,virtualRowIndex:e.length})]})]}),U&&s.jsx(an,{x:U.x,y:U.y,taskId:U.taskId,selectedTaskIds:X,tasks:e,onTaskGroup:b,onTaskUngroup:x,onTaskDelete:p,onStartRename:st,onClose:()=>E(null),onDeselect:()=>J(new Set)})]})});Wt.displayName="GanttSidebar";const Te=(e,n=[],t)=>!!(!t.workOnSaturdays&&Ft(e)||!t.workOnSundays&&Ht(e)||!t.workOnHolidays&&n.some(r=>zn(r,e))),Jr=e=>Ft(e)||Ht(e),fn=(e,n,t=[],r)=>{let a=new Date(e),i=0;if(n<=0)return a;const o=Math.ceil(n);for(;Te(a,t,r);)a=Q(a,1);for(;i<o;)Te(a,t,r)||i++,i<o&&(a=Q(a,1));return a},Ur=(e,n,t=[],r)=>{let a=new Date(e),i=0;if(n<=0)return a;for(;i<n;)a=Q(a,-1),Te(a,t,r)||i++;return a},Ct=(e,n)=>{if(n<=0)return e;const t=Math.ceil(n);return Q(e,t-1)},Zr=(e,n=[],t)=>{if(!e.task)return{startDate:e.startDate,endDate:e.endDate,netWorkStartDate:e.startDate,netWorkEndDate:e.endDate};const{netWorkDays:r,indirectWorkDaysPre:a,indirectWorkDaysPost:i}=e.task,o=qe(new Date(e.startDate));let l=o,m,d;a>0&&(m=l,d=Ct(l,a),l=Q(d,1));let h=l,v=h;if(r>0){for(;Te(h,n,t);)h=Q(h,1);v=fn(h,r,n,t),l=Q(v,1)}else a===0&&(h=o,v=o);let w,b;return i>0&&(w=l,b=Ct(l,i)),{startDate:m||h,endDate:b||v,netWorkStartDate:h,netWorkEndDate:v,indirectPreStartDate:m,indirectPreEndDate:d,indirectPostStartDate:w,indirectPostEndDate:b}},es=(e,n,t)=>{switch(n){case"START":return t.startDate;case"NET_WORK_START":return t.netWorkStartDate;case"NET_WORK_END":return t.netWorkEndDate;case"END":return t.endDate;default:return t.endDate}},Ie=(e,n,t)=>jt(e,n)*t,ts=(e,n,t)=>{const r=Math.round(e/t);return Q(n,r)},ns=(e,n,t)=>(jt(n,e)+1)*t,rs=e=>Je[e].pixelsPerDay,Tt=(e,n=[],t=5)=>{const r=[...e.flatMap(d=>[d.startDate,d.endDate].filter(Boolean)),...n.map(d=>d.date)];if(r.length===0){const d=new Date;return{minDate:d,maxDate:Q(d,30),totalDays:30}}const a=new Date(Math.min(...r.map(d=>d.getTime()))),i=new Date(Math.max(...r.map(d=>d.getTime()))),o=Q(a,-t),l=Q(i,t),m=jt(l,o);return{minDate:o,maxDate:l,totalDays:m}},{ROW_HEIGHT:xe,HEADER_HEIGHT:ss,MILESTONE_LANE_HEIGHT:be,BAR_HEIGHT:oe}=ye,as=({minDate:e,totalDays:n,pixelsPerDay:t,zoomLevel:r,holidays:a,calendarSettings:i})=>{const o=Array.from({length:n},(w,b)=>Q(e,b)),l=n*t,m=c.useMemo(()=>{const w=[];let b=Et(o[0]),x=0;return o.forEach(p=>{Et(p)!==b?(w.push({label:`${b}년`,days:x}),b=Et(p),x=1):x++}),w.push({label:`${b}년`,days:x}),w},[o]),d=c.useMemo(()=>{const w=[];let b=o[0],x=0;return o.forEach(p=>{Hr(p,b)?x++:(w.push({label:me(b,"M월"),days:x}),b=p,x=1)}),w.push({label:me(b,"M월"),days:x}),w},[o]),h=c.useMemo(()=>{if(r==="MONTH")return null;if(r==="DAY")return s.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:l},children:o.map((w,b)=>{const x=ut(w),p=Te(w,a,i),D=x===0,O=x===6;let I="text-gray-600";D&&(I="text-red-500"),O&&(I="text-blue-500"),p&&!D&&!O&&(I="text-red-500");let R="";return D||p&&!O?R="bg-red-50/50":O&&(R="bg-blue-50/50"),s.jsxs("div",{className:`flex h-full shrink-0 flex-col items-center justify-center border-r border-gray-100 font-medium ${R}`,style:{width:t,minWidth:t},children:[s.jsx("span",{className:`text-[10px] leading-none ${I}`,children:me(w,"d")}),s.jsx("span",{className:`mt-0.5 text-[9px] font-bold leading-none ${I}`,children:["일","월","화","수","목","금","토"][x]})]},b)})});{const w=[];let b=o[0],x=0;return o.forEach(p=>{Fr(p,b,{weekStartsOn:0})?x++:(w.push({label:`${Jt(b,{weekStartsOn:0})}주`,days:x}),b=p,x=1)}),w.push({label:`${Jt(b,{weekStartsOn:0})}주`,days:x}),s.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:l},children:w.map((p,D)=>s.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-100 text-xs font-medium text-gray-600",style:{width:p.days*t},children:p.label},D))})}},[o,r,t,a,i,l]),v=r==="MONTH";return s.jsx("div",{className:"sticky top-0 z-20 flex flex-col border-b border-gray-300 bg-white shadow-sm",style:{height:ss,minWidth:l},children:v?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex h-[48px] items-center border-b border-gray-300 bg-gray-100 text-sm font-bold text-gray-800",style:{minWidth:l},children:m.map((w,b)=>s.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-300",style:{width:w.days*t},children:w.label},b))}),s.jsx("div",{className:"flex h-[32px] items-center bg-white text-xs font-medium text-gray-700",style:{minWidth:l},children:d.map((w,b)=>s.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-200",style:{width:w.days*t},children:w.label},b))})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-300 bg-gray-100 text-xs font-bold text-gray-800",style:{minWidth:l},children:m.map((w,b)=>s.jsx("div",{className:"flex shrink-0 items-center border-r border-gray-300 pl-2",style:{width:w.days*t},children:w.label},b))}),s.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-200 bg-gray-100 text-xs font-medium text-gray-700",style:{minWidth:l},children:d.map((w,b)=>s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-300",style:{width:w.days*t},children:w.label},b))}),h]})})},is=({minDate:e,totalDays:n,chartHeight:t,pixelsPerDay:r,holidays:a,calendarSettings:i,zoomLevel:o})=>{const l=c.useMemo(()=>{if(o==="MONTH")return[];const m=[];for(let d=0;d<n;d++){const h=Q(e,d),v=ut(h),w=v===0,b=v===6;if(Te(h,a,i)||b){const p=d*r;let D="rgba(254, 242, 242, 0.5)";b&&!w&&(D="rgba(239, 246, 255, 0.5)"),w&&(D="rgba(254, 242, 242, 0.5)"),m.push(s.jsx("rect",{x:p,y:0,width:r,height:t,fill:D,className:"pointer-events-none"},`weekend-${d}`))}}return m},[e,n,t,r,a,i,o]);return s.jsx("g",{children:l})},os=(e,n,t)=>{if(e.length===0)return[];const r=25,a=12,i=8,o=e.map(h=>({milestone:h,x:Ie(h.date,n,t),labelLevel:0,labelWidth:h.name.length*a+r})).sort((h,v)=>h.x-v.x),l=[],m=[],d=[];for(const h of o){const v=h.labelWidth,w=h.x-v,b=h.x-i;if(!m.some(p=>w<p+i))m.push(b),l.push({milestone:h.milestone,x:h.x,labelLevel:0});else{const p=h.x+i,D=h.x+v;d.some(I=>!(D<I.start||p>I.end))?l.push({milestone:h.milestone,x:h.x,labelLevel:-1}):(d.push({start:p,end:D}),l.push({milestone:h.milestone,x:h.x,labelLevel:1}))}}return l},ls=({milestone:e,x:n,labelLevel:t=0,isDragging:r=!1,dragX:a,onMouseDown:i,onDoubleClick:o})=>{const m=be/2,d=r&&a!==void 0?a:n;let h,v,w;t===0?(h=-8,v=4,w="end"):t===1?(h=8,v=4,w="start"):(h=0,v=18,w="middle");const b=p=>{i&&(p.preventDefault(),p.stopPropagation(),i(p,e))},x=p=>{o&&(p.preventDefault(),p.stopPropagation(),o(e))};return s.jsxs("g",{transform:`translate(${d}, ${m})`,className:`group ${i?"cursor-ew-resize":"cursor-pointer"} ${r?"cursor-ew-resize":""}`,onMouseDown:b,onDoubleClick:x,children:[s.jsx("line",{x1:0,y1:0,x2:0,y2:1e3,stroke:r?"#3B82F6":"#9CA3AF",strokeWidth:r?3:2,strokeDasharray:"4, 4",className:r?"opacity-100":"opacity-80"}),s.jsx("path",{d:`M ${-12/2} ${-12/2} L ${12/2} ${-12/2} L 0 ${12/2} Z`,fill:r?"#3B82F6":ke.milestone,stroke:"white",strokeWidth:1,className:"drop-shadow-sm transition-transform duration-150 group-hover:scale-[1.3]",style:{transformOrigin:"center",transformBox:"fill-box",transform:r?"scale(1.3)":void 0}}),s.jsx("circle",{cx:0,cy:0,r:12,fill:"transparent",className:"cursor-ew-resize"}),s.jsx("text",{x:h,y:v,textAnchor:w,className:`select-none text-[11px] font-bold transition-colors ${r?"fill-blue-700":"fill-gray-600 group-hover:fill-blue-700"}`,children:e.name})]})},cs=({task:e,y:n,minDate:t,pixelsPerDay:r,isMasterView:a,isDraggable:i=!1,dragInfo:o,onDragStart:l,onDoubleClick:m})=>{var x,p;if(e.type==="GROUP")return null;const d=4,h=!!o,v=(o==null?void 0:o.startDate)||e.startDate,w=(o==null?void 0:o.endDate)||e.endDate,b=Ie(v,t,r);if(a){const D=((x=e.cp)==null?void 0:x.workDaysTotal)||0,O=((p=e.cp)==null?void 0:p.nonWorkDaysTotal)||0;if(D+O===0)return null;const R=D*r,L=O*r;return s.jsxs("g",{transform:`translate(${b}, ${n})`,className:"group cursor-pointer",children:[s.jsx("rect",{x:0,y:0,width:R,height:oe,fill:ke.vermilion,rx:d,ry:d,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),s.jsx("rect",{x:R,y:0,width:L,height:oe,fill:ke.teal,rx:d,ry:d,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),s.jsx("text",{x:-8,y:oe/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-bold fill-gray-700",children:e.name})]})}else{if(!e.task)return null;const{netWorkDays:D,indirectWorkDaysPre:O,indirectWorkDaysPost:I,indirectWorkNamePre:R,indirectWorkNamePost:L}=e.task,$=(o==null?void 0:o.indirectWorkDaysPre)??O,H=(o==null?void 0:o.indirectWorkDaysPost)??I,F=(o==null?void 0:o.netWorkDays)??D,P=$*r,q=F*r,ee=H*r,ae=P+q+ee,te=0,z=P,X=P+q,J=8,ne=6,ie={startDate:v,endDate:w,indirectWorkDaysPre:$,netWorkDays:F,indirectWorkDaysPost:H};return s.jsxs("g",{transform:`translate(${b}, ${n})`,className:`group ${h?"opacity-90":""} ${m?"cursor-pointer":""}`,onDoubleClick:m,children:[$>0&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:te,y:0,width:P,height:oe,fill:ke.blue,rx:d,ry:d,className:`drop-shadow-sm transition-opacity ${h?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:"none"}}),R&&s.jsx("text",{x:te+P/2,y:oe+11,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-blue-600 font-medium",children:R})]}),F>0&&s.jsx("rect",{x:z,y:0,width:q,height:oe,fill:ke.red,rx:d,ry:d,className:`drop-shadow-sm transition-opacity ${h?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:"none"}}),H>0&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:X,y:0,width:ee,height:oe,fill:ke.blue,rx:d,ry:d,className:`drop-shadow-sm transition-opacity ${h?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:"none"}}),L&&s.jsx("text",{x:X+ee/2,y:oe+11,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-blue-600 font-medium",children:L})]}),i&&F>0&&s.jsx("rect",{x:z+ne,y:0,width:Math.max(0,q-ne*2),height:oe,fill:"transparent",className:"cursor-grab active:cursor-grabbing",onMouseDown:U=>l==null?void 0:l(U,e.id,"move",ie),children:s.jsx("title",{children:"전체 이동 (드래그)"})}),i&&s.jsx("rect",{x:-J/2,y:0,width:J,height:oe,fill:"transparent",className:"cursor-ew-resize",onMouseDown:U=>l==null?void 0:l(U,e.id,"resize-pre",ie),children:s.jsxs("title",{children:[$>0?"앞 간접작업일 조절":"순작업일 조절"," (드래그)"]})}),i&&$>0&&F>0&&s.jsx("rect",{x:P-ne/2,y:0,width:ne,height:oe,fill:"transparent",className:"cursor-col-resize",onMouseDown:U=>l==null?void 0:l(U,e.id,"resize-pre-net",ie),children:s.jsx("title",{children:"앞간접-순작업 경계 조절 (드래그)"})}),i&&H>0&&F>0&&s.jsx("rect",{x:X-ne/2,y:0,width:ne,height:oe,fill:"transparent",className:"cursor-col-resize",onMouseDown:U=>l==null?void 0:l(U,e.id,"resize-net-post",ie),children:s.jsx("title",{children:"순작업-뒤간접 경계 조절 (드래그)"})}),i&&s.jsx("rect",{x:ae-J/2,y:0,width:J,height:oe,fill:"transparent",className:"cursor-ew-resize",onMouseDown:U=>l==null?void 0:l(U,e.id,"resize-post",ie),children:s.jsxs("title",{children:[H>0?"뒤 간접작업일 조절":"순작업일 조절"," (드래그)"]})}),i&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:1,y:oe/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"}),s.jsx("rect",{x:ae-4,y:oe/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"}),$>0&&F>0&&s.jsx("rect",{x:P-1.5,y:oe/2-4,width:3,height:8,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-60 transition-opacity"}),H>0&&F>0&&s.jsx("rect",{x:X-1.5,y:oe/2-4,width:3,height:8,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-60 transition-opacity"})]}),s.jsx("text",{x:-8,y:oe/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-medium fill-gray-700",children:e.name}),h&&s.jsxs("g",{children:[s.jsxs("text",{x:ae/2,y:-6,textAnchor:"middle",className:"pointer-events-none select-none text-[10px] font-bold fill-blue-600",children:[me(v,"MM/dd")," ~ ",me(w,"MM/dd")]}),s.jsxs("text",{x:ae/2,y:oe+12,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-gray-500",children:["앞",$,"일 + 순",F,"일 + 뒤",H,"일"]})]})]})}},ds=()=>s.jsx("defs",{children:s.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:s.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:ke.dependency})})}),Pt=c.forwardRef(({tasks:e,milestones:n,viewMode:t,zoomLevel:r,holidays:a,calendarSettings:i,onBarDrag:o,onMilestoneUpdate:l,onMilestoneDoubleClick:m,onTaskDoubleClick:d,virtualRows:h,totalHeight:v},w)=>{const b=Je[r].pixelsPerDay,x=t==="MASTER",p=h&&h.length>0,[D,O]=c.useState(null),[I,R]=c.useState(null),L=c.useRef(null);c.useEffect(()=>{L.current=I},[I]);const{minDate:$,totalDays:H}=c.useMemo(()=>Tt(e,n,60),[e,n]),F=c.useMemo(()=>os(n,$,b),[n,$,b]),P=H*b,q=Math.max(p?(v||0)+be+100:e.length*xe+be+100,500),ee=c.useRef(null);c.useEffect(()=>{ee.current=D},[D]);const ae=c.useCallback((E,g)=>{if(!l)return;E.preventDefault(),E.stopPropagation();const f=Ie(g.date,$,b),j={milestoneId:g.id,startX:E.clientX,originalDate:g.date,currentX:f};R(j)},[l,$,b]),te=c.useCallback(E=>{const g=L.current;if(!g)return;const f=E.clientX-g.startX,j=Ie(g.originalDate,$,b),C=Math.max(0,j+f);R(A=>A?{...A,currentX:C}:null)},[$,b]),z=c.useCallback(E=>{const g=L.current;if(!g||!l){R(null);return}const f=E.clientX-g.startX,j=Math.round(f/b);if(j!==0){const C=Q(g.originalDate,j),A=n.find(W=>W.id===g.milestoneId);A&&l({...A,date:C})}R(null)},[l,b,n]);c.useEffect(()=>{if(I)return window.addEventListener("mousemove",te),window.addEventListener("mouseup",z),()=>{window.removeEventListener("mousemove",te),window.removeEventListener("mouseup",z)}},[I,te,z]);const X=c.useCallback(E=>{m&&m(E)},[m]),J=c.useCallback((E,g,f,j)=>{if(!o)return;E.preventDefault(),E.stopPropagation();const C={taskId:g,dragType:f,startX:E.clientX,originalStartDate:j.startDate,originalEndDate:j.endDate,originalIndirectWorkDaysPre:j.indirectWorkDaysPre,originalNetWorkDays:j.netWorkDays,originalIndirectWorkDaysPost:j.indirectWorkDaysPost,currentStartDate:j.startDate,currentEndDate:j.endDate,currentIndirectWorkDaysPre:j.indirectWorkDaysPre,currentNetWorkDays:j.netWorkDays,currentIndirectWorkDaysPost:j.indirectWorkDaysPost};O(C),ee.current=C},[o]),ne=c.useCallback(E=>{const g=ee.current;if(!g||!o)return;const f=E.clientX-g.startX,j=Math.round(f/b*10)/10;let C=g.originalStartDate,A=g.originalEndDate,W=g.originalIndirectWorkDaysPre,re=g.originalNetWorkDays,V=g.originalIndirectWorkDaysPost;if(g.dragType==="move")C=Q(g.originalStartDate,j),A=Q(g.originalEndDate,j);else if(g.dragType==="move-net"){const Z=g.originalIndirectWorkDaysPost,de=g.originalIndirectWorkDaysPre,ue=Math.max(-de,Math.min(Z,j));W=g.originalIndirectWorkDaysPre+ue,V=g.originalIndirectWorkDaysPost-ue,C=g.originalStartDate,A=g.originalEndDate}else if(g.dragType==="resize-pre")if(g.originalIndirectWorkDaysPre>0){W=Math.max(0,g.originalIndirectWorkDaysPre-j);const Z=Q(g.originalStartDate,g.originalIndirectWorkDaysPre);C=Q(Z,-W),A=g.originalEndDate}else{re=Math.max(1,g.originalNetWorkDays-j);const Z=Q(g.originalStartDate,g.originalNetWorkDays-1);C=Q(Z,-(re-1)),A=g.originalEndDate}else if(g.dragType==="resize-post")if(g.originalIndirectWorkDaysPost>0){V=Math.max(0,g.originalIndirectWorkDaysPost+j);const Z=Q(g.originalEndDate,-g.originalIndirectWorkDaysPost);A=Q(Z,V),C=g.originalStartDate}else re=Math.max(1,g.originalNetWorkDays+j),A=Q(g.originalStartDate,re-1),C=g.originalStartDate;else if(g.dragType==="resize-pre-net"){const Z=g.originalNetWorkDays-1,de=g.originalIndirectWorkDaysPre,ue=Math.max(-de,Math.min(Z,j));W=g.originalIndirectWorkDaysPre+ue,re=g.originalNetWorkDays-ue,C=g.originalStartDate,A=g.originalEndDate}else if(g.dragType==="resize-net-post"){const Z=g.originalIndirectWorkDaysPost,de=g.originalNetWorkDays-1,ue=Math.max(-de,Math.min(Z,j));re=g.originalNetWorkDays+ue,V=g.originalIndirectWorkDaysPost-ue,C=g.originalStartDate,A=g.originalEndDate}O(Z=>Z?{...Z,currentStartDate:C,currentEndDate:A,currentIndirectWorkDaysPre:W,currentNetWorkDays:re,currentIndirectWorkDaysPost:V}:null)},[o,b]),ie=c.useCallback(()=>{const E=ee.current;if(!E||!o){O(null),ee.current=null;return}const g=E.currentStartDate.getTime()!==E.originalStartDate.getTime()||E.currentEndDate.getTime()!==E.originalEndDate.getTime(),f=E.currentIndirectWorkDaysPre!==E.originalIndirectWorkDaysPre||E.currentNetWorkDays!==E.originalNetWorkDays||E.currentIndirectWorkDaysPost!==E.originalIndirectWorkDaysPost;(g||f)&&o({taskId:E.taskId,dragType:E.dragType,newStartDate:E.currentStartDate,newEndDate:E.currentEndDate,newIndirectWorkDaysPre:E.currentIndirectWorkDaysPre,newIndirectWorkDaysPost:E.currentIndirectWorkDaysPost,newNetWorkDays:E.currentNetWorkDays}),O(null),ee.current=null},[o]);c.useEffect(()=>{if(D){window.addEventListener("mousemove",ne),window.addEventListener("mouseup",ie);let E="ew-resize";return D.dragType==="move"||D.dragType==="move-net"?E="grabbing":(D.dragType==="resize-pre-net"||D.dragType==="resize-net-post")&&(E="col-resize"),document.body.style.cursor=E,document.body.style.userSelect="none",()=>{window.removeEventListener("mousemove",ne),window.removeEventListener("mouseup",ie),document.body.style.cursor="",document.body.style.userSelect=""}}},[D,ne,ie]);const U=c.useCallback(E=>D&&D.taskId===E?{startDate:D.currentStartDate,endDate:D.currentEndDate,indirectWorkDaysPre:D.currentIndirectWorkDaysPre,indirectWorkDaysPost:D.currentIndirectWorkDaysPost,netWorkDays:D.currentNetWorkDays}:null,[D]);return s.jsx("div",{className:"flex h-full w-full flex-col overflow-hidden bg-white",children:s.jsxs("div",{ref:w,className:"relative flex-1 overflow-auto",children:[s.jsx(as,{minDate:$,totalDays:H,pixelsPerDay:b,zoomLevel:r,holidays:a,calendarSettings:i}),s.jsxs("svg",{width:P,height:q,className:"block bg-white",children:[s.jsx(ds,{}),s.jsx(is,{minDate:$,totalDays:H,chartHeight:q,pixelsPerDay:b,holidays:a,calendarSettings:i,zoomLevel:r}),(p?h:e.map((E,g)=>({index:g,start:g*xe,size:xe,key:g}))).map(E=>{const g=e[E.index];if(!g||g.type!=="GROUP")return null;const f=E.start+be;return s.jsx("rect",{x:0,y:f,width:P,height:xe,fill:"rgba(249, 250, 251, 0.6)",className:"pointer-events-none"},`group-bg-${E.key}`)}),Array.from({length:H},(E,g)=>{const f=(g+1)*b,j=Q($,g),C=ut(j);let A=!1,W="#f0f0f0";return r==="DAY"?(A=!0,W=C===0?"#e0e0e0":"#f0f0f0"):r==="WEEK"?(A=C===0,W="#e5e7eb"):r==="MONTH"&&(A=C===0,W="#f0f0f0"),A?s.jsx("line",{x1:f,y1:0,x2:f,y2:q,stroke:W,strokeWidth:1},`vline-${g}`):null}),(p?h:e.map((E,g)=>({index:g,start:g*xe,size:xe,key:g}))).map(E=>s.jsx("line",{x1:0,y1:E.start+xe+be,x2:P,y2:E.start+xe+be,stroke:"#f3f4f6",strokeWidth:1},`line-${E.key}`)),s.jsx("rect",{x:0,y:0,width:P,height:be,fill:"transparent"}),F.map(E=>{const g=(I==null?void 0:I.milestoneId)===E.milestone.id;return s.jsx(ls,{milestone:E.milestone,x:E.x,labelLevel:E.labelLevel,isDragging:g,dragX:g?I==null?void 0:I.currentX:void 0,onMouseDown:l?ae:void 0,onDoubleClick:m?X:void 0},E.milestone.id)}),s.jsx("line",{x1:0,y1:be,x2:P,y2:be,stroke:ke.grid,strokeWidth:1}),(p?h:e.map((E,g)=>({index:g,start:g*xe,size:xe,key:g}))).map(E=>{const g=e[E.index];if(!g)return null;const f=E.start+(xe-oe)/2+be;return s.jsx(cs,{task:g,y:f,minDate:$,pixelsPerDay:b,isMasterView:x,isDraggable:!x&&!!o,dragInfo:U(g.id),onDragStart:J,onDoubleClick:!x&&g.type==="TASK"&&d?()=>d(g):void 0},E.key)})]})]})})});Pt.displayName="GanttTimeline";const us=({milestoneName:e,onConfirm:n,onCancel:t})=>lt.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[60] bg-black/50 transition-opacity",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-[360px] rounded-lg bg-white p-6 shadow-xl",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:s.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"마일스톤 삭제"}),s.jsx("p",{className:"text-sm text-gray-500",children:"이 작업은 되돌릴 수 없습니다"})]})]}),s.jsxs("div",{className:"mb-6 rounded-md bg-gray-50 p-3",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"다음 마일스톤을 삭제하시겠습니까?"}),s.jsxs("p",{className:"mt-1 flex items-center gap-2 text-sm font-medium text-gray-700",children:[s.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-purple-400"}),e]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:t,className:"rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"취소"}),s.jsx("button",{onClick:n,className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 transition-colors",children:"삭제"})]})]})})]}),document.body),hs=({milestone:e,isOpen:n,isNew:t=!1,onClose:r,onSave:a,onDelete:i})=>{const[o,l]=c.useState(""),[m,d]=c.useState(""),[h,v]=c.useState(""),[w,b]=c.useState(!1),x=c.useRef(null);c.useEffect(()=>{e&&n&&(l(e.name),d(e.description||""),v(me(e.date,"yyyy-MM-dd")),b(!1),setTimeout(()=>{var L,$;(L=x.current)==null||L.focus(),($=x.current)==null||$.select()},100))},[e,n]),c.useEffect(()=>{const L=$=>{$.key==="Escape"&&n&&(w?b(!1):r())};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[n,w,r]);const p=()=>{if(!e||!o.trim())return;const L={...e,name:o.trim(),description:m.trim()||void 0,date:new Date(h)};a(L),r()},D=()=>{b(!0)},O=()=>{e&&i&&i(e.id),b(!1)},I=()=>{b(!1)},R=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),p())};return!n||!e?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 transition-opacity",onClick:r}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white shadow-xl",onClick:L=>L.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:t?"새 마일스톤":"마일스톤 설정"}),s.jsx("button",{onClick:r,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-colors",children:s.jsx(ht,{size:20})})]}),s.jsxs("div",{className:"space-y-4 p-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-gray-700",children:[s.jsx(Mt,{size:14}),"마일스톤 이름"]}),s.jsx("input",{ref:x,type:"text",value:o,onChange:L=>l(L.target.value),onKeyDown:R,placeholder:"마일스톤 이름을 입력하세요",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-gray-700",children:[s.jsx(Vr,{size:14}),"날짜"]}),s.jsx("input",{type:"date",value:h,onChange:L=>v(L.target.value),onKeyDown:R,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-gray-700",children:[s.jsx(Br,{size:14}),"설명 (선택)"]}),s.jsx("textarea",{value:m,onChange:L=>d(L.target.value),placeholder:"마일스톤에 대한 설명을 입력하세요",rows:3,className:"w-full resize-none rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-between border-t border-gray-200 px-4 py-3",children:[s.jsx("div",{children:!t&&i&&s.jsxs("button",{onClick:D,className:"flex items-center gap-1.5 rounded-md px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(sn,{size:16}),"삭제"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:r,className:"rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 transition-colors",children:"취소"}),s.jsx("button",{onClick:p,disabled:!o.trim(),className:"rounded-md bg-blue-500 px-4 py-2 text-sm font-medium text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"저장"})]})]})]})}),w&&s.jsx(us,{milestoneName:o||e.name,onConfirm:O,onCancel:I})]})},fs=({taskName:e,onConfirm:n,onCancel:t})=>lt.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[60] bg-black/50 transition-opacity",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-[360px] rounded-lg bg-white p-6 shadow-xl",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:s.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"공정 삭제"}),s.jsx("p",{className:"text-sm text-gray-500",children:"이 작업은 되돌릴 수 없습니다"})]})]}),s.jsxs("div",{className:"mb-6 rounded-md bg-gray-50 p-3",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"다음 공정을 삭제하시겠습니까?"}),s.jsxs("p",{className:"mt-1 flex items-center gap-2 text-sm font-medium text-gray-700",children:[s.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-red-400"}),e]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:t,className:"rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"취소"}),s.jsx("button",{onClick:n,className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 transition-colors",children:"삭제"})]})]})})]}),document.body),mn=({task:e,isOpen:n,onClose:t,onSave:r,onDelete:a})=>{const[i,o]=c.useState("0"),[l,m]=c.useState("1"),[d,h]=c.useState("0"),[v,w]=c.useState(""),[b,x]=c.useState(""),[p,D]=c.useState(!1),O=c.useRef(null),I=z=>{const X=parseFloat(z)||0;return Math.round(X*10)/10},R=I(i),L=I(l),$=I(d);c.useEffect(()=>{e&&e.task&&n&&(o(String(e.task.indirectWorkDaysPre)),m(String(e.task.netWorkDays)),h(String(e.task.indirectWorkDaysPost)),w(e.task.indirectWorkNamePre||""),x(e.task.indirectWorkNamePost||""),D(!1),setTimeout(()=>{var z;(z=O.current)==null||z.focus()},100))},[e,n]),c.useEffect(()=>{const z=X=>{X.key==="Escape"&&n&&(p?D(!1):t())};return document.addEventListener("keydown",z),()=>document.removeEventListener("keydown",z)},[n,p,t]);const H=()=>{if(!e||!e.task)return;const z={...e,task:{...e.task,indirectWorkDaysPre:R,netWorkDays:L,indirectWorkDaysPost:$,indirectWorkNamePre:v.trim()||void 0,indirectWorkNamePost:b.trim()||void 0}};r(z),t()},F=()=>{D(!0)},P=()=>{e&&a&&a(e.id),D(!1),t()},q=()=>{D(!1)},ee=z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),H())},ae=(z,X)=>{const J=X.replace(/[^0-9.]/g,""),ne=J.split("."),ie=ne.length>2?ne[0]+"."+ne.slice(1).join(""):J;z(ie)};if(!n||!e||!e.task)return null;const te=R+L+$;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 transition-opacity",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-lg rounded-lg bg-white shadow-xl",onClick:z=>z.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"공정 설정"}),s.jsx("p",{className:"text-sm text-gray-500",children:e.name})]}),s.jsx("button",{onClick:t,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-colors",children:s.jsx(ht,{size:20})})]}),s.jsxs("div",{className:"space-y-5 p-4",children:[s.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50/50 p-4",children:[s.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-sm font-semibold text-blue-700",children:[s.jsx(St,{size:14}),"앞 간접작업"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block text-xs font-medium text-gray-600",children:"일수"}),s.jsx("input",{ref:O,type:"text",inputMode:"decimal",value:i,onChange:z=>ae(o,z.target.value),onKeyDown:ee,placeholder:"0.1 단위",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1 flex items-center gap-1 text-xs font-medium text-gray-600",children:[s.jsx(Mt,{size:12}),"작업명"]}),s.jsx("input",{type:"text",value:v,onChange:z=>w(z.target.value),onKeyDown:ee,placeholder:"예: 양생, 대기",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50/50 p-4",children:[s.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-sm font-semibold text-red-700",children:[s.jsx(St,{size:14}),"순작업"]}),s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block text-xs font-medium text-gray-600",children:"일수"}),s.jsx("input",{type:"text",inputMode:"decimal",value:l,onChange:z=>ae(m,z.target.value),onKeyDown:ee,placeholder:"0.1 단위",className:"w-full max-w-[120px] rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 focus:border-red-500 focus:outline-none focus:ring-1 focus:ring-red-500"})]})]}),s.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50/50 p-4",children:[s.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-sm font-semibold text-blue-700",children:[s.jsx(St,{size:14}),"뒤 간접작업"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block text-xs font-medium text-gray-600",children:"일수"}),s.jsx("input",{type:"text",inputMode:"decimal",value:d,onChange:z=>ae(h,z.target.value),onKeyDown:ee,placeholder:"0.1 단위",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1 flex items-center gap-1 text-xs font-medium text-gray-600",children:[s.jsx(Mt,{size:12}),"작업명"]}),s.jsx("input",{type:"text",value:b,onChange:z=>x(z.target.value),onKeyDown:ee,placeholder:"예: 양생, 대기",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{className:"rounded-md bg-gray-100 p-3 text-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"총 기간: "}),s.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[te,"일"]}),s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(앞",R," + 순",L," + 뒤",$,")"]})]})]}),s.jsxs("div",{className:"flex justify-between border-t border-gray-200 px-4 py-3",children:[s.jsx("div",{children:a&&s.jsxs("button",{onClick:F,className:"flex items-center gap-1.5 rounded-md px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(sn,{size:16}),"삭제"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,className:"rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 transition-colors",children:"취소"}),s.jsx("button",{onClick:H,className:"rounded-md bg-blue-500 px-4 py-2 text-sm font-medium text-white hover:bg-blue-600 transition-colors",children:"저장"})]})]})]})}),p&&s.jsx(fs,{taskName:e.name,onConfirm:P,onCancel:q})]})},xn=e=>{let n;const t=new Set,r=(d,h)=>{const v=typeof d=="function"?d(n):d;if(!Object.is(v,n)){const w=n;n=h??(typeof v!="object"||v===null)?v:Object.assign({},n,v),t.forEach(b=>b(n,w))}},a=()=>n,l={setState:r,getState:a,getInitialState:()=>m,subscribe:d=>(t.add(d),()=>t.delete(d))},m=n=e(r,a,l);return l},ms=e=>e?xn(e):xn,xs=e=>e;function gs(e,n=xs){const t=c.useSyncExternalStore(e.subscribe,c.useCallback(()=>n(e.getState()),[e,n]),c.useCallback(()=>n(e.getInitialState()),[e,n]));return c.useDebugValue(t),t}const gn=e=>{const n=ms(e),t=r=>gs(n,r);return Object.assign(t,n),t},ys=e=>e?gn(e):gn,yn=e=>Symbol.iterator in e,bn=e=>"entries"in e,pn=(e,n)=>{const t=e instanceof Map?e:new Map(e.entries()),r=n instanceof Map?n:new Map(n.entries());if(t.size!==r.size)return!1;for(const[a,i]of t)if(!r.has(a)||!Object.is(i,r.get(a)))return!1;return!0},bs=(e,n)=>{const t=e[Symbol.iterator](),r=n[Symbol.iterator]();let a=t.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=t.next(),i=r.next()}return!!a.done&&!!i.done};function ps(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:yn(e)&&yn(n)?bn(e)&&bn(n)?pn(e,n):bs(e,n):pn({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function Ae(e){const n=c.useRef(void 0);return t=>{const r=e(t);return ps(n.current,r)?n.current:n.current=r}}const Pe=ys((e,n)=>({viewMode:"MASTER",activeCPId:null,zoomLevel:"MONTH",selectedTaskId:null,hoveredTaskId:null,expandedTaskIds:new Set,sidebarWidth:ye.SIDEBAR_WIDTH,isDragging:!1,dragType:null,dragTaskId:null,setViewMode:(t,r)=>{e({viewMode:t,activeCPId:r??null,zoomLevel:t==="DETAIL"?"DAY":"MONTH"})},setZoomLevel:t=>{e({zoomLevel:t})},selectTask:t=>{e({selectedTaskId:t})},hoverTask:t=>{e({hoveredTaskId:t})},toggleTask:t=>{const{expandedTaskIds:r}=n(),a=new Set(r);a.has(t)?a.delete(t):a.add(t),e({expandedTaskIds:a})},expandAll:t=>{const{expandedTaskIds:r}=n(),a=new Set([...r,...t]);e({expandedTaskIds:a})},collapseAll:()=>{e({expandedTaskIds:new Set})},setSidebarWidth:t=>{const r=Math.max(ye.SIDEBAR_MIN_WIDTH,Math.min(t,ye.SIDEBAR_MAX_WIDTH));e({sidebarWidth:r})},startDrag:(t,r)=>{e({isDragging:!0,dragType:t,dragTaskId:r})},endDrag:()=>{e({isDragging:!1,dragType:null,dragTaskId:null})}})),wn=()=>Pe(Ae(e=>({viewMode:e.viewMode,activeCPId:e.activeCPId,zoomLevel:e.zoomLevel}))),vn=()=>Pe(Ae(e=>({setViewMode:e.setViewMode,setZoomLevel:e.setZoomLevel}))),ws=()=>Pe(Ae(e=>({selectedTaskId:e.selectedTaskId,hoveredTaskId:e.hoveredTaskId,selectTask:e.selectTask,hoverTask:e.hoverTask}))),kn=()=>Pe(Ae(e=>({expandedTaskIds:e.expandedTaskIds,toggleTask:e.toggleTask,expandAll:e.expandAll,collapseAll:e.collapseAll}))),Dn=()=>Pe(Ae(e=>({sidebarWidth:e.sidebarWidth,setSidebarWidth:e.setSidebarWidth}))),vs=()=>Pe(Ae(e=>({isDragging:e.isDragging,dragType:e.dragType,dragTaskId:e.dragTaskId,startDrag:e.startDrag,endDrag:e.endDrag})));function ze(e,n,t){let r=t.initialDeps??[],a;function i(){var o,l,m,d;let h;t.key&&((o=t.debug)!=null&&o.call(t))&&(h=Date.now());const v=e();if(!(v.length!==r.length||v.some((x,p)=>r[p]!==x)))return a;r=v;let b;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(b=Date.now()),a=n(...v),t.key&&((m=t.debug)!=null&&m.call(t))){const x=Math.round((Date.now()-h)*100)/100,p=Math.round((Date.now()-b)*100)/100,D=p/16,O=(I,R)=>{for(I=String(I);I.length<R;)I=" "+I;return I};console.info(`%c⏱ ${O(p,5)} /${O(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*D,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(d=t==null?void 0:t.onChange)==null||d.call(t,a),a}return i.updateDeps=o=>{r=o},i}function jn(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const ks=(e,n)=>Math.abs(e-n)<1.01,Ds=(e,n,t)=>{let r;return function(...a){e.clearTimeout(r),r=e.setTimeout(()=>n.apply(this,a),t)}},Nn=e=>{const{offsetWidth:n,offsetHeight:t}=e;return{width:n,height:t}},js=e=>e,Ns=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let a=n;a<=t;a++)r.push(a);return r},Es=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;const a=o=>{const{width:l,height:m}=o;n({width:Math.round(l),height:Math.round(m)})};if(a(Nn(t)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(o=>{const l=()=>{const m=o[0];if(m!=null&&m.borderBoxSize){const d=m.borderBoxSize[0];if(d){a({width:d.inlineSize,height:d.blockSize});return}}a(Nn(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},En={passive:!0},Sn=typeof window>"u"?!0:"onscrollend"in window,Ss=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;let a=0;const i=e.options.useScrollendEvent&&Sn?()=>{}:Ds(r,()=>{n(a,!1)},e.options.isScrollingResetDelay),o=h=>()=>{const{horizontal:v,isRtl:w}=e.options;a=v?t.scrollLeft*(w&&-1||1):t.scrollTop,i(),n(a,h)},l=o(!0),m=o(!1);m(),t.addEventListener("scroll",l,En);const d=e.options.useScrollendEvent&&Sn;return d&&t.addEventListener("scrollend",m,En),()=>{t.removeEventListener("scroll",l),d&&t.removeEventListener("scrollend",m)}},Ms=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const r=n.borderBoxSize[0];if(r)return Math.round(r[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},Ws=(e,{adjustments:n=0,behavior:t},r)=>{var a,i;const o=e+n;(i=(a=r.scrollElement)==null?void 0:a.scrollTo)==null||i.call(a,{[r.options.horizontal?"left":"top"]:o,behavior:t})};class Cs{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const r=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(a=>{a.forEach(i=>{const o=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var a;(a=r())==null||a.disconnect(),t=null},observe:a=>{var i;return(i=r())==null?void 0:i.observe(a,{box:"border-box"})},unobserve:a=>{var i;return(i=r())==null?void 0:i.unobserve(a)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([r,a])=>{typeof a>"u"&&delete t[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:js,rangeExtractor:Ns,onChange:()=>{},measureElement:Ms,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var r,a;(a=(r=this.options).onChange)==null||a.call(r,this,t)},this.maybeNotify=ze(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:process.env.NODE_ENV!=="production"&&"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(a=>{this.observer.observe(a)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,a=>{this.scrollRect=a,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(a,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<a?"forward":"backward":null,this.scrollOffset=a,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,r)=>{const a=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=t[o];if(a.has(l.lane))continue;const m=i.get(l.lane);if(m==null||l.end>m.end?i.set(l.lane,l):l.end<m.end&&a.set(l.lane,!0),a.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=ze(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,r,a,i,o)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:a,getItemKey:i,enabled:o}),{key:!1}),this.getMeasurements=ze(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:r,scrollMargin:a,getItemKey:i,enabled:o},l)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(h=>{this.itemSizeCache.set(h.key,h.size)}));const m=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,m);for(let h=m;h<t;h++){const v=i(h),w=this.options.lanes===1?d[h-1]:this.getFurthestMeasurement(d,h),b=w?w.end+this.options.gap:r+a,x=l.get(v),p=typeof x=="number"?x:this.options.estimateSize(h),D=b+p,O=w?w.lane:h%this.options.lanes;d[h]={index:h,start:b,size:p,end:D,key:v,lane:O}}return this.measurementsCache=d,d},{key:process.env.NODE_ENV!=="production"&&"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=ze(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,r,a,i)=>this.range=t.length>0&&r>0?Ts({measurements:t,outerSize:r,scrollOffset:a,lanes:i}):null,{key:process.env.NODE_ENV!=="production"&&"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=ze(()=>{let t=null,r=null;const a=this.calculateRange();return a&&(t=a.startIndex,r=a.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,r]},(t,r,a,i,o)=>i===null||o===null?[]:t({startIndex:i,endIndex:o,overscan:r,count:a}),{key:process.env.NODE_ENV!=="production"&&"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const r=this.options.indexAttribute,a=t.getAttribute(r);return a?parseInt(a,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(t,r)=>{const a=this.indexFromElement(t),i=this.measurementsCache[a];if(!i)return;const o=i.key,l=this.elementsCache.get(o);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(o,t)),t.isConnected&&this.resizeItem(a,this.options.measureElement(t,r,this))},this.resizeItem=(t,r)=>{const a=this.measurementsCache[t];if(!a)return;const i=this.itemSizeCache.get(a.key)??a.size,o=r-i;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(a,o,this):a.start<this.getScrollOffset()+this.scrollAdjustments)&&(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("correction",o),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(a.index),this.itemSizeCache=new Map(this.itemSizeCache.set(a.key,r)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((r,a)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(a))});return}this._measureElement(t,void 0)},this.getVirtualItems=ze(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,r)=>{const a=[];for(let i=0,o=t.length;i<o;i++){const l=t[i],m=r[l];a.push(m)}return a},{key:process.env.NODE_ENV!=="production"&&"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const r=this.getMeasurements();if(r.length!==0)return jn(r[Mn(0,r.length-1,a=>jn(r[a]).start,t)])},this.getOffsetForAlignment=(t,r,a=0)=>{const i=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=t>=o+i?"end":"start"),r==="center"?t+=(a-i)/2:r==="end"&&(t-=i);const l=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,r="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const a=this.measurementsCache[t];if(!a)return;const i=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(a.end>=o+i-this.options.scrollPaddingEnd)r="end";else if(a.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?a.end+this.options.scrollPaddingEnd:a.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,a.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:r="start",behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,r),{adjustments:void 0,behavior:a})},this.scrollToIndex=(t,{align:r="auto",behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let i=0;const o=10,l=d=>{if(!this.targetWindow)return;const h=this.getOffsetForIndex(t,d);if(!h){console.warn("Failed to get offset for index:",t);return}const[v,w]=h;this._scrollToOffset(v,{adjustments:void 0,behavior:a}),this.targetWindow.requestAnimationFrame(()=>{const b=this.getScrollOffset(),x=this.getOffsetForIndex(t,w);if(!x){console.warn("Failed to get offset for index:",t);return}ks(x[0],b)||m(w)})},m=d=>{this.targetWindow&&(i++,i<o?(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("Schedule retry",i,o),this.targetWindow.requestAnimationFrame(()=>l(d))):console.warn(`Failed to scroll to index ${t} after ${o} attempts.`))};l(r)},this.scrollBy=(t,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var t;const r=this.getMeasurements();let a;if(r.length===0)a=this.options.paddingStart;else if(this.options.lanes===1)a=((t=r[r.length-1])==null?void 0:t.end)??0;else{const i=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&i.some(l=>l===null);){const l=r[o];i[l.lane]===null&&(i[l.lane]=l.end),o--}a=Math.max(...i.filter(l=>l!==null))}return Math.max(a-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:r,behavior:a})=>{this.options.scrollToFn(t,{behavior:a,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const Mn=(e,n,t,r)=>{for(;e<=n;){const a=(e+n)/2|0,i=t(a);if(i<r)e=a+1;else if(i>r)n=a-1;else return a}return e>0?e-1:0};function Ts({measurements:e,outerSize:n,scrollOffset:t,lanes:r}){const a=e.length-1,i=m=>e[m].start;if(e.length<=r)return{startIndex:0,endIndex:a};let o=Mn(0,a,i,t),l=o;if(r===1)for(;l<a&&e[l].end<t+n;)l++;else if(r>1){const m=Array(r).fill(0);for(;l<a&&m.some(h=>h<t+n);){const h=e[l];m[h.lane]=h.end,l++}const d=Array(r).fill(t+n);for(;o>=0&&d.some(h=>h>=t);){const h=e[o];d[h.lane]=h.start,o--}o=Math.max(0,o-o%r),l=Math.min(a,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Wn=typeof document<"u"?ct.useLayoutEffect:ct.useEffect;function Ps(e){const n=ct.useReducer(()=>({}),{})[1],t={...e,onChange:(a,i)=>{var o;i?lt.flushSync(n):n(),(o=e.onChange)==null||o.call(e,a,i)}},[r]=ct.useState(()=>new Cs(t));return r.setOptions(t),Wn(()=>r._didMount(),[]),Wn(()=>r._willUpdate()),r}function Os(e){return Ps({observeElementRect:Es,observeElementOffset:Ss,scrollToFn:Ws,...e})}const{ROW_HEIGHT:_s}=ye;function Cn({containerRef:e,count:n,rowHeight:t=_s,overscan:r=5}){const a=Os({count:n,getScrollElement:()=>e.current,estimateSize:()=>t,overscan:r}),i=a.getVirtualItems();return{virtualRows:c.useMemo(()=>i.map(l=>({index:l.index,start:l.start,size:l.size,key:l.index})),[i]),totalHeight:a.getTotalSize(),virtualizer:a}}const Is={workOnSaturdays:!1,workOnSundays:!1,workOnHolidays:!1};function As({tasks:e,milestones:n=[],holidays:t=[],calendarSettings:r=Is,initialView:a="MASTER",initialZoomLevel:i="MONTH",initialExpandedIds:o,onTaskUpdate:l,onTaskCreate:m,onTaskDelete:d,onTaskReorder:h,onTaskGroup:v,onTaskUngroup:w,onTaskMove:b,onViewChange:x,onMilestoneCreate:p,onMilestoneUpdate:D,onMilestoneDelete:O,onSave:I,onReset:R,hasUnsavedChanges:L,saveStatus:$,className:H,style:F}){const{viewMode:P,activeCPId:q,zoomLevel:ee}=wn(),{setViewMode:ae,setZoomLevel:te}=vn(),{sidebarWidth:z,setSidebarWidth:X}=Dn(),{expandedTaskIds:J,toggleTask:ne,expandAll:ie,collapseAll:U}=kn(),E=c.useRef(null),g=c.useRef(null),f=c.useRef(null),j=c.useRef(!1),C=c.useRef(!1),[A,W]=c.useState(!1),[re,V]=c.useState(!1),[Z,de]=c.useState(!1),ue=c.useCallback(()=>{V(!0)},[]),Ue=c.useCallback(()=>{V(!1)},[]),Ze=c.useCallback(()=>{de(!0)},[]),Le=c.useCallback(()=>{de(!1)},[]),[De,Ee]=c.useState(null),[Fe,se]=c.useState(!1),[He,pe]=c.useState(!1),Ot=c.useCallback(k=>{Ee(k),pe(!1),se(!0)},[]),[et,$e]=c.useState(null),[tt,nt]=c.useState(!1),xt=c.useCallback(k=>{$e(k),nt(!0)},[]),je=c.useCallback(()=>{nt(!1),$e(null)},[]),gt=c.useCallback(k=>{l&&l(k),je()},[l,je]),yt=c.useCallback(k=>{d&&d(k),je()},[d,je]),bt=c.useCallback(()=>{const k={id:`milestone-${Date.now()}`,name:"",date:new Date,description:""};Ee(k),pe(!0),se(!0)},[]),Se=c.useCallback(()=>{se(!1),Ee(null),pe(!1)},[]),pt=c.useCallback(k=>{He&&p?p(k):D&&D(k),Se()},[He,p,D,Se]),wt=c.useCallback(k=>{O&&O(k),Se()},[O,Se]),rt=c.useRef(!1),Me=c.useMemo(()=>e.map(k=>k.id),[e]);c.useEffect(()=>{rt.current||(rt.current=!0,ae(a),te(i),U(),o&&o.length>0?ie(o):Me.length>0&&ie(Me))},[Me,o,a,i,ae,te,ie,U]);const st=c.useRef(new Set);c.useEffect(()=>{const k=new Set(e.map(_=>_.id)),T=st.current,S=[];e.forEach(_=>{_.type==="GROUP"&&!T.has(_.id)&&S.push(_.id)}),S.length>0&&ie(S),st.current=k},[e,ie]);const we=c.useMemo(()=>{if(P==="MASTER"){const k=[],T=(S,_=0)=>{e.forEach(K=>{K.wbsLevel===1&&K.parentId===S&&(S===null||J.has(S))&&(k.push(K),K.type==="GROUP"&&T(K.id,_+1))})};return T(null),k}else{const k=[],T=S=>{e.forEach(_=>{_.wbsLevel===2&&_.parentId===S&&(S===q||J.has(S))&&(k.push(_),_.type==="GROUP"&&T(_.id))})};return T(q),k}},[e,P,q,J]),{virtualRows:at,totalHeight:it}=Cn({containerRef:f,count:we.length});c.useEffect(()=>{const k=g.current,T=f.current;if(!k||!T)return;const S=()=>{j.current||(j.current=!0,T.scrollTop=k.scrollTop,requestAnimationFrame(()=>{j.current=!1}))},_=()=>{j.current||(j.current=!0,k.scrollTop=T.scrollTop,requestAnimationFrame(()=>{j.current=!1}))};return k.addEventListener("scroll",S),T.addEventListener("scroll",_),()=>{k.removeEventListener("scroll",S),T.removeEventListener("scroll",_)}},[]);const[Ge,ot]=c.useState(null),_t=c.useCallback(k=>{if(k.detail>=2)return;k.preventDefault(),C.current=!0,W(!0);const T=k.clientX,S=z,_=he=>{if(!C.current)return;const N=he.clientX-T;X(S+N)},K=()=>{C.current=!1,W(!1),document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",K)};document.addEventListener("mousemove",_),document.addEventListener("mouseup",K)},[z,X]),vt=c.useCallback(()=>{X(Ge!==null?Ge:ye.SIDEBAR_WIDTH)},[Ge,X]),Ye=c.useCallback((k,T)=>{ae(k,T),x==null||x(k,T)},[ae,x]),y=c.useCallback(k=>{const T=f.current;if(!T)return;const S=Je[ee].pixelsPerDay,{minDate:_}=Tt(e,n,60),K=Ie(k,_,S);T.scrollLeft=Math.max(0,K-50)},[ee,e,n]),u=c.useCallback(()=>{if(P==="MASTER"){const k=we.filter(T=>T.type==="CP");if(k.length>0){const T=k.reduce((_,K)=>_.startDate<K.startDate?_:K),S=new Date(T.startDate);S.setDate(S.getDate()-5),y(S)}}else if(P==="DETAIL"&&q){const k=e.filter(T=>T.parentId===q);if(k.length>0){const T=k.reduce((_,K)=>_.startDate<K.startDate?_:K),S=new Date(T.startDate);S.setDate(S.getDate()-5),y(S)}}},[P,q,e,we,y]),M=c.useCallback(k=>{P==="MASTER"&&k.type==="CP"&&Ye("DETAIL",k.id)},[P,Ye]);c.useEffect(()=>{if(P==="DETAIL"&&q){const k=setTimeout(()=>{u()},100);return()=>clearTimeout(k)}},[P,q,u]);const Y=c.useCallback(async k=>{if(l)try{const T=e.find(_=>_.id===k.taskId);if(!T||!T.task)return;const S={...T,startDate:k.newStartDate,endDate:k.newEndDate,task:{...T.task,indirectWorkDaysPre:k.newIndirectWorkDaysPre,indirectWorkDaysPost:k.newIndirectWorkDaysPost,netWorkDays:k.newNetWorkDays}};await l(S)}catch(T){console.error("Failed to update task:",T)}},[e,l]);return s.jsxs("div",{ref:E,className:`flex h-full w-full flex-col bg-gray-50 ${H||""}`,style:F,children:[s.jsxs("header",{className:"flex h-[60px] shrink-0 items-center justify-between border-b border-gray-200 bg-white px-4 shadow-sm",children:[s.jsx("div",{className:"flex items-center gap-3 shrink-0",children:P==="DETAIL"?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>Ye("MASTER"),className:"rounded bg-gray-200 px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-300 transition-colors",children:"← 상위 공정표로"}),m&&!re&&s.jsx("button",{onClick:ue,className:"flex items-center gap-1 rounded bg-blue-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-blue-600 transition-colors",title:"새 공정 추가",children:"+ Task 추가"})]}):s.jsxs(s.Fragment,{children:[m&&!Z&&s.jsx("button",{onClick:Ze,className:"flex items-center gap-1 rounded bg-blue-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-blue-600 transition-colors",title:"새 CP 추가",children:"+ CP 추가"}),p&&s.jsx("button",{onClick:bt,className:"flex items-center gap-1 rounded bg-purple-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-purple-600 transition-colors",title:"새 마일스톤 추가",children:"+ 마일스톤"}),Z&&s.jsx("span",{className:"text-xs text-gray-500 italic",children:"CP 추가 중... (Enter 저장 / Esc 취소)"})]})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:u,className:"flex items-center gap-1 rounded bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 hover:bg-gray-200 transition-colors",title:P==="MASTER"?"첫 번째 CP로 스크롤":"첫 번째 작업으로 스크롤",children:"Focusing"}),s.jsx("div",{className:"flex rounded bg-gray-100 p-1",children:(P==="MASTER"?["WEEK","MONTH"]:["DAY","WEEK"]).map(k=>s.jsx("button",{onClick:()=>te(k),className:`rounded px-3 py-1 text-xs font-medium transition-colors ${ee===k?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:Je[k].label},k))}),s.jsxs("div",{className:"text-sm text-gray-500",children:["기준일: ",me(new Date,"yyyy-MM-dd")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[I&&s.jsx("button",{onClick:I,disabled:!L||$==="saving",className:`flex items-center gap-1.5 rounded-md px-3 py-1.5 text-sm font-medium transition-colors ${L?"bg-blue-500 text-white hover:bg-blue-600 active:bg-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:$==="saving"?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"저장 중..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"저장"]})}),R&&s.jsxs("button",{onClick:R,className:"flex items-center gap-1.5 rounded-md bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-200 active:bg-gray-300",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"초기화"]})]})]}),s.jsxs("div",{className:"relative flex flex-1 overflow-hidden",children:[s.jsx("div",{className:"z-10 flex shrink-0 flex-col bg-white",style:{width:z},children:s.jsx(Wt,{ref:g,tasks:we,allTasks:e,viewMode:P,expandedIds:J,onToggle:ne,onTaskClick:M,onTaskUpdate:l,onTaskCreate:m,onTaskReorder:h,onTaskGroup:v,onTaskUngroup:w,onTaskDelete:d,onTaskMove:b,activeCPId:q,virtualRows:at,totalHeight:it,onTotalWidthChange:ot,isAddingTask:re,onCancelAddTask:Ue,isAddingCP:Z,onCancelAddCP:Le,onTaskDoubleClick:xt})}),s.jsx("div",{className:`z-20 w-1 shrink-0 cursor-col-resize transition-colors ${A?"bg-blue-500":"bg-gray-200 hover:bg-gray-300"}`,onMouseDown:_t,onDoubleClick:vt,title:"드래그하여 너비 조절 / 더블클릭으로 초기화"}),s.jsx("div",{className:"relative flex flex-1 flex-col overflow-hidden bg-white",children:s.jsx(Pt,{ref:f,tasks:we,milestones:n,viewMode:P,zoomLevel:ee,holidays:t,calendarSettings:r,onTaskUpdate:l,onBarDrag:Y,onMilestoneUpdate:D,onMilestoneDoubleClick:Ot,onTaskDoubleClick:xt,virtualRows:at,totalHeight:it})}),A&&s.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"})]}),s.jsx(hs,{milestone:De,isOpen:Fe,isNew:He,onClose:Se,onSave:pt,onDelete:wt}),s.jsx(mn,{task:et,isOpen:tt,onClose:je,onSave:gt,onDelete:d?yt:void 0})]})}const zs=50;function fe(e){if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Set)return new Set(Array.from(e).map(t=>fe(t)));if(e instanceof Map)return new Map(Array.from(e.entries()).map(([t,r])=>[fe(t),fe(r)]));if(Array.isArray(e))return e.map(t=>fe(t));const n={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=fe(e[t]));return n}function Ls(e){const[n,t]=c.useState(()=>({past:[],present:fe(e),future:[]})),r=c.useRef(!1),a=c.useCallback(d=>{t(h=>{const v=typeof d=="function"?d(h.present):d;if(!r.current)return r.current=!0,{past:[],present:fe(v),future:[]};if(JSON.stringify(h.present)===JSON.stringify(v))return h;const w=[...h.past,fe(h.present)];return w.length>zs&&w.shift(),{past:w,present:fe(v),future:[]}})},[]),i=c.useCallback(()=>{t(d=>{if(d.past.length===0)return d;const h=[...d.past],v=h.pop();return{past:h,present:v,future:[fe(d.present),...d.future]}})},[]),o=c.useCallback(()=>{t(d=>{if(d.future.length===0)return d;const h=[...d.future],v=h.shift();return{past:[...d.past,fe(d.present)],present:v,future:h}})},[]),l=c.useCallback(d=>{r.current=!1,t({past:[],present:fe(d),future:[]})},[]),m=c.useCallback(()=>{t(d=>({past:[],present:d.present,future:[]}))},[]);return{present:n.present,set:a,undo:i,redo:o,canUndo:n.past.length>0,canRedo:n.future.length>0,reset:l,clearHistory:m,historyLength:{past:n.past.length,future:n.future.length}}}G.GANTT_COLORS=ke,G.GANTT_LAYOUT=ye,G.GanttChart=As,G.GanttSidebar=Wt,G.GanttTimeline=Pt,G.TaskEditModal=mn,G.ZOOM_CONFIG=Je,G.addCalendarDays=Ct,G.addWorkingDays=fn,G.calculateDateRange=Tt,G.calculateDualCalendarDates=Zr,G.dateToX=Ie,G.getAnchorDate=es,G.getDateRangeWidth=ns,G.getPixelsPerDay=rs,G.isHoliday=Te,G.isWeekend=Jr,G.subtractWorkingDays=Ur,G.useGanttDrag=vs,G.useGanttExpansion=kn,G.useGanttSelection=ws,G.useGanttSidebar=Dn,G.useGanttStore=Pe,G.useGanttViewActions=vn,G.useGanttViewState=wn,G.useGanttVirtualization=Cn,G.useHistory=Ls,G.xToDate=ts,Object.defineProperty(G,Symbol.toStringTag,{value:"Module"})});
