(function(C,y){typeof exports=="object"&&typeof module<"u"?y(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],y):(C=typeof globalThis<"u"?globalThis:C||self,y(C.SaGanttLib={},C.React,C.ReactDOM))})(this,function(C,y,tn){"use strict";"use client";function nn(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:()=>e[t]})}}return n.default=e,Object.freeze(n)}const $e=nn(y);var Je={exports:{}},Pe={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lt;function rn(){if(lt)return Pe;lt=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(r,s,a){var o=null;if(a!==void 0&&(o=""+a),s.key!==void 0&&(o=""+s.key),"key"in s){a={};for(var l in s)l!=="key"&&(a[l]=s[l])}else a=s;return s=a.ref,{$$typeof:e,type:r,key:o,ref:s!==void 0?s:null,props:a}}return Pe.Fragment=n,Pe.jsx=t,Pe.jsxs=t,Pe}var _e={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ct;function sn(){return ct||(ct=1,process.env.NODE_ENV!=="production"&&function(){function e(u){if(u==null)return null;if(typeof u=="function")return u.$$typeof===q?null:u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case W:return"Fragment";case P:return"Profiler";case G:return"StrictMode";case U:return"Suspense";case S:return"SuspenseList";case A:return"Activity"}if(typeof u=="object")switch(typeof u.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),u.$$typeof){case w:return"Portal";case F:return u.displayName||"Context";case D:return(u._context.displayName||"Context")+".Consumer";case Z:var M=u.render;return u=u.displayName,u||(u=M.displayName||M.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case T:return M=u.displayName||null,M!==null?M:e(u.type)||"Memo";case I:M=u._payload,u=u._init;try{return e(u(M))}catch{}}return null}function n(u){return""+u}function t(u){try{n(u);var M=!1}catch{M=!0}if(M){M=console;var R=M.error,H=typeof Symbol=="function"&&Symbol.toStringTag&&u[Symbol.toStringTag]||u.constructor.name||"Object";return R.call(M,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",H),n(u)}}function r(u){if(u===W)return"<>";if(typeof u=="object"&&u!==null&&u.$$typeof===I)return"<...>";try{var M=e(u);return M?"<"+M+">":"<...>"}catch{return"<...>"}}function s(){var u=j.A;return u===null?null:u.getOwner()}function a(){return Error("react-stack-top-frame")}function o(u){if(L.call(u,"key")){var M=Object.getOwnPropertyDescriptor(u,"key").get;if(M&&M.isReactWarning)return!1}return u.key!==void 0}function l(u,M){function R(){ee||(ee=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",M))}R.isReactWarning=!0,Object.defineProperty(u,"key",{get:R,configurable:!0})}function f(){var u=e(this.type);return ae[u]||(ae[u]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),u=this.props.ref,u!==void 0?u:null}function m(u,M,R,H,te,ce){var Y=R.ref;return u={$$typeof:x,type:u,key:M,props:R,_owner:H},(Y!==void 0?Y:null)!==null?Object.defineProperty(u,"ref",{enumerable:!1,get:f}):Object.defineProperty(u,"ref",{enumerable:!1,value:null}),u._store={},Object.defineProperty(u._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(u,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(u,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:te}),Object.defineProperty(u,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ce}),Object.freeze&&(Object.freeze(u.props),Object.freeze(u)),u}function g(u,M,R,H,te,ce){var Y=M.children;if(Y!==void 0)if(H)if(re(Y)){for(H=0;H<Y.length;H++)v(Y[H]);Object.freeze&&Object.freeze(Y)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else v(Y);if(L.call(M,"key")){Y=e(u);var _=Object.keys(M).filter(function(fe){return fe!=="key"});H=0<_.length?"{key: someKey, "+_.join(": ..., ")+": ...}":"{key: someKey}",Se[Y+H]||(_=0<_.length?"{"+_.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,H,Y,_,Y),Se[Y+H]=!0)}if(Y=null,R!==void 0&&(t(R),Y=""+R),o(M)&&(t(M.key),Y=""+M.key),"key"in M){R={};for(var Me in M)Me!=="key"&&(R[Me]=M[Me])}else R=M;return Y&&l(R,typeof u=="function"?u.displayName||u.name||"Unknown":u),m(u,Y,R,s(),te,ce)}function v(u){b(u)?u._store&&(u._store.validated=1):typeof u=="object"&&u!==null&&u.$$typeof===I&&(u._payload.status==="fulfilled"?b(u._payload.value)&&u._payload.value._store&&(u._payload.value._store.validated=1):u._store&&(u._store.validated=1))}function b(u){return typeof u=="object"&&u!==null&&u.$$typeof===x}var d=y,x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),G=Symbol.for("react.strict_mode"),P=Symbol.for("react.profiler"),D=Symbol.for("react.consumer"),F=Symbol.for("react.context"),Z=Symbol.for("react.forward_ref"),U=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),q=Symbol.for("react.client.reference"),j=d.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L=Object.prototype.hasOwnProperty,re=Array.isArray,le=console.createTask?console.createTask:function(){return null};d={react_stack_bottom_frame:function(u){return u()}};var ee,ae={},De=d.react_stack_bottom_frame.bind(d,a)(),Ee=le(r(a)),Se={};_e.Fragment=W,_e.jsx=function(u,M,R){var H=1e4>j.recentlyCreatedOwnerStacks++;return g(u,M,R,!1,H?Error("react-stack-top-frame"):De,H?le(r(u)):Ee)},_e.jsxs=function(u,M,R){var H=1e4>j.recentlyCreatedOwnerStacks++;return g(u,M,R,!0,H?Error("react-stack-top-frame"):De,H?le(r(u)):Ee)}}()),_e}process.env.NODE_ENV==="production"?Je.exports=rn():Je.exports=sn();var i=Je.exports;const dt=6048e5,an=864e5,ut=Symbol.for("constructDateFrom");function me(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&ut in e?e[ut](n):e instanceof Date?new e.constructor(n):new Date(n)}function Q(e,n){return me(n||e,e)}function V(e,n,t){const r=Q(e,t==null?void 0:t.in);return isNaN(n)?me(e,NaN):(n&&r.setDate(r.getDate()+n),r)}function ht(e,n){return Q(e,n==null?void 0:n.in).getDay()===6}function ft(e,n){return Q(e,n==null?void 0:n.in).getDay()===0}let on={};function Ce(){return on}function we(e,n){var l,f,m,g;const t=Ce(),r=(n==null?void 0:n.weekStartsOn)??((f=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:f.weekStartsOn)??t.weekStartsOn??((g=(m=t.locale)==null?void 0:m.options)==null?void 0:g.weekStartsOn)??0,s=Q(e,n==null?void 0:n.in),a=s.getDay(),o=(a<r?7:0)+a-r;return s.setDate(s.getDate()-o),s.setHours(0,0,0,0),s}function Ge(e,n){return we(e,{...n,weekStartsOn:1})}function mt(e,n){const t=Q(e,n==null?void 0:n.in),r=t.getFullYear(),s=me(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Ge(s),o=me(t,0);o.setFullYear(r,0,4),o.setHours(0,0,0,0);const l=Ge(o);return t.getTime()>=a.getTime()?r+1:t.getTime()>=l.getTime()?r:r-1}function gt(e){const n=Q(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function Ie(e,...n){const t=me.bind(null,e||n.find(r=>typeof r=="object"));return n.map(t)}function Ae(e,n){const t=Q(e,n==null?void 0:n.in);return t.setHours(0,0,0,0),t}function yt(e,n,t){const[r,s]=Ie(t==null?void 0:t.in,e,n),a=Ae(r),o=Ae(s),l=+a-gt(a),f=+o-gt(o);return Math.round((l-f)/an)}function ln(e,n){const t=mt(e,n),r=me(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ge(r)}function cn(e,n,t){const[r,s]=Ie(t==null?void 0:t.in,e,n);return+Ae(r)==+Ae(s)}function dn(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function un(e){return!(!dn(e)&&typeof e!="number"||isNaN(+Q(e)))}function Ze(e,n,t){const[r,s]=Ie(t==null?void 0:t.in,e,n),a=bt(r,s),o=Math.abs(yt(r,s));r.setDate(r.getDate()-a*o);const l=+(bt(r,s)===-a),f=a*(o-l);return f===0?0:f}function bt(e,n){const t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function hn(e,n){const t=Q(e,n==null?void 0:n.in);return t.setDate(1),t.setHours(0,0,0,0),t}function fn(e,n){const t=Q(e,n==null?void 0:n.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const mn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},gn=(e,n,t)=>{let r;const s=mn[e];return typeof s=="string"?r=s:n===1?r=s.one:r=s.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function et(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const yn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},xn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wn={date:et({formats:yn,defaultWidth:"full"}),time:et({formats:bn,defaultWidth:"full"}),dateTime:et({formats:xn,defaultWidth:"full"})},pn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},vn=(e,n,t,r)=>pn[e];function ze(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=t!=null&&t.width?String(t.width):o;s=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=t!=null&&t.width?String(t.width):e.defaultWidth;s=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(n):n;return s[a]}}const kn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Dn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},En={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Sn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Mn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Wn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Tn={ordinalNumber:(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:ze({values:kn,defaultWidth:"wide"}),quarter:ze({values:Dn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ze({values:En,defaultWidth:"wide"}),day:ze({values:Sn,defaultWidth:"wide"}),dayPeriod:ze({values:Mn,defaultWidth:"wide",formattingValues:Wn,defaultFormattingWidth:"wide"})};function Le(e){return(n,t={})=>{const r=t.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=n.match(s);if(!a)return null;const o=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],f=Array.isArray(l)?On(l,v=>v.test(o)):jn(l,v=>v.test(o));let m;m=e.valueCallback?e.valueCallback(f):f,m=t.valueCallback?t.valueCallback(m):m;const g=n.slice(o.length);return{value:m,rest:g}}}function jn(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function On(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function Nn(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const s=r[0],a=n.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=t.valueCallback?t.valueCallback(o):o;const l=n.slice(s.length);return{value:o,rest:l}}}const Pn=/^(\d+)(th|st|nd|rd)?/i,_n=/\d+/i,Cn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},In={any:[/^b/i,/^(a|c)/i]},An={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},zn={any:[/1/i,/2/i,/3/i,/4/i]},Ln={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Fn={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Rn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Hn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Yn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$n={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Gn={ordinalNumber:Nn({matchPattern:Pn,parsePattern:_n,valueCallback:e=>parseInt(e,10)}),era:Le({matchPatterns:Cn,defaultMatchWidth:"wide",parsePatterns:In,defaultParseWidth:"any"}),quarter:Le({matchPatterns:An,defaultMatchWidth:"wide",parsePatterns:zn,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Le({matchPatterns:Ln,defaultMatchWidth:"wide",parsePatterns:Fn,defaultParseWidth:"any"}),day:Le({matchPatterns:Rn,defaultMatchWidth:"wide",parsePatterns:Hn,defaultParseWidth:"any"}),dayPeriod:Le({matchPatterns:Yn,defaultMatchWidth:"any",parsePatterns:$n,defaultParseWidth:"any"})},Vn={code:"en-US",formatDistance:gn,formatLong:wn,formatRelative:vn,localize:Tn,match:Gn,options:{weekStartsOn:0,firstWeekContainsDate:1}};function qn(e,n){const t=Q(e,n==null?void 0:n.in);return yt(t,fn(t))+1}function Xn(e,n){const t=Q(e,n==null?void 0:n.in),r=+Ge(t)-+ln(t);return Math.round(r/dt)+1}function xt(e,n){var g,v,b,d;const t=Q(e,n==null?void 0:n.in),r=t.getFullYear(),s=Ce(),a=(n==null?void 0:n.firstWeekContainsDate)??((v=(g=n==null?void 0:n.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??s.firstWeekContainsDate??((d=(b=s.locale)==null?void 0:b.options)==null?void 0:d.firstWeekContainsDate)??1,o=me((n==null?void 0:n.in)||e,0);o.setFullYear(r+1,0,a),o.setHours(0,0,0,0);const l=we(o,n),f=me((n==null?void 0:n.in)||e,0);f.setFullYear(r,0,a),f.setHours(0,0,0,0);const m=we(f,n);return+t>=+l?r+1:+t>=+m?r:r-1}function Bn(e,n){var l,f,m,g;const t=Ce(),r=(n==null?void 0:n.firstWeekContainsDate)??((f=(l=n==null?void 0:n.locale)==null?void 0:l.options)==null?void 0:f.firstWeekContainsDate)??t.firstWeekContainsDate??((g=(m=t.locale)==null?void 0:m.options)==null?void 0:g.firstWeekContainsDate)??1,s=xt(e,n),a=me((n==null?void 0:n.in)||e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),we(a,n)}function Un(e,n){const t=Q(e,n==null?void 0:n.in),r=+we(t,n)-+Bn(t,n);return Math.round(r/dt)+1}function z(e,n){const t=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return t+r}const ye={y(e,n){const t=e.getFullYear(),r=t>0?t:1-t;return z(n==="yy"?r%100:r,n.length)},M(e,n){const t=e.getMonth();return n==="M"?String(t+1):z(t+1,2)},d(e,n){return z(e.getDate(),n.length)},a(e,n){const t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return z(e.getHours()%12||12,n.length)},H(e,n){return z(e.getHours(),n.length)},m(e,n){return z(e.getMinutes(),n.length)},s(e,n){return z(e.getSeconds(),n.length)},S(e,n){const t=n.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return z(s,n.length)}},Te={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wt={G:function(e,n,t){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return ye.y(e,n)},Y:function(e,n,t,r){const s=xt(e,r),a=s>0?s:1-s;if(n==="YY"){const o=a%100;return z(o,2)}return n==="Yo"?t.ordinalNumber(a,{unit:"year"}):z(a,n.length)},R:function(e,n){const t=mt(e);return z(t,n.length)},u:function(e,n){const t=e.getFullYear();return z(t,n.length)},Q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return z(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return z(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){const r=e.getMonth();switch(n){case"M":case"MM":return ye.M(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return z(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){const s=Un(e,r);return n==="wo"?t.ordinalNumber(s,{unit:"week"}):z(s,n.length)},I:function(e,n,t){const r=Xn(e);return n==="Io"?t.ordinalNumber(r,{unit:"week"}):z(r,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):ye.d(e,n)},D:function(e,n,t){const r=qn(e);return n==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):z(r,n.length)},E:function(e,n,t){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return z(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return z(a,n.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,t){const r=e.getDay(),s=r===0?7:r;switch(n){case"i":return String(s);case"ii":return z(s,n.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){const s=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,t){const r=e.getHours();let s;switch(r===12?s=Te.noon:r===0?s=Te.midnight:s=r/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,t){const r=e.getHours();let s;switch(r>=17?s=Te.evening:r>=12?s=Te.afternoon:r>=4?s=Te.morning:s=Te.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return ye.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):ye.H(e,n)},K:function(e,n,t){const r=e.getHours()%12;return n==="Ko"?t.ordinalNumber(r,{unit:"hour"}):z(r,n.length)},k:function(e,n,t){let r=e.getHours();return r===0&&(r=24),n==="ko"?t.ordinalNumber(r,{unit:"hour"}):z(r,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):ye.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):ye.s(e,n)},S:function(e,n){return ye.S(e,n)},X:function(e,n,t){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return vt(r);case"XXXX":case"XX":return pe(r);case"XXXXX":case"XXX":default:return pe(r,":")}},x:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"x":return vt(r);case"xxxx":case"xx":return pe(r);case"xxxxx":case"xxx":default:return pe(r,":")}},O:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+pt(r,":");case"OOOO":default:return"GMT"+pe(r,":")}},z:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+pt(r,":");case"zzzz":default:return"GMT"+pe(r,":")}},t:function(e,n,t){const r=Math.trunc(+e/1e3);return z(r,n.length)},T:function(e,n,t){return z(+e,n.length)}};function pt(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?t+String(s):t+String(s)+n+z(a,2)}function vt(e,n){return e%60===0?(e>0?"-":"+")+z(Math.abs(e)/60,2):pe(e,n)}function pe(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),s=z(Math.trunc(r/60),2),a=z(r%60,2);return t+s+n+a}const kt=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},Dt=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},Kn={p:Dt,P:(e,n)=>{const t=e.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return kt(e,n);let a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",kt(r,n)).replace("{{time}}",Dt(s,n))}},Qn=/^D+$/,Jn=/^Y+$/,Zn=["D","DD","YY","YYYY"];function er(e){return Qn.test(e)}function tr(e){return Jn.test(e)}function nr(e,n,t){const r=rr(e,n,t);if(console.warn(r),Zn.includes(e))throw new RangeError(r)}function rr(e,n,t){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const sr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ar=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ir=/^'([^]*?)'?$/,or=/''/g,lr=/[a-zA-Z]/;function de(e,n,t){var g,v,b,d;const r=Ce(),s=r.locale??Vn,a=r.firstWeekContainsDate??((v=(g=r.locale)==null?void 0:g.options)==null?void 0:v.firstWeekContainsDate)??1,o=r.weekStartsOn??((d=(b=r.locale)==null?void 0:b.options)==null?void 0:d.weekStartsOn)??0,l=Q(e,t==null?void 0:t.in);if(!un(l))throw new RangeError("Invalid time value");let f=n.match(ar).map(x=>{const w=x[0];if(w==="p"||w==="P"){const W=Kn[w];return W(x,s.formatLong)}return x}).join("").match(sr).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const w=x[0];if(w==="'")return{isToken:!1,value:cr(x)};if(wt[w])return{isToken:!0,value:x};if(w.match(lr))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(f=s.localize.preprocessor(l,f));const m={firstWeekContainsDate:a,weekStartsOn:o,locale:s};return f.map(x=>{if(!x.isToken)return x.value;const w=x.value;(tr(w)||er(w))&&nr(w,n,String(e));const W=wt[w[0]];return W(l,w,s.localize,m)}).join("")}function cr(e){const n=e.match(ir);return n?n[1].replace(or,"'"):e}function dr(e,n){return Q(e,n==null?void 0:n.in).getDate()}function Ve(e,n){return Q(e,n==null?void 0:n.in).getDay()}function Et(e,n){var f,m,g,v;const t=Ce(),r=(n==null?void 0:n.weekStartsOn)??((m=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((v=(g=t.locale)==null?void 0:g.options)==null?void 0:v.weekStartsOn)??0,s=dr(Q(e,n==null?void 0:n.in));if(isNaN(s))return NaN;const a=Ve(hn(e,n));let o=r-a;o<=0&&(o+=7);const l=s-o;return Math.ceil(l/7)+1}function tt(e,n){return Q(e,n==null?void 0:n.in).getFullYear()}function ur(e,n,t){const[r,s]=Ie(t==null?void 0:t.in,e,n);return+we(r,t)==+we(s,t)}function hr(e,n,t){const[r,s]=Ie(t==null?void 0:t.in,e,n);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mr=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,r)=>r?r.toUpperCase():t.toLowerCase()),St=e=>{const n=mr(e);return n.charAt(0).toUpperCase()+n.slice(1)},Mt=(...e)=>e.filter((n,t,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===t).join(" ").trim(),gr=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var yr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=y.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:o,...l},f)=>y.createElement("svg",{ref:f,...yr,width:n,height:n,stroke:e,strokeWidth:r?Number(t)*24/Number(n):t,className:Mt("lucide",s),...!a&&!gr(l)&&{"aria-hidden":"true"},...l},[...o.map(([m,g])=>y.createElement(m,g)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=(e,n)=>{const t=y.forwardRef(({className:r,...s},a)=>y.createElement(br,{ref:a,iconNode:n,className:Mt(`lucide-${fr(St(e))}`,`lucide-${e}`,r),...s}));return t.displayName=St(e),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=Fe("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wr=Fe("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=Fe("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wt=Fe("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vr=Fe("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),ue={vermilion:"#E34234",teal:"#008080",red:"#FF5252",blue:"#448AFF",milestone:"#4B5563",dependency:"#9CA3AF",grid:"#E5E7EB",weekend:"#f3f4f6",holiday:"#fef2f2"},be={ROW_HEIGHT:40,HEADER_HEIGHT:80,MILESTONE_LANE_HEIGHT:40,BAR_HEIGHT:24,SIDEBAR_WIDTH:400,SIDEBAR_MIN_WIDTH:250,SIDEBAR_MAX_WIDTH:800},Re={DAY:{pixelsPerDay:30,label:"일"},WEEK:{pixelsPerDay:10,label:"주"},MONTH:{pixelsPerDay:2,label:"월"}},{ROW_HEIGHT:xe,HEADER_HEIGHT:Tt,MILESTONE_LANE_HEIGHT:jt}=be,Ot=[{id:"name",label:"CP명",width:180,minWidth:100},{id:"total",label:"총 공기",width:80,minWidth:50},{id:"workDays",label:"작업일수",width:80,minWidth:50},{id:"nonWorkDays",label:"비작업일수",width:80,minWidth:50}],Nt=[{id:"name",label:"단위공정명",width:150,minWidth:80},{id:"indirectPre",label:"선간접",width:60,minWidth:45},{id:"netWork",label:"순작업",width:60,minWidth:45},{id:"indirectPost",label:"후간접",width:60,minWidth:45},{id:"startDate",label:"시작일",width:90,minWidth:70},{id:"endDate",label:"종료일",width:90,minWidth:70}],qe={name:"",indirectWorkDaysPre:0,netWorkDays:1,indirectWorkDaysPost:0},nt=y.forwardRef(({tasks:e,allTasks:n,viewMode:t,expandedIds:r,onToggle:s,onTaskClick:a,onTaskUpdate:o,onTaskCreate:l,onTaskReorder:f,activeCPId:m,virtualRows:g,totalHeight:v,onTotalWidthChange:b,onTaskGroup:d,onTaskUngroup:x,isAddingTask:w=!1,onCancelAddTask:W},G)=>{const P=g&&g.length>0,[D,F]=y.useState(qe),Z=y.useRef(null),[U,S]=y.useState(null),[T,I]=y.useState(null),[A,q]=y.useState(null),[j,L]=y.useState(new Set),[re,le]=y.useState(null),[ee,ae]=y.useState(null),[De,Ee]=y.useState(Ot.map(h=>h.width)),[Se,u]=y.useState(Nt.map(h=>h.width)),[M,R]=y.useState(null),H=y.useRef(!1),te=t==="MASTER"?Ot:Nt,ce=t==="MASTER"?De:Se,Y=t==="MASTER"?Ee:u,_=y.useMemo(()=>te.map((h,c)=>({...h,width:ce[c]??h.width})),[te,ce]),Me=f?24:0,fe=_.reduce((h,c)=>h+c.width,0)+Me;y.useEffect(()=>{b&&b(fe)},[fe,b]);const it=y.useCallback((h,c)=>{if(h.detail>=2)return;h.preventDefault(),h.stopPropagation(),H.current=!0,R(c);const p=h.clientX,$=ce[c],B=te[c].minWidth,E=X=>{if(!H.current)return;const ge=X.clientX-p,K=Math.max(B,$+ge);Y(en=>{const Qe=[...en];return Qe[c]=K,Qe})},N=()=>{H.current=!1,R(null),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",E),document.addEventListener("mouseup",N)},[ce,te,Y]),We=y.useCallback((h,c=12,p="normal")=>{const B=document.createElement("canvas").getContext("2d");return B?(B.font=`${p} ${c}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,B.measureText(h).width):0},[]),Ne=y.useCallback(h=>{const c=te[h].minWidth,p=h===0,$=p?48:20,B=te[h].label;let E=We(B,12,"500")+16;return e.forEach(N=>{let X="",ge=0;if(t==="MASTER"){const ot=N.type==="GROUP";switch(p&&N.parentId&&(ge=20),h){case 0:X=N.name;break;case 1:X=ot?"-":N.cp?`${N.cp.workDaysTotal+N.cp.nonWorkDaysTotal}일`:"-";break;case 2:X=ot?"-":N.cp?`${N.cp.workDaysTotal}일`:"-";break;case 3:X=ot?"-":N.cp?`${N.cp.nonWorkDaysTotal}일`:"-";break}}else switch(h){case 0:X=N.name;break;case 1:X=N.task?String(N.task.indirectWorkDaysPre):"-";break;case 2:X=N.task?String(N.task.netWorkDays):"-";break;case 3:X=N.task?String(N.task.indirectWorkDaysPost):"-";break;case 4:X=de(N.startDate,"yyyy-MM-dd");break;case 5:X=de(N.endDate,"yyyy-MM-dd");break}const Qe=We(X,p?14:12,p?"500":"normal")+$+ge;E=Math.max(E,Qe)}),Math.max(c,Math.ceil(E))},[e,t,te,We]),Be=y.useCallback((h,c)=>{h.preventDefault(),h.stopPropagation(),H.current=!1,R(null);const p=Ne(c);Y($=>{const B=[...$];return B[c]=p,B})},[Ne,Y]),He=y.useCallback((h,c,p)=>{if(!h.task||!o)return;const $={...h,task:{...h.task,[c]:p}};o($)},[o]);y.useEffect(()=>{w&&(F(qe),setTimeout(()=>{var h;(h=Z.current)==null||h.focus()},0))},[w]);const Ye=y.useCallback(()=>{F(qe),W==null||W()},[W]),k=y.useCallback(()=>{if(!D.name.trim()||!l||!m)return;const h=e[e.length-1],c=h?V(h.endDate,1):new Date,p=D.indirectWorkDaysPre+D.netWorkDays+D.indirectWorkDaysPost,$=V(c,Math.max(p-1,0)),B={id:`task-${Date.now()}`,parentId:m,wbsLevel:2,type:"TASK",name:D.name.trim(),startDate:c,endDate:$,task:{netWorkDays:D.netWorkDays,indirectWorkDaysPre:D.indirectWorkDaysPre,indirectWorkDaysPost:D.indirectWorkDaysPost},dependencies:[]};l(B),F(qe),W==null||W()},[D,l,m,e,W]),O=y.useCallback(h=>{h.key==="Enter"?(h.preventDefault(),k()):h.key==="Escape"&&(h.preventDefault(),Ye())},[k,Ye]),J=y.useCallback((h,c)=>{h.dataTransfer.effectAllowed="move",h.dataTransfer.setData("text/plain",c),S(c);const p=document.createElement("div");p.style.opacity="0",document.body.appendChild(p),h.dataTransfer.setDragImage(p,0,0),setTimeout(()=>document.body.removeChild(p),0)},[]),ne=y.useCallback((h,c)=>{if(h.preventDefault(),h.dataTransfer.dropEffect="move",c===U)return;const p=h.currentTarget.getBoundingClientRect(),$=p.top+p.height/2,B=h.clientY<$?"before":"after";I(c),q(B)},[U]),ie=y.useCallback(()=>{I(null),q(null)},[]),Ue=y.useCallback((h,c)=>{if(h.preventDefault(),!U||!f||U===c){S(null),I(null),q(null);return}const p=e.findIndex(B=>B.id===c),$=A==="after"?p+1:p;f(U,$),S(null),I(null),q(null)},[U,A,f,e]),Ke=y.useCallback(()=>{S(null),I(null),q(null)},[]),Ut=y.useCallback((h,c,p)=>{if(U)return;const $=h.ctrlKey||h.metaKey,B=h.shiftKey;if($)L(E=>{const N=new Set(E);return N.has(c.id)?N.delete(c.id):N.add(c.id),N}),le(p);else if(B&&re!==null){const E=Math.min(re,p),N=Math.max(re,p);L(X=>{const ge=new Set(X);for(let K=E;K<=N;K++)e[K]&&ge.add(e[K].id);return ge})}else L(new Set([c.id])),le(p)},[U,re,e]),Kt=y.useCallback((h,c)=>{h.preventDefault(),j.has(c.id)||L(new Set([c.id])),ae({x:h.clientX,y:h.clientY,taskId:c.id})},[j]);y.useEffect(()=>{const h=()=>{ae(null)};if(ee)return document.addEventListener("click",h),()=>document.removeEventListener("click",h)},[ee]);const Qt=y.useCallback(()=>{j.size<2||!d||(d(Array.from(j)),L(new Set),ae(null))},[j,d]),Jt=y.useCallback(()=>{if(j.size!==1||!x)return;const h=Array.from(j)[0],c=e.find(p=>p.id===h);(c==null?void 0:c.type)==="GROUP"&&(x(h),L(new Set),ae(null))},[j,e,x]);y.useEffect(()=>{const h=c=>{c.key==="Escape"&&(L(new Set),ae(null))};return document.addEventListener("keydown",h),()=>document.removeEventListener("keydown",h)},[]);const Zt=()=>i.jsx("div",{className:"flex h-[32px] border-t border-gray-200",children:_.map((h,c)=>i.jsxs("div",{className:"relative flex shrink-0 items-center justify-center text-xs font-medium text-gray-600",style:{width:h.width},children:[h.label,c<_.length-1&&i.jsx("div",{className:`absolute right-0 top-0 z-10 h-full w-[5px] cursor-col-resize transition-colors ${M===c?"bg-blue-500":"hover:bg-blue-300"}`,style:{transform:"translateX(50%)"},onMouseDown:p=>it(p,c),onDoubleClick:p=>Be(p,c),title:"드래그하여 컬럼 너비 조절 / 더블클릭으로 내용에 맞게 자동 조절"}),c<_.length-1&&i.jsx("div",{className:"absolute right-0 top-0 h-full w-px bg-gray-200"})]},h.id))});return t==="MASTER"?i.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[i.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:Tt},children:[i.jsx("div",{className:"flex flex-1 items-center px-4 font-bold text-gray-700",children:"공구 공정표 (Level 1)"}),Zt()]}),M!==null&&i.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),i.jsxs("div",{ref:G,className:"relative flex-1 overflow-auto",children:[i.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:jt,minWidth:fe},children:_.map((h,c)=>i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:h.width},children:c===0&&"Milestone"},h.id))}),i.jsx("div",{style:{minWidth:fe,height:P?v:void 0,position:"relative"},children:(P?g:e.map((h,c)=>({index:c,start:c*xe,size:xe,key:c}))).map(h=>{const c=e[h.index];if(!c)return null;const p=c.type==="GROUP",$=p&&n.some(K=>K.parentId===c.id),B=r.has(c.id),E=c.parentId?20:0,N=U===c.id,X=T===c.id,ge=j.has(c.id);return i.jsxs("div",{draggable:!!f,onDragStart:K=>J(K,c.id),onDragOver:K=>ne(K,c.id),onDragLeave:ie,onDrop:K=>Ue(K,c.id),onDragEnd:Ke,onClick:K=>Ut(K,c,h.index),onContextMenu:K=>Kt(K,c),className:`box-border flex items-center border-b transition-all duration-150 ${N?"opacity-50 bg-blue-50":X?A==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":"border-b-2 border-b-blue-500":ge?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":p?"bg-gray-50 border-gray-100 hover:bg-gray-100":"border-gray-100 cursor-pointer hover:bg-blue-50 hover:shadow-[inset_0_0_0_1px_rgba(59,130,246,0.3)]"}`,style:{height:xe,...P?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${h.start}px)`}:{}},onDoubleClick:()=>!p&&a(c),title:p?void 0:"더블클릭하여 상세 공정표 보기",children:[f&&i.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:i.jsx(Wt,{size:14})}),i.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:f?_[0].width-24:_[0].width,paddingLeft:E+8},children:[$?i.jsx("button",{onClick:K=>{K.stopPropagation(),s(c.id)},className:"mr-1 shrink-0 rounded p-1 text-gray-500 hover:bg-gray-200",children:B?i.jsx(wr,{size:14}):i.jsx(pr,{size:14})}):i.jsx("div",{className:"w-6 shrink-0"}),i.jsx("span",{className:`truncate text-sm ${p?"font-bold text-gray-700":"font-medium text-gray-800"}`,children:c.name})]}),i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:_[1].width},children:p?"-":c.cp?`${c.cp.workDaysTotal+c.cp.nonWorkDaysTotal}일`:"-"}),i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-vermilion",style:{width:_[2].width},children:p?"-":c.cp?`${c.cp.workDaysTotal}일`:"-"}),i.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-teal",style:{width:_[3].width},children:p?"-":c.cp?`${c.cp.nonWorkDaysTotal}일`:"-"})]},h.key)})})]}),ee&&i.jsxs("div",{className:"fixed z-[100] min-w-[160px] rounded-lg border border-gray-200 bg-white py-1 shadow-lg",style:{left:ee.x,top:ee.y},onClick:h=>h.stopPropagation(),children:[j.size>=2&&d&&i.jsxs("button",{onClick:Qt,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"그룹화 (",j.size,"개 선택됨)"]}),j.size===1&&x&&(()=>{const h=Array.from(j)[0],c=e.find(p=>p.id===h);return(c==null?void 0:c.type)==="GROUP"})()&&i.jsxs("button",{onClick:Jt,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"그룹 해제"]}),i.jsxs("button",{onClick:()=>{L(new Set),ae(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-500 hover:bg-gray-100",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"선택 해제"]})]})]}):i.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[i.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:Tt},children:[i.jsx("div",{className:"flex flex-1 items-center px-4",children:i.jsx("span",{className:"font-bold text-gray-700",children:"주공정표 (Level 2)"})}),Zt()]}),M!==null&&i.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),i.jsxs("div",{ref:G,className:"relative flex-1 overflow-auto",children:[i.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:jt,minWidth:fe},children:_.map((h,c)=>i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:h.width},children:c===0&&"Milestone"},h.id))}),i.jsxs("div",{style:{minWidth:fe,height:P?v:void 0,position:"relative"},children:[(P?g:e.map((h,c)=>({index:c,start:c*xe,size:xe,key:c}))).map(h=>{const c=e[h.index];if(!c)return null;const p=U===c.id,$=T===c.id,B=j.has(c.id);return i.jsxs("div",{draggable:!!f,onDragStart:E=>J(E,c.id),onDragOver:E=>ne(E,c.id),onDragLeave:ie,onDrop:E=>Ue(E,c.id),onDragEnd:Ke,onClick:E=>Ut(E,c,h.index),onContextMenu:E=>Kt(E,c),className:`box-border flex items-center border-b transition-colors ${p?"opacity-50 bg-blue-50":$?A==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":"border-b-2 border-b-blue-500":B?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":"border-gray-100 hover:bg-gray-50"}`,style:{height:xe,...P?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${h.start}px)`}:{}},children:[f&&i.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:i.jsx(Wt,{size:14})}),i.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:f?_[0].width-24:_[0].width},children:i.jsx("span",{className:"truncate text-sm text-gray-700",children:c.name})}),i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:_[1].width},children:c.task?i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:c.task.indirectWorkDaysPre,onChange:E=>{const N=E.target.value.replace(/[^0-9]/g,""),X=parseInt(N)||0;He(c,"indirectWorkDaysPre",X)},onKeyDown:E=>{(E.key==="-"||E.key==="e"||E.key==="+"||E.key===".")&&E.preventDefault()},title:"선 간접작업일 (바 드래그로도 조절 가능)"}):i.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:_[2].width},children:c.task?i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-red-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-red-500 focus:outline-none focus:ring-1 focus:ring-red-500",value:c.task.netWorkDays,onChange:E=>{const N=E.target.value.replace(/[^0-9]/g,""),X=parseInt(N)||0;He(c,"netWorkDays",X)},onKeyDown:E=>{(E.key==="-"||E.key==="e"||E.key==="+"||E.key===".")&&E.preventDefault()},title:"순작업일"}):i.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:_[3].width},children:c.task?i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:c.task.indirectWorkDaysPost,onChange:E=>{const N=E.target.value.replace(/[^0-9]/g,""),X=parseInt(N)||0;He(c,"indirectWorkDaysPost",X)},onKeyDown:E=>{(E.key==="-"||E.key==="e"||E.key==="+"||E.key===".")&&E.preventDefault()},title:"후 간접작업일 (바 드래그로도 조절 가능)"}):i.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:_[4].width},children:de(c.startDate,"yyyy-MM-dd")}),i.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-gray-500",style:{width:_[5].width},children:de(c.endDate,"yyyy-MM-dd")})]},h.key)}),w&&i.jsxs("div",{className:"box-border flex items-center border-b-2 border-blue-300 bg-blue-50 transition-colors",style:{height:xe,...P?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.length*xe}px)`}:{}},children:[i.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-blue-200 px-2",style:{width:_[0].width},children:i.jsx("input",{ref:Z,type:"text",placeholder:"공정명...",className:"w-full rounded border border-blue-300 bg-white px-2 py-1 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:D.name,onChange:h=>F(c=>({...c,name:h.target.value})),onKeyDown:O})}),i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:_[1].width},children:i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:D.indirectWorkDaysPre,onChange:h=>{const c=h.target.value.replace(/[^0-9]/g,""),p=parseInt(c)||0;F($=>({...$,indirectWorkDaysPre:p}))},onKeyDown:O,title:"선 간접작업일"})}),i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:_[2].width},children:i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:D.netWorkDays,onChange:h=>{const c=h.target.value.replace(/[^0-9]/g,""),p=parseInt(c)||0;F($=>({...$,netWorkDays:p}))},onKeyDown:O,title:"순작업일"})}),i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:_[3].width},children:i.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:D.indirectWorkDaysPost,onChange:h=>{const c=h.target.value.replace(/[^0-9]/g,""),p=parseInt(c)||0;F($=>({...$,indirectWorkDaysPost:p}))},onKeyDown:O,title:"후 간접작업일"})}),i.jsxs("div",{className:"flex shrink-0 items-center justify-center gap-1 px-2",style:{width:_[4].width+_[5].width},children:[i.jsx("button",{onClick:k,disabled:!D.name.trim(),className:"flex items-center justify-center rounded bg-blue-500 p-1.5 text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",title:"저장 (Enter)",children:i.jsx(xr,{size:14})}),i.jsx("button",{onClick:Ye,className:"flex items-center justify-center rounded bg-gray-400 p-1.5 text-white hover:bg-gray-500 transition-colors",title:"취소 (Esc)",children:i.jsx(vr,{size:14})})]})]})]})]}),ee&&i.jsxs("div",{className:"fixed z-[100] min-w-[160px] rounded-lg border border-gray-200 bg-white py-1 shadow-lg",style:{left:ee.x,top:ee.y},onClick:h=>h.stopPropagation(),children:[j.size>=2&&d&&i.jsxs("button",{onClick:Qt,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"그룹화 (",j.size,"개 선택됨)"]}),j.size===1&&x&&(()=>{const h=Array.from(j)[0],c=e.find(p=>p.id===h);return(c==null?void 0:c.type)==="GROUP"})()&&i.jsxs("button",{onClick:Jt,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"그룹 해제"]}),i.jsxs("button",{onClick:()=>{L(new Set),ae(null)},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-500 hover:bg-gray-100",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"선택 해제"]})]})]})});nt.displayName="GanttSidebar";const ve=(e,n=[],t)=>!!(!t.workOnSaturdays&&ht(e)||!t.workOnSundays&&ft(e)||!t.workOnHolidays&&n.some(r=>cn(r,e))),kr=e=>ht(e)||ft(e),Pt=(e,n,t=[],r)=>{let s=new Date(e),a=0;if(n<=0)return s;for(;ve(s,t,r);)s=V(s,1);for(;a<n;)ve(s,t,r)||a++,a<n&&(s=V(s,1));return s},Dr=(e,n,t=[],r)=>{let s=new Date(e),a=0;if(n<=0)return s;for(;a<n;)s=V(s,-1),ve(s,t,r)||a++;return s},rt=(e,n)=>n<=0?e:V(e,n-1),Er=(e,n=[],t)=>{if(!e.task)return{startDate:e.startDate,endDate:e.endDate,netWorkStartDate:e.startDate,netWorkEndDate:e.endDate};const{netWorkDays:r,indirectWorkDaysPre:s,indirectWorkDaysPost:a}=e.task,o=Ae(new Date(e.startDate));let l=o,f,m;s>0&&(f=l,m=rt(l,s),l=V(m,1));let g=l,v=g;if(r>0){for(;ve(g,n,t);)g=V(g,1);v=Pt(g,r,n,t),l=V(v,1)}else s===0&&(g=o,v=o);let b,d;return a>0&&(b=l,d=rt(l,a)),{startDate:f||g,endDate:d||v,netWorkStartDate:g,netWorkEndDate:v,indirectPreStartDate:f,indirectPreEndDate:m,indirectPostStartDate:b,indirectPostEndDate:d}},Sr=(e,n,t)=>{switch(n){case"START":return t.startDate;case"NET_WORK_START":return t.netWorkStartDate;case"NET_WORK_END":return t.netWorkEndDate;case"END":return t.endDate;default:return t.endDate}},Xe=(e,n,t)=>Ze(e,n)*t,Mr=(e,n,t)=>{const r=Math.round(e/t);return V(n,r)},Wr=(e,n,t)=>(Ze(n,e)+1)*t,Tr=e=>Re[e].pixelsPerDay,st=(e,n=[],t=5)=>{const r=[...e.flatMap(m=>[m.startDate,m.endDate].filter(Boolean)),...n.map(m=>m.date)];if(r.length===0){const m=new Date;return{minDate:m,maxDate:V(m,30),totalDays:30}}const s=new Date(Math.min(...r.map(m=>m.getTime()))),a=new Date(Math.max(...r.map(m=>m.getTime()))),o=V(s,-t),l=V(a,t),f=Ze(l,o);return{minDate:o,maxDate:l,totalDays:f}},{ROW_HEIGHT:oe,HEADER_HEIGHT:jr,MILESTONE_LANE_HEIGHT:he,BAR_HEIGHT:se}=be,Or=({minDate:e,totalDays:n,pixelsPerDay:t,zoomLevel:r,holidays:s,calendarSettings:a})=>{const o=Array.from({length:n},(b,d)=>V(e,d)),l=n*t,f=y.useMemo(()=>{const b=[];let d=tt(o[0]),x=0;return o.forEach(w=>{tt(w)!==d?(b.push({label:`${d}년`,days:x}),d=tt(w),x=1):x++}),b.push({label:`${d}년`,days:x}),b},[o]),m=y.useMemo(()=>{const b=[];let d=o[0],x=0;return o.forEach(w=>{hr(w,d)?x++:(b.push({label:de(d,"M월"),days:x}),d=w,x=1)}),b.push({label:de(d,"M월"),days:x}),b},[o]),g=y.useMemo(()=>{if(r==="MONTH")return null;if(r==="DAY")return i.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:l},children:o.map((b,d)=>{const x=Ve(b),w=ve(b,s,a),W=x===0,G=x===6;let P="text-gray-600";W&&(P="text-red-500"),G&&(P="text-blue-500"),w&&!W&&!G&&(P="text-red-500");let D="";return W||w&&!G?D="bg-red-50/50":G&&(D="bg-blue-50/50"),i.jsxs("div",{className:`flex h-full shrink-0 flex-col items-center justify-center border-r border-gray-100 font-medium ${D}`,style:{width:t,minWidth:t},children:[i.jsx("span",{className:`text-[10px] leading-none ${P}`,children:de(b,"d")}),i.jsx("span",{className:`mt-0.5 text-[9px] font-bold leading-none ${P}`,children:["일","월","화","수","목","금","토"][x]})]},d)})});{const b=[];let d=o[0],x=0;return o.forEach(w=>{ur(w,d,{weekStartsOn:0})?x++:(b.push({label:`${Et(d,{weekStartsOn:0})}주`,days:x}),d=w,x=1)}),b.push({label:`${Et(d,{weekStartsOn:0})}주`,days:x}),i.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:l},children:b.map((w,W)=>i.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-100 text-xs font-medium text-gray-600",style:{width:w.days*t},children:w.label},W))})}},[o,r,t,s,a,l]),v=r==="MONTH";return i.jsx("div",{className:"sticky top-0 z-20 flex flex-col border-b border-gray-300 bg-white shadow-sm",style:{height:jr,minWidth:l},children:v?i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex h-[48px] items-center border-b border-gray-300 bg-gray-100 text-sm font-bold text-gray-800",style:{minWidth:l},children:f.map((b,d)=>i.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-300",style:{width:b.days*t},children:b.label},d))}),i.jsx("div",{className:"flex h-[32px] items-center bg-white text-xs font-medium text-gray-700",style:{minWidth:l},children:m.map((b,d)=>i.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-200",style:{width:b.days*t},children:b.label},d))})]}):i.jsxs(i.Fragment,{children:[i.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-300 bg-gray-100 text-xs font-bold text-gray-800",style:{minWidth:l},children:f.map((b,d)=>i.jsx("div",{className:"flex shrink-0 items-center border-r border-gray-300 pl-2",style:{width:b.days*t},children:b.label},d))}),i.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-200 bg-gray-100 text-xs font-medium text-gray-700",style:{minWidth:l},children:m.map((b,d)=>i.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-300",style:{width:b.days*t},children:b.label},d))}),g]})})},Nr=({minDate:e,totalDays:n,chartHeight:t,pixelsPerDay:r,holidays:s,calendarSettings:a,zoomLevel:o})=>{const l=y.useMemo(()=>{if(o==="MONTH")return[];const f=[];for(let m=0;m<n;m++){const g=V(e,m),v=Ve(g),b=v===0,d=v===6;if(ve(g,s,a)||d){const w=m*r;let W="rgba(254, 242, 242, 0.5)";d&&!b&&(W="rgba(239, 246, 255, 0.5)"),b&&(W="rgba(254, 242, 242, 0.5)"),f.push(i.jsx("rect",{x:w,y:0,width:r,height:t,fill:W,className:"pointer-events-none"},`weekend-${m}`))}}return f},[e,n,t,r,s,a,o]);return i.jsx("g",{children:l})},Pr=({milestone:e,x:n})=>{const r=he/2;return i.jsxs("g",{transform:`translate(${n}, ${r})`,className:"group cursor-pointer",children:[i.jsx("line",{x1:0,y1:0,x2:0,y2:1e3,stroke:ue.grid,strokeWidth:2,strokeDasharray:"4, 4",className:"opacity-100"}),i.jsx("path",{d:`M ${-12/2} ${-12/2} L ${12/2} ${-12/2} L 0 ${12/2} Z`,fill:ue.milestone,stroke:"white",strokeWidth:1,className:"drop-shadow-sm transition-all duration-150 group-hover:opacity-0 group-hover:scale-0"}),i.jsx("circle",{cx:0,cy:0,r:12/2,fill:"#3B82F6",stroke:"white",strokeWidth:2,className:"drop-shadow-sm opacity-0 scale-0 transition-all duration-150 group-hover:opacity-100 group-hover:scale-100"}),i.jsx("text",{x:-8,y:4,textAnchor:"end",className:"select-none text-[11px] font-bold fill-gray-600 transition-colors group-hover:fill-blue-700",children:e.name})]})},_r=({task:e,y:n,minDate:t,pixelsPerDay:r,isMasterView:s,isDraggable:a=!1,dragInfo:o,onDragStart:l})=>{var d,x;if(e.type==="GROUP")return null;const f=4,m=!!o,g=(o==null?void 0:o.startDate)||e.startDate,v=(o==null?void 0:o.endDate)||e.endDate,b=Xe(g,t,r);if(s){const w=((d=e.cp)==null?void 0:d.workDaysTotal)||0,W=((x=e.cp)==null?void 0:x.nonWorkDaysTotal)||0;if(w+W===0)return null;const P=w*r,D=W*r;return i.jsxs("g",{transform:`translate(${b}, ${n})`,className:"group cursor-pointer",children:[i.jsx("rect",{x:0,y:0,width:P,height:se,fill:ue.vermilion,rx:f,ry:f,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),i.jsx("rect",{x:P,y:0,width:D,height:se,fill:ue.teal,rx:f,ry:f,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),i.jsx("text",{x:-8,y:se/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-bold fill-gray-700",children:e.name})]})}else{if(!e.task)return null;const{netWorkDays:w,indirectWorkDaysPre:W,indirectWorkDaysPost:G}=e.task,P=(o==null?void 0:o.indirectWorkDaysPre)??W,D=(o==null?void 0:o.indirectWorkDaysPost)??G,F=P*r,Z=w*r,U=D*r,S=F+Z+U,T=0,I=F,A=F+Z,q=8,j={startDate:g,endDate:v,indirectWorkDaysPre:P,netWorkDays:w,indirectWorkDaysPost:D};return i.jsxs("g",{transform:`translate(${b}, ${n})`,className:`group ${m?"opacity-90":""}`,children:[a&&i.jsx("rect",{x:F,y:0,width:Z,height:se,fill:"transparent",className:"cursor-grab active:cursor-grabbing",onMouseDown:L=>l==null?void 0:l(L,e.id,"move",j)}),P>0&&i.jsx("rect",{x:T,y:0,width:F,height:se,fill:ue.blue,rx:f,ry:f,className:`drop-shadow-sm transition-opacity ${m?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),w>0&&i.jsx("rect",{x:I,y:0,width:Z,height:se,fill:ue.red,rx:f,ry:f,className:`drop-shadow-sm transition-opacity ${m?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),D>0&&i.jsx("rect",{x:A,y:0,width:U,height:se,fill:ue.blue,rx:f,ry:f,className:`drop-shadow-sm transition-opacity ${m?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),a&&i.jsx("rect",{x:-q/2,y:0,width:q,height:se,fill:"transparent",className:"cursor-ew-resize",onMouseDown:L=>l==null?void 0:l(L,e.id,"resize-pre",j),children:i.jsx("title",{children:"앞 간접작업일 조절 (드래그)"})}),a&&i.jsx("rect",{x:S-q/2,y:0,width:q,height:se,fill:"transparent",className:"cursor-ew-resize",onMouseDown:L=>l==null?void 0:l(L,e.id,"resize-post",j),children:i.jsx("title",{children:"뒤 간접작업일 조절 (드래그)"})}),a&&i.jsxs(i.Fragment,{children:[i.jsx("rect",{x:1,y:se/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"}),i.jsx("rect",{x:S-4,y:se/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"})]}),i.jsx("text",{x:-8,y:se/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-medium fill-gray-700",children:e.name}),m&&i.jsxs("g",{children:[i.jsxs("text",{x:S/2,y:-6,textAnchor:"middle",className:"pointer-events-none select-none text-[10px] font-bold fill-blue-600",children:[de(g,"MM/dd")," ~ ",de(v,"MM/dd")]}),i.jsxs("text",{x:S/2,y:se+12,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-gray-500",children:["앞",P,"일 + 순",w,"일 + 뒤",D,"일"]})]})]})}},Cr=()=>i.jsx("defs",{children:i.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:i.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:ue.dependency})})}),at=y.forwardRef(({tasks:e,milestones:n,viewMode:t,zoomLevel:r,holidays:s,calendarSettings:a,onBarDrag:o,virtualRows:l,totalHeight:f},m)=>{const g=Re[r].pixelsPerDay,v=t==="MASTER",b=l&&l.length>0,[d,x]=y.useState(null),{minDate:w,totalDays:W}=y.useMemo(()=>st(e,n,60),[e,n]),G=W*g,P=Math.max(b?(f||0)+he+100:e.length*oe+he+100,500),D=y.useCallback((S,T,I,A)=>{o&&(S.preventDefault(),S.stopPropagation(),x({taskId:T,dragType:I,startX:S.clientX,originalStartDate:A.startDate,originalEndDate:A.endDate,originalIndirectWorkDaysPre:A.indirectWorkDaysPre,originalNetWorkDays:A.netWorkDays,originalIndirectWorkDaysPost:A.indirectWorkDaysPost,currentStartDate:A.startDate,currentEndDate:A.endDate,currentIndirectWorkDaysPre:A.indirectWorkDaysPre,currentIndirectWorkDaysPost:A.indirectWorkDaysPost}))},[o]),F=y.useCallback(S=>{if(!d||!o)return;const T=S.clientX-d.startX,I=Math.round(T/g);let A=d.originalStartDate,q=d.originalEndDate,j=d.originalIndirectWorkDaysPre,L=d.originalIndirectWorkDaysPost;if(d.dragType==="move")A=V(d.originalStartDate,I),q=V(d.originalEndDate,I);else if(d.dragType==="resize-pre"){j=Math.max(0,d.originalIndirectWorkDaysPre-I),A=V(d.originalStartDate,-(-I+(j-d.originalIndirectWorkDaysPre)));const re=V(d.originalStartDate,d.originalIndirectWorkDaysPre);A=V(re,-j),q=d.originalEndDate}else if(d.dragType==="resize-post"){L=Math.max(0,d.originalIndirectWorkDaysPost+I);const re=V(d.originalEndDate,-d.originalIndirectWorkDaysPost);q=V(re,L),A=d.originalStartDate}x(re=>re?{...re,currentStartDate:A,currentEndDate:q,currentIndirectWorkDaysPre:j,currentIndirectWorkDaysPost:L}:null)},[d,o,g]),Z=y.useCallback(()=>{if(!d||!o){x(null);return}const S=d.currentStartDate.getTime()!==d.originalStartDate.getTime()||d.currentEndDate.getTime()!==d.originalEndDate.getTime(),T=d.currentIndirectWorkDaysPre!==d.originalIndirectWorkDaysPre||d.currentIndirectWorkDaysPost!==d.originalIndirectWorkDaysPost;(S||T)&&o({taskId:d.taskId,dragType:d.dragType,newStartDate:d.currentStartDate,newEndDate:d.currentEndDate,newIndirectWorkDaysPre:d.currentIndirectWorkDaysPre,newIndirectWorkDaysPost:d.currentIndirectWorkDaysPost}),x(null)},[d,o]);y.useEffect(()=>{if(d)return window.addEventListener("mousemove",F),window.addEventListener("mouseup",Z),document.body.style.cursor=d.dragType==="move"?"grabbing":"ew-resize",document.body.style.userSelect="none",()=>{window.removeEventListener("mousemove",F),window.removeEventListener("mouseup",Z),document.body.style.cursor="",document.body.style.userSelect=""}},[d,F,Z]);const U=y.useCallback(S=>d&&d.taskId===S?{startDate:d.currentStartDate,endDate:d.currentEndDate,indirectWorkDaysPre:d.currentIndirectWorkDaysPre,indirectWorkDaysPost:d.currentIndirectWorkDaysPost}:null,[d]);return i.jsx("div",{className:"flex h-full w-full flex-col overflow-hidden bg-white",children:i.jsxs("div",{ref:m,className:"relative flex-1 overflow-auto",children:[i.jsx(Or,{minDate:w,totalDays:W,pixelsPerDay:g,zoomLevel:r,holidays:s,calendarSettings:a}),i.jsxs("svg",{width:G,height:P,className:"block bg-white",children:[i.jsx(Cr,{}),i.jsx(Nr,{minDate:w,totalDays:W,chartHeight:P,pixelsPerDay:g,holidays:s,calendarSettings:a,zoomLevel:r}),(b?l:e.map((S,T)=>({index:T,start:T*oe,size:oe,key:T}))).map(S=>{const T=e[S.index];if(!T||T.type!=="GROUP")return null;const I=S.start+he;return i.jsx("rect",{x:0,y:I,width:G,height:oe,fill:"rgba(249, 250, 251, 0.6)",className:"pointer-events-none"},`group-bg-${S.key}`)}),Array.from({length:W},(S,T)=>{const I=(T+1)*g,A=V(w,T),q=Ve(A);let j=!1,L="#f0f0f0";return r==="DAY"?(j=!0,L=q===0?"#e0e0e0":"#f0f0f0"):r==="WEEK"?(j=q===0,L="#e5e7eb"):r==="MONTH"&&(j=q===0,L="#f0f0f0"),j?i.jsx("line",{x1:I,y1:0,x2:I,y2:P,stroke:L,strokeWidth:1},`vline-${T}`):null}),(b?l:e.map((S,T)=>({index:T,start:T*oe,size:oe,key:T}))).map(S=>i.jsx("line",{x1:0,y1:S.start+oe+he,x2:G,y2:S.start+oe+he,stroke:"#f3f4f6",strokeWidth:1},`line-${S.key}`)),i.jsx("rect",{x:0,y:0,width:G,height:he,fill:"transparent"}),n.map(S=>i.jsx(Pr,{milestone:S,x:Xe(S.date,w,g)},S.id)),i.jsx("line",{x1:0,y1:he,x2:G,y2:he,stroke:ue.grid,strokeWidth:1}),(b?l:e.map((S,T)=>({index:T,start:T*oe,size:oe,key:T}))).map(S=>{const T=e[S.index];if(!T)return null;const I=S.start+(oe-se)/2+he;return i.jsx(_r,{task:T,y:I,minDate:w,pixelsPerDay:g,isMasterView:v,isDraggable:!v&&!!o,dragInfo:U(T.id),onDragStart:D},S.key)})]})]})})});at.displayName="GanttTimeline";const _t=e=>{let n;const t=new Set,r=(m,g)=>{const v=typeof m=="function"?m(n):m;if(!Object.is(v,n)){const b=n;n=g??(typeof v!="object"||v===null)?v:Object.assign({},n,v),t.forEach(d=>d(n,b))}},s=()=>n,l={setState:r,getState:s,getInitialState:()=>f,subscribe:m=>(t.add(m),()=>t.delete(m))},f=n=e(r,s,l);return l},Ir=e=>e?_t(e):_t,Ar=e=>e;function zr(e,n=Ar){const t=y.useSyncExternalStore(e.subscribe,y.useCallback(()=>n(e.getState()),[e,n]),y.useCallback(()=>n(e.getInitialState()),[e,n]));return y.useDebugValue(t),t}const Ct=e=>{const n=Ir(e),t=r=>zr(n,r);return Object.assign(t,n),t},Lr=e=>e?Ct(e):Ct,It=e=>Symbol.iterator in e,At=e=>"entries"in e,zt=(e,n)=>{const t=e instanceof Map?e:new Map(e.entries()),r=n instanceof Map?n:new Map(n.entries());if(t.size!==r.size)return!1;for(const[s,a]of t)if(!r.has(s)||!Object.is(a,r.get(s)))return!1;return!0},Fr=(e,n)=>{const t=e[Symbol.iterator](),r=n[Symbol.iterator]();let s=t.next(),a=r.next();for(;!s.done&&!a.done;){if(!Object.is(s.value,a.value))return!1;s=t.next(),a=r.next()}return!!s.done&&!!a.done};function Rr(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:It(e)&&It(n)?At(e)&&At(n)?zt(e,n):Fr(e,n):zt({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function je(e){const n=y.useRef(void 0);return t=>{const r=e(t);return Rr(n.current,r)?n.current:n.current=r}}const ke=Lr((e,n)=>({viewMode:"MASTER",activeCPId:null,zoomLevel:"MONTH",selectedTaskId:null,hoveredTaskId:null,expandedTaskIds:new Set,sidebarWidth:be.SIDEBAR_WIDTH,isDragging:!1,dragType:null,dragTaskId:null,setViewMode:(t,r)=>{e({viewMode:t,activeCPId:r??null,zoomLevel:t==="DETAIL"?"DAY":"MONTH"})},setZoomLevel:t=>{e({zoomLevel:t})},selectTask:t=>{e({selectedTaskId:t})},hoverTask:t=>{e({hoveredTaskId:t})},toggleTask:t=>{const{expandedTaskIds:r}=n(),s=new Set(r);s.has(t)?s.delete(t):s.add(t),e({expandedTaskIds:s})},expandAll:t=>{e({expandedTaskIds:new Set(t)})},collapseAll:()=>{e({expandedTaskIds:new Set})},setSidebarWidth:t=>{const r=Math.max(be.SIDEBAR_MIN_WIDTH,Math.min(t,be.SIDEBAR_MAX_WIDTH));e({sidebarWidth:r})},startDrag:(t,r)=>{e({isDragging:!0,dragType:t,dragTaskId:r})},endDrag:()=>{e({isDragging:!1,dragType:null,dragTaskId:null})}})),Lt=()=>ke(je(e=>({viewMode:e.viewMode,activeCPId:e.activeCPId,zoomLevel:e.zoomLevel}))),Ft=()=>ke(je(e=>({setViewMode:e.setViewMode,setZoomLevel:e.setZoomLevel}))),Hr=()=>ke(je(e=>({selectedTaskId:e.selectedTaskId,hoveredTaskId:e.hoveredTaskId,selectTask:e.selectTask,hoverTask:e.hoverTask}))),Rt=()=>ke(je(e=>({expandedTaskIds:e.expandedTaskIds,toggleTask:e.toggleTask,expandAll:e.expandAll,collapseAll:e.collapseAll}))),Ht=()=>ke(je(e=>({sidebarWidth:e.sidebarWidth,setSidebarWidth:e.setSidebarWidth}))),Yr=()=>ke(je(e=>({isDragging:e.isDragging,dragType:e.dragType,dragTaskId:e.dragTaskId,startDrag:e.startDrag,endDrag:e.endDrag})));function Oe(e,n,t){let r=t.initialDeps??[],s;function a(){var o,l,f,m;let g;t.key&&((o=t.debug)!=null&&o.call(t))&&(g=Date.now());const v=e();if(!(v.length!==r.length||v.some((x,w)=>r[w]!==x)))return s;r=v;let d;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(d=Date.now()),s=n(...v),t.key&&((f=t.debug)!=null&&f.call(t))){const x=Math.round((Date.now()-g)*100)/100,w=Math.round((Date.now()-d)*100)/100,W=w/16,G=(P,D)=>{for(P=String(P);P.length<D;)P=" "+P;return P};console.info(`%c⏱ ${G(w,5)} /${G(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*W,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(m=t==null?void 0:t.onChange)==null||m.call(t,s),s}return a.updateDeps=o=>{r=o},a}function Yt(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const $r=(e,n)=>Math.abs(e-n)<1.01,Gr=(e,n,t)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>n.apply(this,s),t)}},$t=e=>{const{offsetWidth:n,offsetHeight:t}=e;return{width:n,height:t}},Vr=e=>e,qr=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=n;s<=t;s++)r.push(s);return r},Xr=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;const s=o=>{const{width:l,height:f}=o;n({width:Math.round(l),height:Math.round(f)})};if(s($t(t)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(o=>{const l=()=>{const f=o[0];if(f!=null&&f.borderBoxSize){const m=f.borderBoxSize[0];if(m){s({width:m.inlineSize,height:m.blockSize});return}}s($t(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},Gt={passive:!0},Vt=typeof window>"u"?!0:"onscrollend"in window,Br=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;let s=0;const a=e.options.useScrollendEvent&&Vt?()=>{}:Gr(r,()=>{n(s,!1)},e.options.isScrollingResetDelay),o=g=>()=>{const{horizontal:v,isRtl:b}=e.options;s=v?t.scrollLeft*(b&&-1||1):t.scrollTop,a(),n(s,g)},l=o(!0),f=o(!1);f(),t.addEventListener("scroll",l,Gt);const m=e.options.useScrollendEvent&&Vt;return m&&t.addEventListener("scrollend",f,Gt),()=>{t.removeEventListener("scroll",l),m&&t.removeEventListener("scrollend",f)}},Ur=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const r=n.borderBoxSize[0];if(r)return Math.round(r[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},Kr=(e,{adjustments:n=0,behavior:t},r)=>{var s,a;const o=e+n;(a=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||a.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:t})};class Qr{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const r=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(s=>{s.forEach(a=>{const o=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),t=null},observe:s=>{var a;return(a=r())==null?void 0:a.observe(s,{box:"border-box"})},unobserve:s=>{var a;return(a=r())==null?void 0:a.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([r,s])=>{typeof s>"u"&&delete t[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Vr,rangeExtractor:qr,onChange:()=>{},measureElement:Ur,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,t)},this.maybeNotify=Oe(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:process.env.NODE_ENV!=="production"&&"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,r)=>{const s=new Map,a=new Map;for(let o=r-1;o>=0;o--){const l=t[o];if(s.has(l.lane))continue;const f=a.get(l.lane);if(f==null||l.end>f.end?a.set(l.lane,l):l.end<f.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurementOptions=Oe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,r,s,a,o)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:s,getItemKey:a,enabled:o}),{key:!1}),this.getMeasurements=Oe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:r,scrollMargin:s,getItemKey:a,enabled:o},l)=>{if(!o)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(g=>{this.itemSizeCache.set(g.key,g.size)}));const f=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const m=this.measurementsCache.slice(0,f);for(let g=f;g<t;g++){const v=a(g),b=this.options.lanes===1?m[g-1]:this.getFurthestMeasurement(m,g),d=b?b.end+this.options.gap:r+s,x=l.get(v),w=typeof x=="number"?x:this.options.estimateSize(g),W=d+w,G=b?b.lane:g%this.options.lanes;m[g]={index:g,start:d,size:w,end:W,key:v,lane:G}}return this.measurementsCache=m,m},{key:process.env.NODE_ENV!=="production"&&"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=Oe(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,r,s,a)=>this.range=t.length>0&&r>0?Jr({measurements:t,outerSize:r,scrollOffset:s,lanes:a}):null,{key:process.env.NODE_ENV!=="production"&&"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=Oe(()=>{let t=null,r=null;const s=this.calculateRange();return s&&(t=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,r]},(t,r,s,a,o)=>a===null||o===null?[]:t({startIndex:a,endIndex:o,overscan:r,count:s}),{key:process.env.NODE_ENV!=="production"&&"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const r=this.options.indexAttribute,s=t.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(t,r)=>{const s=this.indexFromElement(t),a=this.measurementsCache[s];if(!a)return;const o=a.key,l=this.elementsCache.get(o);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(o,t)),t.isConnected&&this.resizeItem(s,this.options.measureElement(t,r,this))},this.resizeItem=(t,r)=>{const s=this.measurementsCache[t];if(!s)return;const a=this.itemSizeCache.get(s.key)??s.size,o=r-a;o!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,o,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("correction",o),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=o,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(t,void 0)},this.getVirtualItems=Oe(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,r)=>{const s=[];for(let a=0,o=t.length;a<o;a++){const l=t[a],f=r[l];s.push(f)}return s},{key:process.env.NODE_ENV!=="production"&&"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const r=this.getMeasurements();if(r.length!==0)return Yt(r[qt(0,r.length-1,s=>Yt(r[s]).start,t)])},this.getOffsetForAlignment=(t,r,s=0)=>{const a=this.getSize(),o=this.getScrollOffset();r==="auto"&&(r=t>=o+a?"end":"start"),r==="center"?t+=(s-a)/2:r==="end"&&(t-=a);const l=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(l,t),0)},this.getOffsetForIndex=(t,r="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=this.measurementsCache[t];if(!s)return;const a=this.getSize(),o=this.getScrollOffset();if(r==="auto")if(s.end>=o+a-this.options.scrollPaddingEnd)r="end";else if(s.start<=o+this.options.scrollPaddingStart)r="start";else return[o,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let a=0;const o=10,l=m=>{if(!this.targetWindow)return;const g=this.getOffsetForIndex(t,m);if(!g){console.warn("Failed to get offset for index:",t);return}const[v,b]=g;this._scrollToOffset(v,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const d=this.getScrollOffset(),x=this.getOffsetForIndex(t,b);if(!x){console.warn("Failed to get offset for index:",t);return}$r(x[0],d)||f(b)})},f=m=>{this.targetWindow&&(a++,a<o?(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("Schedule retry",a,o),this.targetWindow.requestAnimationFrame(()=>l(m))):console.warn(`Failed to scroll to index ${t} after ${o} attempts.`))};l(r)},this.scrollBy=(t,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var t;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((t=r[r.length-1])==null?void 0:t.end)??0;else{const a=Array(this.options.lanes).fill(null);let o=r.length-1;for(;o>=0&&a.some(l=>l===null);){const l=r[o];a[l.lane]===null&&(a[l.lane]=l.end),o--}s=Math.max(...a.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:r,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const qt=(e,n,t,r)=>{for(;e<=n;){const s=(e+n)/2|0,a=t(s);if(a<r)e=s+1;else if(a>r)n=s-1;else return s}return e>0?e-1:0};function Jr({measurements:e,outerSize:n,scrollOffset:t,lanes:r}){const s=e.length-1,a=f=>e[f].start;if(e.length<=r)return{startIndex:0,endIndex:s};let o=qt(0,s,a,t),l=o;if(r===1)for(;l<s&&e[l].end<t+n;)l++;else if(r>1){const f=Array(r).fill(0);for(;l<s&&f.some(g=>g<t+n);){const g=e[l];f[g.lane]=g.end,l++}const m=Array(r).fill(t+n);for(;o>=0&&m.some(g=>g>=t);){const g=e[o];m[g.lane]=g.start,o--}o=Math.max(0,o-o%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:o,endIndex:l}}const Xt=typeof document<"u"?$e.useLayoutEffect:$e.useEffect;function Zr(e){const n=$e.useReducer(()=>({}),{})[1],t={...e,onChange:(s,a)=>{var o;a?tn.flushSync(n):n(),(o=e.onChange)==null||o.call(e,s,a)}},[r]=$e.useState(()=>new Qr(t));return r.setOptions(t),Xt(()=>r._didMount(),[]),Xt(()=>r._willUpdate()),r}function es(e){return Zr({observeElementRect:Xr,observeElementOffset:Br,scrollToFn:Kr,...e})}const{ROW_HEIGHT:ts}=be;function Bt({containerRef:e,count:n,rowHeight:t=ts,overscan:r=5}){const s=es({count:n,getScrollElement:()=>e.current,estimateSize:()=>t,overscan:r});return{virtualRows:y.useMemo(()=>s.getVirtualItems().map(o=>({index:o.index,start:o.start,size:o.size,key:o.index})),[s.getVirtualItems()]),totalHeight:s.getTotalSize(),virtualizer:s}}const ns={workOnSaturdays:!1,workOnSundays:!1,workOnHolidays:!1};function rs({tasks:e,milestones:n=[],holidays:t=[],calendarSettings:r=ns,initialView:s="MASTER",initialZoomLevel:a="MONTH",initialExpandedIds:o,onTaskUpdate:l,onTaskCreate:f,onTaskReorder:m,onTaskGroup:g,onTaskUngroup:v,onViewChange:b,onSave:d,onReset:x,hasUnsavedChanges:w,saveStatus:W,className:G,style:P}){const{viewMode:D,activeCPId:F,zoomLevel:Z}=Lt(),{setViewMode:U,setZoomLevel:S}=Ft(),{sidebarWidth:T,setSidebarWidth:I}=Ht(),{expandedTaskIds:A,toggleTask:q,expandAll:j}=Rt(),L=y.useRef(null),re=y.useRef(null),le=y.useRef(null),ee=y.useRef(!1),ae=y.useRef(!1),[De,Ee]=y.useState(!1),[Se,u]=y.useState(!1),M=y.useCallback(()=>{u(!0)},[]),R=y.useCallback(()=>{u(!1)},[]),H=y.useRef(!1);y.useEffect(()=>{H.current||(H.current=!0,U(s),S(a),o&&o.length>0?j(o):e.length>0&&j(e.map(k=>k.id)))},[e.length]);const te=y.useMemo(()=>{if(D==="MASTER"){const k=[];return e.forEach(O=>{(O.wbsLevel===1&&!O.parentId||O.wbsLevel===1&&O.parentId&&A.has(O.parentId))&&k.push(O)}),k}else return e.filter(k=>k.wbsLevel===2&&k.parentId===F)},[e,D,F,A]),{virtualRows:ce,totalHeight:Y}=Bt({containerRef:le,count:te.length});y.useEffect(()=>{const k=re.current,O=le.current;if(!k||!O)return;const J=()=>{ee.current||(ee.current=!0,O.scrollTop=k.scrollTop,requestAnimationFrame(()=>{ee.current=!1}))},ne=()=>{ee.current||(ee.current=!0,k.scrollTop=O.scrollTop,requestAnimationFrame(()=>{ee.current=!1}))};return k.addEventListener("scroll",J),O.addEventListener("scroll",ne),()=>{k.removeEventListener("scroll",J),O.removeEventListener("scroll",ne)}},[]);const[_,Me]=y.useState(null),fe=y.useCallback(k=>{if(k.detail>=2)return;k.preventDefault(),ae.current=!0,Ee(!0);const O=k.clientX,J=T,ne=Ue=>{if(!ae.current)return;const Ke=Ue.clientX-O;I(J+Ke)},ie=()=>{ae.current=!1,Ee(!1),document.removeEventListener("mousemove",ne),document.removeEventListener("mouseup",ie)};document.addEventListener("mousemove",ne),document.addEventListener("mouseup",ie)},[T,I]),it=y.useCallback(()=>{I(_!==null?_:be.SIDEBAR_WIDTH)},[_,I]),We=y.useCallback((k,O)=>{U(k,O),b==null||b(k,O)},[U,b]),Ne=y.useCallback(k=>{const O=le.current;if(!O)return;const J=Re[Z].pixelsPerDay,{minDate:ne}=st(e,n,60),ie=Xe(k,ne,J);O.scrollLeft=Math.max(0,ie-50)},[Z,e,n]),Be=y.useCallback(()=>{if(D==="MASTER"){const k=te.filter(O=>O.type==="CP");if(k.length>0){const O=k.reduce((ne,ie)=>ne.startDate<ie.startDate?ne:ie),J=new Date(O.startDate);J.setDate(J.getDate()-5),Ne(J)}}else if(D==="DETAIL"&&F){const k=e.filter(O=>O.parentId===F);if(k.length>0){const O=k.reduce((ne,ie)=>ne.startDate<ie.startDate?ne:ie),J=new Date(O.startDate);J.setDate(J.getDate()-5),Ne(J)}}},[D,F,e,te,Ne]),He=y.useCallback(k=>{D==="MASTER"&&k.type==="CP"&&We("DETAIL",k.id)},[D,We]);y.useEffect(()=>{if(D==="DETAIL"&&F){const k=setTimeout(()=>{Be()},100);return()=>clearTimeout(k)}},[D,F]);const Ye=y.useCallback(k=>{if(!l)return;const O=e.find(ne=>ne.id===k.taskId);if(!O||!O.task)return;const J={...O,startDate:k.newStartDate,endDate:k.newEndDate,task:{...O.task,indirectWorkDaysPre:k.newIndirectWorkDaysPre,indirectWorkDaysPost:k.newIndirectWorkDaysPost}};l(J)},[e,l]);return i.jsxs("div",{ref:L,className:`flex h-full w-full flex-col bg-gray-50 ${G||""}`,style:P,children:[i.jsxs("header",{className:"flex h-[60px] shrink-0 items-center justify-between border-b border-gray-200 bg-white px-4 shadow-sm",children:[i.jsx("div",{className:"flex items-center gap-3 shrink-0",children:D==="DETAIL"?i.jsxs(i.Fragment,{children:[i.jsx("button",{onClick:()=>We("MASTER"),className:"rounded bg-gray-200 px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-300 transition-colors",children:"← 상위 공정표로"}),f&&!Se&&i.jsx("button",{onClick:M,className:"flex items-center gap-1 rounded bg-blue-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-blue-600 transition-colors",title:"새 공정 추가",children:"+ Task 추가"})]}):i.jsx("div",{className:"w-[180px]"})}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("button",{onClick:Be,className:"flex items-center gap-1 rounded bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 hover:bg-gray-200 transition-colors",title:D==="MASTER"?"첫 번째 CP로 스크롤":"첫 번째 작업으로 스크롤",children:"Focusing"}),i.jsx("div",{className:"flex rounded bg-gray-100 p-1",children:(D==="MASTER"?["WEEK","MONTH"]:["DAY","WEEK"]).map(k=>i.jsx("button",{onClick:()=>S(k),className:`rounded px-3 py-1 text-xs font-medium transition-colors ${Z===k?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:Re[k].label},k))}),i.jsxs("div",{className:"text-sm text-gray-500",children:["기준일: ",de(new Date,"yyyy-MM-dd")]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[d&&i.jsx("button",{onClick:d,disabled:!w||W==="saving",className:`flex items-center gap-1.5 rounded-md px-3 py-1.5 text-sm font-medium transition-colors ${w?"bg-blue-500 text-white hover:bg-blue-600 active:bg-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:W==="saving"?i.jsxs(i.Fragment,{children:[i.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[i.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),i.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"저장 중..."]}):i.jsxs(i.Fragment,{children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"저장"]})}),x&&i.jsxs("button",{onClick:x,className:"flex items-center gap-1.5 rounded-md bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-200 active:bg-gray-300",children:[i.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"초기화"]})]})]}),i.jsxs("div",{className:"relative flex flex-1 overflow-hidden",children:[i.jsx("div",{className:"z-10 flex shrink-0 flex-col bg-white",style:{width:T},children:i.jsx(nt,{ref:re,tasks:te,allTasks:e,viewMode:D,expandedIds:A,onToggle:q,onTaskClick:He,onTaskUpdate:l,onTaskCreate:f,onTaskReorder:m,onTaskGroup:g,onTaskUngroup:v,activeCPId:F,virtualRows:ce,totalHeight:Y,onTotalWidthChange:Me,isAddingTask:Se,onCancelAddTask:R})}),i.jsx("div",{className:`z-20 w-1 shrink-0 cursor-col-resize transition-colors ${De?"bg-blue-500":"bg-gray-200 hover:bg-gray-300"}`,onMouseDown:fe,onDoubleClick:it,title:"드래그하여 너비 조절 / 더블클릭으로 초기화"}),i.jsx("div",{className:"relative flex flex-1 flex-col overflow-hidden bg-white",children:i.jsx(at,{ref:le,tasks:te,milestones:n,viewMode:D,zoomLevel:Z,holidays:t,calendarSettings:r,onTaskUpdate:l,onBarDrag:Ye,virtualRows:ce,totalHeight:Y})}),De&&i.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"})]})]})}C.GANTT_COLORS=ue,C.GANTT_LAYOUT=be,C.GanttChart=rs,C.GanttSidebar=nt,C.GanttTimeline=at,C.ZOOM_CONFIG=Re,C.addCalendarDays=rt,C.addWorkingDays=Pt,C.calculateDateRange=st,C.calculateDualCalendarDates=Er,C.dateToX=Xe,C.getAnchorDate=Sr,C.getDateRangeWidth=Wr,C.getPixelsPerDay=Tr,C.isHoliday=ve,C.isWeekend=kr,C.subtractWorkingDays=Dr,C.useGanttDrag=Yr,C.useGanttExpansion=Rt,C.useGanttSelection=Hr,C.useGanttSidebar=Ht,C.useGanttStore=ke,C.useGanttViewActions=Ft,C.useGanttViewState=Lt,C.useGanttVirtualization=Bt,C.xToDate=Mr,Object.defineProperty(C,Symbol.toStringTag,{value:"Module"})});
