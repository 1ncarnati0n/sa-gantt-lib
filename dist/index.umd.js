(function(j,y){typeof exports=="object"&&typeof module<"u"?y(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],y):(j=typeof globalThis<"u"?globalThis:j||self,y(j.SaGanttLib={},j.React,j.ReactDOM))})(this,function(j,y,Lt){"use strict";"use client";function Yt(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:()=>e[t]})}}return n.default=e,Object.freeze(n)}const Ie=Yt(y);var He={exports:{}},Se={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qe;function Ht(){if(Qe)return Se;Qe=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(r,s,a){var i=null;if(a!==void 0&&(i=""+a),s.key!==void 0&&(i=""+s.key),"key"in s){a={};for(var o in s)o!=="key"&&(a[o]=s[o])}else a=s;return s=a.ref,{$$typeof:e,type:r,key:i,ref:s!==void 0?s:null,props:a}}return Se.Fragment=n,Se.jsx=t,Se.jsxs=t,Se}var Me={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ke;function $t(){return Ke||(Ke=1,process.env.NODE_ENV!=="production"&&function(){function e(d){if(d==null)return null;if(typeof d=="function")return d.$$typeof===F?null:d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case T:return"Fragment";case N:return"Profiler";case R:return"StrictMode";case X:return"Suspense";case S:return"SuspenseList";case P:return"Activity"}if(typeof d=="object")switch(typeof d.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),d.$$typeof){case p:return"Portal";case H:return d.displayName||"Context";case W:return(d._context.displayName||"Context")+".Consumer";case U:var w=d.render;return d=d.displayName,d||(d=w.displayName||w.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case O:return w=d.displayName||null,w!==null?w:e(d.type)||"Memo";case _:w=d._payload,d=d._init;try{return e(d(w))}catch{}}return null}function n(d){return""+d}function t(d){try{n(d);var w=!1}catch{w=!0}if(w){w=console;var z=w.error,A=typeof Symbol=="function"&&Symbol.toStringTag&&d[Symbol.toStringTag]||d.constructor.name||"Object";return z.call(w,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",A),n(d)}}function r(d){if(d===T)return"<>";if(typeof d=="object"&&d!==null&&d.$$typeof===_)return"<...>";try{var w=e(d);return w?"<"+w+">":"<...>"}catch{return"<...>"}}function s(){var d=$.A;return d===null?null:d.getOwner()}function a(){return Error("react-stack-top-frame")}function i(d){if(G.call(d,"key")){var w=Object.getOwnPropertyDescriptor(d,"key").get;if(w&&w.isReactWarning)return!1}return d.key!==void 0}function o(d,w){function z(){le||(le=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",w))}z.isReactWarning=!0,Object.defineProperty(d,"key",{get:z,configurable:!0})}function h(){var d=e(this.type);return ce[d]||(ce[d]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),d=this.props.ref,d!==void 0?d:null}function u(d,w,z,A,ge,ue){var v=z.ref;return d={$$typeof:x,type:d,key:w,props:z,_owner:A},(v!==void 0?v:null)!==null?Object.defineProperty(d,"ref",{enumerable:!1,get:h}):Object.defineProperty(d,"ref",{enumerable:!1,value:null}),d._store={},Object.defineProperty(d._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(d,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(d,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:ge}),Object.defineProperty(d,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ue}),Object.freeze&&(Object.freeze(d.props),Object.freeze(d)),d}function f(d,w,z,A,ge,ue){var v=w.children;if(v!==void 0)if(A)if(J(v)){for(A=0;A<v.length;A++)D(v[A]);Object.freeze&&Object.freeze(v)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else D(v);if(G.call(w,"key")){v=e(d);var M=Object.keys(w).filter(function(B){return B!=="key"});A=0<M.length?"{key: someKey, "+M.join(": ..., ")+": ...}":"{key: someKey}",de[v+A]||(M=0<M.length?"{"+M.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,A,v,M,v),de[v+A]=!0)}if(v=null,z!==void 0&&(t(z),v=""+z),i(w)&&(t(w.key),v=""+w.key),"key"in w){z={};for(var q in w)q!=="key"&&(z[q]=w[q])}else z=w;return v&&o(z,typeof d=="function"?d.displayName||d.name||"Unknown":d),u(d,v,z,s(),ge,ue)}function D(d){b(d)?d._store&&(d._store.validated=1):typeof d=="object"&&d!==null&&d.$$typeof===_&&(d._payload.status==="fulfilled"?b(d._payload.value)&&d._payload.value._store&&(d._payload.value._store.validated=1):d._store&&(d._store.validated=1))}function b(d){return typeof d=="object"&&d!==null&&d.$$typeof===x}var c=y,x=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),T=Symbol.for("react.fragment"),R=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),W=Symbol.for("react.consumer"),H=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),X=Symbol.for("react.suspense"),S=Symbol.for("react.suspense_list"),O=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),P=Symbol.for("react.activity"),F=Symbol.for("react.client.reference"),$=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=Object.prototype.hasOwnProperty,J=Array.isArray,oe=console.createTask?console.createTask:function(){return null};c={react_stack_bottom_frame:function(d){return d()}};var le,ce={},ne=c.react_stack_bottom_frame.bind(c,a)(),Z=oe(r(a)),de={};Me.Fragment=T,Me.jsx=function(d,w,z){var A=1e4>$.recentlyCreatedOwnerStacks++;return f(d,w,z,!1,A?Error("react-stack-top-frame"):ne,A?oe(r(d)):Z)},Me.jsxs=function(d,w,z){var A=1e4>$.recentlyCreatedOwnerStacks++;return f(d,w,z,!0,A?Error("react-stack-top-frame"):ne,A?oe(r(d)):Z)}}()),Me}process.env.NODE_ENV==="production"?He.exports=Ht():He.exports=$t();var l=He.exports;const Je=6048e5,Gt=864e5,Ze=Symbol.for("constructDateFrom");function ie(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&Ze in e?e[Ze](n):e instanceof Date?new e.constructor(n):new Date(n)}function V(e,n){return ie(n||e,e)}function Y(e,n,t){const r=V(e,t==null?void 0:t.in);return isNaN(n)?ie(e,NaN):(n&&r.setDate(r.getDate()+n),r)}function et(e,n){return V(e,n==null?void 0:n.in).getDay()===6}function tt(e,n){return V(e,n==null?void 0:n.in).getDay()===0}let Vt={};function We(){return Vt}function be(e,n){var o,h,u,f;const t=We(),r=(n==null?void 0:n.weekStartsOn)??((h=(o=n==null?void 0:n.locale)==null?void 0:o.options)==null?void 0:h.weekStartsOn)??t.weekStartsOn??((f=(u=t.locale)==null?void 0:u.options)==null?void 0:f.weekStartsOn)??0,s=V(e,n==null?void 0:n.in),a=s.getDay(),i=(a<r?7:0)+a-r;return s.setDate(s.getDate()-i),s.setHours(0,0,0,0),s}function Ae(e,n){return be(e,{...n,weekStartsOn:1})}function nt(e,n){const t=V(e,n==null?void 0:n.in),r=t.getFullYear(),s=ie(t,0);s.setFullYear(r+1,0,4),s.setHours(0,0,0,0);const a=Ae(s),i=ie(t,0);i.setFullYear(r,0,4),i.setHours(0,0,0,0);const o=Ae(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function rt(e){const n=V(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function Oe(e,...n){const t=ie.bind(null,e||n.find(r=>typeof r=="object"));return n.map(t)}function Ne(e,n){const t=V(e,n==null?void 0:n.in);return t.setHours(0,0,0,0),t}function st(e,n,t){const[r,s]=Oe(t==null?void 0:t.in,e,n),a=Ne(r),i=Ne(s),o=+a-rt(a),h=+i-rt(i);return Math.round((o-h)/Gt)}function qt(e,n){const t=nt(e,n),r=ie(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),Ae(r)}function Xt(e,n,t){const[r,s]=Oe(t==null?void 0:t.in,e,n);return+Ne(r)==+Ne(s)}function Bt(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Ut(e){return!(!Bt(e)&&typeof e!="number"||isNaN(+V(e)))}function $e(e,n,t){const[r,s]=Oe(t==null?void 0:t.in,e,n),a=at(r,s),i=Math.abs(st(r,s));r.setDate(r.getDate()-a*i);const o=+(at(r,s)===-a),h=a*(i-o);return h===0?0:h}function at(e,n){const t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function Qt(e,n){const t=V(e,n==null?void 0:n.in);return t.setDate(1),t.setHours(0,0,0,0),t}function Kt(e,n){const t=V(e,n==null?void 0:n.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Jt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Zt=(e,n,t)=>{let r;const s=Jt[e];return typeof s=="string"?r=s:n===1?r=s.one:r=s.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Ge(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const en={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},tn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},nn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},rn={date:Ge({formats:en,defaultWidth:"full"}),time:Ge({formats:tn,defaultWidth:"full"}),dateTime:Ge({formats:nn,defaultWidth:"full"})},sn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},an=(e,n,t,r)=>sn[e];function je(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&e.formattingValues){const i=e.defaultFormattingWidth||e.defaultWidth,o=t!=null&&t.width?String(t.width):i;s=e.formattingValues[o]||e.formattingValues[i]}else{const i=e.defaultWidth,o=t!=null&&t.width?String(t.width):e.defaultWidth;s=e.values[o]||e.values[i]}const a=e.argumentCallback?e.argumentCallback(n):n;return s[a]}}const on={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ln={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},cn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},un={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},hn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},fn={ordinalNumber:(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:je({values:on,defaultWidth:"wide"}),quarter:je({values:ln,defaultWidth:"wide",argumentCallback:e=>e-1}),month:je({values:cn,defaultWidth:"wide"}),day:je({values:dn,defaultWidth:"wide"}),dayPeriod:je({values:un,defaultWidth:"wide",formattingValues:hn,defaultFormattingWidth:"wide"})};function Pe(e){return(n,t={})=>{const r=t.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=n.match(s);if(!a)return null;const i=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],h=Array.isArray(o)?gn(o,D=>D.test(i)):mn(o,D=>D.test(i));let u;u=e.valueCallback?e.valueCallback(h):h,u=t.valueCallback?t.valueCallback(u):u;const f=n.slice(i.length);return{value:u,rest:f}}}function mn(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function gn(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function yn(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const s=r[0],a=n.match(e.parsePattern);if(!a)return null;let i=e.valueCallback?e.valueCallback(a[0]):a[0];i=t.valueCallback?t.valueCallback(i):i;const o=n.slice(s.length);return{value:i,rest:o}}}const bn=/^(\d+)(th|st|nd|rd)?/i,xn=/\d+/i,wn={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},pn={any:[/^b/i,/^(a|c)/i]},vn={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Dn={any:[/1/i,/2/i,/3/i,/4/i]},kn={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},En={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Tn={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Sn={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mn={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Wn={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},On={ordinalNumber:yn({matchPattern:bn,parsePattern:xn,valueCallback:e=>parseInt(e,10)}),era:Pe({matchPatterns:wn,defaultMatchWidth:"wide",parsePatterns:pn,defaultParseWidth:"any"}),quarter:Pe({matchPatterns:vn,defaultMatchWidth:"wide",parsePatterns:Dn,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Pe({matchPatterns:kn,defaultMatchWidth:"wide",parsePatterns:En,defaultParseWidth:"any"}),day:Pe({matchPatterns:Tn,defaultMatchWidth:"wide",parsePatterns:Sn,defaultParseWidth:"any"}),dayPeriod:Pe({matchPatterns:Mn,defaultMatchWidth:"any",parsePatterns:Wn,defaultParseWidth:"any"})},Nn={code:"en-US",formatDistance:Zt,formatLong:rn,formatRelative:an,localize:fn,match:On,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jn(e,n){const t=V(e,n==null?void 0:n.in);return st(t,Kt(t))+1}function Pn(e,n){const t=V(e,n==null?void 0:n.in),r=+Ae(t)-+qt(t);return Math.round(r/Je)+1}function it(e,n){var f,D,b,c;const t=V(e,n==null?void 0:n.in),r=t.getFullYear(),s=We(),a=(n==null?void 0:n.firstWeekContainsDate)??((D=(f=n==null?void 0:n.locale)==null?void 0:f.options)==null?void 0:D.firstWeekContainsDate)??s.firstWeekContainsDate??((c=(b=s.locale)==null?void 0:b.options)==null?void 0:c.firstWeekContainsDate)??1,i=ie((n==null?void 0:n.in)||e,0);i.setFullYear(r+1,0,a),i.setHours(0,0,0,0);const o=be(i,n),h=ie((n==null?void 0:n.in)||e,0);h.setFullYear(r,0,a),h.setHours(0,0,0,0);const u=be(h,n);return+t>=+o?r+1:+t>=+u?r:r-1}function _n(e,n){var o,h,u,f;const t=We(),r=(n==null?void 0:n.firstWeekContainsDate)??((h=(o=n==null?void 0:n.locale)==null?void 0:o.options)==null?void 0:h.firstWeekContainsDate)??t.firstWeekContainsDate??((f=(u=t.locale)==null?void 0:u.options)==null?void 0:f.firstWeekContainsDate)??1,s=it(e,n),a=ie((n==null?void 0:n.in)||e,0);return a.setFullYear(s,0,r),a.setHours(0,0,0,0),be(a,n)}function Cn(e,n){const t=V(e,n==null?void 0:n.in),r=+be(t,n)-+_n(t,n);return Math.round(r/Je)+1}function I(e,n){const t=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return t+r}const he={y(e,n){const t=e.getFullYear(),r=t>0?t:1-t;return I(n==="yy"?r%100:r,n.length)},M(e,n){const t=e.getMonth();return n==="M"?String(t+1):I(t+1,2)},d(e,n){return I(e.getDate(),n.length)},a(e,n){const t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return I(e.getHours()%12||12,n.length)},H(e,n){return I(e.getHours(),n.length)},m(e,n){return I(e.getMinutes(),n.length)},s(e,n){return I(e.getSeconds(),n.length)},S(e,n){const t=n.length,r=e.getMilliseconds(),s=Math.trunc(r*Math.pow(10,t-3));return I(s,n.length)}},ve={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ot={G:function(e,n,t){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){const r=e.getFullYear(),s=r>0?r:1-r;return t.ordinalNumber(s,{unit:"year"})}return he.y(e,n)},Y:function(e,n,t,r){const s=it(e,r),a=s>0?s:1-s;if(n==="YY"){const i=a%100;return I(i,2)}return n==="Yo"?t.ordinalNumber(a,{unit:"year"}):I(a,n.length)},R:function(e,n){const t=nt(e);return I(t,n.length)},u:function(e,n){const t=e.getFullYear();return I(t,n.length)},Q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return I(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return I(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){const r=e.getMonth();switch(n){case"M":case"MM":return he.M(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return I(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){const s=Cn(e,r);return n==="wo"?t.ordinalNumber(s,{unit:"week"}):I(s,n.length)},I:function(e,n,t){const r=Pn(e);return n==="Io"?t.ordinalNumber(r,{unit:"week"}):I(r,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):he.d(e,n)},D:function(e,n,t){const r=jn(e);return n==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):I(r,n.length)},E:function(e,n,t){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(a);case"ee":return I(a,2);case"eo":return t.ordinalNumber(a,{unit:"day"});case"eee":return t.day(s,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(s,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(s,{width:"short",context:"formatting"});case"eeee":default:return t.day(s,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){const s=e.getDay(),a=(s-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(a);case"cc":return I(a,n.length);case"co":return t.ordinalNumber(a,{unit:"day"});case"ccc":return t.day(s,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(s,{width:"narrow",context:"standalone"});case"cccccc":return t.day(s,{width:"short",context:"standalone"});case"cccc":default:return t.day(s,{width:"wide",context:"standalone"})}},i:function(e,n,t){const r=e.getDay(),s=r===0?7:r;switch(n){case"i":return String(s);case"ii":return I(s,n.length);case"io":return t.ordinalNumber(s,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){const s=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,n,t){const r=e.getHours();let s;switch(r===12?s=ve.noon:r===0?s=ve.midnight:s=r/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},B:function(e,n,t){const r=e.getHours();let s;switch(r>=17?s=ve.evening:r>=12?s=ve.afternoon:r>=4?s=ve.morning:s=ve.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(s,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(s,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return he.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):he.H(e,n)},K:function(e,n,t){const r=e.getHours()%12;return n==="Ko"?t.ordinalNumber(r,{unit:"hour"}):I(r,n.length)},k:function(e,n,t){let r=e.getHours();return r===0&&(r=24),n==="ko"?t.ordinalNumber(r,{unit:"hour"}):I(r,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):he.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):he.s(e,n)},S:function(e,n){return he.S(e,n)},X:function(e,n,t){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return ct(r);case"XXXX":case"XX":return xe(r);case"XXXXX":case"XXX":default:return xe(r,":")}},x:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"x":return ct(r);case"xxxx":case"xx":return xe(r);case"xxxxx":case"xxx":default:return xe(r,":")}},O:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+lt(r,":");case"OOOO":default:return"GMT"+xe(r,":")}},z:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+lt(r,":");case"zzzz":default:return"GMT"+xe(r,":")}},t:function(e,n,t){const r=Math.trunc(+e/1e3);return I(r,n.length)},T:function(e,n,t){return I(+e,n.length)}};function lt(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),s=Math.trunc(r/60),a=r%60;return a===0?t+String(s):t+String(s)+n+I(a,2)}function ct(e,n){return e%60===0?(e>0?"-":"+")+I(Math.abs(e)/60,2):xe(e,n)}function xe(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),s=I(Math.trunc(r/60),2),a=I(r%60,2);return t+s+n+a}const dt=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},ut=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},In={p:ut,P:(e,n)=>{const t=e.match(/(P+)(p+)?/)||[],r=t[1],s=t[2];if(!s)return dt(e,n);let a;switch(r){case"P":a=n.dateTime({width:"short"});break;case"PP":a=n.dateTime({width:"medium"});break;case"PPP":a=n.dateTime({width:"long"});break;case"PPPP":default:a=n.dateTime({width:"full"});break}return a.replace("{{date}}",dt(r,n)).replace("{{time}}",ut(s,n))}},An=/^D+$/,zn=/^Y+$/,Rn=["D","DD","YY","YYYY"];function Fn(e){return An.test(e)}function Ln(e){return zn.test(e)}function Yn(e,n,t){const r=Hn(e,n,t);if(console.warn(r),Rn.includes(e))throw new RangeError(r)}function Hn(e,n,t){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $n=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Gn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Vn=/^'([^]*?)'?$/,qn=/''/g,Xn=/[a-zA-Z]/;function re(e,n,t){var f,D,b,c;const r=We(),s=r.locale??Nn,a=r.firstWeekContainsDate??((D=(f=r.locale)==null?void 0:f.options)==null?void 0:D.firstWeekContainsDate)??1,i=r.weekStartsOn??((c=(b=r.locale)==null?void 0:b.options)==null?void 0:c.weekStartsOn)??0,o=V(e,t==null?void 0:t.in);if(!Ut(o))throw new RangeError("Invalid time value");let h=n.match(Gn).map(x=>{const p=x[0];if(p==="p"||p==="P"){const T=In[p];return T(x,s.formatLong)}return x}).join("").match($n).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const p=x[0];if(p==="'")return{isToken:!1,value:Bn(x)};if(ot[p])return{isToken:!0,value:x};if(p.match(Xn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:x}});s.localize.preprocessor&&(h=s.localize.preprocessor(o,h));const u={firstWeekContainsDate:a,weekStartsOn:i,locale:s};return h.map(x=>{if(!x.isToken)return x.value;const p=x.value;(Ln(p)||Fn(p))&&Yn(p,n,String(e));const T=ot[p[0]];return T(o,p,s.localize,u)}).join("")}function Bn(e){const n=e.match(Vn);return n?n[1].replace(qn,"'"):e}function Un(e,n){return V(e,n==null?void 0:n.in).getDate()}function ze(e,n){return V(e,n==null?void 0:n.in).getDay()}function ht(e,n){var h,u,f,D;const t=We(),r=(n==null?void 0:n.weekStartsOn)??((u=(h=n==null?void 0:n.locale)==null?void 0:h.options)==null?void 0:u.weekStartsOn)??t.weekStartsOn??((D=(f=t.locale)==null?void 0:f.options)==null?void 0:D.weekStartsOn)??0,s=Un(V(e,n==null?void 0:n.in));if(isNaN(s))return NaN;const a=ze(Qt(e,n));let i=r-a;i<=0&&(i+=7);const o=s-i;return Math.ceil(o/7)+1}function Ve(e,n){return V(e,n==null?void 0:n.in).getFullYear()}function Qn(e,n,t){const[r,s]=Oe(t==null?void 0:t.in,e,n);return+be(r,t)==+be(s,t)}function Kn(e,n,t){const[r,s]=Oe(t==null?void 0:t.in,e,n);return r.getFullYear()===s.getFullYear()&&r.getMonth()===s.getMonth()}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jn=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Zn=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,r)=>r?r.toUpperCase():t.toLowerCase()),ft=e=>{const n=Zn(e);return n.charAt(0).toUpperCase()+n.slice(1)},mt=(...e)=>e.filter((n,t,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===t).join(" ").trim(),er=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nr=y.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:s="",children:a,iconNode:i,...o},h)=>y.createElement("svg",{ref:h,...tr,width:n,height:n,stroke:e,strokeWidth:r?Number(t)*24/Number(n):t,className:mt("lucide",s),...!a&&!er(o)&&{"aria-hidden":"true"},...o},[...i.map(([u,f])=>y.createElement(u,f)),...Array.isArray(a)?a:[a]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=(e,n)=>{const t=y.forwardRef(({className:r,...s},a)=>y.createElement(nr,{ref:a,iconNode:n,className:mt(`lucide-${Jn(ft(e))}`,`lucide-${e}`,r),...s}));return t.displayName=ft(e),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=De("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sr=De("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=De("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=De("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=De("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=De("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),se={vermilion:"#E34234",teal:"#008080",red:"#FF5252",blue:"#448AFF",milestone:"#4B5563",dependency:"#9CA3AF",grid:"#E5E7EB",weekend:"#f3f4f6",holiday:"#fef2f2"},fe={ROW_HEIGHT:40,HEADER_HEIGHT:80,MILESTONE_LANE_HEIGHT:40,BAR_HEIGHT:24,SIDEBAR_WIDTH:400,SIDEBAR_MIN_WIDTH:250,SIDEBAR_MAX_WIDTH:800},_e={DAY:{pixelsPerDay:30,label:"일"},WEEK:{pixelsPerDay:10,label:"주"},MONTH:{pixelsPerDay:2,label:"월"}},{ROW_HEIGHT:me,HEADER_HEIGHT:gt,MILESTONE_LANE_HEIGHT:yt}=fe,bt=[{id:"name",label:"CP명",width:180,minWidth:100},{id:"total",label:"총 공기",width:80,minWidth:50},{id:"workDays",label:"작업일수",width:80,minWidth:50}],xt=[{id:"name",label:"단위공정명",width:150,minWidth:80},{id:"indirectPre",label:"선간접",width:60,minWidth:45},{id:"netWork",label:"순작업",width:60,minWidth:45},{id:"indirectPost",label:"후간접",width:60,minWidth:45},{id:"startDate",label:"시작일",width:90,minWidth:70},{id:"endDate",label:"종료일",width:90,minWidth:70}],Re={name:"",indirectWorkDaysPre:0,netWorkDays:1,indirectWorkDaysPost:0},qe=y.forwardRef(({tasks:e,allTasks:n,viewMode:t,expandedIds:r,onToggle:s,onTaskClick:a,onBackToMaster:i,onTaskUpdate:o,onTaskCreate:h,onTaskReorder:u,onScrollToFirstTask:f,activeCPId:D,virtualRows:b,totalHeight:c,onTotalWidthChange:x},p)=>{const T=b&&b.length>0,[R,N]=y.useState(!1),[W,H]=y.useState(Re),U=y.useRef(null),[X,S]=y.useState(null),[O,_]=y.useState(null),[P,F]=y.useState(null),[$,G]=y.useState(bt.map(g=>g.width)),[J,oe]=y.useState(xt.map(g=>g.width)),[le,ce]=y.useState(null),ne=y.useRef(!1),Z=t==="MASTER"?bt:xt,de=t==="MASTER"?$:J,d=t==="MASTER"?G:oe,w=y.useMemo(()=>Z.map((g,m)=>({...g,width:de[m]??g.width})),[Z,de]),z=t==="DETAIL"&&u?24:0,A=w.reduce((g,m)=>g+m.width,0)+z;y.useEffect(()=>{x&&x(A)},[A,x]);const ge=y.useCallback((g,m)=>{if(g.detail>=2)return;g.preventDefault(),g.stopPropagation(),ne.current=!0,ce(m);const E=g.clientX,L=de[m],k=Z[m].minWidth,K=ee=>{if(!ne.current)return;const Le=ee.clientX-E,zt=Math.max(k,L+Le);d(Rt=>{const Ye=[...Rt];return Ye[m]=zt,Ye})},C=()=>{ne.current=!1,ce(null),document.removeEventListener("mousemove",K),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",K),document.addEventListener("mouseup",C)},[de,Z,d]),ue=y.useCallback((g,m=12,E="normal")=>{const k=document.createElement("canvas").getContext("2d");return k?(k.font=`${E} ${m}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,k.measureText(g).width):0},[]),v=y.useCallback(g=>{const m=Z[g].minWidth,E=g===0,L=E?48:20,k=Z[g].label;let K=ue(k,12,"500")+16;return e.forEach(C=>{let ee="",Le=0;if(t==="MASTER"){const Ft=C.type==="GROUP";switch(E&&C.parentId&&(Le=20),g){case 0:ee=C.name;break;case 1:ee=Ft?"-":C.cp?`${C.cp.workDaysTotal+C.cp.nonWorkDaysTotal}일`:"-";break;case 2:ee=Ft?"-":C.cp?`${C.cp.workDaysTotal}일`:"-";break}}else switch(g){case 0:ee=C.name;break;case 1:ee=C.task?String(C.task.indirectWorkDaysPre):"-";break;case 2:ee=C.task?String(C.task.netWorkDays):"-";break;case 3:ee=C.task?String(C.task.indirectWorkDaysPost):"-";break;case 4:ee=re(C.startDate,"yyyy-MM-dd");break;case 5:ee=re(C.endDate,"yyyy-MM-dd");break}const Ye=ue(ee,E?14:12,E?"500":"normal")+L+Le;K=Math.max(K,Ye)}),Math.max(m,Math.ceil(K))},[e,t,Z,ue]),M=y.useCallback((g,m)=>{g.preventDefault(),g.stopPropagation(),ne.current=!1,ce(null);const E=v(m);d(L=>{const k=[...L];return k[m]=E,k})},[v,d]),q=y.useCallback((g,m,E)=>{if(!g.task||!o)return;const L={...g,task:{...g.task,[m]:E}};o(L)},[o]),B=y.useCallback(()=>{N(!0),H(Re),setTimeout(()=>{var g;(g=U.current)==null||g.focus()},0)},[]),ye=y.useCallback(()=>{N(!1),H(Re)},[]),Ce=y.useCallback(()=>{if(!W.name.trim()||!h||!D)return;const g=e[e.length-1],m=g?Y(g.endDate,1):new Date,E=W.indirectWorkDaysPre+W.netWorkDays+W.indirectWorkDaysPost,L=Y(m,Math.max(E-1,0)),k={id:`task-${Date.now()}`,parentId:D,wbsLevel:2,type:"TASK",name:W.name.trim(),startDate:m,endDate:L,task:{netWorkDays:W.netWorkDays,indirectWorkDaysPre:W.indirectWorkDaysPre,indirectWorkDaysPost:W.indirectWorkDaysPost},dependencies:[]};h(k),N(!1),H(Re)},[W,h,D,e]),Te=y.useCallback(g=>{g.key==="Enter"?(g.preventDefault(),Ce()):g.key==="Escape"&&(g.preventDefault(),ye())},[Ce,ye]),Vr=y.useCallback((g,m)=>{g.dataTransfer.effectAllowed="move",g.dataTransfer.setData("text/plain",m),S(m);const E=document.createElement("div");E.style.opacity="0",document.body.appendChild(E),g.dataTransfer.setDragImage(E,0,0),setTimeout(()=>document.body.removeChild(E),0)},[]),qr=y.useCallback((g,m)=>{if(g.preventDefault(),g.dataTransfer.dropEffect="move",m===X)return;const E=g.currentTarget.getBoundingClientRect(),L=E.top+E.height/2,k=g.clientY<L?"before":"after";_(m),F(k)},[X]),Xr=y.useCallback(()=>{_(null),F(null)},[]),Br=y.useCallback((g,m)=>{if(g.preventDefault(),!X||!u||X===m){S(null),_(null),F(null);return}const E=e.findIndex(k=>k.id===m),L=P==="after"?E+1:E;u(X,L),S(null),_(null),F(null)},[X,P,u,e]),Ur=y.useCallback(()=>{S(null),_(null),F(null)},[]),At=()=>l.jsx("div",{className:"flex h-[32px] border-t border-gray-200",children:w.map((g,m)=>l.jsxs("div",{className:"relative flex shrink-0 items-center justify-center text-xs font-medium text-gray-600",style:{width:g.width},children:[g.label,m<w.length-1&&l.jsx("div",{className:`absolute right-0 top-0 z-10 h-full w-[5px] cursor-col-resize transition-colors ${le===m?"bg-blue-500":"hover:bg-blue-300"}`,style:{transform:"translateX(50%)"},onMouseDown:E=>ge(E,m),onDoubleClick:E=>M(E,m),title:"드래그하여 컬럼 너비 조절 / 더블클릭으로 내용에 맞게 자동 조절"}),m<w.length-1&&l.jsx("div",{className:"absolute right-0 top-0 h-full w-px bg-gray-200"})]},g.id))});return t==="MASTER"?l.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[l.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:gt},children:[l.jsx("div",{className:"flex flex-1 items-center px-4 font-bold text-gray-700",children:"공구 공정표 (Level 1)"}),At()]}),le!==null&&l.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),l.jsxs("div",{ref:p,className:"relative flex-1 overflow-auto",children:[l.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:yt,minWidth:A},children:w.map((g,m)=>l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:g.width},children:m===0&&"Milestone"},g.id))}),l.jsx("div",{style:{minWidth:A,height:T?c:void 0,position:"relative"},children:(T?b:e.map((g,m)=>({index:m,start:m*me,size:me,key:m}))).map(g=>{const m=e[g.index];if(!m)return null;const E=m.type==="GROUP",L=E&&n.some(C=>C.parentId===m.id),k=r.has(m.id),K=m.parentId?20:0;return l.jsxs("div",{className:`box-border flex items-center border-b border-gray-100 transition-all duration-150 ${E?"bg-gray-50":"cursor-pointer hover:bg-blue-50 hover:shadow-[inset_0_0_0_1px_rgba(59,130,246,0.3)] hover:pl-1"}`,style:{height:me,...T?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${g.start}px)`}:{}},onDoubleClick:()=>!E&&a(m),title:E?void 0:"더블클릭하여 상세 공정표 보기",children:[l.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:w[0].width,paddingLeft:K+8},children:[L?l.jsx("button",{onClick:C=>{C.stopPropagation(),s(m.id)},className:"mr-1 shrink-0 rounded p-1 text-gray-500 hover:bg-gray-200",children:k?l.jsx(sr,{size:14}):l.jsx(ar,{size:14})}):l.jsx("div",{className:"w-6 shrink-0"}),l.jsx("span",{className:`truncate text-sm ${E?"font-bold text-gray-700":"font-medium text-gray-800"}`,children:m.name})]}),l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:w[1].width},children:E?"-":m.cp?`${m.cp.workDaysTotal+m.cp.nonWorkDaysTotal}일`:"-"}),l.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-vermilion",style:{width:w[2].width},children:E?"-":m.cp?`${m.cp.workDaysTotal}일`:"-"})]},g.key)})})]})]}):l.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[l.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:gt},children:[l.jsxs("div",{className:"flex flex-1 items-center justify-between px-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"font-bold text-gray-700",children:"주공정표 (Level 2)"}),f&&l.jsx("button",{onClick:f,className:"flex items-center gap-1 rounded bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 hover:bg-gray-200 transition-colors",title:"첫 번째 작업으로 스크롤",children:"◀ 첫 작업"}),h&&!R&&l.jsxs("button",{onClick:B,className:"flex items-center gap-1 rounded bg-blue-500 px-2 py-1 text-xs font-medium text-white hover:bg-blue-600 transition-colors",title:"새 공정 추가",children:[l.jsx(or,{size:12}),"추가"]})]}),l.jsx("button",{onClick:i,className:"rounded bg-gray-200 px-3 py-1 text-xs font-medium text-gray-700 hover:bg-gray-300",children:"← 공구 공정표로"})]}),At()]}),le!==null&&l.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),l.jsxs("div",{ref:p,className:"relative flex-1 overflow-auto",children:[l.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:yt,minWidth:A},children:w.map((g,m)=>l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:g.width},children:m===0&&"Milestone"},g.id))}),l.jsxs("div",{style:{minWidth:A,height:T?c:void 0,position:"relative"},children:[(T?b:e.map((g,m)=>({index:m,start:m*me,size:me,key:m}))).map(g=>{const m=e[g.index];if(!m)return null;const E=X===m.id,L=O===m.id;return l.jsxs("div",{draggable:!!u,onDragStart:k=>Vr(k,m.id),onDragOver:k=>qr(k,m.id),onDragLeave:Xr,onDrop:k=>Br(k,m.id),onDragEnd:Ur,className:`box-border flex items-center border-b transition-colors ${E?"opacity-50 bg-blue-50":L?P==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":"border-b-2 border-b-blue-500":"border-gray-100 hover:bg-gray-50"}`,style:{height:me,...T?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${g.start}px)`}:{}},children:[u&&l.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:l.jsx(ir,{size:14})}),l.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:u?w[0].width-24:w[0].width},children:l.jsx("span",{className:"truncate text-sm text-gray-700",children:m.name})}),l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:w[1].width},children:m.task?l.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:m.task.indirectWorkDaysPre,onChange:k=>{const K=k.target.value.replace(/[^0-9]/g,""),C=parseInt(K)||0;q(m,"indirectWorkDaysPre",C)},onKeyDown:k=>{(k.key==="-"||k.key==="e"||k.key==="+"||k.key===".")&&k.preventDefault()},title:"선 간접작업일 (바 드래그로도 조절 가능)"}):l.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:w[2].width},children:m.task?l.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-red-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-red-500 focus:outline-none focus:ring-1 focus:ring-red-500",value:m.task.netWorkDays,onChange:k=>{const K=k.target.value.replace(/[^0-9]/g,""),C=parseInt(K)||0;q(m,"netWorkDays",C)},onKeyDown:k=>{(k.key==="-"||k.key==="e"||k.key==="+"||k.key===".")&&k.preventDefault()},title:"순작업일"}):l.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:w[3].width},children:m.task?l.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:m.task.indirectWorkDaysPost,onChange:k=>{const K=k.target.value.replace(/[^0-9]/g,""),C=parseInt(K)||0;q(m,"indirectWorkDaysPost",C)},onKeyDown:k=>{(k.key==="-"||k.key==="e"||k.key==="+"||k.key===".")&&k.preventDefault()},title:"후 간접작업일 (바 드래그로도 조절 가능)"}):l.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:w[4].width},children:re(m.startDate,"yyyy-MM-dd")}),l.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-gray-500",style:{width:w[5].width},children:re(m.endDate,"yyyy-MM-dd")})]},g.key)}),R&&l.jsxs("div",{className:"box-border flex items-center border-b-2 border-blue-300 bg-blue-50 transition-colors",style:{height:me,...T?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${e.length*me}px)`}:{}},children:[l.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-blue-200 px-2",style:{width:w[0].width},children:l.jsx("input",{ref:U,type:"text",placeholder:"공정명...",className:"w-full rounded border border-blue-300 bg-white px-2 py-1 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:W.name,onChange:g=>H(m=>({...m,name:g.target.value})),onKeyDown:Te})}),l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:w[1].width},children:l.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:W.indirectWorkDaysPre,onChange:g=>{const m=g.target.value.replace(/[^0-9]/g,""),E=parseInt(m)||0;H(L=>({...L,indirectWorkDaysPre:E}))},onKeyDown:Te,title:"선 간접작업일"})}),l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:w[2].width},children:l.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:W.netWorkDays,onChange:g=>{const m=g.target.value.replace(/[^0-9]/g,""),E=parseInt(m)||0;H(L=>({...L,netWorkDays:E}))},onKeyDown:Te,title:"순작업일"})}),l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:w[3].width},children:l.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:W.indirectWorkDaysPost,onChange:g=>{const m=g.target.value.replace(/[^0-9]/g,""),E=parseInt(m)||0;H(L=>({...L,indirectWorkDaysPost:E}))},onKeyDown:Te,title:"후 간접작업일"})}),l.jsxs("div",{className:"flex shrink-0 items-center justify-center gap-1 px-2",style:{width:w[4].width+w[5].width},children:[l.jsx("button",{onClick:Ce,disabled:!W.name.trim(),className:"flex items-center justify-center rounded bg-blue-500 p-1.5 text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",title:"저장 (Enter)",children:l.jsx(rr,{size:14})}),l.jsx("button",{onClick:ye,className:"flex items-center justify-center rounded bg-gray-400 p-1.5 text-white hover:bg-gray-500 transition-colors",title:"취소 (Esc)",children:l.jsx(lr,{size:14})})]})]})]})]})]})});qe.displayName="GanttSidebar";const we=(e,n=[],t)=>!!(!t.workOnSaturdays&&et(e)||!t.workOnSundays&&tt(e)||!t.workOnHolidays&&n.some(r=>Xt(r,e))),cr=e=>et(e)||tt(e),wt=(e,n,t=[],r)=>{let s=new Date(e),a=0;if(n<=0)return s;for(;we(s,t,r);)s=Y(s,1);for(;a<n;)we(s,t,r)||a++,a<n&&(s=Y(s,1));return s},dr=(e,n,t=[],r)=>{let s=new Date(e),a=0;if(n<=0)return s;for(;a<n;)s=Y(s,-1),we(s,t,r)||a++;return s},Xe=(e,n)=>n<=0?e:Y(e,n-1),ur=(e,n=[],t)=>{if(!e.task)return{startDate:e.startDate,endDate:e.endDate,netWorkStartDate:e.startDate,netWorkEndDate:e.endDate};const{netWorkDays:r,indirectWorkDaysPre:s,indirectWorkDaysPost:a}=e.task,i=Ne(new Date(e.startDate));let o=i,h,u;s>0&&(h=o,u=Xe(o,s),o=Y(u,1));let f=o,D=f;if(r>0){for(;we(f,n,t);)f=Y(f,1);D=wt(f,r,n,t),o=Y(D,1)}else s===0&&(f=i,D=i);let b,c;return a>0&&(b=o,c=Xe(o,a)),{startDate:h||f,endDate:c||D,netWorkStartDate:f,netWorkEndDate:D,indirectPreStartDate:h,indirectPreEndDate:u,indirectPostStartDate:b,indirectPostEndDate:c}},hr=(e,n,t)=>{switch(n){case"START":return t.startDate;case"NET_WORK_START":return t.netWorkStartDate;case"NET_WORK_END":return t.netWorkEndDate;case"END":return t.endDate;default:return t.endDate}},Fe=(e,n,t)=>$e(e,n)*t,fr=(e,n,t)=>{const r=Math.round(e/t);return Y(n,r)},mr=(e,n,t)=>($e(n,e)+1)*t,gr=e=>_e[e].pixelsPerDay,Be=(e,n=[],t=5)=>{const r=[...e.flatMap(u=>[u.startDate,u.endDate].filter(Boolean)),...n.map(u=>u.date)];if(r.length===0){const u=new Date;return{minDate:u,maxDate:Y(u,30),totalDays:30}}const s=new Date(Math.min(...r.map(u=>u.getTime()))),a=new Date(Math.max(...r.map(u=>u.getTime()))),i=Y(s,-t),o=Y(a,t),h=$e(o,i);return{minDate:i,maxDate:o,totalDays:h}},{ROW_HEIGHT:te,HEADER_HEIGHT:yr,MILESTONE_LANE_HEIGHT:ae,BAR_HEIGHT:Q}=fe,br=({minDate:e,totalDays:n,pixelsPerDay:t,zoomLevel:r,holidays:s,calendarSettings:a})=>{const i=Array.from({length:n},(b,c)=>Y(e,c)),o=n*t,h=y.useMemo(()=>{const b=[];let c=Ve(i[0]),x=0;return i.forEach(p=>{Ve(p)!==c?(b.push({label:`${c}년`,days:x}),c=Ve(p),x=1):x++}),b.push({label:`${c}년`,days:x}),b},[i]),u=y.useMemo(()=>{const b=[];let c=i[0],x=0;return i.forEach(p=>{Kn(p,c)?x++:(b.push({label:re(c,"M월"),days:x}),c=p,x=1)}),b.push({label:re(c,"M월"),days:x}),b},[i]),f=y.useMemo(()=>{if(r==="MONTH")return null;if(r==="DAY")return l.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:o},children:i.map((b,c)=>{const x=ze(b),p=we(b,s,a),T=x===0,R=x===6;let N="text-gray-600";T&&(N="text-red-500"),R&&(N="text-blue-500"),p&&!T&&!R&&(N="text-red-500");let W="";return T||p&&!R?W="bg-red-50/50":R&&(W="bg-blue-50/50"),l.jsxs("div",{className:`flex h-full shrink-0 flex-col items-center justify-center border-r border-gray-100 font-medium ${W}`,style:{width:t,minWidth:t},children:[l.jsx("span",{className:`text-[10px] leading-none ${N}`,children:re(b,"d")}),l.jsx("span",{className:`mt-0.5 text-[9px] font-bold leading-none ${N}`,children:["일","월","화","수","목","금","토"][x]})]},c)})});{const b=[];let c=i[0],x=0;return i.forEach(p=>{Qn(p,c,{weekStartsOn:0})?x++:(b.push({label:`${ht(c,{weekStartsOn:0})}주`,days:x}),c=p,x=1)}),b.push({label:`${ht(c,{weekStartsOn:0})}주`,days:x}),l.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:o},children:b.map((p,T)=>l.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-100 text-xs font-medium text-gray-600",style:{width:p.days*t},children:p.label},T))})}},[i,r,t,s,a,o]),D=r==="MONTH";return l.jsx("div",{className:"sticky top-0 z-20 flex flex-col border-b border-gray-300 bg-white shadow-sm",style:{height:yr,minWidth:o},children:D?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex h-[48px] items-center border-b border-gray-300 bg-gray-100 text-sm font-bold text-gray-800",style:{minWidth:o},children:h.map((b,c)=>l.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-300",style:{width:b.days*t},children:b.label},c))}),l.jsx("div",{className:"flex h-[32px] items-center bg-white text-xs font-medium text-gray-700",style:{minWidth:o},children:u.map((b,c)=>l.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-200",style:{width:b.days*t},children:b.label},c))})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-300 bg-gray-100 text-xs font-bold text-gray-800",style:{minWidth:o},children:h.map((b,c)=>l.jsx("div",{className:"flex shrink-0 items-center border-r border-gray-300 pl-2",style:{width:b.days*t},children:b.label},c))}),l.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-200 bg-gray-100 text-xs font-medium text-gray-700",style:{minWidth:o},children:u.map((b,c)=>l.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-300",style:{width:b.days*t},children:b.label},c))}),f]})})},xr=({minDate:e,totalDays:n,chartHeight:t,pixelsPerDay:r,holidays:s,calendarSettings:a,zoomLevel:i})=>{const o=y.useMemo(()=>{if(i==="MONTH")return[];const h=[];for(let u=0;u<n;u++){const f=Y(e,u),D=ze(f),b=D===0,c=D===6;if(we(f,s,a)||c){const p=u*r;let T="rgba(254, 242, 242, 0.5)";c&&!b&&(T="rgba(239, 246, 255, 0.5)"),b&&(T="rgba(254, 242, 242, 0.5)"),h.push(l.jsx("rect",{x:p,y:0,width:r,height:t,fill:T,className:"pointer-events-none"},`weekend-${u}`))}}return h},[e,n,t,r,s,a,i]);return l.jsx("g",{children:o})},wr=({milestone:e,x:n})=>{const r=ae/2;return l.jsxs("g",{transform:`translate(${n}, ${r})`,className:"group cursor-pointer",children:[l.jsx("line",{x1:0,y1:0,x2:0,y2:1e3,stroke:se.grid,strokeWidth:2,strokeDasharray:"4, 4",className:"opacity-0 transition-opacity duration-200 group-hover:opacity-100"}),l.jsx("path",{d:`M ${-12/2} ${-12/2} L ${12/2} ${-12/2} L 0 ${12/2} Z`,fill:se.milestone,stroke:"white",strokeWidth:1,className:"drop-shadow-sm transition-all duration-150 group-hover:scale-125 group-hover:fill-blue-600"}),l.jsx("text",{x:-8,y:4,textAnchor:"end",className:"select-none text-[11px] font-bold fill-gray-600 transition-colors group-hover:fill-blue-700",children:e.name})]})},pr=({task:e,y:n,minDate:t,pixelsPerDay:r,isMasterView:s,isDraggable:a=!1,dragInfo:i,onDragStart:o})=>{var c,x;if(e.type==="GROUP")return null;const h=4,u=!!i,f=(i==null?void 0:i.startDate)||e.startDate,D=(i==null?void 0:i.endDate)||e.endDate,b=Fe(f,t,r);if(s){const p=((c=e.cp)==null?void 0:c.workDaysTotal)||0,T=((x=e.cp)==null?void 0:x.nonWorkDaysTotal)||0;if(p+T===0)return null;const N=p*r,W=T*r;return l.jsxs("g",{transform:`translate(${b}, ${n})`,className:"group cursor-pointer",children:[l.jsx("rect",{x:0,y:0,width:N,height:Q,fill:se.vermilion,rx:h,ry:h,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),l.jsx("rect",{x:N,y:0,width:W,height:Q,fill:se.teal,rx:h,ry:h,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),l.jsx("text",{x:-8,y:Q/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-bold fill-gray-700",children:e.name})]})}else{if(!e.task)return null;const{netWorkDays:p,indirectWorkDaysPre:T,indirectWorkDaysPost:R}=e.task,N=(i==null?void 0:i.indirectWorkDaysPre)??T,W=(i==null?void 0:i.indirectWorkDaysPost)??R,H=N*r,U=p*r,X=W*r,S=H+U+X,O=0,_=H,P=H+U,F=8,$={startDate:f,endDate:D,indirectWorkDaysPre:N,netWorkDays:p,indirectWorkDaysPost:W};return l.jsxs("g",{transform:`translate(${b}, ${n})`,className:`group ${u?"opacity-90":""}`,children:[a&&l.jsx("rect",{x:H,y:0,width:U,height:Q,fill:"transparent",className:"cursor-grab active:cursor-grabbing",onMouseDown:G=>o==null?void 0:o(G,e.id,"move",$)}),N>0&&l.jsx("rect",{x:O,y:0,width:H,height:Q,fill:se.blue,rx:h,ry:h,className:`drop-shadow-sm transition-opacity ${u?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),p>0&&l.jsx("rect",{x:_,y:0,width:U,height:Q,fill:se.red,rx:h,ry:h,className:`drop-shadow-sm transition-opacity ${u?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),W>0&&l.jsx("rect",{x:P,y:0,width:X,height:Q,fill:se.blue,rx:h,ry:h,className:`drop-shadow-sm transition-opacity ${u?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:a?"none":"auto"}}),a&&l.jsx("rect",{x:-F/2,y:0,width:F,height:Q,fill:"transparent",className:"cursor-ew-resize",onMouseDown:G=>o==null?void 0:o(G,e.id,"resize-pre",$),children:l.jsx("title",{children:"앞 간접작업일 조절 (드래그)"})}),a&&l.jsx("rect",{x:S-F/2,y:0,width:F,height:Q,fill:"transparent",className:"cursor-ew-resize",onMouseDown:G=>o==null?void 0:o(G,e.id,"resize-post",$),children:l.jsx("title",{children:"뒤 간접작업일 조절 (드래그)"})}),a&&l.jsxs(l.Fragment,{children:[l.jsx("rect",{x:1,y:Q/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"}),l.jsx("rect",{x:S-4,y:Q/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"})]}),l.jsx("text",{x:-8,y:Q/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-medium fill-gray-700",children:e.name}),u&&l.jsxs("g",{children:[l.jsxs("text",{x:S/2,y:-6,textAnchor:"middle",className:"pointer-events-none select-none text-[10px] font-bold fill-blue-600",children:[re(f,"MM/dd")," ~ ",re(D,"MM/dd")]}),l.jsxs("text",{x:S/2,y:Q+12,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-gray-500",children:["앞",N,"일 + 순",p,"일 + 뒤",W,"일"]})]})]})}},vr=()=>l.jsx("defs",{children:l.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:l.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:se.dependency})})}),Ue=y.forwardRef(({tasks:e,milestones:n,viewMode:t,zoomLevel:r,holidays:s,calendarSettings:a,onBarDrag:i,virtualRows:o,totalHeight:h},u)=>{const f=_e[r].pixelsPerDay,D=t==="MASTER",b=o&&o.length>0,[c,x]=y.useState(null),{minDate:p,totalDays:T}=y.useMemo(()=>Be(e,n,60),[e,n]),R=T*f,N=Math.max(b?(h||0)+ae+100:e.length*te+ae+100,500),W=y.useCallback((S,O,_,P)=>{i&&(S.preventDefault(),S.stopPropagation(),x({taskId:O,dragType:_,startX:S.clientX,originalStartDate:P.startDate,originalEndDate:P.endDate,originalIndirectWorkDaysPre:P.indirectWorkDaysPre,originalNetWorkDays:P.netWorkDays,originalIndirectWorkDaysPost:P.indirectWorkDaysPost,currentStartDate:P.startDate,currentEndDate:P.endDate,currentIndirectWorkDaysPre:P.indirectWorkDaysPre,currentIndirectWorkDaysPost:P.indirectWorkDaysPost}))},[i]),H=y.useCallback(S=>{if(!c||!i)return;const O=S.clientX-c.startX,_=Math.round(O/f);let P=c.originalStartDate,F=c.originalEndDate,$=c.originalIndirectWorkDaysPre,G=c.originalIndirectWorkDaysPost;if(c.dragType==="move")P=Y(c.originalStartDate,_),F=Y(c.originalEndDate,_);else if(c.dragType==="resize-pre"){$=Math.max(0,c.originalIndirectWorkDaysPre-_),P=Y(c.originalStartDate,-(-_+($-c.originalIndirectWorkDaysPre)));const J=Y(c.originalStartDate,c.originalIndirectWorkDaysPre);P=Y(J,-$),F=c.originalEndDate}else if(c.dragType==="resize-post"){G=Math.max(0,c.originalIndirectWorkDaysPost+_);const J=Y(c.originalEndDate,-c.originalIndirectWorkDaysPost);F=Y(J,G),P=c.originalStartDate}x(J=>J?{...J,currentStartDate:P,currentEndDate:F,currentIndirectWorkDaysPre:$,currentIndirectWorkDaysPost:G}:null)},[c,i,f]),U=y.useCallback(()=>{if(!c||!i){x(null);return}const S=c.currentStartDate.getTime()!==c.originalStartDate.getTime()||c.currentEndDate.getTime()!==c.originalEndDate.getTime(),O=c.currentIndirectWorkDaysPre!==c.originalIndirectWorkDaysPre||c.currentIndirectWorkDaysPost!==c.originalIndirectWorkDaysPost;(S||O)&&i({taskId:c.taskId,dragType:c.dragType,newStartDate:c.currentStartDate,newEndDate:c.currentEndDate,newIndirectWorkDaysPre:c.currentIndirectWorkDaysPre,newIndirectWorkDaysPost:c.currentIndirectWorkDaysPost}),x(null)},[c,i]);y.useEffect(()=>{if(c)return window.addEventListener("mousemove",H),window.addEventListener("mouseup",U),document.body.style.cursor=c.dragType==="move"?"grabbing":"ew-resize",document.body.style.userSelect="none",()=>{window.removeEventListener("mousemove",H),window.removeEventListener("mouseup",U),document.body.style.cursor="",document.body.style.userSelect=""}},[c,H,U]);const X=y.useCallback(S=>c&&c.taskId===S?{startDate:c.currentStartDate,endDate:c.currentEndDate,indirectWorkDaysPre:c.currentIndirectWorkDaysPre,indirectWorkDaysPost:c.currentIndirectWorkDaysPost}:null,[c]);return l.jsx("div",{className:"flex h-full w-full flex-col overflow-hidden bg-white",children:l.jsxs("div",{ref:u,className:"relative flex-1 overflow-auto",children:[l.jsx(br,{minDate:p,totalDays:T,pixelsPerDay:f,zoomLevel:r,holidays:s,calendarSettings:a}),l.jsxs("svg",{width:R,height:N,className:"block bg-white",children:[l.jsx(vr,{}),l.jsx(xr,{minDate:p,totalDays:T,chartHeight:N,pixelsPerDay:f,holidays:s,calendarSettings:a,zoomLevel:r}),(b?o:e.map((S,O)=>({index:O,start:O*te,size:te,key:O}))).map(S=>{const O=e[S.index];if(!O||O.type!=="GROUP")return null;const _=S.start+ae;return l.jsx("rect",{x:0,y:_,width:R,height:te,fill:"rgba(249, 250, 251, 0.6)",className:"pointer-events-none"},`group-bg-${S.key}`)}),Array.from({length:T},(S,O)=>{const _=(O+1)*f,P=Y(p,O),F=ze(P);let $=!1,G="#f0f0f0";return r==="DAY"?($=!0,G=F===0?"#e0e0e0":"#f0f0f0"):r==="WEEK"?($=F===0,G="#e5e7eb"):r==="MONTH"&&($=F===0,G="#f0f0f0"),$?l.jsx("line",{x1:_,y1:0,x2:_,y2:N,stroke:G,strokeWidth:1},`vline-${O}`):null}),(b?o:e.map((S,O)=>({index:O,start:O*te,size:te,key:O}))).map(S=>l.jsx("line",{x1:0,y1:S.start+te+ae,x2:R,y2:S.start+te+ae,stroke:"#f3f4f6",strokeWidth:1},`line-${S.key}`)),l.jsx("rect",{x:0,y:0,width:R,height:ae,fill:"transparent"}),n.map(S=>l.jsx(wr,{milestone:S,x:Fe(S.date,p,f)},S.id)),l.jsx("line",{x1:0,y1:ae,x2:R,y2:ae,stroke:se.grid,strokeWidth:1}),(b?o:e.map((S,O)=>({index:O,start:O*te,size:te,key:O}))).map(S=>{const O=e[S.index];if(!O)return null;const _=S.start+(te-Q)/2+ae;return l.jsx(pr,{task:O,y:_,minDate:p,pixelsPerDay:f,isMasterView:D,isDraggable:!D&&!!i,dragInfo:X(O.id),onDragStart:W},S.key)})]})]})})});Ue.displayName="GanttTimeline";const pt=e=>{let n;const t=new Set,r=(u,f)=>{const D=typeof u=="function"?u(n):u;if(!Object.is(D,n)){const b=n;n=f??(typeof D!="object"||D===null)?D:Object.assign({},n,D),t.forEach(c=>c(n,b))}},s=()=>n,o={setState:r,getState:s,getInitialState:()=>h,subscribe:u=>(t.add(u),()=>t.delete(u))},h=n=e(r,s,o);return o},Dr=e=>e?pt(e):pt,kr=e=>e;function Er(e,n=kr){const t=y.useSyncExternalStore(e.subscribe,y.useCallback(()=>n(e.getState()),[e,n]),y.useCallback(()=>n(e.getInitialState()),[e,n]));return y.useDebugValue(t),t}const vt=e=>{const n=Dr(e),t=r=>Er(n,r);return Object.assign(t,n),t},Tr=e=>e?vt(e):vt,Dt=e=>Symbol.iterator in e,kt=e=>"entries"in e,Et=(e,n)=>{const t=e instanceof Map?e:new Map(e.entries()),r=n instanceof Map?n:new Map(n.entries());if(t.size!==r.size)return!1;for(const[s,a]of t)if(!r.has(s)||!Object.is(a,r.get(s)))return!1;return!0},Sr=(e,n)=>{const t=e[Symbol.iterator](),r=n[Symbol.iterator]();let s=t.next(),a=r.next();for(;!s.done&&!a.done;){if(!Object.is(s.value,a.value))return!1;s=t.next(),a=r.next()}return!!s.done&&!!a.done};function Mr(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:Dt(e)&&Dt(n)?kt(e)&&kt(n)?Et(e,n):Sr(e,n):Et({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function ke(e){const n=y.useRef(void 0);return t=>{const r=e(t);return Mr(n.current,r)?n.current:n.current=r}}const pe=Tr((e,n)=>({viewMode:"MASTER",activeCPId:null,zoomLevel:"MONTH",selectedTaskId:null,hoveredTaskId:null,expandedTaskIds:new Set,sidebarWidth:fe.SIDEBAR_WIDTH,isDragging:!1,dragType:null,dragTaskId:null,setViewMode:(t,r)=>{e({viewMode:t,activeCPId:r??null,zoomLevel:t==="DETAIL"?"DAY":"MONTH"})},setZoomLevel:t=>{e({zoomLevel:t})},selectTask:t=>{e({selectedTaskId:t})},hoverTask:t=>{e({hoveredTaskId:t})},toggleTask:t=>{const{expandedTaskIds:r}=n(),s=new Set(r);s.has(t)?s.delete(t):s.add(t),e({expandedTaskIds:s})},expandAll:t=>{e({expandedTaskIds:new Set(t)})},collapseAll:()=>{e({expandedTaskIds:new Set})},setSidebarWidth:t=>{const r=Math.max(fe.SIDEBAR_MIN_WIDTH,Math.min(t,fe.SIDEBAR_MAX_WIDTH));e({sidebarWidth:r})},startDrag:(t,r)=>{e({isDragging:!0,dragType:t,dragTaskId:r})},endDrag:()=>{e({isDragging:!1,dragType:null,dragTaskId:null})}})),Tt=()=>pe(ke(e=>({viewMode:e.viewMode,activeCPId:e.activeCPId,zoomLevel:e.zoomLevel}))),St=()=>pe(ke(e=>({setViewMode:e.setViewMode,setZoomLevel:e.setZoomLevel}))),Wr=()=>pe(ke(e=>({selectedTaskId:e.selectedTaskId,hoveredTaskId:e.hoveredTaskId,selectTask:e.selectTask,hoverTask:e.hoverTask}))),Mt=()=>pe(ke(e=>({expandedTaskIds:e.expandedTaskIds,toggleTask:e.toggleTask,expandAll:e.expandAll,collapseAll:e.collapseAll}))),Wt=()=>pe(ke(e=>({sidebarWidth:e.sidebarWidth,setSidebarWidth:e.setSidebarWidth}))),Or=()=>pe(ke(e=>({isDragging:e.isDragging,dragType:e.dragType,dragTaskId:e.dragTaskId,startDrag:e.startDrag,endDrag:e.endDrag})));function Ee(e,n,t){let r=t.initialDeps??[],s;function a(){var i,o,h,u;let f;t.key&&((i=t.debug)!=null&&i.call(t))&&(f=Date.now());const D=e();if(!(D.length!==r.length||D.some((x,p)=>r[p]!==x)))return s;r=D;let c;if(t.key&&((o=t.debug)!=null&&o.call(t))&&(c=Date.now()),s=n(...D),t.key&&((h=t.debug)!=null&&h.call(t))){const x=Math.round((Date.now()-f)*100)/100,p=Math.round((Date.now()-c)*100)/100,T=p/16,R=(N,W)=>{for(N=String(N);N.length<W;)N=" "+N;return N};console.info(`%c⏱ ${R(p,5)} /${R(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*T,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,s),s}return a.updateDeps=i=>{r=i},a}function Ot(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const Nr=(e,n)=>Math.abs(e-n)<1.01,jr=(e,n,t)=>{let r;return function(...s){e.clearTimeout(r),r=e.setTimeout(()=>n.apply(this,s),t)}},Nt=e=>{const{offsetWidth:n,offsetHeight:t}=e;return{width:n,height:t}},Pr=e=>e,_r=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=n;s<=t;s++)r.push(s);return r},Cr=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;const s=i=>{const{width:o,height:h}=i;n({width:Math.round(o),height:Math.round(h)})};if(s(Nt(t)),!r.ResizeObserver)return()=>{};const a=new r.ResizeObserver(i=>{const o=()=>{const h=i[0];if(h!=null&&h.borderBoxSize){const u=h.borderBoxSize[0];if(u){s({width:u.inlineSize,height:u.blockSize});return}}s(Nt(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},jt={passive:!0},Pt=typeof window>"u"?!0:"onscrollend"in window,Ir=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;let s=0;const a=e.options.useScrollendEvent&&Pt?()=>{}:jr(r,()=>{n(s,!1)},e.options.isScrollingResetDelay),i=f=>()=>{const{horizontal:D,isRtl:b}=e.options;s=D?t.scrollLeft*(b&&-1||1):t.scrollTop,a(),n(s,f)},o=i(!0),h=i(!1);h(),t.addEventListener("scroll",o,jt);const u=e.options.useScrollendEvent&&Pt;return u&&t.addEventListener("scrollend",h,jt),()=>{t.removeEventListener("scroll",o),u&&t.removeEventListener("scrollend",h)}},Ar=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const r=n.borderBoxSize[0];if(r)return Math.round(r[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},zr=(e,{adjustments:n=0,behavior:t},r)=>{var s,a;const i=e+n;(a=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||a.call(s,{[r.options.horizontal?"left":"top"]:i,behavior:t})};class Rr{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const r=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(s=>{s.forEach(a=>{const i=()=>{this._measureElement(a.target,a)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),t=null},observe:s=>{var a;return(a=r())==null?void 0:a.observe(s,{box:"border-box"})},unobserve:s=>{var a;return(a=r())==null?void 0:a.unobserve(s)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([r,s])=>{typeof s>"u"&&delete t[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Pr,rangeExtractor:_r,onChange:()=>{},measureElement:Ar,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,t)},this.maybeNotify=Ee(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:process.env.NODE_ENV!=="production"&&"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=a,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,r)=>{const s=new Map,a=new Map;for(let i=r-1;i>=0;i--){const o=t[i];if(s.has(o.lane))continue;const h=a.get(o.lane);if(h==null||o.end>h.end?a.set(o.lane,o):o.end<h.end&&s.set(o.lane,!0),s.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((i,o)=>i.end===o.end?i.index-o.index:i.end-o.end)[0]:void 0},this.getMeasurementOptions=Ee(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,r,s,a,i)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:s,getItemKey:a,enabled:i}),{key:!1}),this.getMeasurements=Ee(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:r,scrollMargin:s,getItemKey:a,enabled:i},o)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(f=>{this.itemSizeCache.set(f.key,f.size)}));const h=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,h);for(let f=h;f<t;f++){const D=a(f),b=this.options.lanes===1?u[f-1]:this.getFurthestMeasurement(u,f),c=b?b.end+this.options.gap:r+s,x=o.get(D),p=typeof x=="number"?x:this.options.estimateSize(f),T=c+p,R=b?b.lane:f%this.options.lanes;u[f]={index:f,start:c,size:p,end:T,key:D,lane:R}}return this.measurementsCache=u,u},{key:process.env.NODE_ENV!=="production"&&"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=Ee(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,r,s,a)=>this.range=t.length>0&&r>0?Fr({measurements:t,outerSize:r,scrollOffset:s,lanes:a}):null,{key:process.env.NODE_ENV!=="production"&&"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=Ee(()=>{let t=null,r=null;const s=this.calculateRange();return s&&(t=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,r]},(t,r,s,a,i)=>a===null||i===null?[]:t({startIndex:a,endIndex:i,overscan:r,count:s}),{key:process.env.NODE_ENV!=="production"&&"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const r=this.options.indexAttribute,s=t.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(t,r)=>{const s=this.indexFromElement(t),a=this.measurementsCache[s];if(!a)return;const i=a.key,o=this.elementsCache.get(i);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.elementsCache.set(i,t)),t.isConnected&&this.resizeItem(s,this.options.measureElement(t,r,this))},this.resizeItem=(t,r)=>{const s=this.measurementsCache[t];if(!s)return;const a=this.itemSizeCache.get(s.key)??s.size,i=r-a;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,i,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("correction",i),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(t,void 0)},this.getVirtualItems=Ee(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,r)=>{const s=[];for(let a=0,i=t.length;a<i;a++){const o=t[a],h=r[o];s.push(h)}return s},{key:process.env.NODE_ENV!=="production"&&"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const r=this.getMeasurements();if(r.length!==0)return Ot(r[_t(0,r.length-1,s=>Ot(r[s]).start,t)])},this.getOffsetForAlignment=(t,r,s=0)=>{const a=this.getSize(),i=this.getScrollOffset();r==="auto"&&(r=t>=i+a?"end":"start"),r==="center"?t+=(s-a)/2:r==="end"&&(t-=a);const o=this.getTotalSize()+this.options.scrollMargin-a;return Math.max(Math.min(o,t),0)},this.getOffsetForIndex=(t,r="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const s=this.measurementsCache[t];if(!s)return;const a=this.getSize(),i=this.getScrollOffset();if(r==="auto")if(s.end>=i+a-this.options.scrollPaddingEnd)r="end";else if(s.start<=i+this.options.scrollPaddingStart)r="start";else return[i,r];const o=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(t,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let a=0;const i=10,o=u=>{if(!this.targetWindow)return;const f=this.getOffsetForIndex(t,u);if(!f){console.warn("Failed to get offset for index:",t);return}const[D,b]=f;this._scrollToOffset(D,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const c=this.getScrollOffset(),x=this.getOffsetForIndex(t,b);if(!x){console.warn("Failed to get offset for index:",t);return}Nr(x[0],c)||h(b)})},h=u=>{this.targetWindow&&(a++,a<i?(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("Schedule retry",a,i),this.targetWindow.requestAnimationFrame(()=>o(u))):console.warn(`Failed to scroll to index ${t} after ${i} attempts.`))};o(r)},this.scrollBy=(t,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var t;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((t=r[r.length-1])==null?void 0:t.end)??0;else{const a=Array(this.options.lanes).fill(null);let i=r.length-1;for(;i>=0&&a.some(o=>o===null);){const o=r[i];a[o.lane]===null&&(a[o.lane]=o.end),i--}s=Math.max(...a.filter(o=>o!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:r,behavior:s})=>{this.options.scrollToFn(t,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const _t=(e,n,t,r)=>{for(;e<=n;){const s=(e+n)/2|0,a=t(s);if(a<r)e=s+1;else if(a>r)n=s-1;else return s}return e>0?e-1:0};function Fr({measurements:e,outerSize:n,scrollOffset:t,lanes:r}){const s=e.length-1,a=h=>e[h].start;if(e.length<=r)return{startIndex:0,endIndex:s};let i=_t(0,s,a,t),o=i;if(r===1)for(;o<s&&e[o].end<t+n;)o++;else if(r>1){const h=Array(r).fill(0);for(;o<s&&h.some(f=>f<t+n);){const f=e[o];h[f.lane]=f.end,o++}const u=Array(r).fill(t+n);for(;i>=0&&u.some(f=>f>=t);){const f=e[i];u[f.lane]=f.start,i--}i=Math.max(0,i-i%r),o=Math.min(s,o+(r-1-o%r))}return{startIndex:i,endIndex:o}}const Ct=typeof document<"u"?Ie.useLayoutEffect:Ie.useEffect;function Lr(e){const n=Ie.useReducer(()=>({}),{})[1],t={...e,onChange:(s,a)=>{var i;a?Lt.flushSync(n):n(),(i=e.onChange)==null||i.call(e,s,a)}},[r]=Ie.useState(()=>new Rr(t));return r.setOptions(t),Ct(()=>r._didMount(),[]),Ct(()=>r._willUpdate()),r}function Yr(e){return Lr({observeElementRect:Cr,observeElementOffset:Ir,scrollToFn:zr,...e})}const{ROW_HEIGHT:Hr}=fe;function It({containerRef:e,count:n,rowHeight:t=Hr,overscan:r=5}){const s=Yr({count:n,getScrollElement:()=>e.current,estimateSize:()=>t,overscan:r});return{virtualRows:y.useMemo(()=>s.getVirtualItems().map(i=>({index:i.index,start:i.start,size:i.size,key:i.index})),[s.getVirtualItems()]),totalHeight:s.getTotalSize(),virtualizer:s}}const $r={workOnSaturdays:!1,workOnSundays:!1,workOnHolidays:!1};function Gr({tasks:e,milestones:n=[],holidays:t=[],calendarSettings:r=$r,initialView:s="MASTER",initialZoomLevel:a="MONTH",initialExpandedIds:i,onTaskUpdate:o,onTaskCreate:h,onTaskReorder:u,onViewChange:f,className:D,style:b}){const{viewMode:c,activeCPId:x,zoomLevel:p}=Tt(),{setViewMode:T,setZoomLevel:R}=St(),{sidebarWidth:N,setSidebarWidth:W}=Wt(),{expandedTaskIds:H,toggleTask:U,expandAll:X}=Mt(),S=y.useRef(null),O=y.useRef(null),_=y.useRef(null),P=y.useRef(!1),F=y.useRef(!1),[$,G]=y.useState(!1),J=y.useRef(!1);y.useEffect(()=>{J.current||(J.current=!0,T(s),R(a),i&&i.length>0?X(i):e.length>0&&X(e.map(v=>v.id)))},[e.length]);const oe=y.useMemo(()=>{if(c==="MASTER"){const v=[];return e.forEach(M=>{(M.wbsLevel===1&&!M.parentId||M.wbsLevel===1&&M.parentId&&H.has(M.parentId))&&v.push(M)}),v}else return e.filter(v=>v.wbsLevel===2&&v.parentId===x)},[e,c,x,H]),{virtualRows:le,totalHeight:ce}=It({containerRef:_,count:oe.length});y.useEffect(()=>{const v=O.current,M=_.current;if(!v||!M)return;const q=()=>{P.current||(P.current=!0,M.scrollTop=v.scrollTop,requestAnimationFrame(()=>{P.current=!1}))},B=()=>{P.current||(P.current=!0,v.scrollTop=M.scrollTop,requestAnimationFrame(()=>{P.current=!1}))};return v.addEventListener("scroll",q),M.addEventListener("scroll",B),()=>{v.removeEventListener("scroll",q),M.removeEventListener("scroll",B)}},[]);const[ne,Z]=y.useState(null),de=y.useCallback(v=>{v.preventDefault(),F.current=!0,G(!0);const M=v.clientX,q=N,B=Ce=>{if(!F.current)return;const Te=Ce.clientX-M;W(q+Te)},ye=()=>{F.current=!1,G(!1),document.removeEventListener("mousemove",B),document.removeEventListener("mouseup",ye)};document.addEventListener("mousemove",B),document.addEventListener("mouseup",ye)},[N,W]),d=y.useCallback(()=>{W(ne!==null?ne:fe.SIDEBAR_WIDTH)},[ne,W]),w=y.useCallback((v,M)=>{T(v,M),f==null||f(v,M)},[T,f]),z=y.useCallback(v=>{const M=_.current;if(!M)return;const q=_e[p].pixelsPerDay,{minDate:B}=Be(e,n,60),ye=Fe(v,B,q);M.scrollLeft=Math.max(0,ye-50)},[p,e,n]),A=y.useCallback(()=>{if(c!=="DETAIL"||!x)return;const v=e.filter(M=>M.parentId===x);if(v.length>0){const M=v.reduce((q,B)=>q.startDate<B.startDate?q:B);z(M.startDate)}},[c,x,e,z]),ge=y.useCallback(v=>{c==="MASTER"&&v.type==="CP"&&w("DETAIL",v.id)},[c,w]);y.useEffect(()=>{if(c==="DETAIL"&&x){const v=setTimeout(()=>{A()},100);return()=>clearTimeout(v)}},[c,x]);const ue=y.useCallback(v=>{if(!o)return;const M=e.find(B=>B.id===v.taskId);if(!M||!M.task)return;const q={...M,startDate:v.newStartDate,endDate:v.newEndDate,task:{...M.task,indirectWorkDaysPre:v.newIndirectWorkDaysPre,indirectWorkDaysPost:v.newIndirectWorkDaysPost}};o(q)},[e,o]);return l.jsxs("div",{ref:S,className:`flex h-full w-full flex-col bg-gray-50 ${D||""}`,style:b,children:[l.jsxs("header",{className:"flex h-[60px] shrink-0 items-center justify-between border-b border-gray-200 bg-white px-4 shadow-sm",children:[l.jsx("h1",{className:"flex items-center gap-2 text-xl font-extrabold text-gray-800",children:l.jsxs("span",{children:[l.jsx("span",{className:"text-teal",children:"건설"})," ",l.jsx("span",{className:"text-vermilion",children:"표준공정표"})," 관리 시스템"]})}),l.jsxs("div",{className:"flex items-center gap-4",children:[l.jsx("div",{className:"flex rounded bg-gray-100 p-1",children:(c==="MASTER"?["WEEK","MONTH"]:["DAY","WEEK"]).map(v=>l.jsx("button",{onClick:()=>R(v),className:`rounded px-3 py-1 text-xs font-medium transition-colors ${p===v?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:_e[v].label},v))}),l.jsxs("div",{className:"text-sm text-gray-500",children:["기준일: ",re(new Date,"yyyy-MM-dd")]})]})]}),l.jsxs("div",{className:"relative flex flex-1 overflow-hidden",children:[l.jsx("div",{className:"z-10 flex shrink-0 flex-col bg-white",style:{width:N},children:l.jsx(qe,{ref:O,tasks:oe,allTasks:e,viewMode:c,expandedIds:H,onToggle:U,onTaskClick:ge,onBackToMaster:()=>w("MASTER"),onTaskUpdate:o,onTaskCreate:h,onTaskReorder:u,onScrollToFirstTask:A,activeCPId:x,virtualRows:le,totalHeight:ce,onTotalWidthChange:Z})}),l.jsx("div",{className:`z-20 w-1 shrink-0 cursor-col-resize transition-colors ${$?"bg-blue-500":"bg-gray-200 hover:bg-gray-300"}`,onMouseDown:de,onDoubleClick:d,title:"드래그하여 너비 조절 / 더블클릭으로 초기화"}),l.jsx("div",{className:"relative flex flex-1 flex-col overflow-hidden bg-white",children:l.jsx(Ue,{ref:_,tasks:oe,milestones:n,viewMode:c,zoomLevel:p,holidays:t,calendarSettings:r,onTaskUpdate:o,onBarDrag:ue,virtualRows:le,totalHeight:ce})}),$&&l.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"})]})]})}j.GANTT_COLORS=se,j.GANTT_LAYOUT=fe,j.GanttChart=Gr,j.GanttSidebar=qe,j.GanttTimeline=Ue,j.ZOOM_CONFIG=_e,j.addCalendarDays=Xe,j.addWorkingDays=wt,j.calculateDateRange=Be,j.calculateDualCalendarDates=ur,j.dateToX=Fe,j.getAnchorDate=hr,j.getDateRangeWidth=mr,j.getPixelsPerDay=gr,j.isHoliday=we,j.isWeekend=cr,j.subtractWorkingDays=dr,j.useGanttDrag=Or,j.useGanttExpansion=Mt,j.useGanttSelection=Wr,j.useGanttSidebar=Wt,j.useGanttStore=pe,j.useGanttViewActions=St,j.useGanttViewState=Tt,j.useGanttVirtualization=It,j.xToDate=fr,Object.defineProperty(j,Symbol.toStringTag,{value:"Module"})});
