(function(G,c){typeof exports=="object"&&typeof module<"u"?c(exports,require("react"),require("react-dom")):typeof define=="function"&&define.amd?define(["exports","react","react-dom"],c):(G=typeof globalThis<"u"?globalThis:G||self,c(G.SaGanttLib={},G.React,G.ReactDOM))})(this,function(G,c,at){"use strict";"use client";function Wn(e){const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const t in e)if(t!=="default"){const r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:()=>e[t]})}}return n.default=e,Object.freeze(n)}const it=Wn(c);var kt={exports:{}},Xe={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ot;function Cn(){if(Ot)return Xe;Ot=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function t(r,a,i){var l=null;if(i!==void 0&&(l=""+i),a.key!==void 0&&(l=""+a.key),"key"in a){i={};for(var o in a)o!=="key"&&(i[o]=a[o])}else i=a;return a=i.ref,{$$typeof:e,type:r,key:l,ref:a!==void 0?a:null,props:i}}return Xe.Fragment=n,Xe.jsx=t,Xe.jsxs=t,Xe}var Ve={};/**
 * @license React
 * react-jsx-runtime.development.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _t;function Tn(){return _t||(_t=1,process.env.NODE_ENV!=="production"&&function(){function e(f){if(f==null)return null;if(typeof f=="function")return f.$$typeof===ne?null:f.displayName||f.name||null;if(typeof f=="string")return f;switch(f){case j:return"Fragment";case _:return"Profiler";case P:return"StrictMode";case z:return"Suspense";case I:return"SuspenseList";case Z:return"Activity"}if(typeof f=="object")switch(typeof f.tag=="number"&&console.error("Received an unexpected object in getComponentNameFromType(). This is likely a bug in React. Please file an issue."),f.$$typeof){case w:return"Portal";case A:return f.displayName||"Context";case Y:return(f._context.displayName||"Context")+".Consumer";case $:var N=f.render;return f=f.displayName,f||(f=N.displayName||N.name||"",f=f!==""?"ForwardRef("+f+")":"ForwardRef"),f;case T:return N=f.displayName||null,N!==null?N:e(f.type)||"Memo";case W:N=f._payload,f=f._init;try{return e(f(N))}catch{}}return null}function n(f){return""+f}function t(f){try{n(f);var N=!1}catch{N=!0}if(N){N=console;var C=N.error,O=typeof Symbol=="function"&&Symbol.toStringTag&&f[Symbol.toStringTag]||f.constructor.name||"Object";return C.call(N,"The provided key is an unsupported type %s. This value must be coerced to a string before using it here.",O),n(f)}}function r(f){if(f===j)return"<>";if(typeof f=="object"&&f!==null&&f.$$typeof===W)return"<...>";try{var N=e(f);return N?"<"+N+">":"<...>"}catch{return"<...>"}}function a(){var f=J.A;return f===null?null:f.getOwner()}function i(){return Error("react-stack-top-frame")}function l(f){if(oe.call(f,"key")){var N=Object.getOwnPropertyDescriptor(f,"key").get;if(N&&N.isReactWarning)return!1}return f.key!==void 0}function o(f,N){function C(){ae||(ae=!0,console.error("%s: `key` is not a prop. Trying to access it will result in `undefined` being returned. If you need to access the same value within the child component, you should pass it as a different prop. (https://react.dev/link/special-props)",N))}C.isReactWarning=!0,Object.defineProperty(f,"key",{get:C,configurable:!0})}function m(){var f=e(this.type);return re[f]||(re[f]=!0,console.error("Accessing element.ref was removed in React 19. ref is now a regular prop. It will be removed from the JSX Element type in a future release.")),f=this.props.ref,f!==void 0?f:null}function d(f,N,C,O,te,ce){var R=C.ref;return f={$$typeof:x,type:f,key:N,props:C,_owner:O},(R!==void 0?R:null)!==null?Object.defineProperty(f,"ref",{enumerable:!1,get:m}):Object.defineProperty(f,"ref",{enumerable:!1,value:null}),f._store={},Object.defineProperty(f._store,"validated",{configurable:!1,enumerable:!1,writable:!0,value:0}),Object.defineProperty(f,"_debugInfo",{configurable:!1,enumerable:!1,writable:!0,value:null}),Object.defineProperty(f,"_debugStack",{configurable:!1,enumerable:!1,writable:!0,value:te}),Object.defineProperty(f,"_debugTask",{configurable:!1,enumerable:!1,writable:!0,value:ce}),Object.freeze&&(Object.freeze(f.props),Object.freeze(f)),f}function u(f,N,C,O,te,ce){var R=N.children;if(R!==void 0)if(O)if(B(R)){for(O=0;O<R.length;O++)k(R[O]);Object.freeze&&Object.freeze(R)}else console.error("React.jsx: Static children should always be an array. You are likely explicitly calling React.jsxs or React.jsxDEV. Use the Babel transform instead.");else k(R);if(oe.call(N,"key")){R=e(f);var Q=Object.keys(N).filter(function(ue){return ue!=="key"});O=0<Q.length?"{key: someKey, "+Q.join(": ..., ")+": ...}":"{key: someKey}",g[R+O]||(Q=0<Q.length?"{"+Q.join(": ..., ")+": ...}":"{}",console.error(`A props object containing a "key" prop is being spread into JSX:
  let props = %s;
  <%s {...props} />
React keys must be passed directly to JSX without using spread:
  let props = %s;
  <%s key={someKey} {...props} />`,O,R,Q,R),g[R+O]=!0)}if(R=null,C!==void 0&&(t(C),R=""+C),l(N)&&(t(N.key),R=""+N.key),"key"in N){C={};for(var de in N)de!=="key"&&(C[de]=N[de])}else C=N;return R&&o(C,typeof f=="function"?f.displayName||f.name||"Unknown":f),d(f,R,C,a(),te,ce)}function k(f){v(f)?f._store&&(f._store.validated=1):typeof f=="object"&&f!==null&&f.$$typeof===W&&(f._payload.status==="fulfilled"?v(f._payload.value)&&f._payload.value._store&&(f._payload.value._store.validated=1):f._store&&(f._store.validated=1))}function v(f){return typeof f=="object"&&f!==null&&f.$$typeof===x}var p=c,x=Symbol.for("react.transitional.element"),w=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),A=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),W=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),ne=Symbol.for("react.client.reference"),J=p.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=Object.prototype.hasOwnProperty,B=Array.isArray,U=console.createTask?console.createTask:function(){return null};p={react_stack_bottom_frame:function(f){return f()}};var ae,re={},q=p.react_stack_bottom_frame.bind(p,i)(),E=U(r(i)),g={};Ve.Fragment=j,Ve.jsx=function(f,N,C){var O=1e4>J.recentlyCreatedOwnerStacks++;return u(f,N,C,!1,O?Error("react-stack-top-frame"):q,O?U(r(f)):E)},Ve.jsxs=function(f,N,C){var O=1e4>J.recentlyCreatedOwnerStacks++;return u(f,N,C,!0,O?Error("react-stack-top-frame"):q,O?U(r(f)):E)}}()),Ve}process.env.NODE_ENV==="production"?kt.exports=Cn():kt.exports=Tn();var s=kt.exports;const It=6048e5,Pn=864e5,At=Symbol.for("constructDateFrom");function ke(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&At in e?e[At](n):e instanceof Date?new e.constructor(n):new Date(n)}function ie(e,n){return ke(n||e,e)}function V(e,n,t){const r=ie(e,t==null?void 0:t.in);return isNaN(n)?ke(e,NaN):(n&&r.setDate(r.getDate()+n),r)}function zt(e,n){return ie(e,n==null?void 0:n.in).getDay()===6}function Lt(e,n){return ie(e,n==null?void 0:n.in).getDay()===0}let On={};function Be(){return On}function Se(e,n){var o,m,d,u;const t=Be(),r=(n==null?void 0:n.weekStartsOn)??((m=(o=n==null?void 0:n.locale)==null?void 0:o.options)==null?void 0:m.weekStartsOn)??t.weekStartsOn??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.weekStartsOn)??0,a=ie(e,n==null?void 0:n.in),i=a.getDay(),l=(i<r?7:0)+i-r;return a.setDate(a.getDate()-l),a.setHours(0,0,0,0),a}function ot(e,n){return Se(e,{...n,weekStartsOn:1})}function Ft(e,n){const t=ie(e,n==null?void 0:n.in),r=t.getFullYear(),a=ke(t,0);a.setFullYear(r+1,0,4),a.setHours(0,0,0,0);const i=ot(a),l=ke(t,0);l.setFullYear(r,0,4),l.setHours(0,0,0,0);const o=ot(l);return t.getTime()>=i.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function Ht(e){const n=ie(e),t=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return t.setUTCFullYear(n.getFullYear()),+e-+t}function qe(e,...n){const t=ke.bind(null,e||n.find(r=>typeof r=="object"));return n.map(t)}function Ke(e,n){const t=ie(e,n==null?void 0:n.in);return t.setHours(0,0,0,0),t}function $t(e,n,t){const[r,a]=qe(t==null?void 0:t.in,e,n),i=Ke(r),l=Ke(a),o=+i-Ht(i),m=+l-Ht(l);return Math.round((o-m)/Pn)}function _n(e,n){const t=Ft(e,n),r=ke(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ot(r)}function In(e,n,t){const[r,a]=qe(t==null?void 0:t.in,e,n);return+Ke(r)==+Ke(a)}function An(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function zn(e){return!(!An(e)&&typeof e!="number"||isNaN(+ie(e)))}function Dt(e,n,t){const[r,a]=qe(t==null?void 0:t.in,e,n),i=Gt(r,a),l=Math.abs($t(r,a));r.setDate(r.getDate()-i*l);const o=+(Gt(r,a)===-i),m=i*(l-o);return m===0?0:m}function Gt(e,n){const t=e.getFullYear()-n.getFullYear()||e.getMonth()-n.getMonth()||e.getDate()-n.getDate()||e.getHours()-n.getHours()||e.getMinutes()-n.getMinutes()||e.getSeconds()-n.getSeconds()||e.getMilliseconds()-n.getMilliseconds();return t<0?-1:t>0?1:t}function Ln(e,n){const t=ie(e,n==null?void 0:n.in);return t.setDate(1),t.setHours(0,0,0,0),t}function Fn(e,n){const t=ie(e,n==null?void 0:n.in);return t.setFullYear(t.getFullYear(),0,1),t.setHours(0,0,0,0),t}const Hn={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},$n=(e,n,t)=>{let r;const a=Hn[e];return typeof a=="string"?r=a:n===1?r=a.one:r=a.other.replace("{{count}}",n.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function jt(e){return(n={})=>{const t=n.width?String(n.width):e.defaultWidth;return e.formats[t]||e.formats[e.defaultWidth]}}const Gn={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Yn={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Rn={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Xn={date:jt({formats:Gn,defaultWidth:"full"}),time:jt({formats:Yn,defaultWidth:"full"}),dateTime:jt({formats:Rn,defaultWidth:"full"})},Vn={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Bn=(e,n,t,r)=>Vn[e];function Qe(e){return(n,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let a;if(r==="formatting"&&e.formattingValues){const l=e.defaultFormattingWidth||e.defaultWidth,o=t!=null&&t.width?String(t.width):l;a=e.formattingValues[o]||e.formattingValues[l]}else{const l=e.defaultWidth,o=t!=null&&t.width?String(t.width):e.defaultWidth;a=e.values[o]||e.values[l]}const i=e.argumentCallback?e.argumentCallback(n):n;return a[i]}}const qn={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Kn={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qn={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jn={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Un={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Zn={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},er={ordinalNumber:(e,n)=>{const t=Number(e),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},era:Qe({values:qn,defaultWidth:"wide"}),quarter:Qe({values:Kn,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Qe({values:Qn,defaultWidth:"wide"}),day:Qe({values:Jn,defaultWidth:"wide"}),dayPeriod:Qe({values:Un,defaultWidth:"wide",formattingValues:Zn,defaultFormattingWidth:"wide"})};function Je(e){return(n,t={})=>{const r=t.width,a=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],i=n.match(a);if(!i)return null;const l=i[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],m=Array.isArray(o)?nr(o,k=>k.test(l)):tr(o,k=>k.test(l));let d;d=e.valueCallback?e.valueCallback(m):m,d=t.valueCallback?t.valueCallback(d):d;const u=n.slice(l.length);return{value:d,rest:u}}}function tr(e,n){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)&&n(e[t]))return t}function nr(e,n){for(let t=0;t<e.length;t++)if(n(e[t]))return t}function rr(e){return(n,t={})=>{const r=n.match(e.matchPattern);if(!r)return null;const a=r[0],i=n.match(e.parsePattern);if(!i)return null;let l=e.valueCallback?e.valueCallback(i[0]):i[0];l=t.valueCallback?t.valueCallback(l):l;const o=n.slice(a.length);return{value:l,rest:o}}}const sr=/^(\d+)(th|st|nd|rd)?/i,ar=/\d+/i,ir={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},or={any:[/^b/i,/^(a|c)/i]},lr={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},cr={any:[/1/i,/2/i,/3/i,/4/i]},dr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},ur={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},hr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},fr={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},gr={ordinalNumber:rr({matchPattern:sr,parsePattern:ar,valueCallback:e=>parseInt(e,10)}),era:Je({matchPatterns:ir,defaultMatchWidth:"wide",parsePatterns:or,defaultParseWidth:"any"}),quarter:Je({matchPatterns:lr,defaultMatchWidth:"wide",parsePatterns:cr,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Je({matchPatterns:dr,defaultMatchWidth:"wide",parsePatterns:ur,defaultParseWidth:"any"}),day:Je({matchPatterns:hr,defaultMatchWidth:"wide",parsePatterns:fr,defaultParseWidth:"any"}),dayPeriod:Je({matchPatterns:mr,defaultMatchWidth:"any",parsePatterns:xr,defaultParseWidth:"any"})},yr={code:"en-US",formatDistance:$n,formatLong:Xn,formatRelative:Bn,localize:er,match:gr,options:{weekStartsOn:0,firstWeekContainsDate:1}};function br(e,n){const t=ie(e,n==null?void 0:n.in);return $t(t,Fn(t))+1}function pr(e,n){const t=ie(e,n==null?void 0:n.in),r=+ot(t)-+_n(t);return Math.round(r/It)+1}function Yt(e,n){var u,k,v,p;const t=ie(e,n==null?void 0:n.in),r=t.getFullYear(),a=Be(),i=(n==null?void 0:n.firstWeekContainsDate)??((k=(u=n==null?void 0:n.locale)==null?void 0:u.options)==null?void 0:k.firstWeekContainsDate)??a.firstWeekContainsDate??((p=(v=a.locale)==null?void 0:v.options)==null?void 0:p.firstWeekContainsDate)??1,l=ke((n==null?void 0:n.in)||e,0);l.setFullYear(r+1,0,i),l.setHours(0,0,0,0);const o=Se(l,n),m=ke((n==null?void 0:n.in)||e,0);m.setFullYear(r,0,i),m.setHours(0,0,0,0);const d=Se(m,n);return+t>=+o?r+1:+t>=+d?r:r-1}function wr(e,n){var o,m,d,u;const t=Be(),r=(n==null?void 0:n.firstWeekContainsDate)??((m=(o=n==null?void 0:n.locale)==null?void 0:o.options)==null?void 0:m.firstWeekContainsDate)??t.firstWeekContainsDate??((u=(d=t.locale)==null?void 0:d.options)==null?void 0:u.firstWeekContainsDate)??1,a=Yt(e,n),i=ke((n==null?void 0:n.in)||e,0);return i.setFullYear(a,0,r),i.setHours(0,0,0,0),Se(i,n)}function vr(e,n){const t=ie(e,n==null?void 0:n.in),r=+Se(t,n)-+wr(t,n);return Math.round(r/It)+1}function X(e,n){const t=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return t+r}const Ne={y(e,n){const t=e.getFullYear(),r=t>0?t:1-t;return X(n==="yy"?r%100:r,n.length)},M(e,n){const t=e.getMonth();return n==="M"?String(t+1):X(t+1,2)},d(e,n){return X(e.getDate(),n.length)},a(e,n){const t=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(e,n){return X(e.getHours()%12||12,n.length)},H(e,n){return X(e.getHours(),n.length)},m(e,n){return X(e.getMinutes(),n.length)},s(e,n){return X(e.getSeconds(),n.length)},S(e,n){const t=n.length,r=e.getMilliseconds(),a=Math.trunc(r*Math.pow(10,t-3));return X(a,n.length)}},Oe={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Rt={G:function(e,n,t){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return t.era(r,{width:"abbreviated"});case"GGGGG":return t.era(r,{width:"narrow"});case"GGGG":default:return t.era(r,{width:"wide"})}},y:function(e,n,t){if(n==="yo"){const r=e.getFullYear(),a=r>0?r:1-r;return t.ordinalNumber(a,{unit:"year"})}return Ne.y(e,n)},Y:function(e,n,t,r){const a=Yt(e,r),i=a>0?a:1-a;if(n==="YY"){const l=i%100;return X(l,2)}return n==="Yo"?t.ordinalNumber(i,{unit:"year"}):X(i,n.length)},R:function(e,n){const t=Ft(e);return X(t,n.length)},u:function(e,n){const t=e.getFullYear();return X(t,n.length)},Q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return X(r,2);case"Qo":return t.ordinalNumber(r,{unit:"quarter"});case"QQQ":return t.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,t){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return X(r,2);case"qo":return t.ordinalNumber(r,{unit:"quarter"});case"qqq":return t.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,t){const r=e.getMonth();switch(n){case"M":case"MM":return Ne.M(e,n);case"Mo":return t.ordinalNumber(r+1,{unit:"month"});case"MMM":return t.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,t){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return X(r+1,2);case"Lo":return t.ordinalNumber(r+1,{unit:"month"});case"LLL":return t.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,t,r){const a=vr(e,r);return n==="wo"?t.ordinalNumber(a,{unit:"week"}):X(a,n.length)},I:function(e,n,t){const r=pr(e);return n==="Io"?t.ordinalNumber(r,{unit:"week"}):X(r,n.length)},d:function(e,n,t){return n==="do"?t.ordinalNumber(e.getDate(),{unit:"date"}):Ne.d(e,n)},D:function(e,n,t){const r=br(e);return n==="Do"?t.ordinalNumber(r,{unit:"dayOfYear"}):X(r,n.length)},E:function(e,n,t){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return t.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(r,{width:"short",context:"formatting"});case"EEEE":default:return t.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,t,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return X(i,2);case"eo":return t.ordinalNumber(i,{unit:"day"});case"eee":return t.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(a,{width:"short",context:"formatting"});case"eeee":default:return t.day(a,{width:"wide",context:"formatting"})}},c:function(e,n,t,r){const a=e.getDay(),i=(a-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return X(i,n.length);case"co":return t.ordinalNumber(i,{unit:"day"});case"ccc":return t.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(a,{width:"narrow",context:"standalone"});case"cccccc":return t.day(a,{width:"short",context:"standalone"});case"cccc":default:return t.day(a,{width:"wide",context:"standalone"})}},i:function(e,n,t){const r=e.getDay(),a=r===0?7:r;switch(n){case"i":return String(a);case"ii":return X(a,n.length);case"io":return t.ordinalNumber(a,{unit:"day"});case"iii":return t.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(r,{width:"short",context:"formatting"});case"iiii":default:return t.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,t){const a=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,n,t){const r=e.getHours();let a;switch(r===12?a=Oe.noon:r===0?a=Oe.midnight:a=r/12>=1?"pm":"am",n){case"b":case"bb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,n,t){const r=e.getHours();let a;switch(r>=17?a=Oe.evening:r>=12?a=Oe.afternoon:r>=4?a=Oe.morning:a=Oe.night,n){case"B":case"BB":case"BBB":return t.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,n,t){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),t.ordinalNumber(r,{unit:"hour"})}return Ne.h(e,n)},H:function(e,n,t){return n==="Ho"?t.ordinalNumber(e.getHours(),{unit:"hour"}):Ne.H(e,n)},K:function(e,n,t){const r=e.getHours()%12;return n==="Ko"?t.ordinalNumber(r,{unit:"hour"}):X(r,n.length)},k:function(e,n,t){let r=e.getHours();return r===0&&(r=24),n==="ko"?t.ordinalNumber(r,{unit:"hour"}):X(r,n.length)},m:function(e,n,t){return n==="mo"?t.ordinalNumber(e.getMinutes(),{unit:"minute"}):Ne.m(e,n)},s:function(e,n,t){return n==="so"?t.ordinalNumber(e.getSeconds(),{unit:"second"}):Ne.s(e,n)},S:function(e,n){return Ne.S(e,n)},X:function(e,n,t){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return Vt(r);case"XXXX":case"XX":return Me(r);case"XXXXX":case"XXX":default:return Me(r,":")}},x:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"x":return Vt(r);case"xxxx":case"xx":return Me(r);case"xxxxx":case"xxx":default:return Me(r,":")}},O:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+Xt(r,":");case"OOOO":default:return"GMT"+Me(r,":")}},z:function(e,n,t){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+Xt(r,":");case"zzzz":default:return"GMT"+Me(r,":")}},t:function(e,n,t){const r=Math.trunc(+e/1e3);return X(r,n.length)},T:function(e,n,t){return X(+e,n.length)}};function Xt(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),a=Math.trunc(r/60),i=r%60;return i===0?t+String(a):t+String(a)+n+X(i,2)}function Vt(e,n){return e%60===0?(e>0?"-":"+")+X(Math.abs(e)/60,2):Me(e,n)}function Me(e,n=""){const t=e>0?"-":"+",r=Math.abs(e),a=X(Math.trunc(r/60),2),i=X(r%60,2);return t+a+n+i}const Bt=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},qt=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},kr={p:qt,P:(e,n)=>{const t=e.match(/(P+)(p+)?/)||[],r=t[1],a=t[2];if(!a)return Bt(e,n);let i;switch(r){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",Bt(r,n)).replace("{{time}}",qt(a,n))}},Dr=/^D+$/,jr=/^Y+$/,Nr=["D","DD","YY","YYYY"];function Er(e){return Dr.test(e)}function Sr(e){return jr.test(e)}function Mr(e,n,t){const r=Wr(e,n,t);if(console.warn(r),Nr.includes(e))throw new RangeError(r)}function Wr(e,n,t){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Cr=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Tr=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Pr=/^'([^]*?)'?$/,Or=/''/g,_r=/[a-zA-Z]/;function me(e,n,t){var u,k,v,p;const r=Be(),a=r.locale??yr,i=r.firstWeekContainsDate??((k=(u=r.locale)==null?void 0:u.options)==null?void 0:k.firstWeekContainsDate)??1,l=r.weekStartsOn??((p=(v=r.locale)==null?void 0:v.options)==null?void 0:p.weekStartsOn)??0,o=ie(e,t==null?void 0:t.in);if(!zn(o))throw new RangeError("Invalid time value");let m=n.match(Tr).map(x=>{const w=x[0];if(w==="p"||w==="P"){const j=kr[w];return j(x,a.formatLong)}return x}).join("").match(Cr).map(x=>{if(x==="''")return{isToken:!1,value:"'"};const w=x[0];if(w==="'")return{isToken:!1,value:Ir(x)};if(Rt[w])return{isToken:!0,value:x};if(w.match(_r))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:x}});a.localize.preprocessor&&(m=a.localize.preprocessor(o,m));const d={firstWeekContainsDate:i,weekStartsOn:l,locale:a};return m.map(x=>{if(!x.isToken)return x.value;const w=x.value;(Sr(w)||Er(w))&&Mr(w,n,String(e));const j=Rt[w[0]];return j(o,w,a.localize,d)}).join("")}function Ir(e){const n=e.match(Pr);return n?n[1].replace(Or,"'"):e}function Ar(e,n){return ie(e,n==null?void 0:n.in).getDate()}function lt(e,n){return ie(e,n==null?void 0:n.in).getDay()}function Kt(e,n){var m,d,u,k;const t=Be(),r=(n==null?void 0:n.weekStartsOn)??((d=(m=n==null?void 0:n.locale)==null?void 0:m.options)==null?void 0:d.weekStartsOn)??t.weekStartsOn??((k=(u=t.locale)==null?void 0:u.options)==null?void 0:k.weekStartsOn)??0,a=Ar(ie(e,n==null?void 0:n.in));if(isNaN(a))return NaN;const i=lt(Ln(e,n));let l=r-i;l<=0&&(l+=7);const o=a-l;return Math.ceil(o/7)+1}function Nt(e,n){return ie(e,n==null?void 0:n.in).getFullYear()}function zr(e,n,t){const[r,a]=qe(t==null?void 0:t.in,e,n);return+Se(r,t)==+Se(a,t)}function Lr(e,n,t){const[r,a]=qe(t==null?void 0:t.in,e,n);return r.getFullYear()===a.getFullYear()&&r.getMonth()===a.getMonth()}/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fr=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Hr=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(n,t,r)=>r?r.toUpperCase():t.toLowerCase()),Qt=e=>{const n=Hr(e);return n.charAt(0).toUpperCase()+n.slice(1)},Jt=(...e)=>e.filter((n,t,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===t).join(" ").trim(),$r=e=>{for(const n in e)if(n.startsWith("aria-")||n==="role"||n==="title")return!0};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Gr={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yr=c.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:t=2,absoluteStrokeWidth:r,className:a="",children:i,iconNode:l,...o},m)=>c.createElement("svg",{ref:m,...Gr,width:n,height:n,stroke:e,strokeWidth:r?Number(t)*24/Number(n):t,className:Jt("lucide",a),...!i&&!$r(o)&&{"aria-hidden":"true"},...o},[...l.map(([d,u])=>c.createElement(d,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=(e,n)=>{const t=c.forwardRef(({className:r,...a},i)=>c.createElement(Yr,{ref:i,iconNode:n,className:Jt(`lucide-${Fr(Qt(e))}`,`lucide-${e}`,r),...a}));return t.displayName=Qt(e),t};/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=ye("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=ye("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zt=ye("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const en=ye("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Et=ye("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xr=ye("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tn=ye("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nn=ye("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const St=ye("type",[["path",{d:"M12 4v16",key:"1654pz"}],["path",{d:"M4 7V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v2",key:"e0r10z"}],["path",{d:"M9 20h6",key:"s66wpe"}]]);/**
 * @license lucide-react v0.554.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ct=ye("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),De={vermilion:"#E34234",teal:"#008080",red:"#FF5252",blue:"#448AFF",milestone:"#4B5563",dependency:"#9CA3AF",grid:"#E5E7EB",weekend:"#f3f4f6",holiday:"#fef2f2"},be={ROW_HEIGHT:40,HEADER_HEIGHT:80,MILESTONE_LANE_HEIGHT:40,BAR_HEIGHT:24,SIDEBAR_WIDTH:400,SIDEBAR_MIN_WIDTH:250,SIDEBAR_MAX_WIDTH:800},Ue={DAY:{pixelsPerDay:30,label:"일"},WEEK:{pixelsPerDay:10,label:"주"},MONTH:{pixelsPerDay:2,label:"월"}},Vr=({taskNames:e,onConfirm:n,onCancel:t})=>at.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 transition-opacity",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-[360px] rounded-lg bg-white p-6 shadow-xl",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:s.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"삭제 확인"}),s.jsx("p",{className:"text-sm text-gray-500",children:"이 작업은 되돌릴 수 없습니다"})]})]}),s.jsxs("div",{className:"mb-6 rounded-md bg-gray-50 p-3",children:[s.jsxs("p",{className:"mb-2 text-sm text-gray-600",children:["다음 ",e.length,"개 항목을 삭제하시겠습니까?"]}),s.jsx("ul",{className:"max-h-[120px] overflow-auto",children:e.map((r,a)=>s.jsxs("li",{className:"flex items-center gap-2 text-sm text-gray-700",children:[s.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-red-400"}),r]},a))})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:t,className:"rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"취소"}),s.jsx("button",{onClick:n,className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 transition-colors",children:"삭제"})]})]})})]}),document.body),rn=({x:e,y:n,taskId:t,selectedTaskIds:r,tasks:a,onTaskGroup:i,onTaskUngroup:l,onTaskDelete:o,onStartRename:m,onClose:d,onDeselect:u})=>{var $;const[k,v]=c.useState(!1),p=Array.from(r).some(z=>{const I=a.find(T=>T.id===z);return(I==null?void 0:I.type)==="GROUP"}),x=()=>{r.size>=1&&!p&&i&&(i(Array.from(r)),d())},w=()=>{if(r.size===1&&l){const z=Array.from(r)[0],I=a.find(T=>T.id===z);(I==null?void 0:I.type)==="GROUP"&&(l(z),d())}},j=()=>{v(!0)},P=()=>{o&&(r.size>0?Array.from(r):[t]).forEach(I=>{o(I)}),v(!1),u(),d()},_=()=>{v(!1)},Y=r.size===1&&(()=>{const z=Array.from(r)[0],I=a.find(T=>T.id===z);return(I==null?void 0:I.type)==="GROUP"})(),A=r.size>0?Array.from(r).map(z=>{var I;return((I=a.find(T=>T.id===z))==null?void 0:I.name)||z}):[(($=a.find(z=>z.id===t))==null?void 0:$.name)||t];return s.jsxs("div",{className:"fixed z-[100] min-w-[160px] rounded-lg border border-gray-200 bg-white py-1 shadow-lg",style:{left:e,top:n},onClick:z=>z.stopPropagation(),children:[r.size>=1&&!p&&i&&s.jsxs("button",{onClick:x,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),"그룹화 (",r.size,"개 선택됨)"]}),Y&&l&&s.jsxs("button",{onClick:w,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"그룹 해제"]}),r.size===1&&m&&s.jsxs("button",{onClick:()=>{const z=Array.from(r)[0];m(z),d()},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"이름 변경"]}),o&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"my-1 border-t border-gray-200"}),s.jsxs("button",{onClick:j,className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"삭제 ",r.size>1?`(${r.size}개)`:""]})]}),s.jsx("div",{className:"my-1 border-t border-gray-200"}),s.jsxs("button",{onClick:()=>{u(),d()},className:"flex w-full items-center gap-2 px-4 py-2 text-left text-sm text-gray-500 hover:bg-gray-100",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),"선택 해제"]}),k&&s.jsx(Vr,{taskNames:A,onConfirm:P,onCancel:_})]})},{ROW_HEIGHT:sn}=be,dt={name:"",indirectWorkDaysPre:0,netWorkDays:1,indirectWorkDaysPost:0},Br=({columns:e,tasks:n,activeCPId:t,onTaskCreate:r,onCancel:a,isVirtualized:i=!1,virtualRowIndex:l})=>{const[o,m]=c.useState(dt),d=c.useRef(null);c.useEffect(()=>{m(dt),setTimeout(()=>{var x;(x=d.current)==null||x.focus()},0)},[]);const u=c.useCallback(()=>{m(dt),a()},[a]),k=c.useCallback(async()=>{if(!(!o.name.trim()||!r||!t))try{const x=n[n.length-1],w=x?V(x.endDate,1):new Date,j=o.indirectWorkDaysPre+o.netWorkDays+o.indirectWorkDaysPost,P=V(w,Math.max(j-1,0)),_={id:`task-${Date.now()}`,parentId:t,wbsLevel:2,type:"TASK",name:o.name.trim(),startDate:w,endDate:P,task:{netWorkDays:o.netWorkDays,indirectWorkDaysPre:o.indirectWorkDaysPre,indirectWorkDaysPost:o.indirectWorkDaysPost},dependencies:[]};await r(_),m(dt),a()}catch(x){console.error("Failed to create task:",x),alert("태스크 생성 중 오류가 발생했습니다.")}},[o,r,t,n,a]),v=c.useCallback(x=>{x.key==="Enter"?(x.preventDefault(),k()):x.key==="Escape"&&(x.preventDefault(),u())},[k,u]),p=i&&l!==void 0?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${n.length*sn}px)`}:{};return s.jsxs("div",{className:"box-border flex items-center border-b-2 border-blue-300 bg-blue-50 transition-colors",style:{height:sn,...p},children:[s.jsx("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-blue-200 px-2",style:{width:e[0].width},children:s.jsx("input",{ref:d,type:"text",placeholder:"공정명...",className:"w-full rounded border border-blue-300 bg-white px-2 py-1 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:o.name,onChange:x=>m(w=>({...w,name:x.target.value})),onKeyDown:v})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[1].width},children:s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:o.indirectWorkDaysPre,onChange:x=>{const w=x.target.value.replace(/[^0-9]/g,""),j=parseInt(w)||0;m(P=>({...P,indirectWorkDaysPre:j}))},onKeyDown:v,title:"선 간접작업일"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[2].width},children:s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:o.netWorkDays,onChange:x=>{const w=x.target.value.replace(/[^0-9]/g,""),j=parseInt(w)||0;m(P=>({...P,netWorkDays:j}))},onKeyDown:v,title:"순작업일"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[3].width},children:s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[40px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:o.indirectWorkDaysPost,onChange:x=>{const w=x.target.value.replace(/[^0-9]/g,""),j=parseInt(w)||0;m(P=>({...P,indirectWorkDaysPost:j}))},onKeyDown:v,title:"후 간접작업일"})}),s.jsxs("div",{className:"flex shrink-0 items-center justify-center gap-1 px-2",style:{width:e[4].width+e[5].width},children:[s.jsx("button",{onClick:k,disabled:!o.name.trim(),className:"flex items-center justify-center rounded bg-blue-500 p-1.5 text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",title:"저장 (Enter)",children:s.jsx(Ut,{size:14})}),s.jsx("button",{onClick:u,className:"flex items-center justify-center rounded bg-gray-400 p-1.5 text-white hover:bg-gray-500 transition-colors",title:"취소 (Esc)",children:s.jsx(ct,{size:14})})]})]})},{ROW_HEIGHT:an}=be,ut={name:"",workDaysTotal:30,nonWorkDaysTotal:10},qr=({columns:e,tasks:n,onTaskCreate:t,onCancel:r,isVirtualized:a=!1,virtualRowIndex:i,dragHandleWidth:l=0})=>{const[o,m]=c.useState(ut),d=c.useRef(null);c.useEffect(()=>{m(ut),setTimeout(()=>{var x;(x=d.current)==null||x.focus()},0)},[]);const u=c.useCallback(()=>{m(ut),r()},[r]),k=c.useCallback(async()=>{if(!(!o.name.trim()||!t))try{const x=n.filter(A=>A.type==="CP"&&!A.parentId),w=x[x.length-1],j=w?V(w.endDate,1):new Date,P=o.workDaysTotal+o.nonWorkDaysTotal,_=V(j,Math.max(P-1,0)),Y={id:`cp-${Date.now()}`,parentId:null,wbsLevel:1,type:"CP",name:o.name.trim(),startDate:j,endDate:_,cp:{workDaysTotal:o.workDaysTotal,nonWorkDaysTotal:o.nonWorkDaysTotal},dependencies:[]};await t(Y),m(ut),r()}catch(x){console.error("Failed to create CP:",x),alert("CP 생성 중 오류가 발생했습니다.")}},[o,t,n,r]),v=c.useCallback(x=>{x.key==="Enter"?(x.preventDefault(),k()):x.key==="Escape"&&(x.preventDefault(),u())},[k,u]),p=a&&i!==void 0?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${n.length*an}px)`}:{};return s.jsxs("div",{className:"box-border flex items-center border-b-2 border-blue-300 bg-blue-50 transition-colors",style:{height:an,...p},children:[l>0&&s.jsx("div",{style:{width:l},className:"shrink-0"}),s.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-blue-200 px-2",style:{width:l>0?e[0].width-l:e[0].width},children:[s.jsx("div",{className:"w-6 shrink-0"})," ",s.jsx("input",{ref:d,type:"text",placeholder:"CP명...",className:"w-full rounded border border-blue-300 bg-white px-2 py-1 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:o.name,onChange:x=>m(w=>({...w,name:x.target.value})),onKeyDown:v})]}),s.jsxs("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 text-xs text-gray-600",style:{width:e[1].width},children:[o.workDaysTotal+o.nonWorkDaysTotal,"일"]}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-blue-200 px-1",style:{width:e[2].width},children:s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[50px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-vermilion focus:border-vermilion focus:outline-none focus:ring-1 focus:ring-vermilion",value:o.workDaysTotal,onChange:x=>{const w=x.target.value.replace(/[^0-9]/g,""),j=parseInt(w)||0;m(P=>({...P,workDaysTotal:j}))},onKeyDown:v,title:"작업일수"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center px-1",style:{width:e[3].width},children:s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[50px] rounded border border-blue-300 bg-white px-1 py-1 text-center text-xs text-teal focus:border-teal focus:outline-none focus:ring-1 focus:ring-teal",value:o.nonWorkDaysTotal,onChange:x=>{const w=x.target.value.replace(/[^0-9]/g,""),j=parseInt(w)||0;m(P=>({...P,nonWorkDaysTotal:j}))},onKeyDown:v,title:"비작업일수"})}),s.jsxs("div",{className:"flex shrink-0 items-center justify-center gap-1 px-2",children:[s.jsx("button",{onClick:k,disabled:!o.name.trim(),className:"flex items-center justify-center rounded bg-blue-500 p-1.5 text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",title:"저장 (Enter)",children:s.jsx(Ut,{size:14})}),s.jsx("button",{onClick:u,className:"flex items-center justify-center rounded bg-gray-400 p-1.5 text-white hover:bg-gray-500 transition-colors",title:"취소 (Esc)",children:s.jsx(ct,{size:14})})]})]})},{ROW_HEIGHT:_e,HEADER_HEIGHT:on,MILESTONE_LANE_HEIGHT:ln}=be,cn=[{id:"name",label:"CP명",width:180,minWidth:100},{id:"total",label:"총 공기",width:80,minWidth:50},{id:"workDays",label:"작업일수",width:80,minWidth:50},{id:"nonWorkDays",label:"비작업일수",width:80,minWidth:50}],dn=[{id:"name",label:"단위공정명",width:150,minWidth:80},{id:"indirectPre",label:"선간접",width:60,minWidth:45},{id:"netWork",label:"순작업",width:60,minWidth:45},{id:"indirectPost",label:"후간접",width:60,minWidth:45},{id:"startDate",label:"시작일",width:90,minWidth:70},{id:"endDate",label:"종료일",width:90,minWidth:70}],Mt=c.forwardRef(({tasks:e,allTasks:n,viewMode:t,expandedIds:r,onToggle:a,onTaskClick:i,onTaskUpdate:l,onTaskCreate:o,onTaskReorder:m,activeCPId:d,virtualRows:u,totalHeight:k,onTotalWidthChange:v,onTaskGroup:p,onTaskUngroup:x,onTaskDelete:w,onTaskMove:j,isAddingTask:P=!1,onCancelAddTask:_,isAddingCP:Y=!1,onCancelAddCP:A,onTaskDoubleClick:$},z)=>{const I=u&&u.length>0,[T,W]=c.useState(null),[Z,ne]=c.useState(null),[J,oe]=c.useState(null),[B,U]=c.useState(new Set),[ae,re]=c.useState(null),[q,E]=c.useState(null),[g,f]=c.useState(null),[N,C]=c.useState(""),O=c.useRef(null),[te,ce]=c.useState(cn.map(b=>b.width)),[R,Q]=c.useState(dn.map(b=>b.width)),[de,ue]=c.useState(null),Le=c.useRef(!1),je=t==="MASTER"?cn:dn,Fe=t==="MASTER"?te:R,He=t==="MASTER"?ce:Q,ee=c.useMemo(()=>je.map((b,h)=>({...b,width:Fe[h]??b.width})),[je,Fe]),ht=m?24:0,we=ee.reduce((b,h)=>b+h.width,0)+ht;c.useEffect(()=>{v&&v(we)},[we,v]);const Ze=c.useCallback((b,h)=>{if(b.detail>=2)return;b.preventDefault(),b.stopPropagation(),Le.current=!0,ue(h);const S=b.clientX,H=Fe[h],K=je[h].minWidth,le=M=>{if(!Le.current)return;const F=M.clientX-S,L=Math.max(K,H+F);He(D=>{const fe=[...D];return fe[h]=L,fe})},y=()=>{Le.current=!1,ue(null),document.removeEventListener("mousemove",le),document.removeEventListener("mouseup",y)};document.addEventListener("mousemove",le),document.addEventListener("mouseup",y)},[Fe,je,He]),Te=c.useCallback((b,h=12,S="normal")=>{const K=document.createElement("canvas").getContext("2d");return K?(K.font=`${S} ${h}px -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif`,K.measureText(b).width):0},[]),ft=c.useCallback(b=>{const h=je[b].minWidth,S=b===0,H=S?48:20,K=je[b].label;let le=Te(K,12,"500")+16;return e.forEach(y=>{let M="",F=0;if(t==="MASTER"){const ge=y.type==="GROUP";switch(S&&y.parentId&&(F=20),b){case 0:M=y.name;break;case 1:M=ge?"-":y.cp?`${y.cp.workDaysTotal+y.cp.nonWorkDaysTotal}일`:"-";break;case 2:M=ge?"-":y.cp?`${y.cp.workDaysTotal}일`:"-";break;case 3:M=ge?"-":y.cp?`${y.cp.nonWorkDaysTotal}일`:"-";break}}else switch(b){case 0:M=y.name;break;case 1:M=y.task?String(y.task.indirectWorkDaysPre):"-";break;case 2:M=y.task?String(y.task.netWorkDays):"-";break;case 3:M=y.task?String(y.task.indirectWorkDaysPost):"-";break;case 4:M=me(y.startDate,"yyyy-MM-dd");break;case 5:M=me(y.endDate,"yyyy-MM-dd");break}const fe=Te(M,S?14:12,S?"500":"normal")+H+F;le=Math.max(le,fe)}),Math.max(h,Math.ceil(le))},[e,t,je,Te]),Pt=c.useCallback((b,h)=>{b.preventDefault(),b.stopPropagation(),Le.current=!1,ue(null);const S=ft(h);He(H=>{const K=[...H];return K[h]=S,K})},[ft,He]),$e=c.useCallback((b,h,S)=>{if(!b.task||!l)return;const H={...b,task:{...b.task,[h]:S}};l(H)},[l]),mt=c.useCallback((b,h)=>{b.dataTransfer.effectAllowed="move",b.dataTransfer.setData("text/plain",h),W(h);const S=document.createElement("div");S.style.opacity="0",document.body.appendChild(S),b.dataTransfer.setDragImage(S,0,0),setTimeout(()=>document.body.removeChild(S),0)},[]),et=c.useCallback((b,h,S)=>{if(b.preventDefault(),b.dataTransfer.dropEffect="move",h===T)return;const H=b.currentTarget.getBoundingClientRect(),K=b.clientY-H.top,le=H.height;let y;S?K<le/3?y="before":K<le*2/3?y="into":y="after":y=K<le/2?"before":"after",ne(h),oe(y)},[T]),tt=c.useCallback(()=>{ne(null),oe(null)},[]),Ee=c.useCallback((b,h)=>{if(b.preventDefault(),!T||T===h||!J){W(null),ne(null),oe(null);return}if(j)j(T,h,J);else if(m&&J!=="into"){const S=e.findIndex(K=>K.id===h),H=J==="after"?S+1:S;m(T,H)}W(null),ne(null),oe(null)},[T,J,j,m,e]),xt=c.useCallback(()=>{W(null),ne(null),oe(null)},[]),gt=c.useCallback((b,h,S)=>{if(T)return;const H=b.ctrlKey||b.metaKey,K=b.shiftKey;if(H)U(le=>{const y=new Set(le);return y.has(h.id)?y.delete(h.id):y.add(h.id),y}),re(S);else if(K&&ae!==null){const le=Math.min(ae,S),y=Math.max(ae,S);U(M=>{const F=new Set(M);for(let L=le;L<=y;L++)e[L]&&F.add(e[L].id);return F})}else U(new Set([h.id])),re(S)},[T,ae,e]),yt=c.useCallback((b,h)=>{b.preventDefault(),B.has(h.id)||U(new Set([h.id])),E({x:b.clientX,y:b.clientY,taskId:h.id})},[B]);c.useEffect(()=>{const b=()=>{E(null)};if(q)return document.addEventListener("click",b),()=>document.removeEventListener("click",b)},[q]),c.useEffect(()=>{const b=h=>{h.key==="Escape"&&(U(new Set),E(null),f(null))};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[]);const ve=c.useCallback(b=>{f(b.id),C(b.name),setTimeout(()=>{var h,S;(h=O.current)==null||h.focus(),(S=O.current)==null||S.select()},0)},[]),bt=c.useCallback(b=>{const h=e.find(S=>S.id===b);h&&l&&ve(h)},[e,l,ve]),Ge=c.useCallback(()=>{if(!g||!l){f(null);return}const b=e.find(h=>h.id===g);b&&N.trim()&&N!==b.name&&l({...b,name:N.trim()}),f(null),C("")},[g,N,e,l]),nt=c.useCallback(()=>{f(null),C("")},[]),Ye=c.useCallback(b=>{b.key==="Enter"?(b.preventDefault(),Ge()):b.key==="Escape"&&(b.preventDefault(),nt())},[Ge,nt]),pt=c.useCallback(b=>{if(!d||b.parentId===d)return 0;let h=0,S=b.parentId;for(;S&&S!==d;){const H=n.find(K=>K.id===S);(H==null?void 0:H.type)==="GROUP"&&h++,S=(H==null?void 0:H.parentId)||null}return h},[d,n]),Pe=c.useCallback(b=>{if(!b.parentId)return 0;let h=0,S=b.parentId;for(;S;){const H=n.find(K=>K.id===S);(H==null?void 0:H.type)==="GROUP"&&h++,S=H==null?void 0:H.parentId}return h},[n]),rt=()=>s.jsx("div",{className:"flex h-[32px] border-t border-gray-200",children:ee.map((b,h)=>s.jsxs("div",{className:"relative flex shrink-0 items-center justify-center text-xs font-medium text-gray-600",style:{width:b.width},children:[b.label,h<ee.length-1&&s.jsx("div",{className:`absolute right-0 top-0 z-10 h-full w-[5px] cursor-col-resize transition-colors ${de===h?"bg-blue-500":"hover:bg-blue-300"}`,style:{transform:"translateX(50%)"},onMouseDown:S=>Ze(S,h),onDoubleClick:S=>Pt(S,h),title:"드래그하여 컬럼 너비 조절 / 더블클릭으로 내용에 맞게 자동 조절"}),h<ee.length-1&&s.jsx("div",{className:"absolute right-0 top-0 h-full w-px bg-gray-200"})]},b.id))}),Re=B.size===1?e.find(b=>b.id===Array.from(B)[0]&&b.type==="GROUP"):null,st=B.size>=1&&p&&!Re,wt=Re&&x,vt=()=>!st&&!wt&&B.size===0?null:s.jsxs("div",{className:"flex items-center gap-2",children:[B.size>0&&s.jsxs("span",{className:"text-xs text-gray-500",children:[B.size,"개 선택"]}),wt&&s.jsxs("button",{onClick:()=>{x(Re.id),U(new Set)},className:"flex items-center gap-1 rounded bg-gray-500 px-2 py-1 text-xs font-medium text-white hover:bg-gray-600 transition-colors",title:"그룹 해제",children:[s.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6h16M4 12h16m-7 6h7"})}),"해제"]}),B.size>0&&s.jsx("button",{onClick:()=>U(new Set),className:"flex items-center justify-center rounded p-1 text-gray-400 hover:bg-gray-200 hover:text-gray-600 transition-colors",title:"선택 해제 (ESC)",children:s.jsx("svg",{className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]});return t==="MASTER"?s.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[s.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:on},children:[s.jsxs("div",{className:"flex flex-1 items-center justify-between px-4",children:[s.jsx("span",{className:"font-bold text-gray-700",children:"공구 공정표 (Level 1)"}),vt()]}),rt()]}),de!==null&&s.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),s.jsxs("div",{ref:z,className:"relative flex-1 overflow-auto",children:[s.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:ln,minWidth:we},children:ee.map((b,h)=>s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:b.width},children:h===0&&"Milestone"},b.id))}),s.jsxs("div",{style:{minWidth:we,height:I?k:void 0,position:"relative"},children:[(I?u:e.map((b,h)=>({index:h,start:h*_e,size:_e,key:h}))).map(b=>{const h=e[b.index];if(!h)return null;const S=h.type==="GROUP",H=S&&n.some(D=>D.parentId===h.id),K=r.has(h.id),y=Pe(h)*12,M=T===h.id,F=Z===h.id,L=B.has(h.id);return s.jsxs("div",{draggable:!!(m||j),onDragStart:D=>mt(D,h.id),onDragOver:D=>et(D,h.id,S),onDragLeave:tt,onDrop:D=>Ee(D,h.id),onDragEnd:xt,onClick:D=>gt(D,h,b.index),onContextMenu:D=>yt(D,h),className:`box-border flex items-center border-b transition-all duration-150 ${M?"opacity-50 bg-blue-50":F?J==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":J==="into"?"bg-blue-200 border-blue-400 border-2 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.6)]":"border-b-2 border-b-blue-500":L?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":S?"bg-gray-50 border-gray-100 hover:bg-gray-100":"border-gray-100 cursor-pointer hover:bg-blue-50 hover:shadow-[inset_0_0_0_1px_rgba(59,130,246,0.3)]"}`,style:{height:_e,...I?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${b.start}px)`}:{}},onDoubleClick:()=>!S&&i(h),title:S?void 0:"더블클릭하여 상세 공정표 보기",children:[m&&s.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:s.jsx(tn,{size:14})}),s.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:m?ee[0].width-24:ee[0].width,paddingLeft:y+8},children:[H?s.jsx("button",{onClick:D=>{D.stopPropagation(),a(h.id)},className:"mr-1 shrink-0 rounded p-1 text-gray-500 hover:bg-gray-200",children:K?s.jsx(Zt,{size:14}):s.jsx(en,{size:14})}):s.jsx("div",{className:"w-6 shrink-0"}),g===h.id?s.jsx("input",{ref:O,type:"text",value:N,onChange:D=>C(D.target.value),onKeyDown:Ye,onBlur:Ge,onClick:D=>D.stopPropagation(),className:"w-full rounded border border-blue-400 bg-white px-1 py-0.5 text-sm font-normal text-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500"}):s.jsx("span",{className:`truncate text-sm ${S?"font-normal text-gray-500 cursor-text":"font-medium text-gray-800"}`,onDoubleClick:D=>{l&&(D.stopPropagation(),ve(h))},title:l?"더블클릭하여 이름 편집":void 0,children:h.name})]}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:ee[1].width},children:S?"-":h.cp?`${h.cp.workDaysTotal+h.cp.nonWorkDaysTotal}일`:"-"}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-vermilion",style:{width:ee[2].width},children:S?"-":h.cp?`${h.cp.workDaysTotal}일`:"-"}),s.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-teal",style:{width:ee[3].width},children:S?"-":h.cp?`${h.cp.nonWorkDaysTotal}일`:"-"})]},b.key)}),Y&&s.jsx(qr,{columns:ee,tasks:e,onTaskCreate:o,onCancel:A||(()=>{}),isVirtualized:I,virtualRowIndex:e.length,dragHandleWidth:ht})]})]}),q&&s.jsx(rn,{x:q.x,y:q.y,taskId:q.taskId,selectedTaskIds:B,tasks:e,onTaskGroup:p,onTaskUngroup:x,onTaskDelete:w,onStartRename:bt,onClose:()=>E(null),onDeselect:()=>U(new Set)})]}):s.jsxs("div",{className:"flex h-full flex-col bg-white select-none",children:[s.jsxs("div",{className:"flex flex-col border-b border-gray-300 bg-gray-50",style:{height:on},children:[s.jsxs("div",{className:"flex flex-1 items-center justify-between px-4",children:[s.jsx("span",{className:"font-bold text-gray-700",children:"주공정표 (Level 2)"}),vt()]}),rt()]}),de!==null&&s.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"}),s.jsxs("div",{ref:z,className:"relative flex-1 overflow-auto",children:[s.jsx("div",{className:"flex items-center border-b border-gray-200 bg-gray-50/50",style:{height:ln,minWidth:we},children:ee.map((b,h)=>s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:b.width},children:h===0&&"Milestone"},b.id))}),s.jsxs("div",{style:{minWidth:we,height:I?k:void 0,position:"relative"},children:[(I?u:e.map((b,h)=>({index:h,start:h*_e,size:_e,key:h}))).map(b=>{const h=e[b.index];if(!h)return null;const S=h.type==="GROUP",H=S&&n.some(D=>D.parentId===h.id),K=r.has(h.id),y=pt(h)*12,M=T===h.id,F=Z===h.id,L=B.has(h.id);return s.jsxs("div",{draggable:!!(m||j),onDragStart:D=>mt(D,h.id),onDragOver:D=>et(D,h.id,S),onDragLeave:tt,onDrop:D=>Ee(D,h.id),onDragEnd:xt,onClick:D=>gt(D,h,b.index),onDoubleClick:()=>{!S&&h.type==="TASK"&&$&&$(h)},onContextMenu:D=>yt(D,h),className:`box-border flex items-center border-b transition-colors ${M?"opacity-50 bg-blue-50":F?J==="before"?"border-t-2 border-t-blue-500 border-b-gray-100":J==="into"?"bg-blue-200 border-blue-400 border-2 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.6)]":"border-b-2 border-b-blue-500":L?"bg-blue-100 border-gray-100 shadow-[inset_0_0_0_2px_rgba(59,130,246,0.5)]":S?"bg-gray-50 border-gray-100 hover:bg-gray-100":"border-gray-100 hover:bg-gray-50 cursor-pointer"}`,style:{height:_e,...I?{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${b.start}px)`}:{}},title:!S&&h.type==="TASK"?"더블클릭하여 공정 설정":void 0,children:[m&&s.jsx("div",{className:"flex shrink-0 items-center justify-center cursor-grab active:cursor-grabbing text-gray-400 hover:text-gray-600",style:{width:24},children:s.jsx(tn,{size:14})}),s.jsxs("div",{className:"flex shrink-0 items-center overflow-hidden border-r border-gray-100 px-2",style:{width:m?ee[0].width-24:ee[0].width,paddingLeft:y+8},children:[H?s.jsx("button",{onClick:D=>{D.stopPropagation(),a(h.id)},className:"mr-1 shrink-0 rounded p-1 text-gray-500 hover:bg-gray-200",children:K?s.jsx(Zt,{size:14}):s.jsx(en,{size:14})}):s.jsx("div",{className:"w-6 shrink-0"}),g===h.id?s.jsx("input",{ref:O,type:"text",value:N,onChange:D=>C(D.target.value),onKeyDown:Ye,onBlur:Ge,onClick:D=>D.stopPropagation(),className:"w-full rounded border border-blue-400 bg-white px-1 py-0.5 text-sm font-normal text-gray-600 focus:outline-none focus:ring-1 focus:ring-blue-500"}):s.jsx("span",{className:`truncate text-sm ${S?"font-normal text-gray-500 cursor-text":"font-medium text-gray-800"}`,onDoubleClick:D=>{l&&(D.stopPropagation(),ve(h))},title:l?"더블클릭하여 이름 편집":void 0,children:h.name})]}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:ee[1].width},children:h.task?s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:h.task.indirectWorkDaysPre,onChange:D=>{const fe=D.target.value.replace(/[^0-9]/g,""),ge=parseInt(fe)||0;$e(h,"indirectWorkDaysPre",ge)},onKeyDown:D=>{(D.key==="-"||D.key==="e"||D.key==="+"||D.key===".")&&D.preventDefault()},title:"선 간접작업일 (바 드래그로도 조절 가능)"}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:ee[2].width},children:h.task?s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-red-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-red-500 focus:outline-none focus:ring-1 focus:ring-red-500",value:h.task.netWorkDays,onChange:D=>{const fe=D.target.value.replace(/[^0-9]/g,""),ge=parseInt(fe)||0;$e(h,"netWorkDays",ge)},onKeyDown:D=>{(D.key==="-"||D.key==="e"||D.key==="+"||D.key===".")&&D.preventDefault()},title:"순작업일"}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 px-1",style:{width:ee[3].width},children:h.task?s.jsx("input",{type:"text",inputMode:"numeric",pattern:"[0-9]*",className:"w-full max-w-[45px] rounded border border-gray-300 bg-blue-50 px-1 py-1 text-center text-xs text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500",value:h.task.indirectWorkDaysPost,onChange:D=>{const fe=D.target.value.replace(/[^0-9]/g,""),ge=parseInt(fe)||0;$e(h,"indirectWorkDaysPost",ge)},onKeyDown:D=>{(D.key==="-"||D.key==="e"||D.key==="+"||D.key===".")&&D.preventDefault()},title:"후 간접작업일 (바 드래그로도 조절 가능)"}):s.jsx("span",{className:"text-xs text-gray-400",children:"-"})}),s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-100 text-xs text-gray-500",style:{width:ee[4].width},children:me(h.startDate,"yyyy-MM-dd")}),s.jsx("div",{className:"flex shrink-0 items-center justify-center text-xs text-gray-500",style:{width:ee[5].width},children:me(h.endDate,"yyyy-MM-dd")})]},b.key)}),P&&d&&s.jsx(Br,{columns:ee,tasks:e,activeCPId:d,onTaskCreate:o,onCancel:_||(()=>{}),isVirtualized:I,virtualRowIndex:e.length})]})]}),q&&s.jsx(rn,{x:q.x,y:q.y,taskId:q.taskId,selectedTaskIds:B,tasks:e,onTaskGroup:p,onTaskUngroup:x,onTaskDelete:w,onStartRename:bt,onClose:()=>E(null),onDeselect:()=>U(new Set)})]})});Mt.displayName="GanttSidebar";const We=(e,n=[],t)=>!!(!t.workOnSaturdays&&zt(e)||!t.workOnSundays&&Lt(e)||!t.workOnHolidays&&n.some(r=>In(r,e))),Kr=e=>zt(e)||Lt(e),un=(e,n,t=[],r)=>{let a=new Date(e),i=0;if(n<=0)return a;for(;We(a,t,r);)a=V(a,1);for(;i<n;)We(a,t,r)||i++,i<n&&(a=V(a,1));return a},Qr=(e,n,t=[],r)=>{let a=new Date(e),i=0;if(n<=0)return a;for(;i<n;)a=V(a,-1),We(a,t,r)||i++;return a},Wt=(e,n)=>n<=0?e:V(e,n-1),Jr=(e,n=[],t)=>{if(!e.task)return{startDate:e.startDate,endDate:e.endDate,netWorkStartDate:e.startDate,netWorkEndDate:e.endDate};const{netWorkDays:r,indirectWorkDaysPre:a,indirectWorkDaysPost:i}=e.task,l=Ke(new Date(e.startDate));let o=l,m,d;a>0&&(m=o,d=Wt(o,a),o=V(d,1));let u=o,k=u;if(r>0){for(;We(u,n,t);)u=V(u,1);k=un(u,r,n,t),o=V(k,1)}else a===0&&(u=l,k=l);let v,p;return i>0&&(v=o,p=Wt(o,i)),{startDate:m||u,endDate:p||k,netWorkStartDate:u,netWorkEndDate:k,indirectPreStartDate:m,indirectPreEndDate:d,indirectPostStartDate:v,indirectPostEndDate:p}},Ur=(e,n,t)=>{switch(n){case"START":return t.startDate;case"NET_WORK_START":return t.netWorkStartDate;case"NET_WORK_END":return t.netWorkEndDate;case"END":return t.endDate;default:return t.endDate}},Ie=(e,n,t)=>Dt(e,n)*t,Zr=(e,n,t)=>{const r=Math.round(e/t);return V(n,r)},es=(e,n,t)=>(Dt(n,e)+1)*t,ts=e=>Ue[e].pixelsPerDay,Ct=(e,n=[],t=5)=>{const r=[...e.flatMap(d=>[d.startDate,d.endDate].filter(Boolean)),...n.map(d=>d.date)];if(r.length===0){const d=new Date;return{minDate:d,maxDate:V(d,30),totalDays:30}}const a=new Date(Math.min(...r.map(d=>d.getTime()))),i=new Date(Math.max(...r.map(d=>d.getTime()))),l=V(a,-t),o=V(i,t),m=Dt(o,l);return{minDate:l,maxDate:o,totalDays:m}},{ROW_HEIGHT:xe,HEADER_HEIGHT:ns,MILESTONE_LANE_HEIGHT:pe,BAR_HEIGHT:se}=be,rs=({minDate:e,totalDays:n,pixelsPerDay:t,zoomLevel:r,holidays:a,calendarSettings:i})=>{const l=Array.from({length:n},(v,p)=>V(e,p)),o=n*t,m=c.useMemo(()=>{const v=[];let p=Nt(l[0]),x=0;return l.forEach(w=>{Nt(w)!==p?(v.push({label:`${p}년`,days:x}),p=Nt(w),x=1):x++}),v.push({label:`${p}년`,days:x}),v},[l]),d=c.useMemo(()=>{const v=[];let p=l[0],x=0;return l.forEach(w=>{Lr(w,p)?x++:(v.push({label:me(p,"M월"),days:x}),p=w,x=1)}),v.push({label:me(p,"M월"),days:x}),v},[l]),u=c.useMemo(()=>{if(r==="MONTH")return null;if(r==="DAY")return s.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:o},children:l.map((v,p)=>{const x=lt(v),w=We(v,a,i),j=x===0,P=x===6;let _="text-gray-600";j&&(_="text-red-500"),P&&(_="text-blue-500"),w&&!j&&!P&&(_="text-red-500");let Y="";return j||w&&!P?Y="bg-red-50/50":P&&(Y="bg-blue-50/50"),s.jsxs("div",{className:`flex h-full shrink-0 flex-col items-center justify-center border-r border-gray-100 font-medium ${Y}`,style:{width:t,minWidth:t},children:[s.jsx("span",{className:`text-[10px] leading-none ${_}`,children:me(v,"d")}),s.jsx("span",{className:`mt-0.5 text-[9px] font-bold leading-none ${_}`,children:["일","월","화","수","목","금","토"][x]})]},p)})});{const v=[];let p=l[0],x=0;return l.forEach(w=>{zr(w,p,{weekStartsOn:0})?x++:(v.push({label:`${Kt(p,{weekStartsOn:0})}주`,days:x}),p=w,x=1)}),v.push({label:`${Kt(p,{weekStartsOn:0})}주`,days:x}),s.jsx("div",{className:"flex h-[32px] items-center bg-white",style:{minWidth:o},children:v.map((w,j)=>s.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-100 text-xs font-medium text-gray-600",style:{width:w.days*t},children:w.label},j))})}},[l,r,t,a,i,o]),k=r==="MONTH";return s.jsx("div",{className:"sticky top-0 z-20 flex flex-col border-b border-gray-300 bg-white shadow-sm",style:{height:ns,minWidth:o},children:k?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex h-[48px] items-center border-b border-gray-300 bg-gray-100 text-sm font-bold text-gray-800",style:{minWidth:o},children:m.map((v,p)=>s.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-300",style:{width:v.days*t},children:v.label},p))}),s.jsx("div",{className:"flex h-[32px] items-center bg-white text-xs font-medium text-gray-700",style:{minWidth:o},children:d.map((v,p)=>s.jsx("div",{className:"flex h-full shrink-0 items-center justify-center border-r border-gray-200",style:{width:v.days*t},children:v.label},p))})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-300 bg-gray-100 text-xs font-bold text-gray-800",style:{minWidth:o},children:m.map((v,p)=>s.jsx("div",{className:"flex shrink-0 items-center border-r border-gray-300 pl-2",style:{width:v.days*t},children:v.label},p))}),s.jsx("div",{className:"flex h-[24px] items-center border-b border-gray-200 bg-gray-100 text-xs font-medium text-gray-700",style:{minWidth:o},children:d.map((v,p)=>s.jsx("div",{className:"flex shrink-0 items-center justify-center border-r border-gray-300",style:{width:v.days*t},children:v.label},p))}),u]})})},ss=({minDate:e,totalDays:n,chartHeight:t,pixelsPerDay:r,holidays:a,calendarSettings:i,zoomLevel:l})=>{const o=c.useMemo(()=>{if(l==="MONTH")return[];const m=[];for(let d=0;d<n;d++){const u=V(e,d),k=lt(u),v=k===0,p=k===6;if(We(u,a,i)||p){const w=d*r;let j="rgba(254, 242, 242, 0.5)";p&&!v&&(j="rgba(239, 246, 255, 0.5)"),v&&(j="rgba(254, 242, 242, 0.5)"),m.push(s.jsx("rect",{x:w,y:0,width:r,height:t,fill:j,className:"pointer-events-none"},`weekend-${d}`))}}return m},[e,n,t,r,a,i,l]);return s.jsx("g",{children:o})},as=(e,n,t)=>{if(e.length===0)return[];const r=25,a=12,i=8,l=e.map(u=>({milestone:u,x:Ie(u.date,n,t),labelLevel:0,labelWidth:u.name.length*a+r})).sort((u,k)=>u.x-k.x),o=[],m=[],d=[];for(const u of l){const k=u.labelWidth,v=u.x-k,p=u.x-i;if(!m.some(w=>v<w+i))m.push(p),o.push({milestone:u.milestone,x:u.x,labelLevel:0});else{const w=u.x+i,j=u.x+k;d.some(_=>!(j<_.start||w>_.end))?o.push({milestone:u.milestone,x:u.x,labelLevel:-1}):(d.push({start:w,end:j}),o.push({milestone:u.milestone,x:u.x,labelLevel:1}))}}return o},is=({milestone:e,x:n,labelLevel:t=0,isDragging:r=!1,dragX:a,onMouseDown:i,onDoubleClick:l})=>{const m=pe/2,d=r&&a!==void 0?a:n;let u,k,v;t===0?(u=-8,k=4,v="end"):t===1?(u=8,k=4,v="start"):(u=0,k=18,v="middle");const p=w=>{i&&(w.preventDefault(),w.stopPropagation(),i(w,e))},x=w=>{l&&(w.preventDefault(),w.stopPropagation(),l(e))};return s.jsxs("g",{transform:`translate(${d}, ${m})`,className:`group ${i?"cursor-ew-resize":"cursor-pointer"} ${r?"cursor-ew-resize":""}`,onMouseDown:p,onDoubleClick:x,children:[s.jsx("line",{x1:0,y1:0,x2:0,y2:1e3,stroke:r?"#3B82F6":"#9CA3AF",strokeWidth:r?3:2,strokeDasharray:"4, 4",className:r?"opacity-100":"opacity-80"}),s.jsx("path",{d:`M ${-12/2} ${-12/2} L ${12/2} ${-12/2} L 0 ${12/2} Z`,fill:r?"#3B82F6":De.milestone,stroke:"white",strokeWidth:1,className:"drop-shadow-sm transition-transform duration-150 group-hover:scale-[1.3]",style:{transformOrigin:"center",transformBox:"fill-box",transform:r?"scale(1.3)":void 0}}),s.jsx("circle",{cx:0,cy:0,r:12,fill:"transparent",className:"cursor-ew-resize"}),s.jsx("text",{x:u,y:k,textAnchor:v,className:`select-none text-[11px] font-bold transition-colors ${r?"fill-blue-700":"fill-gray-600 group-hover:fill-blue-700"}`,children:e.name})]})},os=({task:e,y:n,minDate:t,pixelsPerDay:r,isMasterView:a,isDraggable:i=!1,dragInfo:l,onDragStart:o,onDoubleClick:m})=>{var x,w;if(e.type==="GROUP")return null;const d=4,u=!!l,k=(l==null?void 0:l.startDate)||e.startDate,v=(l==null?void 0:l.endDate)||e.endDate,p=Ie(k,t,r);if(a){const j=((x=e.cp)==null?void 0:x.workDaysTotal)||0,P=((w=e.cp)==null?void 0:w.nonWorkDaysTotal)||0;if(j+P===0)return null;const Y=j*r,A=P*r;return s.jsxs("g",{transform:`translate(${p}, ${n})`,className:"group cursor-pointer",children:[s.jsx("rect",{x:0,y:0,width:Y,height:se,fill:De.vermilion,rx:d,ry:d,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),s.jsx("rect",{x:Y,y:0,width:A,height:se,fill:De.teal,rx:d,ry:d,className:"drop-shadow-sm opacity-90 transition-opacity hover:opacity-100"}),s.jsx("text",{x:-8,y:se/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-bold fill-gray-700",children:e.name})]})}else{if(!e.task)return null;const{netWorkDays:j,indirectWorkDaysPre:P,indirectWorkDaysPost:_,indirectWorkNamePre:Y,indirectWorkNamePost:A}=e.task,$=(l==null?void 0:l.indirectWorkDaysPre)??P,z=(l==null?void 0:l.indirectWorkDaysPost)??_,I=(l==null?void 0:l.netWorkDays)??j,T=$*r,W=I*r,Z=z*r,ne=T+W+Z,J=0,oe=T,B=T+W,U=8,ae=6,re={startDate:k,endDate:v,indirectWorkDaysPre:$,netWorkDays:I,indirectWorkDaysPost:z};return s.jsxs("g",{transform:`translate(${p}, ${n})`,className:`group ${u?"opacity-90":""} ${m?"cursor-pointer":""}`,onDoubleClick:m,children:[$>0&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:J,y:0,width:T,height:se,fill:De.blue,rx:d,ry:d,className:`drop-shadow-sm transition-opacity ${u?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:"none"}}),Y&&s.jsx("text",{x:J+T/2,y:se+11,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-blue-600 font-medium",children:Y})]}),I>0&&s.jsx("rect",{x:oe,y:0,width:W,height:se,fill:De.red,rx:d,ry:d,className:`drop-shadow-sm transition-opacity ${u?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:"none"}}),z>0&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:B,y:0,width:Z,height:se,fill:De.blue,rx:d,ry:d,className:`drop-shadow-sm transition-opacity ${u?"opacity-100":"opacity-90 hover:opacity-100"}`,style:{pointerEvents:"none"}}),A&&s.jsx("text",{x:B+Z/2,y:se+11,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-blue-600 font-medium",children:A})]}),i&&I>0&&s.jsx("rect",{x:oe+ae,y:0,width:Math.max(0,W-ae*2),height:se,fill:"transparent",className:"cursor-grab active:cursor-grabbing",onMouseDown:q=>o==null?void 0:o(q,e.id,"move",re),children:s.jsx("title",{children:"전체 이동 (드래그)"})}),i&&s.jsx("rect",{x:-U/2,y:0,width:U,height:se,fill:"transparent",className:"cursor-ew-resize",onMouseDown:q=>o==null?void 0:o(q,e.id,"resize-pre",re),children:s.jsxs("title",{children:[$>0?"앞 간접작업일 조절":"순작업일 조절"," (드래그)"]})}),i&&$>0&&I>0&&s.jsx("rect",{x:T-ae/2,y:0,width:ae,height:se,fill:"transparent",className:"cursor-col-resize",onMouseDown:q=>o==null?void 0:o(q,e.id,"resize-pre-net",re),children:s.jsx("title",{children:"앞간접-순작업 경계 조절 (드래그)"})}),i&&z>0&&I>0&&s.jsx("rect",{x:B-ae/2,y:0,width:ae,height:se,fill:"transparent",className:"cursor-col-resize",onMouseDown:q=>o==null?void 0:o(q,e.id,"resize-net-post",re),children:s.jsx("title",{children:"순작업-뒤간접 경계 조절 (드래그)"})}),i&&s.jsx("rect",{x:ne-U/2,y:0,width:U,height:se,fill:"transparent",className:"cursor-ew-resize",onMouseDown:q=>o==null?void 0:o(q,e.id,"resize-post",re),children:s.jsxs("title",{children:[z>0?"뒤 간접작업일 조절":"순작업일 조절"," (드래그)"]})}),i&&s.jsxs(s.Fragment,{children:[s.jsx("rect",{x:1,y:se/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"}),s.jsx("rect",{x:ne-4,y:se/2-6,width:3,height:12,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-80 transition-opacity"}),$>0&&I>0&&s.jsx("rect",{x:T-1.5,y:se/2-4,width:3,height:8,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-60 transition-opacity"}),z>0&&I>0&&s.jsx("rect",{x:B-1.5,y:se/2-4,width:3,height:8,rx:1,fill:"white",className:"pointer-events-none opacity-0 group-hover:opacity-60 transition-opacity"})]}),s.jsx("text",{x:-8,y:se/2+4,textAnchor:"end",className:"pointer-events-none select-none text-[11px] font-medium fill-gray-700",children:e.name}),u&&s.jsxs("g",{children:[s.jsxs("text",{x:ne/2,y:-6,textAnchor:"middle",className:"pointer-events-none select-none text-[10px] font-bold fill-blue-600",children:[me(k,"MM/dd")," ~ ",me(v,"MM/dd")]}),s.jsxs("text",{x:ne/2,y:se+12,textAnchor:"middle",className:"pointer-events-none select-none text-[9px] fill-gray-500",children:["앞",$,"일 + 순",I,"일 + 뒤",z,"일"]})]})]})}},ls=()=>s.jsx("defs",{children:s.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:s.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:De.dependency})})}),Tt=c.forwardRef(({tasks:e,milestones:n,viewMode:t,zoomLevel:r,holidays:a,calendarSettings:i,onBarDrag:l,onMilestoneUpdate:o,onMilestoneDoubleClick:m,onTaskDoubleClick:d,virtualRows:u,totalHeight:k},v)=>{const p=Ue[r].pixelsPerDay,x=t==="MASTER",w=u&&u.length>0,[j,P]=c.useState(null),[_,Y]=c.useState(null),A=c.useRef(null);c.useEffect(()=>{A.current=_},[_]);const{minDate:$,totalDays:z}=c.useMemo(()=>Ct(e,n,60),[e,n]),I=c.useMemo(()=>as(n,$,p),[n,$,p]),T=z*p,W=Math.max(w?(k||0)+pe+100:e.length*xe+pe+100,500),Z=c.useRef(null);c.useEffect(()=>{Z.current=j},[j]);const ne=c.useCallback((E,g)=>{if(!o)return;E.preventDefault(),E.stopPropagation();const f=Ie(g.date,$,p),N={milestoneId:g.id,startX:E.clientX,originalDate:g.date,currentX:f};Y(N)},[o,$,p]),J=c.useCallback(E=>{const g=A.current;if(!g)return;const f=E.clientX-g.startX,N=Ie(g.originalDate,$,p),C=Math.max(0,N+f);Y(O=>O?{...O,currentX:C}:null)},[$,p]),oe=c.useCallback(E=>{const g=A.current;if(!g||!o){Y(null);return}const f=E.clientX-g.startX,N=Math.round(f/p);if(N!==0){const C=V(g.originalDate,N),O=n.find(te=>te.id===g.milestoneId);O&&o({...O,date:C})}Y(null)},[o,p,n]);c.useEffect(()=>{if(_)return window.addEventListener("mousemove",J),window.addEventListener("mouseup",oe),()=>{window.removeEventListener("mousemove",J),window.removeEventListener("mouseup",oe)}},[_,J,oe]);const B=c.useCallback(E=>{m&&m(E)},[m]),U=c.useCallback((E,g,f,N)=>{if(!l)return;E.preventDefault(),E.stopPropagation();const C={taskId:g,dragType:f,startX:E.clientX,originalStartDate:N.startDate,originalEndDate:N.endDate,originalIndirectWorkDaysPre:N.indirectWorkDaysPre,originalNetWorkDays:N.netWorkDays,originalIndirectWorkDaysPost:N.indirectWorkDaysPost,currentStartDate:N.startDate,currentEndDate:N.endDate,currentIndirectWorkDaysPre:N.indirectWorkDaysPre,currentNetWorkDays:N.netWorkDays,currentIndirectWorkDaysPost:N.indirectWorkDaysPost};P(C),Z.current=C},[l]),ae=c.useCallback(E=>{const g=Z.current;if(!g||!l)return;const f=E.clientX-g.startX,N=Math.round(f/p);let C=g.originalStartDate,O=g.originalEndDate,te=g.originalIndirectWorkDaysPre,ce=g.originalNetWorkDays,R=g.originalIndirectWorkDaysPost;if(g.dragType==="move")C=V(g.originalStartDate,N),O=V(g.originalEndDate,N);else if(g.dragType==="move-net"){const Q=g.originalIndirectWorkDaysPost,de=g.originalIndirectWorkDaysPre,ue=Math.max(-de,Math.min(Q,N));te=g.originalIndirectWorkDaysPre+ue,R=g.originalIndirectWorkDaysPost-ue,C=g.originalStartDate,O=g.originalEndDate}else if(g.dragType==="resize-pre")if(g.originalIndirectWorkDaysPre>0){te=Math.max(0,g.originalIndirectWorkDaysPre-N);const Q=V(g.originalStartDate,g.originalIndirectWorkDaysPre);C=V(Q,-te),O=g.originalEndDate}else{ce=Math.max(1,g.originalNetWorkDays-N);const Q=V(g.originalStartDate,g.originalNetWorkDays-1);C=V(Q,-(ce-1)),O=g.originalEndDate}else if(g.dragType==="resize-post")if(g.originalIndirectWorkDaysPost>0){R=Math.max(0,g.originalIndirectWorkDaysPost+N);const Q=V(g.originalEndDate,-g.originalIndirectWorkDaysPost);O=V(Q,R),C=g.originalStartDate}else ce=Math.max(1,g.originalNetWorkDays+N),O=V(g.originalStartDate,ce-1),C=g.originalStartDate;else if(g.dragType==="resize-pre-net"){const Q=g.originalNetWorkDays-1,de=g.originalIndirectWorkDaysPre,ue=Math.max(-de,Math.min(Q,N));te=g.originalIndirectWorkDaysPre+ue,ce=g.originalNetWorkDays-ue,C=g.originalStartDate,O=g.originalEndDate}else if(g.dragType==="resize-net-post"){const Q=g.originalIndirectWorkDaysPost,de=g.originalNetWorkDays-1,ue=Math.max(-de,Math.min(Q,N));ce=g.originalNetWorkDays+ue,R=g.originalIndirectWorkDaysPost-ue,C=g.originalStartDate,O=g.originalEndDate}P(Q=>Q?{...Q,currentStartDate:C,currentEndDate:O,currentIndirectWorkDaysPre:te,currentNetWorkDays:ce,currentIndirectWorkDaysPost:R}:null)},[l,p]),re=c.useCallback(()=>{const E=Z.current;if(!E||!l){P(null),Z.current=null;return}const g=E.currentStartDate.getTime()!==E.originalStartDate.getTime()||E.currentEndDate.getTime()!==E.originalEndDate.getTime(),f=E.currentIndirectWorkDaysPre!==E.originalIndirectWorkDaysPre||E.currentNetWorkDays!==E.originalNetWorkDays||E.currentIndirectWorkDaysPost!==E.originalIndirectWorkDaysPost;(g||f)&&l({taskId:E.taskId,dragType:E.dragType,newStartDate:E.currentStartDate,newEndDate:E.currentEndDate,newIndirectWorkDaysPre:E.currentIndirectWorkDaysPre,newIndirectWorkDaysPost:E.currentIndirectWorkDaysPost,newNetWorkDays:E.currentNetWorkDays}),P(null),Z.current=null},[l]);c.useEffect(()=>{if(j){window.addEventListener("mousemove",ae),window.addEventListener("mouseup",re);let E="ew-resize";return j.dragType==="move"||j.dragType==="move-net"?E="grabbing":(j.dragType==="resize-pre-net"||j.dragType==="resize-net-post")&&(E="col-resize"),document.body.style.cursor=E,document.body.style.userSelect="none",()=>{window.removeEventListener("mousemove",ae),window.removeEventListener("mouseup",re),document.body.style.cursor="",document.body.style.userSelect=""}}},[j,ae,re]);const q=c.useCallback(E=>j&&j.taskId===E?{startDate:j.currentStartDate,endDate:j.currentEndDate,indirectWorkDaysPre:j.currentIndirectWorkDaysPre,indirectWorkDaysPost:j.currentIndirectWorkDaysPost,netWorkDays:j.currentNetWorkDays}:null,[j]);return s.jsx("div",{className:"flex h-full w-full flex-col overflow-hidden bg-white",children:s.jsxs("div",{ref:v,className:"relative flex-1 overflow-auto",children:[s.jsx(rs,{minDate:$,totalDays:z,pixelsPerDay:p,zoomLevel:r,holidays:a,calendarSettings:i}),s.jsxs("svg",{width:T,height:W,className:"block bg-white",children:[s.jsx(ls,{}),s.jsx(ss,{minDate:$,totalDays:z,chartHeight:W,pixelsPerDay:p,holidays:a,calendarSettings:i,zoomLevel:r}),(w?u:e.map((E,g)=>({index:g,start:g*xe,size:xe,key:g}))).map(E=>{const g=e[E.index];if(!g||g.type!=="GROUP")return null;const f=E.start+pe;return s.jsx("rect",{x:0,y:f,width:T,height:xe,fill:"rgba(249, 250, 251, 0.6)",className:"pointer-events-none"},`group-bg-${E.key}`)}),Array.from({length:z},(E,g)=>{const f=(g+1)*p,N=V($,g),C=lt(N);let O=!1,te="#f0f0f0";return r==="DAY"?(O=!0,te=C===0?"#e0e0e0":"#f0f0f0"):r==="WEEK"?(O=C===0,te="#e5e7eb"):r==="MONTH"&&(O=C===0,te="#f0f0f0"),O?s.jsx("line",{x1:f,y1:0,x2:f,y2:W,stroke:te,strokeWidth:1},`vline-${g}`):null}),(w?u:e.map((E,g)=>({index:g,start:g*xe,size:xe,key:g}))).map(E=>s.jsx("line",{x1:0,y1:E.start+xe+pe,x2:T,y2:E.start+xe+pe,stroke:"#f3f4f6",strokeWidth:1},`line-${E.key}`)),s.jsx("rect",{x:0,y:0,width:T,height:pe,fill:"transparent"}),I.map(E=>{const g=(_==null?void 0:_.milestoneId)===E.milestone.id;return s.jsx(is,{milestone:E.milestone,x:E.x,labelLevel:E.labelLevel,isDragging:g,dragX:g?_==null?void 0:_.currentX:void 0,onMouseDown:o?ne:void 0,onDoubleClick:m?B:void 0},E.milestone.id)}),s.jsx("line",{x1:0,y1:pe,x2:T,y2:pe,stroke:De.grid,strokeWidth:1}),(w?u:e.map((E,g)=>({index:g,start:g*xe,size:xe,key:g}))).map(E=>{const g=e[E.index];if(!g)return null;const f=E.start+(xe-se)/2+pe;return s.jsx(os,{task:g,y:f,minDate:$,pixelsPerDay:p,isMasterView:x,isDraggable:!x&&!!l,dragInfo:q(g.id),onDragStart:U,onDoubleClick:!x&&g.type==="TASK"&&d?()=>d(g):void 0},E.key)})]})]})})});Tt.displayName="GanttTimeline";const cs=({milestoneName:e,onConfirm:n,onCancel:t})=>at.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[60] bg-black/50 transition-opacity",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-[360px] rounded-lg bg-white p-6 shadow-xl",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:s.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"마일스톤 삭제"}),s.jsx("p",{className:"text-sm text-gray-500",children:"이 작업은 되돌릴 수 없습니다"})]})]}),s.jsxs("div",{className:"mb-6 rounded-md bg-gray-50 p-3",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"다음 마일스톤을 삭제하시겠습니까?"}),s.jsxs("p",{className:"mt-1 flex items-center gap-2 text-sm font-medium text-gray-700",children:[s.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-purple-400"}),e]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:t,className:"rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"취소"}),s.jsx("button",{onClick:n,className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 transition-colors",children:"삭제"})]})]})})]}),document.body),ds=({milestone:e,isOpen:n,isNew:t=!1,onClose:r,onSave:a,onDelete:i})=>{const[l,o]=c.useState(""),[m,d]=c.useState(""),[u,k]=c.useState(""),[v,p]=c.useState(!1),x=c.useRef(null);c.useEffect(()=>{e&&n&&(o(e.name),d(e.description||""),k(me(e.date,"yyyy-MM-dd")),p(!1),setTimeout(()=>{var A,$;(A=x.current)==null||A.focus(),($=x.current)==null||$.select()},100))},[e,n]),c.useEffect(()=>{const A=$=>{$.key==="Escape"&&n&&(v?p(!1):r())};return document.addEventListener("keydown",A),()=>document.removeEventListener("keydown",A)},[n,v,r]);const w=()=>{if(!e||!l.trim())return;const A={...e,name:l.trim(),description:m.trim()||void 0,date:new Date(u)};a(A),r()},j=()=>{p(!0)},P=()=>{e&&i&&i(e.id),p(!1)},_=()=>{p(!1)},Y=A=>{A.key==="Enter"&&!A.shiftKey&&(A.preventDefault(),w())};return!n||!e?null:s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 transition-opacity",onClick:r}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-md rounded-lg bg-white shadow-xl",onClick:A=>A.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:t?"새 마일스톤":"마일스톤 설정"}),s.jsx("button",{onClick:r,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-colors",children:s.jsx(ct,{size:20})})]}),s.jsxs("div",{className:"space-y-4 p-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-gray-700",children:[s.jsx(St,{size:14}),"마일스톤 이름"]}),s.jsx("input",{ref:x,type:"text",value:l,onChange:A=>o(A.target.value),onKeyDown:Y,placeholder:"마일스톤 이름을 입력하세요",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-gray-700",children:[s.jsx(Rr,{size:14}),"날짜"]}),s.jsx("input",{type:"date",value:u,onChange:A=>k(A.target.value),onKeyDown:Y,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1.5 flex items-center gap-1.5 text-sm font-medium text-gray-700",children:[s.jsx(Xr,{size:14}),"설명 (선택)"]}),s.jsx("textarea",{value:m,onChange:A=>d(A.target.value),placeholder:"마일스톤에 대한 설명을 입력하세요",rows:3,className:"w-full resize-none rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),s.jsxs("div",{className:"flex justify-between border-t border-gray-200 px-4 py-3",children:[s.jsx("div",{children:!t&&i&&s.jsxs("button",{onClick:j,className:"flex items-center gap-1.5 rounded-md px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(nn,{size:16}),"삭제"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:r,className:"rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 transition-colors",children:"취소"}),s.jsx("button",{onClick:w,disabled:!l.trim(),className:"rounded-md bg-blue-500 px-4 py-2 text-sm font-medium text-white hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors",children:"저장"})]})]})]})}),v&&s.jsx(cs,{milestoneName:l||e.name,onConfirm:P,onCancel:_})]})},us=({taskName:e,onConfirm:n,onCancel:t})=>at.createPortal(s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-[60] bg-black/50 transition-opacity",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-[360px] rounded-lg bg-white p-6 shadow-xl",onClick:r=>r.stopPropagation(),children:[s.jsxs("div",{className:"mb-4 flex items-center gap-3",children:[s.jsx("div",{className:"flex h-10 w-10 items-center justify-center rounded-full bg-red-100",children:s.jsx("svg",{className:"h-5 w-5 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"공정 삭제"}),s.jsx("p",{className:"text-sm text-gray-500",children:"이 작업은 되돌릴 수 없습니다"})]})]}),s.jsxs("div",{className:"mb-6 rounded-md bg-gray-50 p-3",children:[s.jsx("p",{className:"text-sm text-gray-600",children:"다음 공정을 삭제하시겠습니까?"}),s.jsxs("p",{className:"mt-1 flex items-center gap-2 text-sm font-medium text-gray-700",children:[s.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-red-400"}),e]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx("button",{onClick:t,className:"rounded-md px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-100 transition-colors",children:"취소"}),s.jsx("button",{onClick:n,className:"rounded-md bg-red-600 px-4 py-2 text-sm font-medium text-white hover:bg-red-700 transition-colors",children:"삭제"})]})]})})]}),document.body),hn=({task:e,isOpen:n,onClose:t,onSave:r,onDelete:a})=>{const[i,l]=c.useState(0),[o,m]=c.useState(1),[d,u]=c.useState(0),[k,v]=c.useState(""),[p,x]=c.useState(""),[w,j]=c.useState(!1),P=c.useRef(null);c.useEffect(()=>{e&&e.task&&n&&(l(e.task.indirectWorkDaysPre),m(e.task.netWorkDays),u(e.task.indirectWorkDaysPost),v(e.task.indirectWorkNamePre||""),x(e.task.indirectWorkNamePost||""),j(!1),setTimeout(()=>{var W;(W=P.current)==null||W.focus()},100))},[e,n]),c.useEffect(()=>{const W=Z=>{Z.key==="Escape"&&n&&(w?j(!1):t())};return document.addEventListener("keydown",W),()=>document.removeEventListener("keydown",W)},[n,w,t]);const _=()=>{if(!e||!e.task)return;const W={...e,task:{...e.task,indirectWorkDaysPre:i,netWorkDays:o,indirectWorkDaysPost:d,indirectWorkNamePre:k.trim()||void 0,indirectWorkNamePost:p.trim()||void 0}};r(W),t()},Y=()=>{j(!0)},A=()=>{e&&a&&a(e.id),j(!1),t()},$=()=>{j(!1)},z=W=>{W.key==="Enter"&&!W.shiftKey&&(W.preventDefault(),_())},I=(W,Z,ne=0)=>{const J=parseInt(Z.replace(/[^0-9]/g,""))||0;W(Math.max(ne,J))};if(!n||!e||!e.task)return null;const T=i+o+d;return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"fixed inset-0 z-50 bg-black/50 transition-opacity",onClick:t}),s.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"w-full max-w-lg rounded-lg bg-white shadow-xl",onClick:W=>W.stopPropagation(),children:[s.jsxs("div",{className:"flex items-center justify-between border-b border-gray-200 px-4 py-3",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-800",children:"공정 설정"}),s.jsx("p",{className:"text-sm text-gray-500",children:e.name})]}),s.jsx("button",{onClick:t,className:"rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600 transition-colors",children:s.jsx(ct,{size:20})})]}),s.jsxs("div",{className:"space-y-5 p-4",children:[s.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50/50 p-4",children:[s.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-sm font-semibold text-blue-700",children:[s.jsx(Et,{size:14}),"앞 간접작업"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block text-xs font-medium text-gray-600",children:"일수"}),s.jsx("input",{ref:P,type:"text",inputMode:"numeric",value:i,onChange:W=>I(l,W.target.value),onKeyDown:z,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1 flex items-center gap-1 text-xs font-medium text-gray-600",children:[s.jsx(St,{size:12}),"작업명"]}),s.jsx("input",{type:"text",value:k,onChange:W=>v(W.target.value),onKeyDown:z,placeholder:"예: 양생, 대기",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{className:"rounded-lg border border-red-200 bg-red-50/50 p-4",children:[s.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-sm font-semibold text-red-700",children:[s.jsx(Et,{size:14}),"순작업"]}),s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block text-xs font-medium text-gray-600",children:"일수"}),s.jsx("input",{type:"text",inputMode:"numeric",value:o,onChange:W=>I(m,W.target.value,0),onKeyDown:z,className:"w-full max-w-[120px] rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 focus:border-red-500 focus:outline-none focus:ring-1 focus:ring-red-500"})]})]}),s.jsxs("div",{className:"rounded-lg border border-blue-200 bg-blue-50/50 p-4",children:[s.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-sm font-semibold text-blue-700",children:[s.jsx(Et,{size:14}),"뒤 간접작업"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"mb-1 block text-xs font-medium text-gray-600",children:"일수"}),s.jsx("input",{type:"text",inputMode:"numeric",value:d,onChange:W=>I(u,W.target.value),onKeyDown:z,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"mb-1 flex items-center gap-1 text-xs font-medium text-gray-600",children:[s.jsx(St,{size:12}),"작업명"]}),s.jsx("input",{type:"text",value:p,onChange:W=>x(W.target.value),onKeyDown:z,placeholder:"예: 양생, 대기",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm text-gray-800 placeholder-gray-400 focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]})]}),s.jsxs("div",{className:"rounded-md bg-gray-100 p-3 text-center",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"총 기간: "}),s.jsxs("span",{className:"text-sm font-semibold text-gray-800",children:[T,"일"]}),s.jsxs("span",{className:"ml-2 text-xs text-gray-500",children:["(앞",i," + 순",o," + 뒤",d,")"]})]})]}),s.jsxs("div",{className:"flex justify-between border-t border-gray-200 px-4 py-3",children:[s.jsx("div",{children:a&&s.jsxs("button",{onClick:Y,className:"flex items-center gap-1.5 rounded-md px-3 py-2 text-sm font-medium text-red-600 hover:bg-red-50 transition-colors",children:[s.jsx(nn,{size:16}),"삭제"]})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:t,className:"rounded-md bg-gray-100 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-200 transition-colors",children:"취소"}),s.jsx("button",{onClick:_,className:"rounded-md bg-blue-500 px-4 py-2 text-sm font-medium text-white hover:bg-blue-600 transition-colors",children:"저장"})]})]})]})}),w&&s.jsx(us,{taskName:e.name,onConfirm:A,onCancel:$})]})},fn=e=>{let n;const t=new Set,r=(d,u)=>{const k=typeof d=="function"?d(n):d;if(!Object.is(k,n)){const v=n;n=u??(typeof k!="object"||k===null)?k:Object.assign({},n,k),t.forEach(p=>p(n,v))}},a=()=>n,o={setState:r,getState:a,getInitialState:()=>m,subscribe:d=>(t.add(d),()=>t.delete(d))},m=n=e(r,a,o);return o},hs=e=>e?fn(e):fn,fs=e=>e;function ms(e,n=fs){const t=c.useSyncExternalStore(e.subscribe,c.useCallback(()=>n(e.getState()),[e,n]),c.useCallback(()=>n(e.getInitialState()),[e,n]));return c.useDebugValue(t),t}const mn=e=>{const n=hs(e),t=r=>ms(n,r);return Object.assign(t,n),t},xs=e=>e?mn(e):mn,xn=e=>Symbol.iterator in e,gn=e=>"entries"in e,yn=(e,n)=>{const t=e instanceof Map?e:new Map(e.entries()),r=n instanceof Map?n:new Map(n.entries());if(t.size!==r.size)return!1;for(const[a,i]of t)if(!r.has(a)||!Object.is(i,r.get(a)))return!1;return!0},gs=(e,n)=>{const t=e[Symbol.iterator](),r=n[Symbol.iterator]();let a=t.next(),i=r.next();for(;!a.done&&!i.done;){if(!Object.is(a.value,i.value))return!1;a=t.next(),i=r.next()}return!!a.done&&!!i.done};function ys(e,n){return Object.is(e,n)?!0:typeof e!="object"||e===null||typeof n!="object"||n===null||Object.getPrototypeOf(e)!==Object.getPrototypeOf(n)?!1:xn(e)&&xn(n)?gn(e)&&gn(n)?yn(e,n):gs(e,n):yn({entries:()=>Object.entries(e)},{entries:()=>Object.entries(n)})}function Ae(e){const n=c.useRef(void 0);return t=>{const r=e(t);return ys(n.current,r)?n.current:n.current=r}}const Ce=xs((e,n)=>({viewMode:"MASTER",activeCPId:null,zoomLevel:"MONTH",selectedTaskId:null,hoveredTaskId:null,expandedTaskIds:new Set,sidebarWidth:be.SIDEBAR_WIDTH,isDragging:!1,dragType:null,dragTaskId:null,setViewMode:(t,r)=>{e({viewMode:t,activeCPId:r??null,zoomLevel:t==="DETAIL"?"DAY":"MONTH"})},setZoomLevel:t=>{e({zoomLevel:t})},selectTask:t=>{e({selectedTaskId:t})},hoverTask:t=>{e({hoveredTaskId:t})},toggleTask:t=>{const{expandedTaskIds:r}=n(),a=new Set(r);a.has(t)?a.delete(t):a.add(t),e({expandedTaskIds:a})},expandAll:t=>{const{expandedTaskIds:r}=n(),a=new Set([...r,...t]);e({expandedTaskIds:a})},collapseAll:()=>{e({expandedTaskIds:new Set})},setSidebarWidth:t=>{const r=Math.max(be.SIDEBAR_MIN_WIDTH,Math.min(t,be.SIDEBAR_MAX_WIDTH));e({sidebarWidth:r})},startDrag:(t,r)=>{e({isDragging:!0,dragType:t,dragTaskId:r})},endDrag:()=>{e({isDragging:!1,dragType:null,dragTaskId:null})}})),bn=()=>Ce(Ae(e=>({viewMode:e.viewMode,activeCPId:e.activeCPId,zoomLevel:e.zoomLevel}))),pn=()=>Ce(Ae(e=>({setViewMode:e.setViewMode,setZoomLevel:e.setZoomLevel}))),bs=()=>Ce(Ae(e=>({selectedTaskId:e.selectedTaskId,hoveredTaskId:e.hoveredTaskId,selectTask:e.selectTask,hoverTask:e.hoverTask}))),wn=()=>Ce(Ae(e=>({expandedTaskIds:e.expandedTaskIds,toggleTask:e.toggleTask,expandAll:e.expandAll,collapseAll:e.collapseAll}))),vn=()=>Ce(Ae(e=>({sidebarWidth:e.sidebarWidth,setSidebarWidth:e.setSidebarWidth}))),ps=()=>Ce(Ae(e=>({isDragging:e.isDragging,dragType:e.dragType,dragTaskId:e.dragTaskId,startDrag:e.startDrag,endDrag:e.endDrag})));function ze(e,n,t){let r=t.initialDeps??[],a;function i(){var l,o,m,d;let u;t.key&&((l=t.debug)!=null&&l.call(t))&&(u=Date.now());const k=e();if(!(k.length!==r.length||k.some((x,w)=>r[w]!==x)))return a;r=k;let p;if(t.key&&((o=t.debug)!=null&&o.call(t))&&(p=Date.now()),a=n(...k),t.key&&((m=t.debug)!=null&&m.call(t))){const x=Math.round((Date.now()-u)*100)/100,w=Math.round((Date.now()-p)*100)/100,j=w/16,P=(_,Y)=>{for(_=String(_);_.length<Y;)_=" "+_;return _};console.info(`%c⏱ ${P(w,5)} /${P(x,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*j,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(d=t==null?void 0:t.onChange)==null||d.call(t,a),a}return i.updateDeps=l=>{r=l},i}function kn(e,n){if(e===void 0)throw new Error("Unexpected undefined");return e}const ws=(e,n)=>Math.abs(e-n)<1.01,vs=(e,n,t)=>{let r;return function(...a){e.clearTimeout(r),r=e.setTimeout(()=>n.apply(this,a),t)}},Dn=e=>{const{offsetWidth:n,offsetHeight:t}=e;return{width:n,height:t}},ks=e=>e,Ds=e=>{const n=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let a=n;a<=t;a++)r.push(a);return r},js=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;const a=l=>{const{width:o,height:m}=l;n({width:Math.round(o),height:Math.round(m)})};if(a(Dn(t)),!r.ResizeObserver)return()=>{};const i=new r.ResizeObserver(l=>{const o=()=>{const m=l[0];if(m!=null&&m.borderBoxSize){const d=m.borderBoxSize[0];if(d){a({width:d.inlineSize,height:d.blockSize});return}}a(Dn(t))};e.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return i.observe(t,{box:"border-box"}),()=>{i.unobserve(t)}},jn={passive:!0},Nn=typeof window>"u"?!0:"onscrollend"in window,Ns=(e,n)=>{const t=e.scrollElement;if(!t)return;const r=e.targetWindow;if(!r)return;let a=0;const i=e.options.useScrollendEvent&&Nn?()=>{}:vs(r,()=>{n(a,!1)},e.options.isScrollingResetDelay),l=u=>()=>{const{horizontal:k,isRtl:v}=e.options;a=k?t.scrollLeft*(v&&-1||1):t.scrollTop,i(),n(a,u)},o=l(!0),m=l(!1);m(),t.addEventListener("scroll",o,jn);const d=e.options.useScrollendEvent&&Nn;return d&&t.addEventListener("scrollend",m,jn),()=>{t.removeEventListener("scroll",o),d&&t.removeEventListener("scrollend",m)}},Es=(e,n,t)=>{if(n!=null&&n.borderBoxSize){const r=n.borderBoxSize[0];if(r)return Math.round(r[t.options.horizontal?"inlineSize":"blockSize"])}return e[t.options.horizontal?"offsetWidth":"offsetHeight"]},Ss=(e,{adjustments:n=0,behavior:t},r)=>{var a,i;const l=e+n;(i=(a=r.scrollElement)==null?void 0:a.scrollTo)==null||i.call(a,{[r.options.horizontal?"left":"top"]:l,behavior:t})};class Ms{constructor(n){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const r=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(a=>{a.forEach(i=>{const l=()=>{this._measureElement(i.target,i)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()})}));return{disconnect:()=>{var a;(a=r())==null||a.disconnect(),t=null},observe:a=>{var i;return(i=r())==null?void 0:i.observe(a,{box:"border-box"})},unobserve:a=>{var i;return(i=r())==null?void 0:i.unobserve(a)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([r,a])=>{typeof a>"u"&&delete t[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:ks,rangeExtractor:Ds,onChange:()=>{},measureElement:Es,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...t}},this.notify=t=>{var r,a;(a=(r=this.options).onChange)==null||a.call(r,this,t)},this.maybeNotify=ze(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),t=>{this.notify(t)},{key:process.env.NODE_ENV!=="production"&&"maybeNotify",debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this.elementsCache.forEach(a=>{this.observer.observe(a)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,a=>{this.scrollRect=a,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(a,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<a?"forward":"backward":null,this.scrollOffset=a,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,r)=>{const a=new Map,i=new Map;for(let l=r-1;l>=0;l--){const o=t[l];if(a.has(o.lane))continue;const m=i.get(o.lane);if(m==null||o.end>m.end?i.set(o.lane,o):o.end<m.end&&a.set(o.lane,!0),a.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,o)=>l.end===o.end?l.index-o.index:l.end-o.end)[0]:void 0},this.getMeasurementOptions=ze(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,r,a,i,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:r,scrollMargin:a,getItemKey:i,enabled:l}),{key:!1}),this.getMeasurements=ze(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:r,scrollMargin:a,getItemKey:i,enabled:l},o)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const m=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const d=this.measurementsCache.slice(0,m);for(let u=m;u<t;u++){const k=i(u),v=this.options.lanes===1?d[u-1]:this.getFurthestMeasurement(d,u),p=v?v.end+this.options.gap:r+a,x=o.get(k),w=typeof x=="number"?x:this.options.estimateSize(u),j=p+w,P=v?v.lane:u%this.options.lanes;d[u]={index:u,start:p,size:w,end:j,key:k,lane:P}}return this.measurementsCache=d,d},{key:process.env.NODE_ENV!=="production"&&"getMeasurements",debug:()=>this.options.debug}),this.calculateRange=ze(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(t,r,a,i)=>this.range=t.length>0&&r>0?Ws({measurements:t,outerSize:r,scrollOffset:a,lanes:i}):null,{key:process.env.NODE_ENV!=="production"&&"calculateRange",debug:()=>this.options.debug}),this.getVirtualIndexes=ze(()=>{let t=null,r=null;const a=this.calculateRange();return a&&(t=a.startIndex,r=a.endIndex),this.maybeNotify.updateDeps([this.isScrolling,t,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,t,r]},(t,r,a,i,l)=>i===null||l===null?[]:t({startIndex:i,endIndex:l,overscan:r,count:a}),{key:process.env.NODE_ENV!=="production"&&"getVirtualIndexes",debug:()=>this.options.debug}),this.indexFromElement=t=>{const r=this.options.indexAttribute,a=t.getAttribute(r);return a?parseInt(a,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(t,r)=>{const a=this.indexFromElement(t),i=this.measurementsCache[a];if(!i)return;const l=i.key,o=this.elementsCache.get(l);o!==t&&(o&&this.observer.unobserve(o),this.observer.observe(t),this.elementsCache.set(l,t)),t.isConnected&&this.resizeItem(a,this.options.measureElement(t,r,this))},this.resizeItem=(t,r)=>{const a=this.measurementsCache[t];if(!a)return;const i=this.itemSizeCache.get(a.key)??a.size,l=r-i;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(a,l,this):a.start<this.getScrollOffset()+this.scrollAdjustments)&&(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("correction",l),this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0})),this.pendingMeasuredCacheIndexes.push(a.index),this.itemSizeCache=new Map(this.itemSizeCache.set(a.key,r)),this.notify(!1))},this.measureElement=t=>{if(!t){this.elementsCache.forEach((r,a)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(a))});return}this._measureElement(t,void 0)},this.getVirtualItems=ze(()=>[this.getVirtualIndexes(),this.getMeasurements()],(t,r)=>{const a=[];for(let i=0,l=t.length;i<l;i++){const o=t[i],m=r[o];a.push(m)}return a},{key:process.env.NODE_ENV!=="production"&&"getVirtualItems",debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const r=this.getMeasurements();if(r.length!==0)return kn(r[En(0,r.length-1,a=>kn(r[a]).start,t)])},this.getOffsetForAlignment=(t,r,a=0)=>{const i=this.getSize(),l=this.getScrollOffset();r==="auto"&&(r=t>=l+i?"end":"start"),r==="center"?t+=(a-i)/2:r==="end"&&(t-=i);const o=this.getTotalSize()+this.options.scrollMargin-i;return Math.max(Math.min(o,t),0)},this.getOffsetForIndex=(t,r="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const a=this.measurementsCache[t];if(!a)return;const i=this.getSize(),l=this.getScrollOffset();if(r==="auto")if(a.end>=l+i-this.options.scrollPaddingEnd)r="end";else if(a.start<=l+this.options.scrollPaddingStart)r="start";else return[l,r];const o=r==="end"?a.end+this.options.scrollPaddingEnd:a.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,a.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(t,{align:r="start",behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,r),{adjustments:void 0,behavior:a})},this.scrollToIndex=(t,{align:r="auto",behavior:a}={})=>{a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t=Math.max(0,Math.min(t,this.options.count-1));let i=0;const l=10,o=d=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(t,d);if(!u){console.warn("Failed to get offset for index:",t);return}const[k,v]=u;this._scrollToOffset(k,{adjustments:void 0,behavior:a}),this.targetWindow.requestAnimationFrame(()=>{const p=this.getScrollOffset(),x=this.getOffsetForIndex(t,v);if(!x){console.warn("Failed to get offset for index:",t);return}ws(x[0],p)||m(v)})},m=d=>{this.targetWindow&&(i++,i<l?(process.env.NODE_ENV!=="production"&&this.options.debug&&console.info("Schedule retry",i,l),this.targetWindow.requestAnimationFrame(()=>o(d))):console.warn(`Failed to scroll to index ${t} after ${l} attempts.`))};o(r)},this.scrollBy=(t,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var t;const r=this.getMeasurements();let a;if(r.length===0)a=this.options.paddingStart;else if(this.options.lanes===1)a=((t=r[r.length-1])==null?void 0:t.end)??0;else{const i=Array(this.options.lanes).fill(null);let l=r.length-1;for(;l>=0&&i.some(o=>o===null);){const o=r[l];i[o.lane]===null&&(i[o.lane]=o.end),l--}a=Math.max(...i.filter(o=>o!==null))}return Math.max(a-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(t,{adjustments:r,behavior:a})=>{this.options.scrollToFn(t,{behavior:a,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(n)}}const En=(e,n,t,r)=>{for(;e<=n;){const a=(e+n)/2|0,i=t(a);if(i<r)e=a+1;else if(i>r)n=a-1;else return a}return e>0?e-1:0};function Ws({measurements:e,outerSize:n,scrollOffset:t,lanes:r}){const a=e.length-1,i=m=>e[m].start;if(e.length<=r)return{startIndex:0,endIndex:a};let l=En(0,a,i,t),o=l;if(r===1)for(;o<a&&e[o].end<t+n;)o++;else if(r>1){const m=Array(r).fill(0);for(;o<a&&m.some(u=>u<t+n);){const u=e[o];m[u.lane]=u.end,o++}const d=Array(r).fill(t+n);for(;l>=0&&d.some(u=>u>=t);){const u=e[l];d[u.lane]=u.start,l--}l=Math.max(0,l-l%r),o=Math.min(a,o+(r-1-o%r))}return{startIndex:l,endIndex:o}}const Sn=typeof document<"u"?it.useLayoutEffect:it.useEffect;function Cs(e){const n=it.useReducer(()=>({}),{})[1],t={...e,onChange:(a,i)=>{var l;i?at.flushSync(n):n(),(l=e.onChange)==null||l.call(e,a,i)}},[r]=it.useState(()=>new Ms(t));return r.setOptions(t),Sn(()=>r._didMount(),[]),Sn(()=>r._willUpdate()),r}function Ts(e){return Cs({observeElementRect:js,observeElementOffset:Ns,scrollToFn:Ss,...e})}const{ROW_HEIGHT:Ps}=be;function Mn({containerRef:e,count:n,rowHeight:t=Ps,overscan:r=5}){const a=Ts({count:n,getScrollElement:()=>e.current,estimateSize:()=>t,overscan:r}),i=a.getVirtualItems();return{virtualRows:c.useMemo(()=>i.map(o=>({index:o.index,start:o.start,size:o.size,key:o.index})),[i]),totalHeight:a.getTotalSize(),virtualizer:a}}const Os={workOnSaturdays:!1,workOnSundays:!1,workOnHolidays:!1};function _s({tasks:e,milestones:n=[],holidays:t=[],calendarSettings:r=Os,initialView:a="MASTER",initialZoomLevel:i="MONTH",initialExpandedIds:l,onTaskUpdate:o,onTaskCreate:m,onTaskDelete:d,onTaskReorder:u,onTaskGroup:k,onTaskUngroup:v,onTaskMove:p,onViewChange:x,onMilestoneCreate:w,onMilestoneUpdate:j,onMilestoneDelete:P,onSave:_,onReset:Y,hasUnsavedChanges:A,saveStatus:$,className:z,style:I}){const{viewMode:T,activeCPId:W,zoomLevel:Z}=bn(),{setViewMode:ne,setZoomLevel:J}=pn(),{sidebarWidth:oe,setSidebarWidth:B}=vn(),{expandedTaskIds:U,toggleTask:ae,expandAll:re,collapseAll:q}=wn(),E=c.useRef(null),g=c.useRef(null),f=c.useRef(null),N=c.useRef(!1),C=c.useRef(!1),[O,te]=c.useState(!1),[ce,R]=c.useState(!1),[Q,de]=c.useState(!1),ue=c.useCallback(()=>{R(!0)},[]),Le=c.useCallback(()=>{R(!1)},[]),je=c.useCallback(()=>{de(!0)},[]),Fe=c.useCallback(()=>{de(!1)},[]),[He,ee]=c.useState(null),[ht,we]=c.useState(!1),[Ze,Te]=c.useState(!1),ft=c.useCallback(y=>{ee(y),Te(!1),we(!0)},[]),[Pt,$e]=c.useState(null),[mt,et]=c.useState(!1),tt=c.useCallback(y=>{$e(y),et(!0)},[]),Ee=c.useCallback(()=>{et(!1),$e(null)},[]),xt=c.useCallback(y=>{o&&o(y),Ee()},[o,Ee]),gt=c.useCallback(y=>{d&&d(y),Ee()},[d,Ee]),yt=c.useCallback(()=>{const y={id:`milestone-${Date.now()}`,name:"",date:new Date,description:""};ee(y),Te(!0),we(!0)},[]),ve=c.useCallback(()=>{we(!1),ee(null),Te(!1)},[]),bt=c.useCallback(y=>{Ze&&w?w(y):j&&j(y),ve()},[Ze,w,j,ve]),Ge=c.useCallback(y=>{P&&P(y),ve()},[P,ve]),nt=c.useRef(!1),Ye=c.useMemo(()=>e.map(y=>y.id),[e]);c.useEffect(()=>{nt.current||(nt.current=!0,ne(a),J(i),q(),l&&l.length>0?re(l):Ye.length>0&&re(Ye))},[Ye,l,a,i,ne,J,re,q]);const pt=c.useRef(new Set);c.useEffect(()=>{const y=new Set(e.map(L=>L.id)),M=pt.current,F=[];e.forEach(L=>{L.type==="GROUP"&&!M.has(L.id)&&F.push(L.id)}),F.length>0&&re(F),pt.current=y},[e,re]);const Pe=c.useMemo(()=>{if(T==="MASTER"){const y=[],M=(F,L=0)=>{e.forEach(D=>{D.wbsLevel===1&&D.parentId===F&&(F===null||U.has(F))&&(y.push(D),D.type==="GROUP"&&M(D.id,L+1))})};return M(null),y}else{const y=[],M=F=>{e.forEach(L=>{L.wbsLevel===2&&L.parentId===F&&(F===W||U.has(F))&&(y.push(L),L.type==="GROUP"&&M(L.id))})};return M(W),y}},[e,T,W,U]),{virtualRows:rt,totalHeight:Re}=Mn({containerRef:f,count:Pe.length});c.useEffect(()=>{const y=g.current,M=f.current;if(!y||!M)return;const F=()=>{N.current||(N.current=!0,M.scrollTop=y.scrollTop,requestAnimationFrame(()=>{N.current=!1}))},L=()=>{N.current||(N.current=!0,y.scrollTop=M.scrollTop,requestAnimationFrame(()=>{N.current=!1}))};return y.addEventListener("scroll",F),M.addEventListener("scroll",L),()=>{y.removeEventListener("scroll",F),M.removeEventListener("scroll",L)}},[]);const[st,wt]=c.useState(null),vt=c.useCallback(y=>{if(y.detail>=2)return;y.preventDefault(),C.current=!0,te(!0);const M=y.clientX,F=oe,L=fe=>{if(!C.current)return;const ge=fe.clientX-M;B(F+ge)},D=()=>{C.current=!1,te(!1),document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",D)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",D)},[oe,B]),b=c.useCallback(()=>{B(st!==null?st:be.SIDEBAR_WIDTH)},[st,B]),h=c.useCallback((y,M)=>{ne(y,M),x==null||x(y,M)},[ne,x]),S=c.useCallback(y=>{const M=f.current;if(!M)return;const F=Ue[Z].pixelsPerDay,{minDate:L}=Ct(e,n,60),D=Ie(y,L,F);M.scrollLeft=Math.max(0,D-50)},[Z,e,n]),H=c.useCallback(()=>{if(T==="MASTER"){const y=Pe.filter(M=>M.type==="CP");if(y.length>0){const M=y.reduce((L,D)=>L.startDate<D.startDate?L:D),F=new Date(M.startDate);F.setDate(F.getDate()-5),S(F)}}else if(T==="DETAIL"&&W){const y=e.filter(M=>M.parentId===W);if(y.length>0){const M=y.reduce((L,D)=>L.startDate<D.startDate?L:D),F=new Date(M.startDate);F.setDate(F.getDate()-5),S(F)}}},[T,W,e,Pe,S]),K=c.useCallback(y=>{T==="MASTER"&&y.type==="CP"&&h("DETAIL",y.id)},[T,h]);c.useEffect(()=>{if(T==="DETAIL"&&W){const y=setTimeout(()=>{H()},100);return()=>clearTimeout(y)}},[T,W,H]);const le=c.useCallback(async y=>{if(o)try{const M=e.find(L=>L.id===y.taskId);if(!M||!M.task)return;const F={...M,startDate:y.newStartDate,endDate:y.newEndDate,task:{...M.task,indirectWorkDaysPre:y.newIndirectWorkDaysPre,indirectWorkDaysPost:y.newIndirectWorkDaysPost,netWorkDays:y.newNetWorkDays}};await o(F)}catch(M){console.error("Failed to update task:",M)}},[e,o]);return s.jsxs("div",{ref:E,className:`flex h-full w-full flex-col bg-gray-50 ${z||""}`,style:I,children:[s.jsxs("header",{className:"flex h-[60px] shrink-0 items-center justify-between border-b border-gray-200 bg-white px-4 shadow-sm",children:[s.jsx("div",{className:"flex items-center gap-3 shrink-0",children:T==="DETAIL"?s.jsxs(s.Fragment,{children:[s.jsx("button",{onClick:()=>h("MASTER"),className:"rounded bg-gray-200 px-3 py-1.5 text-xs font-medium text-gray-700 hover:bg-gray-300 transition-colors",children:"← 상위 공정표로"}),m&&!ce&&s.jsx("button",{onClick:ue,className:"flex items-center gap-1 rounded bg-blue-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-blue-600 transition-colors",title:"새 공정 추가",children:"+ Task 추가"})]}):s.jsxs(s.Fragment,{children:[m&&!Q&&s.jsx("button",{onClick:je,className:"flex items-center gap-1 rounded bg-blue-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-blue-600 transition-colors",title:"새 CP 추가",children:"+ CP 추가"}),w&&s.jsx("button",{onClick:yt,className:"flex items-center gap-1 rounded bg-purple-500 px-2 py-1.5 text-xs font-medium text-white hover:bg-purple-600 transition-colors",title:"새 마일스톤 추가",children:"+ 마일스톤"}),Q&&s.jsx("span",{className:"text-xs text-gray-500 italic",children:"CP 추가 중... (Enter 저장 / Esc 취소)"})]})}),s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{onClick:H,className:"flex items-center gap-1 rounded bg-gray-100 px-2 py-1 text-xs font-medium text-gray-600 hover:bg-gray-200 transition-colors",title:T==="MASTER"?"첫 번째 CP로 스크롤":"첫 번째 작업으로 스크롤",children:"Focusing"}),s.jsx("div",{className:"flex rounded bg-gray-100 p-1",children:(T==="MASTER"?["WEEK","MONTH"]:["DAY","WEEK"]).map(y=>s.jsx("button",{onClick:()=>J(y),className:`rounded px-3 py-1 text-xs font-medium transition-colors ${Z===y?"bg-white text-gray-800 shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:Ue[y].label},y))}),s.jsxs("div",{className:"text-sm text-gray-500",children:["기준일: ",me(new Date,"yyyy-MM-dd")]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[_&&s.jsx("button",{onClick:_,disabled:!A||$==="saving",className:`flex items-center gap-1.5 rounded-md px-3 py-1.5 text-sm font-medium transition-colors ${A?"bg-blue-500 text-white hover:bg-blue-600 active:bg-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:$==="saving"?s.jsxs(s.Fragment,{children:[s.jsxs("svg",{className:"h-4 w-4 animate-spin",viewBox:"0 0 24 24",fill:"none",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"저장 중..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),"저장"]})}),Y&&s.jsxs("button",{onClick:Y,className:"flex items-center gap-1.5 rounded-md bg-gray-100 px-3 py-1.5 text-sm font-medium text-gray-600 transition-colors hover:bg-gray-200 active:bg-gray-300",children:[s.jsx("svg",{className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"초기화"]})]})]}),s.jsxs("div",{className:"relative flex flex-1 overflow-hidden",children:[s.jsx("div",{className:"z-10 flex shrink-0 flex-col bg-white",style:{width:oe},children:s.jsx(Mt,{ref:g,tasks:Pe,allTasks:e,viewMode:T,expandedIds:U,onToggle:ae,onTaskClick:K,onTaskUpdate:o,onTaskCreate:m,onTaskReorder:u,onTaskGroup:k,onTaskUngroup:v,onTaskDelete:d,onTaskMove:p,activeCPId:W,virtualRows:rt,totalHeight:Re,onTotalWidthChange:wt,isAddingTask:ce,onCancelAddTask:Le,isAddingCP:Q,onCancelAddCP:Fe,onTaskDoubleClick:tt})}),s.jsx("div",{className:`z-20 w-1 shrink-0 cursor-col-resize transition-colors ${O?"bg-blue-500":"bg-gray-200 hover:bg-gray-300"}`,onMouseDown:vt,onDoubleClick:b,title:"드래그하여 너비 조절 / 더블클릭으로 초기화"}),s.jsx("div",{className:"relative flex flex-1 flex-col overflow-hidden bg-white",children:s.jsx(Tt,{ref:f,tasks:Pe,milestones:n,viewMode:T,zoomLevel:Z,holidays:t,calendarSettings:r,onTaskUpdate:o,onBarDrag:le,onMilestoneUpdate:j,onMilestoneDoubleClick:ft,onTaskDoubleClick:tt,virtualRows:rt,totalHeight:Re})}),O&&s.jsx("div",{className:"fixed inset-0 z-50 cursor-col-resize"})]}),s.jsx(ds,{milestone:He,isOpen:ht,isNew:Ze,onClose:ve,onSave:bt,onDelete:Ge}),s.jsx(hn,{task:Pt,isOpen:mt,onClose:Ee,onSave:xt,onDelete:d?gt:void 0})]})}const Is=50;function he(e){if(e===null||typeof e!="object")return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Set)return new Set(Array.from(e).map(t=>he(t)));if(e instanceof Map)return new Map(Array.from(e.entries()).map(([t,r])=>[he(t),he(r)]));if(Array.isArray(e))return e.map(t=>he(t));const n={};for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=he(e[t]));return n}function As(e){const[n,t]=c.useState(()=>({past:[],present:he(e),future:[]})),r=c.useRef(!1),a=c.useCallback(d=>{t(u=>{const k=typeof d=="function"?d(u.present):d;if(!r.current)return r.current=!0,{past:[],present:he(k),future:[]};if(JSON.stringify(u.present)===JSON.stringify(k))return u;const v=[...u.past,he(u.present)];return v.length>Is&&v.shift(),{past:v,present:he(k),future:[]}})},[]),i=c.useCallback(()=>{t(d=>{if(d.past.length===0)return d;const u=[...d.past],k=u.pop();return{past:u,present:k,future:[he(d.present),...d.future]}})},[]),l=c.useCallback(()=>{t(d=>{if(d.future.length===0)return d;const u=[...d.future],k=u.shift();return{past:[...d.past,he(d.present)],present:k,future:u}})},[]),o=c.useCallback(d=>{r.current=!1,t({past:[],present:he(d),future:[]})},[]),m=c.useCallback(()=>{t(d=>({past:[],present:d.present,future:[]}))},[]);return{present:n.present,set:a,undo:i,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,reset:o,clearHistory:m,historyLength:{past:n.past.length,future:n.future.length}}}G.GANTT_COLORS=De,G.GANTT_LAYOUT=be,G.GanttChart=_s,G.GanttSidebar=Mt,G.GanttTimeline=Tt,G.TaskEditModal=hn,G.ZOOM_CONFIG=Ue,G.addCalendarDays=Wt,G.addWorkingDays=un,G.calculateDateRange=Ct,G.calculateDualCalendarDates=Jr,G.dateToX=Ie,G.getAnchorDate=Ur,G.getDateRangeWidth=es,G.getPixelsPerDay=ts,G.isHoliday=We,G.isWeekend=Kr,G.subtractWorkingDays=Qr,G.useGanttDrag=ps,G.useGanttExpansion=wn,G.useGanttSelection=bs,G.useGanttSidebar=vn,G.useGanttStore=Ce,G.useGanttViewActions=pn,G.useGanttViewState=bn,G.useGanttVirtualization=Mn,G.useHistory=As,G.xToDate=Zr,Object.defineProperty(G,Symbol.toStringTag,{value:"Module"})});
